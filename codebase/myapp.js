!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/codebase/",i(i.s=61)}([function(t,e,i){"use strict";var s=i(7),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=d;var a=i(3);a.inherits=i(2);var r=i(31),o=i(13);a.inherits(d,r);for(var l=n(o.prototype),h=0;h<l.length;h++){var c=l[h];d.prototype[c]||(d.prototype[c]=o.prototype[c])}function d(t){if(!(this instanceof d))return new d(t);r.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",u)}function u(){this.allowHalfOpen||this._writableState.ended||s(f,this)}function f(t){t.end()}Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),d.prototype._destroy=function(t,e){this.push(null),this.end(),s(e,t)}},function(t,e,i){!function(t){"use strict";var e=function(){},s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function n(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var a=function(){function t(t){this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={}}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.prototype.setParam=function(t,e,i){if(this._data[t]!==e&&(this._data[t]=e,this._segment.update(t,e,0),i))return this.show(null)},t.prototype.getParam=function(t,e){var i=this._data[t];if(void 0!==i||!e)return i;var s=this.getParentView();return s?s.getParam(t,e):void 0},t.prototype.getUrl=function(){return this._segment.suburl()},t.prototype.getUrlString=function(){return this._segment.toString()},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){if("string"==typeof t){var e=this.getRoot();return e.queryView(function(i){return(i.config.id===t||i.config.localId===t)&&i.$scope===e.$scope},"self")}return t},t.prototype.on=function(t,e,i){var s=t.attachEvent(e,i);return this._events.push({obj:t,id:s}),s},t.prototype.contains=function(t){for(var e in this._subs){var i=this._subs[e].view;if(i===t||i.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this.getSubViewInfo(t);if(e)return e.subview.view},t.prototype.getSubViewInfo=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:"_top"===t?(this._subs[t]={url:"",id:null,popup:!0},this.getSubViewInfo(t)):this._parent?this._parent.getSubViewInfo(t):null},t.prototype._detachEvents=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id)},t.prototype._destroySubs=function(){for(var t in this._subs){var e=this._subs[t].view;e&&e.destructor()}this._subs={}},t.prototype._init_url_data=function(){var t=this._segment.current();this._data={},this.webix.extend(this._data,t.params,!0)},t.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var t in this._subs){var e=this._subs[t];if(!e.branch&&e.view&&"_top"!==t){var i=e.view._getDefaultSub();if(i)return i}}},t.prototype._routed_view=function(){var t=this.getParentView();if(!t)return!0;var e=t._getDefaultSub();return!(!e&&e!==this)&&t._routed_view()},t}();function r(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),i=[],s=0;s<e.length;s++){var n=e[s],a={},r=n.indexOf(":");if(-1===r&&(r=n.indexOf("?")),-1!==r)for(var o=n.substr(r+1).split(/[\:\?\&]/g),l=0,h=o;l<h.length;l++){var c=h[l],d=c.split("=");a[d[0]]=decodeURIComponent(d[1])}i[s]={page:r>-1?n.substr(0,r):n,params:a,isNew:!0}}return i}function o(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];e.push("/"+n.page);var a=l(n.params);a&&e.push("?"+a)}return e.join("")}function l(t){var e=[];for(var i in t)e.length&&e.push("&"),e.push(i+"="+encodeURIComponent(t[i]));return e.join("")}var h=function(){function t(t,e){this._next=1,this.route="string"==typeof t?{url:r(t),path:t}:t,this.index=e}return t.prototype.current=function(){return this.route.url[this.index]},t.prototype.next=function(){return this.route.url[this.index+this._next]},t.prototype.suburl=function(){return this.route.url.slice(this.index)},t.prototype.shift=function(){return new t(this.route,this.index+this._next)},t.prototype.refresh=function(){for(var t=this.route.url,e=this.index+1;e<t.length;e++)t[e].isNew=!0},t.prototype.toString=function(){var t=o(this.suburl());return t?t.substr(1):""},t.prototype._join=function(t,e){var i=this.route.url;if(null===t)return i;var s=this.route.url;if(i=s.slice(0,this.index+(e?this._next:0)),t){i=i.concat(r(t));for(var n=0;n<i.length;n++)s[n]&&(i[n].view=s[n].view),s[n]&&i[n].page===s[n].page&&(i[n].isNew=!1)}return i},t.prototype.append=function(t){var e=this._join(t,!0);return this.route.path=o(e),this.route.url=e,this.route.path},t.prototype.show=function(t,i,s){var n=this,a=this._join(t,s);return new Promise(function(t,s){var r=o(a),l={url:a,redirect:r,confirm:Promise.resolve()},h=i?i.app:null;if(h){var c=h.callEvent("app:guard",[l.redirect,i,l]);if(!c)return void s(new e)}l.confirm.catch(function(t){return s(t)}).then(function(){if(null!==l.redirect){if(l.redirect!==r)return h.show(l.redirect),void s(new e);n.route.path=r,n.route.url=a,t()}else s(new e)})})},t.prototype.size=function(t){this._next=t},t.prototype.split=function(){var e={url:this.route.url.slice(this.index+1),path:""};return e.url.length&&(e.path=o(e.url)),new t(e,0)},t.prototype.update=function(t,e,i){var s=this.route.url[this.index+(i||0)];if(!s)return this.route.url.push({page:"",params:{}}),this.update(t,e,i);""===t?s.page=e:s.params[t]=e,this.route.path=o(this.route.url)},t}(),c=function(t){function e(e,i){var s=t.call(this,e.webix)||this;return s.app=e,s._children=[],s}return n(e,t),e.prototype.ui=function(t,e){var i=(e=e||{}).container||t.container,s=this.app.createView(t);return this._children.push(s),s.render(i,this._segment,this),"object"!=typeof t||t instanceof a?s:s.getRoot()},e.prototype.show=function(t,e){if(e=e||{},"object"==typeof t){for(var i in t)this.setParam(i,t[i]);t=null}else{if("/"===t.substr(0,1))return this.app.show(t);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var s=this.getParentView();return s?s.show(t.substr(3),e):this.app.show("/"+t.substr(3))}var n=this.getSubViewInfo(e.target);if(n){if(n.parent!==this)return n.parent.show(t,e);if(e.target&&"default"!==e.target)return this._renderFrameLock(e.target,n.subview,t)}else if(t)return this.app.show("/"+t)}return this._show(this._segment,t,this)},e.prototype._show=function(t,e,i){var s=this;return t.show(e,i,!0).then(function(){return s._init_url_data(),s._urlChange()}).then(function(){t.route.linkRouter&&(s.app.getRouter().set(t.route.path,{silent:!0}),s.app.callEvent("app:route",[t.route.path]))})},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),t.prototype.destructor.call(this)},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype.refresh=function(){return this.getUrl(),this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},e.prototype.render=function(t,e,i){var s=this;"string"==typeof e&&(e=new h(e,0)),this._segment=e,this._parent=i,this._init_url_data();var n="string"==typeof(t=t||document.body)?this.webix.toNode(t):t;return this._container!==n?(this._container=n,this._render(e)):this._urlChange().then(function(){return s.getRoot()})},e.prototype._render=function(t){var e=this,i=this.config();return i.then?i.then(function(i){return e._render_final(i,t)}):this._render_final(i,t)},e.prototype._render_final=function(t,e){var i,s=this,n=null,a=null,r=!1;if(this._container.tagName?a=this._container:(n=this._container).popup?(a=document.body,r=!0):a=this.webix.$$(n.id),!this.app||!a)return Promise.reject(null);var o=this._segment.current(),l={ui:{}};this.app.copyConfig(t,l.ui,this._subs),this.app.callEvent("app:render",[this,e,l]),l.ui.$scope=this,!n&&o.isNew&&o.view&&o.view.destructor();try{if(n&&!r){var h=a,c=h.getParentView();c&&"multiview"===c.name&&!l.ui.id&&(l.ui.id=h.config.id)}this._root=this.app.webix.ui(l.ui,a);var d=this._root;r&&d.setPosition&&!d.isVisible()&&d.show(),n&&(n.view&&n.view!==this&&n.view!==this.app&&n.view.destructor(),n.id=this._root.config.id,this.getParentView()||!this.app.app?n.view=this:n.view=this.app),o.isNew&&(o.view=this,o.isNew=!1),i=Promise.resolve(this._init(this._root,e)).then(function(){return s._urlChange().then(function(){return s._initUrl=null,s.ready(s._root,e.suburl())})})}catch(t){i=Promise.reject(t)}return i.catch(function(t){return s._initError(s,t)})},e.prototype._init=function(t,e){return this.init(t,e.suburl())},e.prototype._urlChange=function(){var t=this;this.app.callEvent("app:urlchange",[this,this._segment]);var e=[];for(var i in this._subs){var s=this._subs[i],n=this._renderFrameLock(i,s,null);n&&e.push(n)}return Promise.all(e).then(function(){return t.urlChange(t._root,t._segment.suburl())})},e.prototype._renderFrameLock=function(t,e,i){if(!e.lock){var s=this._renderFrame(t,e,i);s&&(e.lock=s.then(function(){return e.lock=null},function(){return e.lock=null}))}return e.lock},e.prototype._renderFrame=function(t,e,i){var s=this;if("default"===t){if(this._segment.next())return this._createSubView(e,this._segment.shift());e.view&&e.popup&&(e.view.destructor(),e.view=null)}if(null!==i&&(e.url=i),e.route){if(null!==i)return e.route.show(i,e.view).then(function(){return s._createSubView(e,e.route)});if(e.branch)return}var n=e.view;if(!n&&e.url){if("string"==typeof e.url)return e.route=new h(e.url,0),this._createSubView(e,e.route);"function"!=typeof e.url||n instanceof e.url||(n=new e.url(this.app,"")),n||(n=e.url)}if(n)return n.render(e,e.route||this._segment,this)},e.prototype._initError=function(t,e){return this.app&&this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var i=this;return this.app.createFromURL(e.current()).then(function(s){return s.render(t,e,i)})},e.prototype._destroyKids=function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e]&&t[e].destructor&&t[e].destructor();this._children=[]},e}(a),d=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s._ui=i.ui,s}return n(e,t),e.prototype.config=function(){return this._ui},e}(c),u=function(){function t(t,e,i){this.path="",this.app=i}return t.prototype.set=function(t,e){this.path=t;var i=this.app;i.app.getRouter().set(i._segment.append(this.path),{silent:!0})},t.prototype.get=function(){return this.path},t}(),f=!0,g=function(t){function i(e){var i=this,s=(e||{}).webix||window.webix;return(i=t.call(this,s)||this).config=i.webix.extend({name:"App",version:"1.0",start:"/home"},e,!0),i.app=i.config.app,i.ready=Promise.resolve(),i._services={},i.webix.extend(i,i.webix.EventSystem),i}return n(i,t),i.prototype.getUrl=function(){return this._subSegment.suburl()},i.prototype.getUrlString=function(){return this._subSegment.toString()},i.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},i.prototype.setService=function(t,e){this._services[t]=e},i.prototype.destructor=function(){this.getSubView().destructor(),t.prototype.destructor.call(this)},i.prototype.copyConfig=function(t,e,i){if((t instanceof a||"function"==typeof t&&t.prototype instanceof a)&&(t={$subview:t}),void 0!==t.$subview)return this.addSubView(t,e,i);for(var s in e=e||(t instanceof Array?[]:{}),t){var n=t[s];if("function"==typeof n&&n.prototype instanceof a&&(n={$subview:n}),!n||"object"!=typeof n||n instanceof this.webix.DataCollection||n instanceof RegExp||n instanceof Map)e[s]=n;else if(n instanceof Date)e[s]=new Date(n);else{var r=this.copyConfig(n,n instanceof Array?[]:{},i);null!==r&&(e[s]=r)}}return e},i.prototype.getRouter=function(){return this.$router},i.prototype.clickHandler=function(t,e){if(t&&(e=e||t.target||t.srcElement)&&e.getAttribute){var i=e.getAttribute("trigger");if(i)return this._forView(e,function(t){return t.app.trigger(i)}),t.cancelBubble=!0,t.preventDefault();var s=e.getAttribute("route");if(s)return this._forView(e,function(t){return t.show(s)}),t.cancelBubble=!0,t.preventDefault()}var n=e.parentNode;n&&this.clickHandler(t,n)},i.prototype.getRoot=function(){return this.getSubView().getRoot()},i.prototype.refresh=function(){var t=this;return this._subSegment?this.getSubView().refresh().then(function(e){return t.callEvent("app:route",[t.getUrl()]),e}):Promise.resolve(null)},i.prototype.loadView=function(t){var e=this,i=this.config.views,s=null;if(""===t)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{i&&"string"==typeof(s="function"==typeof i?i(t):i[t])&&(t=s,s=null),s||(s="_blank"===t?{}:this._loadViewDynamic(t))}catch(e){s=this._loadError(t,e)}return s.then||(s=Promise.resolve(s)),s=s.then(function(t){return t.__esModule?t.default:t}).catch(function(i){return e._loadError(t,i)})},i.prototype._forView=function(t,e){var i=this.webix.$$(t);i&&e(i.$scope)},i.prototype._loadViewDynamic=function(t){return null},i.prototype.createFromURL=function(t){var e=this;return t.isNew||!t.view?this.loadView(t.page).then(function(t){return e.createView(t,name)}):Promise.resolve(t.view)},i.prototype.createView=function(t,e){if("function"==typeof t){if(t.prototype instanceof i)return new t({app:this,name:e,router:u});if(t.prototype instanceof a)return new t(this,{name:e});t=t(this)}return t instanceof a?t:new d(this,{name:e,ui:t})},i.prototype.show=function(t){return this.render(this._container,t||this.config.start)},i.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.apply(t,e)},i.prototype.apply=function(t,e){this.callEvent(t,e)},i.prototype.action=function(t){return this.webix.bind(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.apply(t,e)},this)},i.prototype.on=function(t,e){this.attachEvent(t,e)},i.prototype.use=function(t,e){t(this,null,e)},i.prototype.error=function(t,e){if(this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug)for(var i=0;i<e.length;i++)if(console.error(e[i]),e[i]instanceof Error){var s=e[i].message;0===s.indexOf("Module build failed")?(s=s.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+s+"</pre>"):(s+="<br><br>Check console for more details",this.webix.message({type:"error",text:s,expire:-1}))}},i.prototype.render=function(t,e,i){var s=this;this._container="string"==typeof t?this.webix.toNode(t):t||document.body;var n=!this.$router,a=null;n?(f&&"tagName"in this._container&&(this.webix.event(document.body,"click",function(t){return s.clickHandler(t)}),f=!1),"string"==typeof e&&(e=new h(e,0)),this._subSegment=this._first_start(e),this._subSegment.route.linkRouter=!0):a="string"==typeof e?e:this.app?e.split().route.path||this.config.start:e.toString();var r=this.getSubView(),o=this._subSegment,l=o.show(a,r).then(function(){return s.createFromURL(o.current())}).then(function(e){return e.render(t,o)}).then(function(t){return s.$router.set(o.route.path,{silent:!0}),s.callEvent("app:route",[s.getUrl()]),t});return this.ready=this.ready.then(function(){return l}),l},i.prototype.getSubView=function(){if(this._subSegment){var t=this._subSegment.current().view;if(t)return t}return new c(this,{})},i.prototype._first_start=function(t){var i=this;if(this._segment=t,this.$router=new this.config.router(function(t){return setTimeout(function(){i.show(t).catch(function(t){if(!(t instanceof e))throw t})},1)},this.config,this),this._container===document.body&&!1!==this.config.animation){var s=this._container;this.webix.html.addCss(s,"webixappstart"),setTimeout(function(){i.webix.html.removeCss(s,"webixappstart"),i.webix.html.addCss(s,"webixapp")},10)}if(t)this.app&&(t.current().view=this,t.next()?(t.refresh(),t=t.split()):t=new h(this.config.start,0));else{var n=this.$router.get();n||(n=this.config.start,this.$router.set(n,{silent:!0})),t=new h(n,0)}return t},i.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},i.prototype.addSubView=function(t,e,i){var s=!0!==t.$subview?t.$subview:null,n=t.name||(s?this.webix.uid():"default");e.id=t.id||"s"+this.webix.uid();var a=i[n]={id:e.id,url:s,branch:t.branch,popup:t.popup};return a.popup?null:e},i}(a),p=function(){function t(t,e){var i=this;this.config=e||{},this._detectPrefix(),this.cb=t,window.onpopstate=function(){return i.cb(i.get())}}return t.prototype.set=function(t,e){var i=this;if(this.config.routes){var s=t.split("?",2);for(var n in this.config.routes)if(this.config.routes[n]===s[0]){t=n+(s.length>1?"?"+s[1]:"");break}}this.get()!==t&&window.history.pushState(null,null,this.prefix+this.sufix+t),e&&e.silent||setTimeout(function(){return i.cb(t)},1)},t.prototype.get=function(){var t=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(t="/"!==t&&"#"!==t?t:"",this.config.routes){var e=t.split("?",2),i=this.config.routes[e[0]];i&&(t=i+(e.length>1?"?"+e[1]:""))}return t},t.prototype._detectPrefix=function(){var t=this.config.routerPrefix;this.sufix="#"+(void 0===t?"!":t),this.prefix=document.location.href.split("#",2)[0]},t.prototype._getRaw=function(){return document.location.href},t}(),_=!1;function v(t){if(!_&&t){_=!0;var e=window;e.Promise||(e.Promise=t.promise);var i=t.version.split(".");10*i[0]+1*i[1]<53&&(t.ui.freeze=function(e){var i=e();return i&&i.then?i.then(function(e){return t.ui.$freeze=!1,t.ui.resize(),e}):(t.ui.$freeze=!1,t.ui.resize()),i});var s=t.ui.baselayout.prototype.addView,n=t.ui.baselayout.prototype.removeView,a={addView:function(t,e){if(this.$scope&&this.$scope.webixJet&&!t.queryView){var i=this.$scope,n={};t=i.app.copyConfig(t,{},n),s.apply(this,[t,e]);var a=function(t){i._renderFrame(t,n[t],null).then(function(){i._subs[t]=n[t]})};for(var r in n)a(r);return t.id}return s.apply(this,arguments)},removeView:function(){if(n.apply(this,arguments),this.$scope&&this.$scope.webixJet){var e=this.$scope._subs;for(var i in e){var s=e[i];t.$$(s.id)||(s.view.destructor(),delete e[i])}}}};t.extend(t.ui.layout.prototype,a,!0),t.extend(t.ui.baselayout.prototype,a,!0),t.protoUI({name:"jetapp",$init:function(e){this.$app=new this.app(e);var i=t.uid().toString();for(var s in e.body={id:i},this.$ready.push(function(){this.$app.render({id:i})}),this.$app){var n=this.$app[s];"function"!=typeof n||this[s]||(this[s]=n.bind(this.$app))}}},t.ui.proxy)}}var m=function(t){function e(e){var i=this;return e.router=e.router||p,v((i=t.call(this,e)||this).webix),i}return n(e,t),e.prototype._loadViewDynamic=function(t){return t=t.replace(/\./g,"/"),i(60)("./"+t)},e}(g),b=function(){function t(t,e,i){this.storage=e.storage||i.webix.storage.session,this.name=e.storeName||e.id+":route",this.cb=t}return t.prototype.set=function(t,e){var i=this;this.storage.put(this.name,t),e&&e.silent||setTimeout(function(){return i.cb(t)},1)},t.prototype.get=function(){return this.storage.get(this.name)},t}(),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},e.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")},e}(p),y=function(){function t(t,e){this.path="",this.cb=t}return t.prototype.set=function(t,e){var i=this;this.path=t,e&&e.silent||setTimeout(function(){return i.cb(t)},1)},t.prototype.get=function(){return this.path},t}();function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e,i){for(var s in t)w(t,s)&&e.call(i||t,t[s],s,t)}function k(t){t="Warning: "+t,"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(t){}}var C=String.prototype.replace,A=String.prototype.split,I="||||",E=function(t){var e=t%10;return 11!==t&&1===e?0:2<=e&&e<=4&&!(t>=12&&t<=14)?1:2},T={arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:E,chinese:function(){return 0},croatian:E,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:E,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},M={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function P(t){var e=function(t){var e={};return S(t,function(t,i){S(t,function(t){e[t]=i})}),e}(M);return e[t]||e[A.call(t,/-/,1)[0]]||e.en}function L(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var z=/\$/g,N="$$",$=/%\{(.*?)\}/g;function D(t,e,i,s){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var n=t,a=s||$,r="number"==typeof e?{smart_count:e}:e;if(null!=r.smart_count&&n){var o=A.call(n,I);n=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}(o[function(t,e){return T[P(t)](e)}(i||"en",r.smart_count)]||o[0])}return n=C.call(n,a,function(t,e){return w(r,e)&&null!=r[e]?C.call(r[e],z,N):t})}function H(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var i=e.allowMissing?D:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:i,this.warn=e.warn||k,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",i=t&&t.suffix||"}";if(e===I||i===I)throw new RangeError('"'+I+'" token is reserved for pluralization');return new RegExp(L(e)+"(.*?)"+L(i),"g")}(e.interpolation)}H.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},H.prototype.extend=function(t,e){S(t,function(t,i){var s=e?e+"."+i:i;"object"==typeof t?this.extend(t,s):this.phrases[s]=t},this)},H.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:S(t,function(t,i){var s=e?e+"."+i:i;"object"==typeof t?this.unset(t,s):delete this.phrases[s]},this)},H.prototype.clear=function(){this.phrases={}},H.prototype.replace=function(t){this.clear(),this.extend(t)},H.prototype.t=function(t,e){var i,s,n=null==e?{}:e;if("string"==typeof this.phrases[t])i=this.phrases[t];else if("string"==typeof n._)i=n._;else if(this.onMissingKey){var a=this.onMissingKey;s=a(t,n,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+t+'"'),s=t;return"string"==typeof i&&(s=D(i,n,this.currentLocale,this.tokenRegex)),s},H.prototype.has=function(t){return w(this.phrases,t)},H.transformPhrase=function(t,e,i){return D(t,e,i)};var F=H;function R(t,e,i){var s;e.urls?i=e.urls[i]||i:e.param&&((s={})[e.param]=i,i=s),t.show(i)}var j={good:"check",error:"warning",saving:"refresh fa-spin"},O={good:"Ok",error:"Error",saving:"Connecting..."};function B(t,e,i){for(var s=0;s<i.length;s++)t[i[s]]=e[s+1]?e[s+1].page:""}var V=window.webix;V&&v(V);var Y={UnloadGuard:function(t,i,s){i.on(t,"app:guard",function(t,n,a){if(n===i||n.contains(i)){var r=s();a.confirm=!1===r?Promise.reject(new e):a.confirm.then(function(){return r})}})},Locale:function(t,e,s){var n=(s=s||{}).storage,a=n?n.get("lang")||"en":s.lang||"en";function r(e,i,r){i.__esModule&&(i=i.default);var o={phrases:i};s.polyglot&&t.webix.extend(o,s.polyglot);var h=l.polyglot=new F(o);if(h.locale(e),l._=t.webix.bind(h.t,h),a=e,n&&n.put("lang",a),s.webix){var c=s.webix[e];c&&t.webix.i18n.setLocale(c)}return r?Promise.resolve():t.refresh()}function o(t,e){if(!1!==s.path){var n=(s.path?s.path+"/":"")+t,a=i(37)("./"+n);r(t,a,e)}}var l={getLang:function(){return a},setLang:o,setLangData:r,_:null,polyglot:null};t.setService("locale",l),o(a,!0)},Menu:function(t,e,i){var s=e.getSubViewInfo().parent,n=e.$$(i.id||i),a=!1;n.attachEvent("onchange",function(){a||R(s,i,this.getValue())}),n.attachEvent("onafterselect",function(){if(!a){var t=null;n.setValue?t=this.getValue():n.getSelectedId&&(t=n.getSelectedId()),R(s,i,t)}}),e.on(t,"app:route",function(){var t="";if(i.param)t=e.getParam(i.param,!0);else{var r=s.getUrl()[1];r&&(t=r.page)}t&&(a=!0,n.setValue&&n.getValue()!==t?n.setValue(t):n.select&&n.exists(t)&&n.getSelectedId()!==t&&n.select(t),a=!1)})},Theme:function(t,e,i){var s=(i=i||{}).storage,n=s?s.get("theme")||"flat-default":i.theme||"flat-default",a={getTheme:function(){return n},setTheme:function(e,i){for(var a=e.split("-"),r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var l=r[o].getAttribute("title");l&&(l===e||l===a[0]?r[o].disabled=!1:r[o].disabled=!0)}t.webix.skin.set(a[0]),t.webix.html.removeCss(document.body,"theme-"+n),t.webix.html.addCss(document.body,"theme-"+e),n=e,s&&s.put("theme",e),i||t.refresh()}};t.setService("theme",a),a.setTheme(n,!0)},User:function(t,e,i){var s=(i=i||{}).login||"/login",n=i.logout||"/logout",a=i.afterLogin||t.config.start,r=i.afterLogout||"/login",o=i.ping||3e5,l=i.model,h=i.user,c={getUser:function(){return h},getStatus:function(t){return t?l.status().catch(function(){return null}).then(function(t){h=t}):null!==h},login:function(e,i){return l.login(e,i).then(function(e){if(h=e,!e)throw new Error("Access denied");t.callEvent("app:user:login",[h]),t.show(a)})},logout:function(){return h=null,l.logout().then(function(e){return t.callEvent("app:user:logout",[]),e})}};function d(t,e){t===n?(c.logout(),e.redirect=r):t===s||c.getStatus()||(e.redirect=s)}t.setService("user",c),t.attachEvent("app:guard",function(t,e,s){return!(!i.public||!i.public(t))||(void 0===h&&(s.confirm=c.getStatus(!0).then(function(){return d(t,s)})),d(t,s))}),o&&setInterval(function(){return c.getStatus(!0)},o)},Status:function(t,e,i){var s="good",n=0,a=!1,r=i.expire;r||!1===r||(r=2e3);var o=i.texts||O,l=i.icons||j;function h(t){var n=e.$$(i.target);n&&(t||(t="<div class='status_"+s+"'><span class='webix_icon fa-"+l[s]+"'></span> "+o[s]+"</div>"),n.setHTML(t))}function c(){n--,g("good")}function d(t){n--,g("error",t)}function u(t){n++,g("saving"),t&&t.then&&t.then(c,d)}function f(){0===n&&h(" ")}function g(e,i){n<0&&(n=0),"saving"===e?(s="saving",h()):(a="error"===e,0===n&&(s=a?"error":"good",a?t.error("app:error:server",[i.responseText||i]):r&&setTimeout(f,r),h()))}function p(i){var s=t.webix.dp(i);s&&(e.on(s,"onAfterDataSend",u),e.on(s,"onAfterSaveError",function(t,e,i){return d(i)}),e.on(s,"onAfterSave",c))}"string"==typeof i&&(i={target:i}),t.setService("status",{getStatus:function(){return s},setStatus:g,track:p}),i.remote&&e.on(t.webix,"onRemoteCall",u),i.ajax&&e.on(t.webix,"onBeforeAjax",function(t,e,i,s,n,a,r){u(r)}),i.data&&p(i.data)},UrlParam:function(t,e,i){var s=i.route||i,n={};e.on(t,"app:urlchange",function(t,i){e===t&&(B(n,i.suburl(),s),i.size(s.length+1))});var a=e.setParam,r=e.getParam;e.setParam=function(t,i,r){var o=s.indexOf(t);return o>=0?(n[t]=i,this._segment.update("",i,o+1),r?e.show(null):void 0):a.call(this,t,i,r)},e.getParam=function(t,e){var i=n[t];return void 0!==i?i:r.call(this,t,e)},B(n,e.getUrl(),s)}},W={NavigationBlocked:e},X=window;X.Promise||(X.Promise=X.webix.promise),t.plugins=Y,t.errors=W,t.JetApp=m,t.JetView=c,t.HashRouter=p,t.StoreRouter=b,t.UrlRouter=x,t.EmptyRouter=y,t.SubRouter=u,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,i){try{var s=i(16);if("function"!=typeof s.inherits)throw"";t.exports=s.inherits}catch(e){t.exports=i(50)}},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(6).Buffer)},function(t,e){var i,s,n=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(t){s=r}}();var l,h=[],c=!1,d=-1;function u(){c&&l&&(c=!1,l.length?h=l.concat(h):d=-1,h.length&&f())}function f(){if(!c){var t=o(u);c=!0;for(var e=h.length;e;){for(l=h,h=[];++d<e;)l&&l[d].run();d=-1,e=h.length}l=null,c=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new g(t,e)),1!==h.length||c||o(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var s=i(55),n=i(54),a=i(32);function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return h(this,t,e,i)}function h(t,e,i,s){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,s){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(s||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===s?new Uint8Array(e):void 0===s?new Uint8Array(e,i):new Uint8Array(e,i,s);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=u(t,e);return t}(t,e,i,s):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var s=0|g(e,i),n=(t=o(t,s)).write(e,i);n!==s&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|f(e.length);return 0===(t=o(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?o(t,0):u(t,e);if("Buffer"===e.type&&a(e.data))return u(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(c(e),t=o(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function u(t,e){var i=e.length<0?0:0|f(e.length);t=o(t,i);for(var s=0;s<i;s+=1)t[s]=255&e[s];return t}function f(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return O(t).length;default:if(s)return j(t).length;e=(""+e).toLowerCase(),s=!0}}function p(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function _(t,e,i,s,n){if(0===t.length)return-1;if("string"==typeof i?(s=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=l.from(e,s)),l.isBuffer(e))return 0===e.length?-1:v(t,e,i,s,n);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):v(t,[e],i,s,n);throw new TypeError("val must be string, number or Buffer")}function v(t,e,i,s,n){var a,r=1,o=t.length,l=e.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(t.length<2||e.length<2)return-1;r=2,o/=2,l/=2,i/=2}function h(t,e){return 1===r?t[e]:t.readUInt16BE(e*r)}if(n){var c=-1;for(a=i;a<o;a++)if(h(t,a)===h(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*r}else-1!==c&&(a-=a-c),c=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var d=!0,u=0;u<l;u++)if(h(t,a+u)!==h(e,u)){d=!1;break}if(d)return a}return-1}function m(t,e,i,s){i=Number(i)||0;var n=t.length-i;s?(s=Number(s))>n&&(s=n):s=n;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");s>a/2&&(s=a/2);for(var r=0;r<s;++r){var o=parseInt(e.substr(2*r,2),16);if(isNaN(o))return r;t[i+r]=o}return r}function b(t,e,i,s){return B(j(e,t.length-i),t,i,s)}function x(t,e,i,s){return B(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,s)}function y(t,e,i,s){return x(t,e,i,s)}function w(t,e,i,s){return B(O(e),t,i,s)}function S(t,e,i,s){return B(function(t,e){for(var i,s,n,a=[],r=0;r<t.length&&!((e-=2)<0);++r)i=t.charCodeAt(r),s=i>>8,n=i%256,a.push(n),a.push(s);return a}(e,t.length-i),t,i,s)}function k(t,e,i){return 0===e&&i===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(e,i))}function C(t,e,i){i=Math.min(t.length,i);for(var s=[],n=e;n<i;){var a,r,o,l,h=t[n],c=null,d=h>239?4:h>223?3:h>191?2:1;if(n+d<=i)switch(d){case 1:h<128&&(c=h);break;case 2:128==(192&(a=t[n+1]))&&(l=(31&h)<<6|63&a)>127&&(c=l);break;case 3:a=t[n+1],r=t[n+2],128==(192&a)&&128==(192&r)&&(l=(15&h)<<12|(63&a)<<6|63&r)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=t[n+1],r=t[n+2],o=t[n+3],128==(192&a)&&128==(192&r)&&128==(192&o)&&(l=(15&h)<<18|(63&a)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,s.push(c>>>10&1023|55296),c=56320|1023&c),s.push(c),n+=d}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var i="",s=0;for(;s<e;)i+=String.fromCharCode.apply(String,t.slice(s,s+=A));return i}(s)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return h(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,s){return c(e),e<=0?o(t,e):void 0!==i?"string"==typeof s?o(t,e).fill(i,s):o(t,e).fill(i):o(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,s=e.length,n=0,a=Math.min(i,s);n<a;++n)if(t[n]!==e[n]){i=t[n],s=e[n];break}return i<s?-1:s<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var s=l.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var r=t[i];if(!l.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(s,n),n+=r.length}return s},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):function(t,e,i){var s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,i);case"utf8":case"utf-8":return C(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return E(this,e,i);case"base64":return k(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,i);default:if(s)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),s=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,s,n){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),e<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&e>=i)return 0;if(s>=n)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,s>>>=0,n>>>=0,this===t)return 0;for(var a=n-s,r=i-e,o=Math.min(a,r),h=this.slice(s,n),c=t.slice(e,i),d=0;d<o;++d)if(h[d]!==c[d]){a=h[d],r=c[d];break}return a<r?-1:r<a?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return _(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return _(this,t,e,i,!1)},l.prototype.write=function(t,e,i,s){if(void 0===e)s="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)s=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===s&&(s="utf8")):(s=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var a=!1;;)switch(s){case"hex":return m(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return x(this,t,e,i);case"latin1":case"binary":return y(this,t,e,i);case"base64":return w(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function I(t,e,i){var s="";i=Math.min(t.length,i);for(var n=e;n<i;++n)s+=String.fromCharCode(127&t[n]);return s}function E(t,e,i){var s="";i=Math.min(t.length,i);for(var n=e;n<i;++n)s+=String.fromCharCode(t[n]);return s}function T(t,e,i){var s=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>s)&&(i=s);for(var n="",a=e;a<i;++a)n+=R(t[a]);return n}function M(t,e,i){for(var s=t.slice(e,i),n="",a=0;a<s.length;a+=2)n+=String.fromCharCode(s[a]+256*s[a+1]);return n}function P(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,i,s,n,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(i+s>t.length)throw new RangeError("Index out of range")}function z(t,e,i,s){e<0&&(e=65535+e+1);for(var n=0,a=Math.min(t.length-i,2);n<a;++n)t[i+n]=(e&255<<8*(s?n:1-n))>>>8*(s?n:1-n)}function N(t,e,i,s){e<0&&(e=4294967295+e+1);for(var n=0,a=Math.min(t.length-i,4);n<a;++n)t[i+n]=e>>>8*(s?n:3-n)&255}function $(t,e,i,s,n,a){if(i+s>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(t,e,i,s,a){return a||$(t,0,i,4),n.write(t,e,i,s,23,4),i+4}function H(t,e,i,s,a){return a||$(t,0,i,8),n.write(t,e,i,s,52,8),i+8}l.prototype.slice=function(t,e){var i,s=this.length;if(t=~~t,e=void 0===e?s:~~e,t<0?(t+=s)<0&&(t=0):t>s&&(t=s),e<0?(e+=s)<0&&(e=0):e>s&&(e=s),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var n=e-t;i=new l(n,void 0);for(var a=0;a<n;++a)i[a]=this[a+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var s=this[t],n=1,a=0;++a<e&&(n*=256);)s+=this[t+a]*n;return s},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var s=this[t+--e],n=1;e>0&&(n*=256);)s+=this[t+--e]*n;return s},l.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var s=this[t],n=1,a=0;++a<e&&(n*=256);)s+=this[t+a]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var s=e,n=1,a=this[t+--s];s>0&&(n*=256);)a+=this[t+--s]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),n.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),n.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),n.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),n.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,s){(t=+t,e|=0,i|=0,s)||L(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,a=0;for(this[e]=255&t;++a<i&&(n*=256);)this[e+a]=t/n&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,s){(t=+t,e|=0,i|=0,s)||L(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,a=1;for(this[e+n]=255&t;--n>=0&&(a*=256);)this[e+n]=t/a&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,s){if(t=+t,e|=0,!s){var n=Math.pow(2,8*i-1);L(this,t,e,i,n-1,-n)}var a=0,r=1,o=0;for(this[e]=255&t;++a<i&&(r*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/r>>0)-o&255;return e+i},l.prototype.writeIntBE=function(t,e,i,s){if(t=+t,e|=0,!s){var n=Math.pow(2,8*i-1);L(this,t,e,i,n-1,-n)}var a=i-1,r=1,o=0;for(this[e+a]=255&t;--a>=0&&(r*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/r>>0)-o&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):z(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):z(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return D(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return D(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return H(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return H(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,s){if(i||(i=0),s||0===s||(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<i&&(s=i),s===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-i&&(s=t.length-e+i);var n,a=s-i;if(this===t&&i<e&&e<s)for(n=a-1;n>=0;--n)t[n+e]=this[n+i];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),e);return a},l.prototype.fill=function(t,e,i,s){if("string"==typeof t){if("string"==typeof e?(s=e,e=0,i=this.length):"string"==typeof i&&(s=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!l.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var a;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(a=e;a<i;++a)this[a]=t;else{var r=l.isBuffer(t)?t:j(new l(t,s).toString()),o=r.length;for(a=0;a<i-e;++a)this[a+e]=r[a%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var i;e=e||1/0;for(var s=t.length,n=null,a=[],r=0;r<s;++r){if((i=t.charCodeAt(r))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(r+1===s){(e-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;a.push(i)}else if(i<2048){if((e-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function O(t){return s.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,i,s){for(var n=0;n<s&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,i(5))},function(t,e,i){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,i,s,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,r,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,s)});case 4:return e.nextTick(function(){t.call(null,i,s,n)});default:for(a=new Array(o-1),r=0;r<a.length;)a[r++]=arguments[r];return e.nextTick(function(){t.apply(null,a)})}}:t.exports=e.nextTick}).call(this,i(4))},function(t,e,i){
/**
 * @license
 * webix UI v.6.4.0
 * This software is allowed to use under GPL or you need to obtain Commercial License
 * to use it in non-GPL project. Please contact sales@webix.com for details
 */
!function(t){"use strict";var e={codebase:"./",cdn:"//cdn.webix.com",top_views:[],_global_scope:null,_global_collection:null,_child_sizing_active:null,_responsive_exception:null,_responsive_tinkery:null,_freeze_resize:null,_parent_cell:null,_focus_time:null,_ui_creation:0,_edit_open_time:null,_final_destruction:null,_events:[],destructors:[],securityKey:"",_noselect_element:null,_modality:0,_wait_animate:null,noanimate:!1},i={cdn:"//cdn.webix.com/",codebase:"",zIndexBase:100,scrollSize:17};i.strict=!!window.webix_strict,i.https="https:"===document.location.protocol;var s=navigator.userAgent;if(i.isMac=-1!=s.indexOf("Mac"),(-1!=s.indexOf("Mobile")||-1!=s.indexOf("Windows Phone"))&&(i.mobile=!0),(i.mobile||-1!=s.indexOf("iPad")||-1!=s.indexOf("Android"))&&(i.touch=!0),-1!=s.indexOf("Opera"))i.isOpera=!0;else{if(i.isIE=!!document.all||-1!==s.indexOf("Trident"),i.isIE){var n=parseFloat(navigator.appVersion.split("MSIE")[1]);8==n&&(i.isIE8=!0)}i.isEdge=-1!=s.indexOf("Edge"),i.isFF=-1!=s.indexOf("Firefox"),i.isWebKit=-1!=s.indexOf("KHTML"),i.isSafari=i.isWebKit&&i.isMac&&-1==s.indexOf("Chrome"),(i.isIE||i.isEdge||i.isFF)&&(i.maxHTMLElementSize=1e7),i.isSafari&&(i.maxHTMLElementSize=1e8)}-1!=s.toLowerCase().indexOf("android")&&(i.isAndroid=!0,-1!=s.toLowerCase().indexOf("trident")&&(i.isAndroid=!1,i.isIEMobile=!0)),i.transform=!1,i.transition=!1;for(var a=-1,r=["","webkit","Moz","O","ms"],o=document.createElement("DIV"),l=0;l<r.length;l++){var h=r[l]?r[l]+"Transform":"transform";if(void 0!==o.style[h]){a=l;break}}if(a>-1){i.cssPrefix=["","-webkit-","-Moz-","-o-","-ms-"][a];var c=i.jsPrefix=r[a];i.transform=c?c+"Transform":"transform",i.transition=c?c+"Transition":"transition",i.transitionDuration=c?c+"TransitionDuration":"transitionDuration",o.style[i.transform]="translate3d(0,0,0)",i.translate=o.style[i.transform]?"translate3d":"translate",i.transitionEnd="-Moz-"==i.cssPrefix?"transitionend":c?c+"TransitionEnd":"transitionend"}i.pointerevents=!i.isIE||null!==new RegExp("Trident/.*rv:11").exec(s),i.passiveEventListeners=!1;try{var d=Object.defineProperty({},"passive",{get:function(){i.passiveEventListeners=!0}});window.addEventListener("testPassive",null,d),window.removeEventListener("testPassive",null,d)}catch(t){}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),i.svganimation=document.implementation.hasFeature("https://www.w3.org/TR/SVG11/feature#SVG-animation","1.1");var f={};function g(t,e){f[t]=e}function p(t){return f[t]}function _(t,e){if(!t){v("error",e);var i=p("message");i&&"string"==typeof e&&i({type:"debug",text:e,expire:-1})}}function v(t,e,i){1==arguments.length&&(e=t,t="log"),window.console&&window.console.log&&(t=t.toLowerCase(),window.console[t]?window.console[t](e||"unknown error"):window.console.log(t+": "+e),i&&window.console.log(i))}var m={},b=0;function x(){for(var t="",e=0;e<b;e++)t+="|  ";return t}function y(t,e){m.size&&(b||v(e?"--- get sizes ---":"--- set sizes ---"),v(x()+t.name+"@"+t.config.id),b++)}function w(t,e){m.size&&(b--,v(x()+e.join(",")))}function S(t,e,i){m.size&&(b||v(i?"--- get sizes ---":"--- set sizes ---"),v(x()+t.name+"@"+t.config.id+" "+e.join(",")))}var k=0;function C(){_(100!=++k,"Attempt to copy object with self reference")}function A(){k--}function I(t){var e=I._function;return e.prototype=t,new e}function E(t){_(t,"Invalid mixing target"),C();var e,i=!!(window.Map&&window.Set&&window.WeakMap&&window.WeakSet);for(var s in arguments.length>1?(e=arguments[0],t=arguments[1]):e=R(t)?[]:{},t){var n=t[s];!n||"object"!=u(n)||n instanceof RegExp?e[s]=n:j(n)?e[s]=new Date(n):i&&(n instanceof Map||n instanceof Set||n instanceof WeakMap||n instanceof WeakSet)?e[s]=n:(e[s]=R(n)?[]:{},E(e[s],n))}return A(),e}function T(t,e){return function(){return t.apply(e,arguments)}}function M(t){window.execScript?window.execScript(t):window.eval(t)}function P(t){return void 0===t}function L(t,e,i,s){return window.setTimeout(function(){if(!e||!e.$destructed){var s=t.apply(e,i||[]);return t=e=i=null,s}},s||1)}function z(t){var e=!0;return function(){e&&(e=!1,t.apply(this,arguments))}}I._function=function(){},t.extend=function(e,i,s){if(_(e,"Invalid mixing target"),_(i,"Invalid mixing source"),e.$protoWait)return O.insertAt.call(e.$protoWait,i,1),e;for(var n in i)n in e&&!s||(e[n]=i[n]);return i.defaults&&t.extend(e.defaults,i.defaults),i.$init&&i.$init.call(e),e};var N=(new Date).valueOf();function $(){return++N}function D(t){return"string"==typeof t?document.getElementById(t):t}function H(e){return t.extend(e||[],O,!0)}function F(t,e){if("string"==typeof t){var i=t.replace("()","");return e&&e[i]?e[i]:window[i]||window.eval(t)}return t}function R(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function j(t){return t instanceof Date}var O={removeAt:function(t,e){t>=0&&this.splice(t,e||1)},remove:function(t){this.removeAt(this.find(t))},insertAt:function(t,e){e||0===e?this.splice(e,0,t):this.push(t)},find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this},filter:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])||(this.splice(i,1),i--);return this}};window.webix_on_core_ready&&(t.extend=window.webix_on_core_ready({extend:t.extend}).extend);var B={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(e){t.extend(this._evs_map,e,!0)},on_setter:function(t){if(t)for(var e in t){var i=F(t[e],this.$scope),s=e.indexOf("->");-1!==s?this[e.substr(0,s)].attachEvent(e.substr(s+2),T(i,this)):this.attachEvent(e,i)}},callEvent:function(t,e){var i=this._event_master||this;if(this._evs_events._block)return!0;t=t.toLowerCase();var s=this._evs_events[t.toLowerCase()],n=!0;if((m.events||this.debug)&&"onmousemoving"!==t&&v("info","["+this.name+"@"+(this._settings||{}).id+"] event:"+t,e),s)for(var a=0;a<s.length;a++)!1===s[a].apply(i,e||[])&&(n=!1);if(this._evs_map[t]){var r=this._evs_map[t];r.$eventSource=this,r.callEvent(t,e)||(n=!1),r.$eventSource=null}return n},attachEvent:function(t,e,i){_(e,"Invalid event handler for "+t),t=t.toLowerCase(),i=i||$(),e=F(e,this.$scope);var s=this._evs_events[t]||H();return arguments[3]?s.unshift(e):s.push(e),this._evs_events[t]=s,this._evs_handlers[i]={f:e,t:t},i},detachEvent:function(t){if(this._evs_handlers[t]){var e=this._evs_handlers[t].t,i=this._evs_handlers[t].f,s=this._evs_events[e];s.remove(i),delete this._evs_handlers[t]}else{var n=(t+"").toLowerCase();this._evs_events[n]&&(this._evs_events[n]=H())}},hasEvent:function(t){t=t.toLowerCase();var e=this._evs_events[t];if(e&&e.length)return!0;var i=this._evs_map[t];return!!i&&i.hasEvent(t)}},V={};t.extend(V,B,!0);var Y=function(t,e){return V.callEvent(t,e)},W=function(t,e,i,s){return V.attachEvent(t,e,i,s)},X=function(t){return V.detachEvent(t)},U=function(){return V.blockEvent()},G=function(){return V.unblockEvent()},q=0,K={},Z={};function J(){q||(q=document.onselectstart),document.onselectstart=ft}function Q(){0!==q&&(document.onselectstart=q||null),q=0}function tt(t){for(var e=0;t=t.previousSibling;)e++;return e}function et(t,e){var i="";for(var s in e=e||"",t)i+=s+":"+t[s]+";";var n=Z[i+e];return n||(it("."+(n="s"+$())+(e||"")+"{"+i+"}"),Z[i+e]=n),n}function it(t,e){var i=e?K[e]:K.default;i||((i=document.createElement("style")).setAttribute("type","text/css"),i.setAttribute("media","screen,print"),document.getElementsByTagName("head")[0].appendChild(i),e?K[e]=i:K.default=i),i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(document.createTextNode(t))}function st(t){var e=K[t||"default"];e&&(e.innerHTML="")}function nt(t,e,i){e=e||{};var s=document.createElement(t);for(var n in e)s.setAttribute(n,e[n]);return e.style&&(s.style.cssText=e.style),e.class&&(s.className=e.class),i&&(s.innerHTML=i),s}function at(t){return(t=D(t))?P(t.value)?t.innerHTML:t.value:""}function rt(t){if(t instanceof Array)for(var e=0;e<t.length;e++)rt(t[e]);else t&&t.parentNode&&t.parentNode.removeChild(t)}function ot(t,e,i){t&&(e&&e.parentNode?e.parentNode.insertBefore(t,e):i.appendChild(t))}function lt(t,e){var i;for(t.tagName?i=t:(t=t||event,i=t.target||t.srcElement);i;){if(i.getAttribute){var s=i.getAttribute(e);if(s)return s}i=i.parentNode}return null}function ht(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,a=window.pageXOffset||s.scrollLeft||i.scrollLeft,r=s.clientTop||i.clientTop||0,o=s.clientLeft||i.clientLeft||0,l=e.top+n-r,h=e.left+a-o;return{y:Math.round(l),x:Math.round(h),width:t.offsetWidth,height:t.offsetHeight}}for(var c=0,d=0;t;)c+=parseInt(t.offsetTop,10),d+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{y:c,x:d,width:t.offsetHeight,height:t.offsetWidth}}function ct(t){return P((t=t||event).offsetX)?{x:t.layerX,y:t.layerY}:{x:t.offsetX,y:t.offsetY}}function dt(t){if((t=t||event).touches&&t.touches[0]&&(t=t.touches[0]),t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=i.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}}function ut(t){return t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1),ft(t)}function ft(t){return(t=t||event).stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!1}function gt(t,e,i){if(document.createEventObject){var s=document.createEventObject();t.fireEvent&&t.fireEvent("on"+i,s)}else{var n=document.createEvent(e);n.initEvent(i,!0,!0),t.dispatchEvent&&t.dispatchEvent(n)}}function pt(t,e,i){i&&-1!==t.className.indexOf(e)||(t.className+=" "+e)}function _t(t,e){t.className=t.className.replace(RegExp(" "+e,"g"),"")}function vt(t,e,i){var s=nt("DIV",{class:"webix_view webix_measure_size "+(e||"")},"");s.style.cssText="height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;"+(i?"width:"+i+"px;":"width:auto;white-space:nowrap;"),document.body.appendChild(s);for(var n="object"!==u(t)?[t]:t,a=0,r=0,o=0;o<n.length;o++)s.innerHTML=n[o],a=Math.max(a,s.offsetWidth+1),r=Math.max(r,s.offsetHeight+1);return rt(s),{width:a,height:r}}function mt(t,e){var i=!1;if("object"==u(t)){if(window.navigator.msSaveBlob)return window.navigator.msSaveBlob(t,e);t=window.URL.createObjectURL(t),i=!0}var s=document.createElement("a");s.href=t,s.download=e,document.body.appendChild(s),s.click(),L(function(){i&&window.URL.revokeObjectURL(t),document.body.removeChild(s),s.remove()})}function bt(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),e}function xt(t,e,i){if(e=e||0,i=i||e,t.focus(),t.setSelectionRange)t.setSelectionRange(e,i);else{var s=t.createTextRange();s.collapse(!0),s.moveEnd("character",i),s.moveStart("character",e),s.select()}}function yt(t){if("selectionStart"in t)return{start:t.selectionStart||0,end:t.selectionEnd||0};t.focus();var e=document.selection.createRange(),i=e.getBookmark(),s=t.createTextRange();s.moveToBookmark(i);var n=s.text.length;s.collapse(!0),s.moveStart("character",-t.value.length);var a=s.text.length;return{start:a,end:a+n}}function wt(t,e){document.getElementsByTagName("head").item(0).appendChild(nt("meta",{name:t,content:e}))}var St={parseFormat:"%Y-%m-%d %H:%i:%s",parseTimeFormat:"%H:%i:%s"};function kt(t){var e,i=Date.prototype.toJSON;return Date.prototype.toJSON=function(){return St.parseFormatStr(this)},e=t instanceof Date?t.toJSON():JSON.stringify(t),Date.prototype.toJSON=i,e}var Ct=window,At=1,It={},Et=!1;function Tt(t){Ct.setImmediate?Ct.setImmediate(t):Ct.importScripts||!Ct.addEventListener?setTimeout(t):(It[++At]=t,Ct.postMessage(At,"*"))}function Mt(t){if("function"!=typeof t&&void 0!=t)throw TypeError();if("object"!=u(this)||this&&this.then)throw TypeError();var e,i,s=this,n=0,a=0,r=[];s.promise=s,s.resolve=function(t){return e=s.fn,i=s.er,n||(a=t,n=1,Tt(h)),s},s.reject=function(t){return e=s.fn,i=s.er,n||(a=t,n=2,Tt(h)),s},s._d=1,s.then=function(t,e){if(1!=this._d)throw TypeError();var i=new Mt;return i.fn=t,i.er=e,3==n?i.resolve(a):4==n?i.reject(a):r.push(i),i},s.finally=function(t){var e,i=function(i){return e=i,t()},a=function(){var t=new Mt;return 4==n?t.reject(e):t.resolve(e)};return s.then(i,i).then(a,a)},s.catch=function(t){return s.then(null,t)},s.fail=function(t){return s.then(null,t)};var o=function(t){n=t||4;for(var e=0;e<r.length;e++){var i=r[e];3==n&&i.resolve(a)||i.reject(a)}};try{"function"==typeof t&&t(s.resolve,s.reject)}catch(t){s.reject(t)}return s;function l(t,e,i,s){if(2==n)return s();if("object"!=u(a)&&"function"!=typeof a||"function"!=typeof t)s();else try{var r=0;t.call(a,function(t){r++||(a=t,e())},function(t){r++||(a=t,i())})}catch(t){a=t,i()}}function h(){var t;try{t=a&&a.then}catch(t){return a=t,n=2,h()}l(t,function(){n=1,h()},function(){n=2,h()},function(){try{1==n&&"function"==typeof e?a=e(a):2==n&&"function"==typeof i&&(a=i(a),n=1)}catch(t){return a=t,o()}a==s?(a=TypeError(),o()):l(t,function(){o(3)},o,function(){o(1==n&&3)})})}}!Ct.setImmediate&&Ct.addEventListener&&Ct.addEventListener("message",function(t){if(t.source==Ct)if(Et)Tt(It[t.data]);else{Et=!0;try{It[t.data]()}catch(t){}delete It[t.data],Et=!1}}),Mt.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof Mt?t:new Mt(function(e){e(t)})},Mt.reject=function(t){if(1!=this._d)throw TypeError();return new Mt(function(e,i){i(t)})},Mt.all=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return Mt.reject(TypeError());var e=new Mt;return function i(s,n){if(n)return e.resolve(n);if(s)return e.reject(s);var a=t.reduce(function(t,e){return e&&e.then?t+1:t},0);0==a&&e.resolve(t),t.map(function(e,s){e&&e.then&&e.then(function(e){return t[s]=e,i(),e},i)})}(),e},Mt.race=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return Mt.reject(TypeError());if(0==t.length)return new Mt;var e=new Mt;return function i(s,n){if(n)return e.resolve(n);if(s)return e.reject(s);var a=t.reduce(function(t,e){return e&&e.then?t+1:t},0);0==a&&e.resolve(t),t.map(function(t){t&&t.then&&t.then(function(t){i(null,t)},i)})}(),e},Mt._d=1,Mt.defer=function(){return new Mt(null)};var Pt={_isValidXML:function(t){return t&&t.documentElement?t.getElementsByTagName("parsererror").length?null:t:null},toObject:function(t,e){var i=e?e.rawxml?e.rawxml():e:null;return this._isValidXML(i)?i:(i="string"==typeof t?this.fromString(t.replace(/^[\s]+/,"")):t,this._isValidXML(i)?i:null)},getRecords:function(t){return this.xpath(t,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(t){return this.tagToObject(t,{})},getOptions:function(){return!1},getInfo:function(t){var e=this.xpath(t,this.config);return e=e.length?this.assignTypes(this.tagToObject(e[0],{})):null,{size:t.documentElement.getAttribute("total_count")||0,from:t.documentElement.getAttribute("pos"),parent:t.documentElement.getAttribute("parent")||0,config:e,key:t.documentElement.getAttribute("webix_security")||null}},xpath:function(t,e){if(window.XPathResult){var i=t;-1==t.nodeName.indexOf("document")&&(t=t.ownerDocument);for(var s=[],n=t.evaluate(e,i,null,XPathResult.ANY_TYPE,null),a=n.iterateNext();a;)s.push(a),a=n.iterateNext();return s}var r=!0;try{void 0===t.selectNodes&&(r=!1)}catch(t){}if(r)return t.selectNodes(e);var o=e.split("/").pop();return t.getElementsByTagName(o)},assignTypes:function(t){for(var e in t){var i=t[e];if("object"==u(i))this.assignTypes(i);else if("string"==typeof i){if(""===i)continue;"true"==i?t[e]=!0:"false"==i?t[e]=!1:i==1*i&&(t[e]=1*t[e])}}return t},tagToObject:function(t,e){var i=1==t.nodeType&&t.getAttribute("stack"),s=0;if(i){e=[];for(var n=t.childNodes,a=0;a<n.length;a++)1==n[a].nodeType&&e.push(this.tagToObject(n[a],{}))}else{e=e||{};var r=t.attributes;if(r&&r.length)for(var o=0;o<r.length;o++)e[r[o].name]=r[o].value,s=1;for(var l=t.childNodes,h=0;h<l.length;h++)if(1==l[h].nodeType){var c=l[h].tagName;e[c]?("function"!=typeof e[c].push&&(e[c]=[e[c]]),e[c].push(this.tagToObject(l[h],{}))):e[c]=this.tagToObject(l[h],{}),s=2}if(!s)return this.nodeValue(t);s<2&&(e.value=e.value||this.nodeValue(t))}return e},nodeValue:function(t){return t.firstChild?t.firstChild.wholeText||t.firstChild.data:""},fromString:function(t){try{if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");return e.loadXML(t),e}}catch(t){return _(0,t),null}_(0,"Load from xml string is not supported")}},Lt={toObject:function(t){if(!t)return null;if("string"==typeof t)try{if(this.parseDates){var e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{1-3})?Z/;t=JSON.parse(t,function(t,i){return"string"==typeof i&&e.test(i)?new Date(i):i})}else t=JSON.parse(t)}catch(e){return v(e),v(t),_(0,"Invalid JSON data for parsing"),null}return t},getRecords:function(t){return t&&t.data&&(t=t.data),t&&!R(t)?[t]:t},getDetails:function(t){return"string"==typeof t?{id:t||$(),value:t}:t},getOptions:function(t){return t.collections},getInfo:function(t){return{size:t.total_count||0,from:t.pos,parent:t.parent||0,config:t.config,key:t.webix_security}},child:"data",parseDates:!1};function zt(t,e,i){return 0!==arguments.length?(new zt).get(t,e,i):this&&this.getXHR?this:new zt}zt.count=0,zt.prototype={master:null,getXHR:function(){return new XMLHttpRequest},stringify:function(t){return kt(t)},_send:function(t,e,i,s){var n;e&&(R(e)||"function"==typeof(e.success||e.error||e))&&(n=i,i=e,e=null);var a=Mt.defer(),r=this.getXHR(),o=this._header||{};if(!Y("onBeforeAjax",[s,t,e,r,o,null,a]))return a.reject(r);var l=!1;if("GET"!==s){var h=!1;for(var c in o)"content-type"==c.toString().toLowerCase()&&(h=!0,"application/json"==o[c]&&(l=!0));h||window.FormData&&e instanceof window.FormData||(o["Content-Type"]="application/x-www-form-urlencoded")}if("object"==u(e)&&!(window.FormData&&e instanceof window.FormData))if(l)e=this.stringify(e);else{var d=[];for(var f in e){var g=e[f];null!==g&&void 0!==g||(g=""),"object"===u(g)&&(g=this.stringify(g)),d.push(f+"="+encodeURIComponent(g))}e=d.join("&")}e&&"GET"===s&&(t=t+(-1!=t.indexOf("?")?"&":"?")+e,e=null),r.open(s,t,!this._sync);var p=this._response;for(var _ in p&&(r.responseType=p),o)r.setRequestHeader(_,o[_]);var v=this;return this.master=this.master||n,r.onreadystatechange=function(){if(!r.readyState||4==r.readyState){zt.count++;var t,e,s=r.status>=400||0===r.status;"blob"==r.responseType||"arraybuffer"==r.responseType?(t="",e=r.response):(t=r.responseText||"",e=v._data(r)),s?(Y("onAjaxError",[r]),a.reject(r),i&&zt.$callback(v.master||window,i,t,e,r,s)):(a.resolve(e),i&&zt.$callback(v.master||window,i,t,e,r,s))}},this._timeout&&(r.timeout=this._timeout),this._sync?r.send(e||null):setTimeout(function(){r.send(e||null)},1),this.master&&!this._sync&&a.then(function(t){return v.master=null,i=v=n=null,t}),this._sync?r:a},_data:function(t){return{xml:function(){try{return Pt.tagToObject(Pt.toObject(t.responseText,this))}catch(e){v(t.responseText),v(e.toString()),_(0,"Invalid xml data for parsing")}},rawxml:function(){return window.XPathResult?t.responseXML:Pt.fromString(t.responseText)},text:function(){return t.responseText},json:function(){return Lt.toObject(t.responseText,!1)}}},get:function(t,e,i){return this._send(t,e,i,"GET")},post:function(t,e,i){return this._send(t,e,i,"POST")},put:function(t,e,i){return this._send(t,e,i,"PUT")},del:function(t,e,i){return this._send(t,e,i,"DELETE")},patch:function(t,e,i){return this._send(t,e,i,"PATCH")},sync:function(){return this._sync=!0,this},timeout:function(t){return this._timeout=t,this},response:function(t){return this._response=t,this},headers:function(e){return this._header=t.extend(this._header||{},e),this},bind:function(t){return this.master=t,this}},zt.$callback=function(t,e,i,s,n,a){if(!t.$destructed&&(a&&Y("onAjaxError",[n]),e)){var r=e.success||e;a&&(r=e.error),r&&r.call&&r.call(t,i,s,n)}};var Nt={collapseNames:function(t,e,i,s){if(i=i||{},e=e||"",s=s||function(){return!0},!t||"object"!=u(t))return null;for(var n in t){var a=t[n],r=e+n;a&&"object"==u(a)&&!j(a)&&!R(a)&&s(r,a)?Nt.collapseNames(a,r+".",i,s):i[r]=a}return i},expandNames:function(t){var e,i,s,n,a,r={};for(a in t){for(s=a.split("."),i=s.length-1,n=r,e=0;e<i;e++)n[s[e]]||(n[s[e]]={}),n=n[s[e]];n[s[i]]=t[a]}return r}},$t={},Dt={},Ht=new RegExp("(\\r\\n|\\n)","g"),Ft=new RegExp('(\\")',"g"),Rt=new RegExp("(\\\\)","g"),jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ot=/[&<>"'`]/g,Bt=function(t){return jt[t]||"&amp;"};function Vt(t){if("function"==typeof t)return t;if($t[t])return $t[t];if(-1!=(t=(t||"").toString()).indexOf("->")){var e=t.split("->");switch(e[0]){case"html":t=at(e[1]);break;case"http":t=(new zt).sync().get(e[1],{uid:$()}).responseText}}if(t=(t||"").toString(),i.strict){if(!Dt[t]){Dt[t]=[];var s=[];if(t.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,function(t,e,i,n,a){s.push({pos:a,str:t,fn:function(t){return t[e]?i:n}})}),t.replace(/\{common\.([^}(]*)\}/g,function(t,e,i){s.push({pos:i,str:t,fn:function(t,i){return i[e]||""}})}),t.replace(/\{common\.([^}(]*)\(\)\}/g,function(t,e,i){s.push({pos:i,str:t,fn:function(t,i){return i[e]?i[e].apply(this,arguments):""}})}),t.replace(/\{obj\.([^:}]*)\}/g,function(t,e,i){s.push({pos:i,str:t,fn:function(t){return t[e]}})}),t.replace("{obj}",function(t,e){s.push({pos:e,str:t,fn:function(t){return t}})}),t.replace(/#([^#'";, ]+)#/gi,function(t,e,i){"!"==e.charAt(0)?(e=e.substr(1),s.push({pos:i,str:t,fn:function(t){return-1!=e.indexOf(".")&&(t=Nt.collapseNames(t)),Vt.escape(t[e])}})):s.push({pos:i,str:t,fn:function(t){return-1!=e.indexOf(".")&&(t=Nt.collapseNames(t)),t[e]}})}),s.sort(function(t,e){return t.pos>e.pos?1:-1}),s.length){for(var n=0,a=function(t,e,i){Dt[t].push(function(){return t.slice(e,i)})},r=0;r<s.length;r++){var o=s[r].pos;a(t,n,o),Dt[t].push(s[r].fn),n=o+s[r].str.length}a(t,n,t.length)}else Dt[t].push(function(){return t})}return function(){for(var e="",i=0;i<Dt[t].length;i++)e+=Dt[t][i].apply(this,arguments);return e}}var l=!1;t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(Rt,"\\\\")).replace(Ht,"\\n")).replace(Ft,'\\"')).replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"')).replace(/\{common\.([^}(]*)\}/g,"\"+(common.$1||'')+\"")).replace(/\{common\.([^}(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"')).replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"')).replace("{obj}",'"+obj+"')).replace(/#([^#'";, ]+)#/gi,function(t,e){return"!"==e.charAt(0)?(l=!0,'"+template.escape(obj.'+e.substr(1)+')+"'):'"+(obj.'+e+')+"'});try{if(l){var h=Function("obj","common","marks","value","template",'return "'+t+'";');$t[t]=function(t,e,i,s){return h(t,e,i,s,Vt)}}else $t[t]=Function("obj","common",'return "'+t+'";')}catch(e){_(0,"Invalid template:"+t)}return $t[t]}function Yt(t,e){if(t.$protoWait)return t._webix_type_wait||(t._webix_type_wait=[]),void t._webix_type_wait.push(e);"function"==typeof t&&(t=t.prototype),t.types||(t.types={default:t.type},t.type.name="default");var i=e.name,s=t.type;for(var n in i&&(s=t.types[i]=I(e.baseType?t.types[e.baseType]:t.type)),e)0===n.indexOf("template")?s[n]=Vt(e[n]):s[n]=e[n];return i}Vt.escape=function(t){return void 0===t||null===t?"":(t.toString()||"").replace(Ot,Bt)},Vt.empty=function(){return""};var Wt={};function Xt(t,i,s){var n;e._ui_creation++;var a=e._global_scope;e._global_scope=t.$scope||a;try{n=function(t,i,s){var n,a=R(t),r=D(t.container||i||document.body);r._settings&&(s=function(t,e,i){var s=[t];if(e)s=t.getChildViews();else if(t._body_cell)s=[t._body_cell];else{if("number"==typeof i)return i;if(i)return Gt(s=[Zt(i)]),s[0].config.id}return Gt(s),i}(r,a,s));var o=!1,l=r==document.body;if(t._settings||r&&a?(n=t,o=!0):(r&&l&&(t.$topView=!0),t._inner||(t._inner={}),i&&i.getParentView&&(e._parent_cell=s||0===s?i:i.getParentView()),n=Kt(t)),!l||n.setPosition||n.$apiOnly||p("_fixHeight")(),n._settings&&n._settings._hidden&&!r.$view)n._settings._container=r;else if(!n.$apiOnly)if(r.appendChild)Ut(r,n,t);else if(r.destructor){var h=r;if(s||0===s||R(n)||(s=r,r=r.getParentView()),r&&r._replace){if(o&&n.getParentView){var c=n.getParentView();c&&c._remove&&c._remove(n),n._parent_cell=r,n.$scope=r.$scope}r._replace(n,s)}else{var d=h.$view.parentNode;h.destructor(),Ut(d,n,t)}}else _(0,"Not existing parent:"+t.container);return n}(t,i,s)}finally{e._ui_creation--,e._global_scope=a}return n}function Ut(t,i,s){t.appendChild(i._viewobj),i.getParentView()||(((!i.setPosition||i._settings.fullscreen)&&t==document.body||i._settings.position)&&e.top_views.push(i._destructor_handler),s.skipResize||i.adjust())}function Gt(t){for(var e=t.length-1;e>=0;e--){var i=t[e];delete Wt[i.config.id],i.config.id="x"+$(),Wt[i.config.id]=i,i.getChildViews&&Gt(i.getChildViews()),i._destroy_with_me&&Gt(i._destroy_with_me)}}function qt(t,e){var i=Xt[t];return!!i&&(i.$protoWait&&(i=i.call(-1)),!!Xt[t].prototype[e])}function Kt(t){var e=t.cells||t.rows||t.elements||t.cols;if(e)for(var i=0;i<e.length;i++)null!==e[i]&&void 0!==e[i]||_(0,"You have trailing comma or Null element in collection's configuration");if(t.view){var s=t.view;return _(Xt[s],"unknown view:"+s),new Xt[s](t)}if(t.rows||t.cols){for(var n=t.rows||t.cols,a=!1,r=0;r<n.length;r++)!n[r].body||n[r].view||n[r].align||(a=!0);return a?new Xt.headerlayout(t):new Xt.layout(t)}return t.cells?new Xt.multiview(t):t.template||t.content?new Xt.template(t):t.align&&t.body?new Xt.align(t):new Xt.spacer(t)}function Zt(t){if(!t)return null;if(Wt[t])return Wt[t];var e=t;if("object"==u(t)){if(t._settings)return t;e=t.target||t.srcElement||t}return Wt[lt({target:D(e)},"view_id")]}if(Xt.views=Wt,Xt._view=Kt,void 0===window.$$&&(window.$$=Zt),t.protoUI=function(){var e=arguments[0].name,i=function(s){if(!i)return Xt[e].prototype;var n=i.$protoWait;if(n){for(var a=[n[0]],r=1;r<n.length;r++)a[r]=n[r],a[r].$protoWait&&(a[r]=a[r].call(-1,a[r].name)),a[r].prototype&&a[r].prototype.name&&(Xt[a[r].prototype.name]=a[r]);if(Xt[e]=t.proto.apply(-1,a),i._webix_type_wait)for(var o=0;o<i._webix_type_wait.length;o++)Yt(Xt[e],i._webix_type_wait[o]);i=n=null}return-1!=this?new Xt[e](s):Xt[e]};return i.$protoWait=Array.prototype.slice.call(arguments,0),Xt[e]=i},t.proto=function(){var t=arguments,e=t[0],i=!!e.$init,s=[];_(e,"Invalid mixing target");for(var n=t.length-1;n>0;n--){if(_(t[n],"Invalid mixing source"),"function"==typeof t[n]&&(t[n]=t[n].prototype),t[n].$init&&s.push(t[n].$init),t[n].defaults){var a=t[n].defaults;for(var r in e.defaults||(e.defaults={}),a)P(e.defaults[r])&&(e.defaults[r]=a[r])}if(t[n].type&&e.type)for(var o in t[n].type)e.type[o]||(e.type[o]=t[n].type[o]);for(var l in t[n])e[l]||!1===e[l]||(e[l]=t[n][l])}i&&s.push(e.$init),e.$init=function(){for(var t=0;t<s.length;t++)s[t].apply(this,arguments)},e.$skin&&e.$skin();var h=function(t){this.$ready=[],_(this.$init,"object without init method"),this.$init(t),this._parseSettings&&this._parseSettings(t,this.defaults);for(var e=0;e<this.$ready.length;e++)this.$ready[e].call(this)};return h.prototype=e,e=t=null,h},W("onClick",function(t){var e=Zt(t);if(e&&e.touchable){p("UIManager").applyChanges(e),e.getNode(t);var i=t.target||t.srcElement;if(e.config.disabled)return;var s="";if(i.className&&0===i.className.toString().indexOf("webix_view"))return;for(e&&p("UIManager")._focus_action(e);i&&i.parentNode;){if(i.getAttribute){if(i.getAttribute("view_id"))break;if(s=i.className){s=s.toString().split(" ");for(var n=0;n<s.length;n++)if(e.on_click[s[n]]&&!1===e.on_click[s[n]].call(e,t,e._settings.id,i))return}}i=i.parentNode}if(e._settings.click){var a=F(e._settings.click,e.$scope);a&&a.call&&a.call(e,e._settings.id,t)}var r=e._settings.popup;e._settings.popup&&!e._settings.readonly&&("object"!=u(r)||r.name||(r=e._settings.popup=Xt(r)._settings.id),_(r=Zt(r),"Unknown popup"),r.isVisible()||(r._settings.master=e._settings.id,r.show(e.getInputNode()||e.getNode(),null,!0))),e.callEvent("onItemClick",[e._settings.id,t])}}),window.webix_on_core_ready){var Jt=window.webix_on_core_ready({proto:t.proto,protoUI:t.protoUI});t.proto=Jt.proto,t.protoUI=Jt.protoUI}var Qt={};function te(){for(var t in Qt)se(t)}function ee(t,e,i,s){(s=s||{}).inner=!0,ie(t,e,i,s)}function ie(t,e,s,n){n=n||{},_(t=D(t),"Invalid node as target for webix.event");var a=n.id||$();n.bind&&(s=T(s,n.bind));var r=[t,e,s,n.capture];n.inner||(Qt[a]=r);var o=!!n.capture;return!P(n.passive)&&i.passiveEventListeners&&(o={passive:n.passive,capture:o}),t.addEventListener?t.addEventListener(e,s,o):t.attachEvent&&t.attachEvent("on"+e,r[2]=function(){return s.apply(t,arguments)}),a}function se(t){if(t){_(Qt[t],"Removing non-existing event");var e=Qt[t];e[0].removeEventListener?e[0].removeEventListener(e[1],e[2],!!e[3]):e[0].detachEvent&&e[0].detachEvent("on"+e[1],e[2]),delete Qt[t]}}var ne={$init:function(t){if(t.activeContent)for(var i in this.$ready.push(this._init_active_content_list),this._active_holders={},this._active_holders_item={},this._active_holders_values={},this._active_references={},t.activeContent)if(this[i]=this._bind_active_content(i),t.activeContent[i].earlyInit){var s=e._parent_cell;e._parent_cell=null,this[i].call(this,{},this,t.activeContent),e._parent_cell=s}},_destructActiveContent:function(){for(var t in this._active_references){var e=this._active_references[t];e.destructor&&e.destructor()}},_init_active_content_list:function(){if(this.attachEvent("onDestruct",T(this._destructActiveContent,this)),ee(this.$view,"blur",function(t){var e=t.target||t.srcElement;if("BUTTON"!=e.tagName){var i=Zt(t);if(i&&i!==this&&i.getValue&&i.setValue){i.getNode(t);var s=i.getValue();s!=i._settings.value&&i.setValue(s)}}},{bind:this,capture:!0}),this.filter){for(var t in this._settings.activeContent)this.type[t]=this[t],this[t]=this._locate_active_content_by_id(t);this.attachEvent("onBeforeRender",function(){this.type.masterUI=this}),this.type.masterUI=this}},_locate_active_content_by_id:function(t){return function(e){for(var i=this._active_references[t],s=i._settings.id,n=this.getItemNode(e).getElementsByTagName("DIV"),a=0;a<n.length;a++)if(n[a].getAttribute("view_id")==s){i._viewobj=i._dataobj=n[a];break}return i}},_get_active_node:function(t,e,i){return function(s){if(s)for(var n=s.target||s.srcElement;n;){if(n.getAttribute&&n.getAttribute("view_id")){if(i._setActiveContentView(t,n),i.locate){var a=i.locate(n.parentNode),r=i._active_holders_values[e][a];t._settings.value=r,t._settings.$masterId=a}return n}n=n.parentNode}return t._viewobj}},_set_new_active_value:function(t,e){return function(i){var s=e.data;if(e.filter){var n=e.locate(this._viewobj.parentNode);s=e.getItem(n),this.refresh(),e._active_holders_item[t][n]=this._viewobj.outerHTML||(new XMLSerializer).serializeToString(this._viewobj),e._active_holders_values[t][n]=i}s&&(s[t]=i)}},_bind_active_content:function(t){return function(e,s,n){var a=s._active_holders?s:s.masterUI;if(!a._active_holders[t]){var r=document.createElement("DIV"),o=Xt((n=n||a._settings.activeContent)[t],r);i.isIE8?r.firstChild.setAttribute("onclick","event.processed = true; event.srcElement.w_view = '"+o._settings.id+"';"):r.firstChild.setAttribute("onclick","event.processed = true; "),o.getNode=a._get_active_node(o,t,a),o.attachEvent("onChange",a._set_new_active_value(t,a)),a._active_references[t]=o,a._active_holders[t]=r.innerHTML,a._active_holders_item[t]={},a._active_holders_values[t]={},o.$activeEl=o.$view}if(a.filter&&e[t]!=a._active_holders_values[t]&&!P(e[t])){var l=a._active_references[t];l.blockEvent(),a._setActiveContentView(l,l.$activeEl),l.$view.firstChild||l.refresh(),l.setValue(e[t]),l.refresh(),l.unblockEvent(),a._active_holders_values[t][e.id]=e[t],a._active_holders_item[t][e.id]=l._viewobj.outerHTML||(new XMLSerializer).serializeToString(l._viewobj)}return a._active_holders_item[t][e.id]||a._active_holders[t]}},_setActiveContentView:function(t,e){t._dataobj=t._viewobj=t.$view=e}},ae={$proxy:!0,load:function(){var t=this.source.split("@"),e=t[0].split(".").pop();return zt().response("arraybuffer").get(t[0]).then(function(i){var s={ext:e,dataurl:t[1]};return{data:i,options:s}})}},re={$proxy:!0,connectorName:"!nativeeditor_status",load:function(){return zt(this.source)},saveAll:function(t,i){for(var s=this.source,n={},a=[],r=0;r<i.length;r++){var o=i[r];for(var l in a.push(o.id),o.data)0!==l.indexOf("$")&&(n[o.id+"_"+l]=o.data[l]);n[o.id+"_"+this.connectorName]=o.operation}return n.ids=a.join(","),n.webix_security=e.securityKey,s+=-1==s.indexOf("?")?"?":"&",s+="editing=true",zt().post(s,n).then(function(t){if(!(t=t.xml()))throw"Data loading error";var e=t.data.action;e.length||(e=[e]);for(var i=[],s=0;s<e.length;s++){var n=e[s];n.status=n.type,n.id=n.sid,n.newid=n.tid,i.push(n)}return i})}},oe={$proxy:!0,load:function(){},save:function(t,e,i){L(function(){window.console.log("[DP] "+e.id+" -> "+e.operation,e.data);var t={id:e.data.id,newid:e.data.id,status:e.data.operation};i.processResult(t,t)})}},le={$proxy:!0,init:function(){this.clientId=this.clientId||$()},load:function(e){var i=this.clientId;this.client.subscribe(this.source,function(s){s.clientId!=i&&p("dp")(e).ignore(function(){if("delete"==s.operation)e.remove(s.data.id);else if("insert"==s.operation)e.add(s.data);else if("update"==s.operation){var i=e.getItem(s.data.id);i&&(t.extend(i,s.data,!0),e.refresh(i.id))}})})},save:function(t,e){e.clientId=this.clientId,this.client.publish(this.source,e)}},he={$proxy:!0,create:function(t,e,i,s){this.source=t+"/",this._get_db(s,i,function(t){var i=t.target.result;for(var s in e)for(var n=e[s],a=i.createObjectStore(s,{keyPath:"id",autoIncrement:!0}),r=0;r<n.length;r++)a.put(n[r])})},_get_db:function(t,e,i){if(-1!=this.source.indexOf("/")){var s=this.source.split("/");this.source=s[1],e=e||s[2];var n,a=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB;n=e?a.open(s[0],e):a.open(s[0]),i&&(n.onupgradeneeded=i),n.onerror=function(){},n.onblocked=function(){},n.onsuccess=T(function(e){this.db=e.target.result,t&&t.call(this)},this)}else this.db?t.call(this):L(this._get_db,this,[t],50)},load:function(){var t=Mt.defer();return this._get_db(function(){var e=this.db.transaction(this.source).objectStore(this.source),i=[],s=e.openCursor();s.onsuccess=function(e){var s=e.target.result;s?(i.push(s.value),s.continue()):t.resolve(i)},s.onerror=function(e){t.reject(e)}}),t},save:function(t,e){var i=Mt.defer();return this._get_db(function(){var t,s=e.operation,n=e.data,a=e.id,r=this.db.transaction([this.source],"readwrite").objectStore(this.source);"delete"==s?t=r.delete(a):"update"==s?t=r.put(n):"insert"==s&&(delete n.id,t=r.add(n)),t.onsuccess=function(t){var n={status:s,id:e.id};"insert"==s&&(n.newid=t.target.result),i.resolve(n)},t.onerror=function(t){i.reject(t)}}),i}},ce={$proxy:!0,load:function(){return zt(this.source)},save:function(t,e){return ce._save_logic.call(this,e,zt())},_save_logic:function(t,e){var i=this.source,s="",n=i.indexOf("?");-1!==n&&(s=i.substr(n),i=i.substr(0,n)),i+="/"==i.charAt(i.length-1)?"":"/";var a=t.operation,r=t.data;return"insert"==a&&delete r.id,"update"==a?e.put(i+r.id+s,r):"delete"==a?e.del(i+r.id+s,r):e.post(i+s,r)}},de={$proxy:!0,load:function(){return zt(this.source)},save:function(t,e){var i=zt().headers({"Content-Type":"application/json"});return ce._save_logic.call(this,e,i)}},ue={$proxy:!0,load:function(e,i){return i=t.extend(i||{},this.params||{},!0),zt().post(this.source,i)}},fe={toObject:function(t){return"string"==typeof t?JSON.parse(t):t},getRecords:function(t){return t&&t.data&&(t=t.data),t},getDetails:function(t){for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return null!==this.idColumn&&(e.id=t[this.idColumn]),e},getOptions:function(){return!1},getInfo:function(){return{size:0}},idColumn:null},ge={toObject:function(t){if("string"==typeof t){var e=null;return-1==t.indexOf("<")&&(e=D(t)),e||((e=document.createElement("DIV")).innerHTML=t),e.firstChild}return t},getRecords:function(t){return t.getElementsByTagName(this.tag)},getDetails:function(t){return Pt.tagToObject(t)},getOptions:function(){return!1},getInfo:function(){return{size:0}},tag:"LI"},pe={toObject:function(t){_(t=D(t),"table is not found"),_("table"===t.tagName.toLowerCase(),"Incorrect table object");var e=t.rows;return rt(t),e},getRecords:function(t){for(var e=[],i=t[0]&&t[0]._webix_skip?1:0;i<t.length;i++)e.push(t[i]);return e},getDetails:function(t){var e=t.getElementsByTagName("td");t={};for(var i=0;i<e.length;i++)t["data"+i]=e[i].innerHTML;return t},getInfo:function(){return{size:0}},getOptions:function(){},
/*! gets header from first table row
	   **/
getConfig:function(e){var i=[],s=e[0].getElementsByTagName("th");s.length&&(e[0]._webix_skip=!0);for(var n=0;n<s.length;n++){var a={id:"data"+n,header:this._de_json(s[n].innerHTML)},r=this._get_attrs(s[n]);a=t.extend(a,r),i.push(a)}return i},_de_json:function(t){var e=t.indexOf("json://");return-1!=e&&(t=JSON.parse(t.substr(e+7))),t},
/*! gets hash of html-element attributes
	   **/
_get_attrs:function(t){for(var e=t.attributes,i={},s=0;s<e.length;s++)i[e[s].nodeName]=this._de_json(e[s].nodeValue);return i.width=parseInt(i.width,10),i}},_e={};function ve(t,e,i){var s=Mt.defer();if(e&&!0!==e&&(s=s.then(function(){e.call(i||this)})),ve.disabled)return s.resolve(),s;if("string"!=typeof t){var n=t.length||0;if(n){var a=function(){n?(n--,ve(t[t.length-n-1]).then(a,function(){return s.reject()})):s.resolve()};a()}else{for(var r in t)n++;var o=function(){0==--n&&s.resolve()};for(var l in t)ve(l).then(o,function(){return s.reject()})}return s}if(!0!==_e[t]){var h=t;if(!0===e)return M(zt().sync().get(h).responseText),_e[t]=!0,s.resolve();if(_e[t])return _e[t].push(s),s;_e[t]=[s];var c=function(){var e=_e[t];_e[t]=!1;for(var i=0;i<e.length;i++)e[i].reject()},d=function(){var e=_e[t];_e[t]=!0;for(var i=0;i<e.length;i++)e[i].resolve()},u=t.split("?");if(".css"==u[0].substr(u[0].length-4)){var f=nt("LINK",{type:"text/css",rel:"stylesheet",href:h});f.onload=d,f.onerror=c,document.getElementsByTagName("head")[0].appendChild(f)}else{var g=document.createElement("script");g.onload=d,g.onerror=c,document.getElementsByTagName("head")[0].appendChild(g),g.src=h}}else s.resolve();return s}var me=t.extend({toObject:function(e){if(!e.excel){var i=e.options||{};i.dataurl&&t.extend(i,this._urlToOptions(i.dataurl)),e=e.data||e;var s=Mt.defer();if(e.name){i.ext=e.name.split(".").pop();var n=new FileReader;n.onload=T(function(t){s.resolve(this.parseData(t.target.result,i))},this),n.readAsArrayBuffer(e)}else s.resolve(this.parseData(e,i));return s}return e},parseData:function(e,s){e=new Uint8Array(e);for(var n=[],a=0;a!=e.length;++a)n[a]=String.fromCharCode(e[a]);var r=(s.ext||s).toLowerCase();return"xls"!=r&&(r="xlsx"),ve(i.cdn+"/extras/xlsx.core.styles.min.js").then(T(function(){var e="xls"==r?XLS.read(n.join(""),{type:"binary",cellStyles:!0,cellDates:!0}):XLSX.read(n.join(""),{type:"binary",cellStyles:!0,cellDates:!0}),i={sheets:e.Sheets,names:e.SheetNames,options:s,ranges:e.Workbook&&e.Workbook.Names||[]};return t.extend(this.getSheet(i,s),i)},this))},getSheet:function(t,e){var i=e.name||t.names[0];return t=this.sheetToArray(t.sheets[i],e),e.rows&&e.rows.length&&(t.data=t.data.splice(e.rows[0],Math.min(e.rows[1],t.data.length)-e.rows[0])),t},sheetToArray:function(t,e){var i=[],s=[],n=[],a=[];if(t&&t["!ref"]){var r,o,l,h,c=XLS.utils.decode_range(t["!ref"]),d=c.s.c,u=c.s.r+(e.rows?e.rows[0]:0);for(r=c.s.r;r<=c.e.r;r++){var f=[];for(o=c.s.c;o<=c.e.c;o++)if(l=XLS.utils.encode_cell({r:r,c:o}),h=t[l]){var g="";g=e.math&&h.f?"="==h.f.charAt(0)?h.f:"="+h.f:"d"==h.t&&j(h.v)?St.dateFormatStr(h.v):h.v,f.push(g),h.s&&n.push([r-u,o-d,h.s])}else f.push("");i.push(f)}if(t["!merges"])for(var p=t["!merges"],_=0;_<p.length;_++){var v=p[_].s,m=p[_].e;(!e.rows||v.r-u>=0&&m.r-u<=e.rows[1])&&s.push([v.r-u,v.c-d,m.c-v.c+1,m.r-v.r+1])}if(t["!cols"])for(var b=t["!cols"],x=0;x<b.length;x++)b[x]&&a.push(["column",x-d,Math.round(b[x].wch/(8.43/70))]);if(t["!rows"])for(var y=t["!rows"],w=0;w<y.length;w++)y[w]&&a.push(["row",w-u,y[w].hpx])}return{data:i,spans:s,styles:n,sizes:a,excel:!0}},_urlToOptions:function(t){var e=t.split("["),i={};if(i.name=e[0],e[1]){var s=e[1].split(/[^0-9]+/g);s[0]=1*s[0]||0,s[1]=1*s[1]||9999999,i.rows=s}return i}},fe),be={json:Lt,jsarray:fe,xml:Pt,csv:{toObject:function(t){return t},getRecords:function(t){return t.split(this.row)},getDetails:function(t){t=this.stringToArray(t);for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return null!==this.idColumn&&(e.id=t[this.idColumn]),e},getOptions:function(){return!1},getInfo:function(){return{size:0}},stringToArray:function(t){t=t.split(this.cell);for(var e=0;e<t.length;e++)t[e]=t[e].replace(/^[ \t\n\r]*("|)/g,"").replace(/("|)[ \t\n\r]*$/g,"");return t},idColumn:null,row:"\n",cell:","},html:ge,htmltable:pe,excel:me},xe={prefix:function(t,e){return t+=".",{put:function(i,s){return e.put(t+i,s)},get:function(i){return e.get(t+i)},remove:function(i){return e.remove(t+i)}}}};xe.local={put:function(t,e){t&&window.JSON&&window.localStorage&&window.localStorage.setItem(t,kt(e))},get:function(t){if(t&&window.JSON&&window.localStorage){var e=window.localStorage.getItem(t);return e?be.json.toObject(e):null}return null},remove:function(t){t&&window.JSON&&window.localStorage&&window.localStorage.removeItem(t)},clear:function(){window.localStorage.clear()}},xe.session={put:function(t,e){t&&window.JSON&&window.sessionStorage&&window.sessionStorage.setItem(t,kt(e))},get:function(t){if(t&&window.JSON&&window.sessionStorage){var e=window.sessionStorage.getItem(t);return e?be.json.toObject(e):null}return null},remove:function(t){t&&window.JSON&&window.sessionStorage&&window.sessionStorage.removeItem(t)},clear:function(){window.sessionStorage.clear()}},xe.cookie={put:function(t,e,s,n){t&&window.JSON&&(document.cookie=t+"="+escape(kt(e))+(n&&n instanceof Date?";expires="+n.toUTCString():"")+(s?";domain="+s:"")+(i.https?";secure":""))},getRaw:function(t){for(var e=document.cookie.split(";"),i="",s="",n=0;n<e.length;n++){if((i=e[n].split("="))[0].replace(/^\s+|\s+$/g,"")==t)return i.length>1&&(s=unescape(i[1].replace(/^\s+|\s+$/g,""))),s;i=null}return null},get:function(t){if(t&&window.JSON){var e=this.getRaw(t);return e?be.json.toObject(unescape(e)):null}return null},remove:function(t,e){t&&this.getRaw(t)&&(document.cookie=t+"="+(e?";domain="+e:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")},clear:function(t){for(var e=document.cookie.split(";"),i=0;i<e.length;i++)document.cookie=/^[^=]+/.exec(e[i])[0]+"="+(t?";domain="+t:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}};var ye={$proxy:!0,storage:xe.local,cache:!1,local:!1,data:"",_is_offline:function(){this.cache||i.offline||(Y("onOfflineMode",[]),i.offline=!0)},_is_online:function(){!this.cache&&i.offline&&(i.offline=!1,Y("onOnlineMode",[]))},_on_success:function(t){this._is_online(),this.setCache(t)},_on_error:function(t){this._is_offline();var e=this.getCache()||this.data;t.parse(e)},load:function(t){var e,i=this;if(!this.cache||!this.getCache())return(e=this.source.$proxy?this.source.load(t):zt().get(this.source))&&e.then&&e.then(function(t){i._on_success(t.text())},function(){i._on_error(t)}),e;this._on_error(t)},getCache:function(){return this.storage.get(this._data_name())},clearCache:function(){this.storage.remove(this._data_name())},setCache:function(t){this.storage.put(this._data_name(),t)},_data_name:function(){return this.source.$proxy?this.source.source+"_$proxy$_data":this.source+"_$proxy$_data"},save:function(t,e,s){if(!i.offline&&!this.cache)return this.source.$proxy?this.source.save(t,e,s):zt().post(this.source,e.data)},saveAll:function(t,e){this.setCache(t.serialize()),e=this.cache||i.offline?e:[];for(var s=0;s<e.length;s++)e[s]={id:e[s].id,status:e[s].operation};return Mt.resolve(e)}},we={init:function(){t.extend(this,ye)},cache:!0},Se={init:function(){t.extend(this,ye)},cache:!0,local:!0,data:[]},ke={$proxy:!0,save:function(t){return this.load(t)},load:function(t){var e={query:this.source};return 1===arguments.length&&(e.variables=t),zt().headers({"Content-type":"application/json"}).post(this.url,e).then(function(t){return function(t){if(!t||"object"===!u(t)||Array.isArray(t))return t;var e="",i=0;for(var s in t){if(2==++i)return t;e=s}return t[e]}(t.json().data)})}};function Ce(e,i,s){_(Ce[e],"Invalid proxy name: "+e);var n=E(Ce[e]);return n.source=i,s&&t.extend(n,s,!0),n.init&&n.init(),n}Ce.$parse=function(t){if("string"==typeof t&&-1!=t.indexOf("->")){var e=t.split("->");return Ce(e[0],e[1])}return t},Ce.binary=ae,Ce.connector=re,Ce.debug=oe,Ce.faye=le,Ce.indexdb=he,Ce.json=de,Ce.post=ue,Ce.rest=ce,Ce.offline=ye,Ce.cache=we,Ce.local=Se,Ce.local=Se,Ce.GraphQL=ke;var Ae={$init:function(t){this.data={},this.waitData=Mt.defer(),t&&(this._settings.datatype=t.datatype||"json"),this.$ready.push(this._load_when_ready)},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(t){return t=Ce.$parse(t),this._ready_for_data?(this.load(t,this._settings.datatype),t):t},data_setter:function(t){return this._ready_for_data?(this.parse(t,this._settings.datatype),!0):t},load:function(t,e){var i,s=this,n=arguments[2]||null;if(!this.callEvent("onBeforeLoad",[]))return Mt.reject();"string"==typeof e?(this.data.driver=be[e],e=arguments[2]):this.data.driver||(this.data.driver=be.json),t=Ce.$parse(t),(i=t.$proxy&&t.load?t.load(this,n):"function"==typeof t?t.call(this,n):zt().bind(this).get(t))&&!i.then&&(i=Mt.resolve(i));var a=this._data_generation;return i&&i.then&&i.then(function(t){if(s.$destructed||a&&s._data_generation!==a)return Mt.reject();s._onLoad(t),e&&zt.$callback(s,e,"",t,-1)},function(t){return s._onLoadError(t,a)}),i},parse:function(t,e){if(t&&"function"==typeof t.then){var i=this._data_generation;return t.then(T(function(t){if(this.$destructed||i&&this._data_generation!==i)return Mt.reject();this.parse(t,e)},this))}if(t&&t.sync&&this.sync)this._syncData(t);else{if(!this.callEvent("onBeforeLoad",[]))return Mt.reject();this.data.driver=be[e||"json"],this._onLoad(t)}return Mt.resolve()},_syncData:function(t){this.data&&this.data.attachEvent("onSyncApply",T(function(){this._call_onready&&this._call_onready()},this)),this.sync(t)},_parse:function(t){var e,i,s=this.data.driver;i=s.getRecords(t)[0],e=i?s.getDetails(i):{},this.setValues?this.setValues(e):this.data=e},_onLoadContinue:function(t){t?this.$onLoad&&this.$onLoad(t,this.data.driver)||(this.data&&this.data._parse?this.data._parse(t):this._parse(t)):this._onLoadError(t),this._call_onready&&this._call_onready(),this.callEvent("onAfterLoad",[]),this.waitData.resolve()},_onLoad:function(t){var e=this;t&&"function"==typeof t.text&&(t=t.text()),(t=this.data.driver.toObject(t))&&t.then?t.then(function(t){return e._onLoadContinue(t)}):this._onLoadContinue(t)},_onLoadError:function(t,e){return this.$destructed||e&&this._data_generation!==e||(this.callEvent("onAfterLoad",[]),this.callEvent("onLoadError",arguments)),Y("onLoadError",[t,this]),Mt.reject(t)},_check_data_feed:function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),!!this.callEvent("onBeforeLoad",[])&&(zt(e,function(t,e,i){this._ignore_feed=!0;var s=be.json,n=s.toObject(t,e);n?this.setValues(s.getDetails(s.getRecords(n)[0])):this._onLoadError(i),this._ignore_feed=!1,this.callEvent("onAfterLoad",[])},this),!1))}},Ie={_toHTML:function(t){return t.$empty?"":this._settings.template(t,this)},render:function(){var t=this._settings;return!!this.isVisible(t.id)&&(this.callEvent&&!this.callEvent("onBeforeRender",[this.data])||(this.data&&!t.content&&(this._dataobj.innerHTML="",this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[])),!0)},sync:function(t){this._backbone_sync=!1,"DataStore"!=t.name&&(t.data&&"DataStore"==t.name?t=t.data:this._backbone_sync=!0),this._backbone_sync?t.bind("change",T(function(t){t.id==this.data.id&&(this.data=t.attributes,this.refresh())},this)):t.attachEvent("onStoreUpdated",T(function(e){e&&e!=this.data.id||(this.data=t.pull[e],this.refresh())},this))},template_setter:Vt},Ee={_auto_scroll:function(t){var e,i,s=this._settings.dragscroll;"string"!=typeof s&&(s=this._settings.layout||"xy"),i=-1!==s.indexOf("x"),e=-1!==s.indexOf("y");var n=this._body||this.$view,a=ht(n),r=Math.max((this._settings.rowHeight||(this.type&&!isNaN(parseFloat(this.type.height))?this.type.height:0))+5,40),o=!1;e&&this._auto_y_scroll(t,a,r)&&(o=!0),i&&this._auto_x_scroll(t,a,r)&&(o=!0),o&&(this._auto_scroll_delay=L(this._auto_scroll,this,[t],100))},_auto_scroll_column:function(t){var e=this._settings.dragscroll;if("string"!=typeof e||-1!==e.indexOf("x")){var i=this._header||this.$view,s=ht(i),n=Math.max(this._settings.headerRowHeight||0,40);this._auto_x_scroll(t,s,n)&&(this._auto_scroll_delay=L(this._auto_scroll_column,this,[t],100))}},_auto_y_scroll:function(t,e,i){var s=e.y,n=s+e.height,a=this.getScrollState(),r=this._settings;if(r.topSplit){var o=this._cellPosition(this.getIdByIndex(r.topSplit-1),this.columnId(0));s+=o.top+o.height}return t.y<s+i?(this._auto_scrollTo(a.x,a.y-2*i,t),!0):t.y>n-i&&(this._auto_scrollTo(a.x,a.y+2*i,t),!0)},_auto_x_scroll:function(t,e,i){var s=e.x,n=s+e.width,a=this.getScrollState();return t.x<s+i?(this._auto_scrollTo(a.x-2*i,a.y,t),!0):t.x>n-i&&(this._auto_scrollTo(a.x+2*i,a.y,t),!0)},_auto_scrollTo:function(t,e,i){this.callEvent("onBeforeAutoScroll",[i])&&this.scrollTo(t,e)}},Te={_tooltip_masters:H(["dummy"]),_tooltip_exist:0,delay:400,addTooltip:function(t,e){var i,s,n=this;_(t=D(t),"Target isn't defined"),t instanceof Element?(i=t,"string"==typeof e?i.setAttribute("webix_tooltip",e):s=e):(i=t.$view,s=t),s=s||this;var a=this._tooltip_masters.find(s);-1===a&&(a=this._tooltip_masters.length,this._tooltip_masters.push(s)),i.webix_tooltip=a,this._tooltip_exist++,this._tooltip||(this._tooltip=new Xt.tooltip({}),this._webix_tooltip_mm=ie(document,"mousemove",this._move_tooltip,{bind:this}),this._webix_tooltip_ml=ie(document,"mouseleave",this._hide_tooltip,{bind:this}),this._drag_event=W("onDragMode",function(){n._hide_tooltip()}),this._click_event=W("onClick",function(){n._hide_tooltip()}))},getTooltip:function(){return this._tooltip},_move_tooltip:function(t){for(var e,i=t.target||t.srcElement;i instanceof Element&&"HTML"!=i.tagName;){if(this._tooltip_masters[i.webix_tooltip])return this._last&&this._last!=i?(this.$tooltipOut(this._last,i,t),void(this._last=null)):(this._last||(this._last=this.$tooltipIn(i,t)),void this.$tooltipMove(i,t,e));e=e||i.getAttribute("webix_tooltip"),i=i.parentElement}this._last&&(this._last=this.$tooltipOut(this._last,null,t))},_hide_tooltip:function(){clearTimeout(this._before_show_delay),this._tooltip.hide()},getMaster:function(t){return this._tooltip_masters[t.webix_tooltip]},removeTooltip:function(t){var e;_(t,"Target isn't defined"),t=D(t),(e=t instanceof Element?t:t.$view).webix_tooltip&&(this._last==e&&(this._hide_tooltip(),this._last=null),delete e.webix_tooltip,this._tooltip_exist--),!this._tooltip_exist&&this._tooltip&&(this._webix_tooltip_mm=se(this._webix_tooltip_mm),this._webix_tooltip_ml=se(this._webix_tooltip_ml),this._drag_event=X(this._drag_event),this._click_event=X(this._click_event),this._tooltip.destructor(),this._tooltip=this._last=null,this._tooltip_masters=H(["dummy"]))},$tooltipIn:function(t,e){var i=this._tooltip_masters[t.webix_tooltip];return i.$tooltipIn&&i!=this?i.$tooltipIn(t,e):(this._tooltip.define({dx:20,dy:0,template:t.getAttribute("webix_tooltip")||"",css:""}),t)},$tooltipOut:function(t,e,i){var s=this._tooltip_masters[t.webix_tooltip];return s.$tooltipOut&&s!=this?s.$tooltipOut(t,e,i):(this._hide_tooltip(),null)},$tooltipMove:function(t,e,i){var s=this._tooltip_masters[t.webix_tooltip];if(s.$tooltipMove&&s!=this)return s.$tooltipMove(t,e,i);this._tooltip.hide(),clearTimeout(this._before_show_delay),this._before_show_delay=L(this._tooltip.show,this._tooltip,[i||{},dt(e)],this.delay)}};function Me(t){return"$"+t+(Pe[t]=(Pe[t]||0)+1)}var Pe={},Le=!1;function ze(t,e){Le=!0;var i=t();return i&&i.then?i=i.then(function(t){return Le=!1,!1!==e&&Ne(),t}):(Le=!1,!1!==e&&Ne()),i}function Ne(){if(p("UIManager").applyChanges(),Y("onClick",[]),e._force_resize=!0,!Le)for(var t=e.top_views.length-1;t>=0;t--)e.top_views[t].obj&&e.top_views[t].obj.resize();e._force_resize=!1}function $e(t,e,i,s){if(t)for(var n=s?[t]:t.getChildViews(),a=0;a<n.length;a++)!1!==e.call(i,n[a])&&$e(n[a],e,i)}function De(){return i.zIndexBase++}function He(t){Fe?t.call():Re.push(t)}ie(window,"resize",function(){i.touch&&e._focus_time&&new Date-e._focus_time<1e3||Ne()});var Fe=!1,Re=[],je=document.getElementsByTagName("SCRIPT");_(je.length,"Can't locate codebase"),je.length&&((je=(je[je.length-1].getAttribute("src")||"").split("/")).splice(je.length-1,1),i.codebase=je.slice(0,je.length).join("/")+"/");var Oe=function(){i.isIE&&(document.body.className+=" webix_ie"),Y("onReady",[])},Be=function(){Fe=!0,window.webix_ready&&R(webix_ready)&&(Re=webix_ready.concat(Re));for(var t=0;t<Re.length;t++)Re[t].call();Re=[]};W("onReady",function(t){t?Be():L(Be)}),"complete"==document.readyState?Oe():ie(window,"load",Oe),He(function(){ie(document.body,"click",function(t){Y("onClick",[t||ie])})});var Ve={_view:null,_hotkeys:{},_focus_time:0,_tab_time:0,_mouse_time:0,_controls:{enter:13,tab:9,esc:27,escape:27,up:38,down:40,left:37,right:39,pgdown:34,pagedown:34,pgup:33,pageup:33,end:35,home:36,insert:45,delete:46,backspace:8,space:32,meta:91,win:91,mac:91,multiply:106,add:107,subtract:109,decimal:110,divide:111,scrollock:145,pausebreak:19,numlock:144,"5numlocked":12,shift:16,capslock:20},_inputs:{input:1,button:1,textarea:1,select:1},_enable:function(){ie(document.body,"click",T(this._focus_click,this)),ie(document,"keydown",T(this._keypress,this)),ee(document.body,"mousedown",T(function(){this._mouse_time=new Date},this)),document.body.addEventListener&&ie(document.body,"focus",this._focus_tab,{capture:!0,bind:this}),e.destructors.push({obj:this})},destructor:function(){Ve._view=null},getFocus:function(){return this._view},_focus_action:function(t){this._focus_was_there=this._focus_was_there||t._settings.id},setFocus:function(t,i,s){return(t=Zt(t))&&!t.$view&&(t=null),this._focus_time=e._focus_time=new Date,this._view===t||(this._view&&this._view.callEvent&&this._view.callEvent("onBlur",[this._view]),t&&t.callEvent&&(t.callEvent("onFocus",[t,this._view]),s&&t.callEvent("onTabFocus",[t,this._view])),Y("onFocusChange",[t,this._view]),this._view&&this._view.blur&&!i&&this._view.blur(),this._view=t,t&&t.focus&&!i&&t.focus(),!0)},applyChanges:function(t){var e=this.getFocus();e&&e!=t&&e._applyChanges&&e._applyChanges(t)},hasFocus:function(t){return t===this._view},_focus:function(t,i){var s=lt(t,"view_id")||this._focus_was_there;if(s=Zt(s),this._focus_was_there=null,e._focus_time=new Date,s!=this._view)return i||(this._focus_was_there=null),s?(s=Zt(s),this.canFocus(s)&&(s.getNode&&s.getNode(t),this.setFocus(s))):i||this.setFocus(null),!0},_focus_click:function(t){return new Date-this._focus_time<100?(this._focus_was_there=null,!1):this._focus(t)},_focus_tab:function(t){return!!this._inputs[t.target.nodeName.toLowerCase()]&&this._focus(t,!0)},_top_modal:function(t){if(!document.querySelector(".webix_modal"))return!0;var i=t.queryView(function(t){return t.config.modal},"parent");return i&&i.$view.style.zIndex>=e._modality},canFocus:function(t){return t.isVisible()&&t.isEnabled()&&!t.config.disabled&&this._top_modal(t)&&!t.queryView({disabled:!0},"parent")},_moveChildFocus:function(t){var e=this.getFocus();if(t&&!this._is_child_of(t,e))return!1;this._focus_logic("getPrev",t)||(this._view=null)},_translation_table:{},_is_child_of:function(t,e){if(!t)return!1;if(!e)return!1;for(;e;){if(e===t)return!0;e=e.getParentView()}return!1},_keypress_timed:function(){this&&this.callEvent&&this.callEvent("onTimedKeyPress",[])},_isNumPad:function(t){return t<112&&t>105},_keypress:function(t){var e=t.which||t.keyCode;e>95&&e<106&&(e-=48),e=this._translation_table[e]||e;var i=t.ctrlKey,s=t.shiftKey,n=t.altKey,a=t.metaKey,r=this._keycode(e,i,s,n,a),o=this.getFocus();o&&o.callEvent&&(!1===o.callEvent("onKeyPress",[e,t])&&ut(t),o.hasEvent("onTimedKeyPress")&&(clearTimeout(o._key_press_timeout),o._key_press_timeout=L(this._keypress_timed,o,[],o._settings.keyPressTimeout||250))),this._isNumPad(e)||(r=this._keycode(String.fromCharCode(e),i,s,n,a));var l=!i&&!n&&!a&&9!=e&&27!=e&&13!=e;if(!1===this._check_keycode(r,l,t))return ut(t),!1},_focus_logic:function(t,e){var i=e||this.getFocus();if(i){t=t||"getNext";for(var s=i,n=$();;){if((i=this[t](i))&&this.canFocus(i))return this.setFocus(i);if(i===s||i.$fmarker==n)return e&&document.activeElement.blur(),null;i.$fmarker=n}}},_tab_logic:function(t,e){var i=!e.shiftKey;if(Ve._tab_time=new Date,t&&t._custom_tab_handler&&!t._custom_tab_handler(i,e))return!1;if(t&&t._in_edit_mode){if(t.editNext)return t.editNext(i);if(t.editStop)return t.editStop(),!0}else L(function(){if((t=Zt(document.activeElement))&&!Ve.canFocus(t))return Ve._focus_logic(i?"getNext":"getPrev",t);Ve.setFocus(t,!0,!0)})},getTop:function(t){for(var e,i=Zt(t);i&&(e=i.getParentView());)i=e;return i},getNext:function(t,e){var i=t.getChildViews();if(i.length&&!e)for(var s=0;s<i.length;s++)if(this.canFocus(i[s]))return i[s];var n=t.getParentView();if(!n)return t;var a=n.getChildViews();if(a.length)for(var r=O.find.call(a,t)+1;r<a.length;){if(this.canFocus(a[r]))return a[r];r++}return this.getNext(n,!0)},getPrev:function(t,e){var i=t.getChildViews();if(i.length&&e)for(var s=i.length-1;s>=0;s--)if(this.canFocus(i[s]))return this.getPrev(i[s],!0);if(e&&this.canFocus(t))return t;var n=t.getParentView();if(!n)return this.canFocus(t)?this.getPrev(t,!0):t;var a=n.getChildViews();if(a)for(var r=O.find.call(a,t)-1;r>=0;){if(this.canFocus(a[r]))return this.getPrev(a[r],!0);r--}return this.getPrev(n,!0)},addHotKey:function(t,e,i){_(e,"Hot key handler is not defined");var s=this._parse_keys(t);_(s.letter,"Unknown key code"),i||(i=null),s.handler=e,s.view=i;var n=this._keycode(s.letter,s.ctrl,s.shift,s.alt,s.meta);return this._hotkeys[n]||(this._hotkeys[n]=[]),this._hotkeys[n].push(s),t},removeHotKey:function(t,e,i){var s=this._parse_keys(t),n=this._keycode(s.letter,s.ctrl,s.shift,s.alt,s.meta);if(e||i){var a=this._hotkeys[n];if(a){for(var r=a.length-1;r>=0;r--)i&&a[r].view!==i||e&&a[r].handler!==e||a.splice(r,1);a.length||delete this._hotkeys[n]}}else delete this._hotkeys[n]},_keycode:function(t,e,i,s,n){return t+"_"+["",e?"1":"0",i?"1":"0",s?"1":"0",n?"1":"0"].join("")},_check_keycode:function(t,e,i){var s=this.getFocus();return this._hotkeys[t]?this._process_calls(this._hotkeys[t],s,i):!e||!this._hotkeys.ANY_0000||this._process_calls(this._hotkeys.ANY_0000,s,i)},_process_calls:function(t,e,i){for(var s=0;s<t.length;s++){var n=t[s];if(null===n.view||e===n.view||"string"==typeof n.view&&e&&e.name===n.view){var a=n.handler(e,i);if(!!a===a)return a}}return!0},_parse_keys:function(t){var e,i,s,n,a=this._controls,r=t.toLowerCase().split(/[+\-_]/);e=i=s=n=0;for(var o="",l=0;l<r.length;l++)if("ctrl"===r[l])e=1;else if("shift"===r[l])i=1;else if("alt"===r[l])s=1;else if("command"===r[l])n=1;else if(a[r[l]]){var h=a[r[l]];o=this._isNumPad(h)?h.toString():String.fromCharCode(h)}else o=r[l];return{letter:o.toUpperCase(),ctrl:e,shift:i,alt:s,meta:n,debug:t}},getState:function(t,e){e=e||!1;var i={id:(t=Zt(t)).config.id,width:t.config.width,height:t.config.height,gravity:t.config.gravity};if(P(t.config.collapsed)||(i.collapsed=t.config.collapsed),"tabs"!==t.name&&"tabbar"!==t.name||(i.activeCell=t.getValue()),e&&(i=[i],t._cells))for(var s=0;s<t._cells.length;s++)i=i.concat(this.getState(t._cells[s],e));return i},setState:function(t){R(t)||(t=[t]);for(var e=0;e<t.length;e++){var i=t[e],s=Zt(i.id);s&&(P(i.collapsed)||s.define("collapsed",i.collapsed),P(i.activeCell)||s.setValue(i.activeCell),s.define("width",i.width),s.define("height",i.height),s.define("gravity",i.gravity))}var n=Zt(t[0].id);n&&n.resize()}};He(function(){Ve._enable(),Ve.addHotKey("enter",function(t,e){if(t&&t.callEvent&&t.callEvent("onEnter",[e]),t&&t.editStop&&t._in_edit_mode)return t.editStop(),!0;if(t&&t.touchable){var i=t.getFormView();i&&!t._skipSubmit&&i.callEvent("onSubmit",[t,e])}}),Ve.addHotKey("esc",function(t){if(t){if(t.editCancel&&t._in_edit_mode)return t.editCancel(),!0;var e=t.getTopParentView();e&&e.setPosition&&e._hide()}}),Ve.addHotKey("shift+tab",Ve._tab_logic),Ve.addHotKey("tab",Ve._tab_logic)}),g("UIManager",Ve);var Ye={$init:function(){this._settings=this.config={}},define:function(t,e){return"object"==u(t)?this._parseSeetingColl(t):this._define(t,e)},_define:function(t,e){var i=this[t+"_setter"];return this._settings[t]=i?i.call(this,e,t):e},_parseSeetingColl:function(t){if(t)for(var e in t)this._define(e,t[e])},_parseSettings:function(e,i){var s={};i&&(s=t.extend(s,i)),"object"!=u(e)||e.tagName||t.extend(s,e,!0),this._parseSeetingColl(s)},_mergeSettings:function(t,e){for(var i in e)switch(u(t[i])){case"object":t[i]=this._mergeSettings(t[i]||{},e[i]);break;case"undefined":t[i]=e[i]}return t}},We={$init:function(){var t=this._destructor_handler={obj:this};e.destructors.push(t)},destructor:function(){var t=this._settings;if(this._last_editor&&this.editCancel(),this.callEvent&&this.callEvent("onDestruct",[]),this.destructor=function(){},this._destructor_handler.obj=null,this.getChildViews){var e=this.getChildViews();if(e)for(var i=0;i<e.length;i++)e[i].destructor();if(this._destroy_with_me)for(var s=0;s<this._destroy_with_me.length;s++)this._destroy_with_me[s].destructor()}if(delete Xt.views[t.id],t.$id){var n=this.getTopParentView();n&&n._destroy_child&&n._destroy_child(t.$id)}this._htmlmap=null,this._htmlrows=null,this._html=null,this._contentobj&&(this._contentobj.innerHTML="",this._contentobj._htmlmap=null),this._viewobj&&this._viewobj.parentNode&&this._viewobj.parentNode.removeChild(this._viewobj),this.data&&this.data.destructor&&this.data.destructor(),this.unbind&&this.unbind(),this.data=null,this._viewobj=this.$view=this._contentobj=this._dataobj=null,this._evs_events=this._evs_handlers={},Ve._view==this&&(Ve._view=null);var a=t.url;a&&a.$proxy&&a.release&&a.release(),this.$scope=null,this.$destructed=!0}};ie(window,"unload",function(){Y("unload",[]),e._final_destruction=!0;for(var t=0;t<e.destructors.length;t++){var i=e.destructors[t].obj;i&&i.destructor()}e.destructors=[],e._popups=H(),te()});var Xe={$init:function(){this._cursor=null,this.attachEvent("onSelectChange",function(){var t=this.getSelectedId();this.setCursor(t?t.id||t:null)}),this.attachEvent("onAfterCursorChange",this._update_binds),this.attachEvent("onAfterDelete",function(t){t==this.getCursor()&&this.setCursor(null)}),this.data.attachEvent("onStoreUpdated",T(function(t,e,i){t&&t==this.getCursor()&&"paint"!=i&&"delete"!=i&&this._update_binds()},this)),this.data.attachEvent("onClearAll",T(function(){this._cursor=null},this)),this.data.attachEvent("onIdChange",T(function(t,e){this._cursor==t&&(this._cursor=e,this._update_binds())},this))},refreshCursor:function(){this._cursor&&this.callEvent("onAfterCursorChange",[this._cursor])},setCursor:function(t){t==this._cursor||null!==t&&!this.getItem(t)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=t,this.callEvent("onAfterCursorChange",[t]))},getCursor:function(){return this._cursor},_bind_update:function(t,e,i){if("$level"==e&&this.data.getBranch)return(t.data||t).importData(this.data.getBranch(this.getCursor()));var s=this.getItem(this.getCursor())||this._settings.defaultData||null;"$data"==e?("function"==typeof i?i.call(t,s,this):t.data.importData(s?s[i]:[]),t.callEvent("onBindApply",[s,e,this])):(i&&(s=i(s)),this._bind_update_common(t,e,s))}},Ue={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(t,e,i){e=e||"value";var s=this.getValue()||"";if(i&&(s=i(s)),t.setValue)t.setValue(s);else if(t.filter)t.data.silent(function(){this.filter(e,s)});else{var n={};n[e]=s,t._check_data_feed(s)&&t.setValues(n)}t.callEvent("onBindApply",[s,e,this])}},Ge={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(t,e,i){var s=this.getValues()||null;i&&(s=i(s)),this._bind_update_common(t,e,s)}},qe={$init:function(){this._bind_hash={},this._bind_updated={},this._ignore_binds={},this._bind_specific_rules(this)},saveBatch:function(t){this._do_not_update_binds=!0,t.call(this),this._do_not_update_binds=!1,this._update_binds()},setBindData:function(t,e){if(e&&(this._ignore_binds[e]=!0),this.setValue)this.setValue(t);else if(this.setValues)this.setValues(t);else{var i=this.getCursor();i?this.updateItem(i,t):this.add(t)}this.callEvent("onBindUpdate",[t,e]),this.save&&this.save(),e&&(this._ignore_binds[e]=!1)},getBindData:function(t,e){if(this._bind_updated[t])return!1;var i=Zt(t);i.isVisible(i._settings.id)&&(this._bind_updated[t]=!0,this._bind_update(i,this._bind_hash[t][0],this._bind_hash[t][1]),e&&i.filter&&i.refresh())},addBind:function(t,e,i){this._bind_hash[t]=[e,i]},removeBind:function(t){delete this._bind_hash[t],delete this._bind_updated[t],delete this._ignore_binds[t]},_bind_specific_rules:function(e){e.filter?t.extend(this,Xe):e.setValue?t.extend(this,Ue):t.extend(this,Ge)},_update_binds:function(){if(!this._do_not_update_binds)for(var t in this._bind_hash)this._ignore_binds[t]||(this._bind_updated[t]=!1,this.getBindData(t,!0))},_bind_update_common:function(t,e,i){t.setValue?t.setValue(i&&e?i[e]:i):t.filter?t.data.silent(function(){this.filter(e,i)}):!i&&t.clear?t.clear():t._check_data_feed(i)&&t.setValues(I(i)),t.callEvent("onBindApply",[i,e,this])}},Ke={bind:function(e,i,s){this.attachEvent||t.extend(this,B),"string"==typeof e&&(e=Zt(e)),e._initBindSource&&e._initBindSource(),this._initBindSource&&this._initBindSource(),e.getBindData||t.extend(e,qe),this._bind_ready(),e.addBind(this._settings.id,i,s),this._bind_source=e._settings.id,this._bind_id=this._settings.id,this._bind_refresh_handler=this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return e.getBindData(this._bind_id)}),this.refresh&&this.isVisible(this._bind_id)&&this.refresh()},unbind:function(){if(this._bind_source){var t=Zt(this._bind_source);t&&t.removeBind(this._bind_id),this.detachEvent(this._bind_refresh_handler),this._bind_source=this._bind_refresh_handler=null}},_bind_ready:function(){var t=this._settings;if(this.filter){var e=t.id;this.data._on_sync=T(function(){Zt(this._bind_source)._bind_updated[e]=!1},this)}var i=this.render;this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var t=this.callEvent("onBindRequest");return this._in_bind_processing=!1,i.apply(this,!1===t?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(t){var e=Zt(this._bind_source);if(t)e.setBindData(t);else{if(this.validate&&!this.validate())return!1;var i=this.getValue?this.getValue:this.getValues();e.setBindData(i,this._settings.id),this.setDirty&&this.setDirty(!1)}}),this._bind_ready=function(){}}},Ze=window.webix_view||{},Je={name:"baseview",$init:function(t){t.id||(t.id=Me(this.name)),this._parent_cell=e._parent_cell,e._parent_cell=null,this.$scope=t.$scope||(this._parent_cell?this._parent_cell.$scope:e._global_scope),this._viewobj||(this._contentobj=this._viewobj=nt("DIV",{class:"webix_view"}),this.$view=this._viewobj)},$skin:!1,defaults:{width:0,height:0,gravity:1},getNode:function(){return this._viewobj},getParentView:function(){return this._parent_cell||null},getTopParentView:function(){var t=this.getParentView();return t?t.getTopParentView():this},getFormView:function(){var t=this.getParentView();return!t||t._recollect_elements?t:t.getFormView()},getChildViews:function(){return[]},queryView:function(t,e){var i;if("string"==typeof t&&(t={view:t}),i="object"===u(t)?function(e){var i=e.config;for(var s in t)if(i[s]!=t[s])return!1;return!0}:t,"self"===e&&i(this))return this;var s="all"===e&&[],n="parent"===e?this._queryGoUp:this._queryGoDown,a=this._queryView(i,n,s);return"all"===e?s:a},_queryGoDown:function(t){return t.getChildViews()},_queryGoUp:function(t){var e=t.getParentView();return e?[e]:[]},_queryView:function(t,e,i){for(var s=e(this),n=0;n<s.length;n++){if(t(s[n])){if(!i)return s[n];i.push(s[n])}var a=s[n]._queryView(t,e,i);if(a&&!i)return a}return null},isVisible:function(t){if(this._settings.hidden)return t&&(this._hidden_render||(this._hidden_render=[],this._hidden_hash={}),this._hidden_hash[t]||(this._hidden_hash[t]=!0,this._hidden_render.push(t))),!1;var e=this.getParentView();return!e||e.isVisible(t,this._settings.id)},isEnabled:function(){if(this._disable_cover)return!1;var t=this.getParentView();return!t||t.isEnabled()},disable:function(){rt(this._disable_cover),this._settings.disabled=!0,this._disable_cover=nt("div",{class:"webix_disabled"}),this._viewobj.appendChild(this._disable_cover),this._viewobj.setAttribute("aria-disabled","true"),pt(this._viewobj,"webix_disabled_view",!0),Ve._moveChildFocus(this)},enable:function(){this._settings.disabled=!1,this._disable_cover&&(rt(this._disable_cover),_t(this._viewobj,"webix_disabled_view"),this._viewobj.removeAttribute("aria-disabled"),this._disable_cover=null)},disabled_setter:function(t){return t?this.disable():this.enable(),t},container_setter:function(t){return _(D(t),"Invalid container"),!0},css_setter:function(t){return"object"==u(t)&&(t=et(t)),this._viewobj.className+=" "+t,t},id_setter:function(t){if(e._global_collection&&(e._global_collection!=this||this._prev_global_col)){var i=this.config.$id=t;(this._prev_global_col||e._global_collection)._elements[t]=this,t=Me(this.name),(this._prev_global_col||e._global_collection)._translate_ids[t]=i}return _(!Xt.views[t],"Non unique view id: "+t),Xt.views[t]=this,this._viewobj.setAttribute("view_id",t),t},$setSize:function(t,e){var s=this._last_size;if(s&&s[0]==t&&s[1]==e)return S(this,[t,e,"not changed"]),!1;S(this,[t,e]),this._last_size=[t,e],this.$width=this._content_width=t-(this._scroll_y?i.scrollSize:0),this.$height=this._content_height=e-(this._scroll_x?i.scrollSize:0);var n=this._settings;return n.flex||(this._viewobj.style.width=t+"px",this._viewobj.style.height=e+"px"),!0},$getSize:function(t,e){var i=this._settings,s=[1*(i.width||i.minWidth||0),1*(i.width||i.maxWidth||1e5),1*(i.height||i.minHeight||0),1*(i.height||i.maxHeight||1e5),i.gravity];if(_){var n=isNaN(s[0])||isNaN(s[1])||isNaN(s[2])||isNaN(s[3]);n&&(_(!1,"Size is not a number "+this._settings.id),i.width=i.height=i.maxWidth=i.maxHeight=i.minWidth=i.minHeight=0,s=[0,0,1e5,1e5,1])}return s[0]+=t,s[1]+=t,s[2]+=e,s[3]+=e,s},show:function(e,i){var s=this.getParentView(),n=!arguments[2];if(s)!i&&!1!==i&&this._settings.animate&&s._settings.animate&&(i=t.extend(s._settings.animate?t.extend({},s._settings.animate):{},this._settings.animate,!0)),(n?s._show:s._hide)&&(n?s._show:s._hide).call(s,this,i),n&&this._render_hidden_views(),e&&n&&s.show(!s.$$&&e);else if(this._settings.hidden){if(n){var a=D(this._settings._container||document.body);a.appendChild(this._viewobj),this._settings.hidden=!1,this.adjust(),this._render_hidden_views()}}else n||(this._settings.hidden=this._settings._hidden=!0,this._viewobj&&(this._settings._container=this._viewobj.parentNode,rt(this._viewobj)))},_render_hidden_views:function(){if(this._hidden_render){for(var t=0;t<this._hidden_render.length;t++){var e=Zt(this._hidden_render[t]);e&&e.render()}this._hidden_render=[],this._hidden_hash={}}},_onKeyPress:function(t,e){var i=e.srcElement||e.target,s=i.getAttribute("role");13!==t&&32!==t||"button"!=s&&"tab"!=s||this._settings.disabled||(gt(i,"MouseEvents","click"),ut(e))},hidden_setter:function(t){return t&&this.hide(),this._settings.hidden},hide:function(){this.show(null,null,!0),Ve._moveChildFocus(this)},adjust:function(){if(!this._viewobj.parentNode)return!1;var t=this._viewobj.parentNode.clientWidth||0,i=this._viewobj.parentNode.clientHeight||0,s=this.$getSize(0,0),n=this._viewobj.parentNode==document.body&&!this.setPosition;s[0]>t&&(t=s[0]),s[2]>i&&(i=s[2]),(!n||this._settings.width)&&t>s[1]&&(t=s[1]),(!n||this._settings.height)&&i>s[3]&&(i=s[3]),this.$setSize(t,i),e._responsive_exception&&(e._responsive_exception=!1,this.adjust())},resize:function(){if(!(e._child_sizing_active||e._freeze_resize||e._responsive_tinkery)){var t=this.getParentView();t?t.resizeChildren?t.resizeChildren():t.resize():(this.adjust(),Y("onResize",[]))}}},Qe=t.protoUI(Je,Ye,We,Ke,Ze),ti={api:Je,view:Qe},ei={name:"view",$init:function(t){this._set_inner(t)},_set_inner:function(t){var e=P(t.borderless);e&&!this.setPosition&&t.$topView&&(t.borderless=!0,e=!1),e&&this.defaults.borderless||t.borderless?t._inner={top:!0,left:!0,bottom:!0,right:!0}:(t._inner||(t._inner={}),this._contentobj.style.borderWidth="1px")},$getSize:function(t,e){var i=this._settings._inner;i&&(t+=(i.left?0:1)+(i.right?0:1),e+=(i.top?0:1)+(i.bottom?0:1));var s=ti.api.$getSize.call(this,t,e);return S(this,s,!0),s},$setSize:function(t,e){S(this,[t,e]);var i=this._settings._inner;return i&&(t-=(i.left?0:1)+(i.right?0:1),e-=(i.top?0:1)+(i.bottom?0:1)),ti.api.$setSize.call(this,t,e)}},ii=t.protoUI(ei,ti.view),si={api:ei,view:ii};ii.call(-1);var ni,ai,ri=t.proto({template_setter:function(t){this.type.template=Vt(t)},_toHTML:function(t){var e=this.type;return(e.templateStart?e.templateStart(t,e):"")+e.template(t,e)+(e.templateEnd?e.templateEnd(t,e):"")},customize:function(t){Yt(this,t)}},Ie),oi={name:"tooltip",defaults:{dy:0,dx:20},$init:function(t){"string"==typeof t&&(t={template:t}),this.$view=this._viewobj=this._contentobj=this._dataobj=nt("DIV",{role:"alert","aria-atomic":"true"}),this._contentobj.className="webix_tooltip",ot(this._contentobj,document.body.firstChild,document.body)},adjust:function(){},isVisible:function(){return this._visible},_alt_render:function(t){this.callEvent("onBeforeRender",[t])&&(this._dataobj.innerHTML="",this._dataobj.innerHTML=t,this.callEvent("onAfterRender",[]))},css_setter:function(t){return"object"===u(t)&&(t=et(t)),this._viewobj.className="webix_tooltip "+t,t},show:function(e,i){if(!this._disabled)if(this._visible=!0,"string"==typeof e?this._alt_render(e):(this.data=t.extend({},e),this.render()),this._dataobj.firstChild){var s=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=s-i.x,r=n-i.y;this._contentobj.style.display="block",a-this._settings.dx>this._contentobj.offsetWidth?a=i.x:(a=i.x-2*this._settings.dx-this._contentobj.offsetWidth)<0&&(a=0),r-this._settings.dy>this._contentobj.offsetHeight?r=i.y:(r=i.y-2*this._settings.dy-this._contentobj.offsetHeight)<0&&(r=0),this._contentobj.style.left=a+this._settings.dx+"px",this._contentobj.style.top=r+this._settings.dy+"px"}else this.hide()},hide:function(){this._visible&&(this.data=null,this._contentobj.style.display="none",this._visible=!1)},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},type:{template:Vt("{obj.value}"),templateStart:Vt.empty,templateEnd:Vt.empty}},li=(t.protoUI(oi,ri,Ye,B,si.view),{tooltip_setter:function(t){if(t)return"function"!=typeof t&&"string"!=typeof t||(t={template:t}),"object"!==u(t)&&(t={}),this._init_tooltip_once(),t},_init_tooltip_once:function(){Te.addTooltip(this),this.attachEvent("onDestruct",function(){Te.removeTooltip(this)}),this.attachEvent("onAfterScroll",function(){Te._tooltip_exist&&Te._hide_tooltip()}),this._init_tooltip_once=function(){}},$tooltipIn:function(e){var i=Te._tooltip,s=t.extend({dx:20,dy:0,template:"{obj.value}",css:""},this._settings.tooltip,!0);return i.define(s),e},$tooltipOut:function(){return Te._hide_tooltip(),null},$tooltipMove:function(t,e,i){Te._tooltip.hide(),clearTimeout(Te._before_show_delay),Te._before_show_delay=L(this._show_tooltip,this,[t,e,i],Te.delay)},_show_tooltip:function(t,e,i){var s=i||this._get_tooltip_data(t,e);s&&this.isVisible()&&Te._tooltip.show(s,dt(e))},_get_tooltip_data:function(t,e){if(this.locate&&this.getItem){var i=this.locate(e);return i?this.getItem(i):null}return this._settings}}),hi=t.proto({$init:function(t){this._canvas_labels=[],this._canvas_series=P(t.series)?t.name:t.series,this._obj=D(t.container||t);var e=t.width*(window.devicePixelRatio||1),i=t.height*(window.devicePixelRatio||1),s=t.style||"";s+=";width:"+t.width+"px;height:"+t.height+"px;",this._prepareCanvas(t.name,s,e,i,t.title)},_prepareCanvas:function(t,e,s,n,a){return this._canvas=nt("canvas",{title:a,width:s,height:n,canvas_id:t,style:e||""}),this._obj.appendChild(this._canvas),this._canvas.getContext||(i.isIE?(ve("legacy/excanvas/excanvas.js",!0),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):_(this._canvas.getContext,"Canvas is not supported in the browser")),this._canvas},getCanvas:function(t){var e=(this._canvas||this._prepareCanvas(this._contentobj)).getContext(t||"2d");return this._webixDevicePixelRatio||(this._webixDevicePixelRatio=!0,e.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),e},_resizeCanvas:function(t,e){this._canvas&&(this._canvas.setAttribute("width",t*(window.devicePixelRatio||1)),this._canvas.setAttribute("height",e*(window.devicePixelRatio||1)),this._canvas.style.width=t+"px",this._canvas.style.height=e+"px",this._webixDevicePixelRatio=!1)},renderText:function(t,e,i,s,n){if(i){n&&(n=Math.max(n,0)),e&&(e=Math.max(e,0));var a=nt("DIV",{class:"webix_canvas_text"+(s?" "+s:""),style:"left:"+t+"px; top:"+e+"px;","aria-hidden":"true"},i);return this._obj.appendChild(a),this._canvas_labels.push(a),n&&(a.style.width=n+"px"),a}},renderTextAt:function(t,e,i,s,n,a,r){var o=this.renderText.call(this,i,s,n,a,r);return o&&(t&&(o.style.top="middle"==t?parseInt(s-o.offsetHeight/2,10)+"px":s-o.offsetHeight+"px"),e&&(o.style.left="left"==e?i-o.offsetWidth+"px":parseInt(i-o.offsetWidth/2,10)+"px")),o},clearCanvas:function(t){var e=[];if(rt(this._canvas_labels),this._canvas_labels=[],!t&&this._obj._htmlmap){for(e=this._getMapAreas();e.length;)e[0].parentNode.removeChild(e[0]),e.splice(0,1);e=null,this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._canvas.offsetWidth||Math.floor(this._canvas.width/(window.devicePixelRatio||1)),this._canvas.offsetHeight||Math.floor(this._canvas.height/(window.devicePixelRatio||1)))},toggleCanvas:function(){this._toggleCanvas("none"==this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(t){var e,i;for(i=0;i<this._canvas_labels.length;i++)this._canvas_labels[i].style.display=t?"":"none";if(this._obj._htmlmap)for(e=this._getMapAreas(),i=0;i<e.length;i++)t?e[i].removeAttribute("disabled"):e[i].setAttribute("disabled","true");this._canvas.style.display=t?"":"none"},_getMapAreas:function(){var t,e,i=[];for(t=this._obj._htmlmap.getElementsByTagName("AREA"),e=0;e<t.length;e++)t[e].getAttribute("userdata")==this._canvas_series&&i.push(t[e]);return i}}),ci=function(t,e){var i=e;if(R(t))for(var s=0;s<t.length;s++){if(R(e)&&(i=e[s]),"slide"==i.type){if("out"==i.subtype&&0===s)continue;if("in"==i.subtype&&1==s)continue}if("flip"!=i.type)ci(t[s],i);else{var n=I(i);0===s&&(n.type="flipback"),1==s&&(n.callback=null),ci(t[s],n)}}else{var a=D(t);a._has_animation?ci.end(a,i):ci.start(a,i)}};function di(t){if(_(ui[t],"Incorrect skin name: "+t),ai!==t&&(ui.$active=ni=ui[t],ui.$name=ai=t,Xt))for(var e in Xt){var i=Xt[e];i&&i.prototype&&i.prototype.$skin&&i.prototype.$skin(i.prototype)}}ci.end=function(t,s){t.style[i.transitionDuration]="1ms",t._has_animation=null,e._wait_animate&&window.clearTimeout(e._wait_animate),e._wait_animate=L(ci,this,[t,s],10)},ci.isSupported=function(){return!e.noanimate&&i.transform&&i.transition&&!i.isOpera},ci.formLine=function(t,e,s){var n=s.direction;e.parentNode&&(e.parentNode.style.position="relative"),e.style.position="absolute",t.style.position="absolute";var a=i.isFF?"top"==n||"left"==n?-1:1:0;return"top"==n||"bottom"==n?(t.style.left="0px",t.style.top=(s.top||a)+("top"==n?1:-1)*e.offsetHeight+"px"):(t.style.top=(s.top||0)+"px",t.style.left=a+("left"==n?1:-1)*e.offsetWidth+"px"),e.parentNode==t.parentNode&&s.keepViews?t.style.display="":ot(t,e.nextSibling,e.parentNode),"slide"==s.type&&"out"==s.subtype&&(t.style.left="0px",t.style.top=(s.top||0)+"px",e.parentNode.removeChild(e),ot(e,t.nextSibling,t.parentNode)),[t,e]},ci.breakLine=function(t){arguments[1]?t[1].style.display="none":rt(t[1]),ci.clear(t[0]),ci.clear(t[1]),t[0].style.position=""},ci.clear=function(t){t.style[i.transform]="none",t.style[i.transition]="none",t.style.top=t.style.left=""},ci.defaults={type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0},ci.start=function(t,e){"string"==typeof e&&(e={type:e}),e=Ye._mergeSettings(e,ci.defaults);var s,n,a=i.cssPrefix,r=t._has_animation=e;switch("slide"==r.type&&r.direction){case"right":r.x=t.offsetWidth;break;case"left":r.x=-t.offsetWidth;break;case"top":r.y=-t.offsetHeight;break;case"bottom":default:r.y=r.y||t.offsetHeight}"flip"!=r.type&&"flipback"!=r.type||(s=[0,0],n="scaleX","vertical"==r.subtype?(s[0]=20,n="scaleY"):s[1]=20,"right"!=r.direction&&"bottom"!=r.direction||(s[0]*=-1,s[1]*=-1));var o=r.duration+"ms "+r.timing+" "+r.delay+"ms",l=a+"TransformStyle: preserve-3d;",h="",c="";switch(r.type){case"fade":h="opacity "+o,l="opacity: 0;";break;case"show":h="opacity "+o,l="opacity: 1;";break;case"flip":o=r.duration/2+"ms "+r.timing+" "+r.delay+"ms",c="skew("+s[0]+"deg, "+s[1]+"deg) "+n+"(0.00001)",h="all "+o;break;case"flipback":r.delay+=r.duration/2,o=r.duration/2+"ms "+r.timing+" "+r.delay+"ms",t.style[i.transform]="skew("+-1*s[0]+"deg, "+-1*s[1]+"deg) "+n+"(0.00001)",t.style.left="0",c="skew(0deg, 0deg) "+n+"(1)",h="all "+o;break;case"slide":var d=r.x+"px",u=r.y+"px";c=i.translate+"("+d+", "+u+("translate3d"==i.translate?", 0":"")+")",h=a+"transform "+o}L(function(){t.style[i.transition]=h,L(function(){l&&(t.style.cssText+=l),c&&(t.style[i.transform]=c);var e=!1,s=ie(t,i.transitionEnd,function(i){t._has_animation=null,r.callback&&r.callback.call(r.master||window,t,r,i),e=!0,se(s)});window.setTimeout(function(){if(!e){var i=r.master||window;t._has_animation=null,!i.$destructed&&r.callback&&r.callback.call(i,t,r),e=!0,se(s)}},1.3*(1*r.duration+1*r.delay))})})};var ui={set:di,material:{topLayout:"space",barHeight:44,
//!!!Set the same in skin.less!!!
tabbarHeight:42,sidebarTitleHeight:44,rowHeight:36,toolbarHeight:44,listItemHeight:36,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:36,labelTopHeight:22,propertyItemHeight:28,unitHeaderHeight:36,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:2},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:2,form:17,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,tabBorder:!0,customCheckbox:!0,customRadio:!0,sidebarMarkAll:!0,popupNoPoint:!0,borderlessPopup:!0,popupPadding:0,dataPadding:12,calendar:{timepickerHeight:24},calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32,organogramLineColor:"#CCD7E6"},mini:{topLayout:"space",barHeight:36,
//!!!Set the same in skin.less!!!
tabbarHeight:34,sidebarTitleHeight:36,rowHeight:28,toolbarHeight:36,listItemHeight:28,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,propertyItemHeight:24,unitHeaderHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:2},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:2,form:12,accordion:0},tabMargin:0,tabOffset:0,tabBottomOffset:0,tabTopOffset:0,tabBorder:!0,customCheckbox:!0,customRadio:!0,sidebarMarkAll:!0,popupNoPoint:!0,borderlessPopup:!0,popupPadding:0,dataPadding:12,calendar:{timepickerHeight:24},calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:24,organogramLineColor:"#CCD7E6"},flat:{topLayout:"space",barHeight:46,
//!!!Set the same in skin.less!!!
tabbarHeight:46,rowHeight:34,toolbarHeight:46,sidebarTitleHeight:45,listItemHeight:34,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,unitHeaderHeight:20,propertyItemHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:4,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:3,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,dataPadding:10,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32},compact:{topLayout:"space",barHeight:34,
//!!!Set the same in skin.less!!!
tabbarHeight:34,sidebarTitleHeight:34,rowHeight:24,toolbarHeight:34,listItemHeight:28,unitHeaderHeight:20,propertyItemHeight:24,inputHeight:30,buttonHeight:30,inputPadding:3,menuHeight:28,labelTopHeight:16,inputSpacing:4,borderWidth:1,sliderHandleWidth:12,sliderPadding:10,sliderBorder:1,vSliderPadding:13,vSliderHeight:100,switchHeight:20,switchWidth:40,layoutMargin:{space:5,wide:5,clean:0,head:4,line:-1,toolbar:4,form:4,accordion:5},layoutPadding:{space:5,wide:0,clean:0,head:0,line:0,toolbar:1,form:12,accordion:0},tabMargin:3,tabOffset:0,tabBottomOffset:3,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,dataPadding:10,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:23},contrast:{topLayout:"space",barHeight:46,tabbarHeight:46,rowHeight:34,toolbarHeight:46,sidebarTitleHeight:45,listItemHeight:34,unitHeaderHeight:20,inputHeight:38,buttonHeight:38,inputPadding:3,menuHeight:34,labelTopHeight:22,propertyItemHeight:28,inputSpacing:4,borderWidth:1,sliderHandleWidth:14,sliderPadding:10,sliderBorder:1,vSliderPadding:15,vSliderHeight:100,switchHeight:22,switchWidth:50,layoutMargin:{space:10,wide:10,clean:0,head:4,line:-1,toolbar:8,form:8,accordion:10},layoutPadding:{space:10,wide:0,clean:0,head:0,line:0,toolbar:3,form:17,accordion:0},tabMargin:4,tabOffset:0,tabBottomOffset:6,tabTopOffset:1,customCheckbox:!0,customRadio:!0,popupPadding:8,dataPadding:10,calendarHeight:70,padding:0,accordionType:"accordion",optionHeight:32}};di(window.webix_skin||"material");var fi={config:{longTouchDelay:1e3,scrollDelay:150,gravity:500,deltaStep:30,speed:"0ms",finish:1500,ellastic:!0,fastClick:!0},limit:function(t){fi._limited=!1!==t},disable:function(){fi._disabled=!0},enable:function(){fi._disabled=!1},$init:function(){fi.$init=function(){},ie(document.body,pi.down,fi._touchstart,{passive:!1}),ie(document.body,pi.move,fi._touchmove,{passive:!1}),ie(document.body,pi.up,fi._touchend),ie(document.body,"dragstart",function(t){if(!fi._disabled&&!fi._limited)return ut(t)}),ie(document.body,"touchstart",function(t){if(!fi._disabled&&!fi._limited&&fi.config.fastClick&&i.isSafari){var e=t.srcElement.tagName.toLowerCase();return"input"==e||"textarea"==e||"select"==e||"label"==e||(fi._fire_fast_event=!0,ut(t))}},{passive:!1}),fi._clear_artefacts(),fi._scroll=[null,null],fi.$active=!0},_clear_artefacts:function(){fi._start_context=fi._current_context=fi._prev_context=fi._scroll_context=null,fi._scroll_mode=fi._scroll_node=fi._scroll_stat=this._long_touched=null,fi._delta={_x_moment:0,_y_moment:0,_time:0},fi._css_button_remove&&(_t(fi._css_button_remove,"webix_touch"),fi._css_button_remove=null),window.clearTimeout(fi._long_touch_timer),fi._was_not_moved=!0,fi._axis_x=!0,fi._axis_y=!0,fi._active_transion||fi._scroll_end()},_touchend:function(t){if(fi._start_context){if(fi._scroll_mode){var e=fi._get_matrix(fi._scroll_node),s=e.e,n=e.f,a=fi.config.finish,r=fi._get_delta(t,!0),o=Zt(fi._scroll_node),l=o&&o.$scroll?o.$scroll.gravity:fi.config.gravity;if(r._time){var h=s+l*r._x_moment/r._time,c=n+l*r._y_moment/r._time,d=fi._scroll[0]?fi._correct_minmax(h,!1,!1,fi._scroll_stat.dx,fi._scroll_stat.px):s,u=fi._scroll[1]?fi._correct_minmax(c,!1,!1,fi._scroll_stat.dy,fi._scroll_stat.py):n,f=Math.max(Math.abs(d-s),Math.abs(u-n));f<150&&(a=a*f/150),d==s&&u==n||(a=Math.round(a*Math.max((d-s)/(h-s),(u-n)/(c-n))));var g={e:d,f:u};(o=Zt(fi._scroll_node))&&o.adjustScroll&&o.adjustScroll(g),a=Math.max(100,a),s!=g.e||n!=g.f?(fi._set_matrix(fi._scroll_node,g.e,g.f,a+"ms"),fi._scroll_master&&fi._scroll_master._sync_scroll(g.e,g.f,a+"ms"),fi._set_scroll(g.e,g.f,a+"ms")):fi._scroll_end()}else fi._scroll_end()}else if(!this._long_touched)if(fi._axis_y&&!fi._axis_x)fi._translate_event("onSwipeX");else if(fi._axis_x&&!fi._axis_y)fi._translate_event("onSwipeY");else if(i.isSafari&&fi._fire_fast_event){fi._fire_fast_event=!1;var p=fi._start_context.target;L(function(){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),p.dispatchEvent(t)})}fi._translate_event("onTouchEnd"),fi._clear_artefacts()}},_touchmove:function(t){if(fi._scroll_context&&fi._start_context){var e=fi._get_delta(t);if(fi._translate_event("onTouchMove"),fi._scroll_mode)fi._set_scroll_pos(e);else if(fi._axis_x=fi._axis_check(e._x,"x",fi._axis_x),fi._axis_y=fi._axis_check(e._y,"y",fi._axis_y),fi._scroll_mode){var i=fi._get_event_view("onBeforeScroll",!0);if(i){var s={};i.callEvent("onBeforeScroll",[s]),s.update&&(fi.config.speed=s.speed,fi.config.scale=s.scale)}fi._init_scroller(e)}return ut(t)}},_set_scroll_pos:function(){if(fi._scroll_node){var t=fi._get_matrix(fi._scroll_node),e=fi._prev_context||fi._start_context,i=Zt(fi._scroll_node),s=i&&i.$scroll?i.$scroll.ellastic:fi.config.ellastic;fi._scroll[0]&&(t.e=fi._correct_minmax(t.e-e.x+fi._current_context.x,s,t.e,fi._scroll_stat.dx,fi._scroll_stat.px)),fi._scroll[1]&&(t.f=fi._correct_minmax(t.f-e.y+fi._current_context.y,s,t.f,fi._scroll_stat.dy,fi._scroll_stat.py)),fi._set_matrix(fi._scroll_node,t.e,t.f,"0ms"),fi._scroll_master&&fi._scroll_master._sync_scroll(t.e,t.f,"0ms"),fi._set_scroll(t.e,t.f,"0ms")}},_set_scroll:function(t,e,i){var s=fi._scroll_stat.px/fi._scroll_stat.dx*-t,n=fi._scroll_stat.py/fi._scroll_stat.dy*-e;fi._scroll[0]&&fi._set_matrix(fi._scroll[0],s,0,i),fi._scroll[1]&&fi._set_matrix(fi._scroll[1],0,n,i)},scrollTo:function(t,e,i,s){fi._set_matrix(t,e,i,s)},_set_matrix:function(t,e,s,n){if(!fi._in_anim_frame&&window.setAnimationFrame&&window.setAnimationFrame(function(){return fi._in_anim_frame=!0,fi._set_matrix(t,e,s,n)}),fi._in_anim_frame=null,fi._active_transion=!0,t){var a=fi.config.translate||i.translate;t.style[i.transform]=a+"("+Math.round(e)+"px, "+Math.round(s)+"px"+("translate3d"==a?", 0":"")+")",t.style[i.transitionDuration]=n}},_get_matrix:function(t){var e,s=window.getComputedStyle(t)[i.transform];if("none"==s)e={e:0,f:0};else if(window.WebKitCSSMatrix)e=new WebKitCSSMatrix(s);else if(window.MSCSSMatrix)e=new MSCSSMatrix(s);else{var n=s.replace(/(matrix\()(.*)(\))/gi,"$2");n=(n=n.replace(/\s/gi,"")).split(","),e={};for(var a=["a","b","c","d","e","f"],r=0;r<a.length;r++)e[a[r]]=parseInt(n[r],10)}return fi._scroll_master&&fi._scroll_master._sync_pos(e),e},_correct_minmax:function(t,e,i,s,n){if(t===i)return t;var a=Math.abs(t-i),r=a/(t-i);if(t>0)return e?i+r*Math.sqrt(a):0;var o=s-n;return o+t<0?e?i-Math.sqrt(-(t-i)):-o:t},_init_scroll_node:function(t){if(!t.scroll_enabled){t.scroll_enabled=!0,t.parentNode.style.position="relative";var e=i.cssPrefix;t.style.cssText+=e+"transition: "+e+"transform; "+e+"user-select:none; "+e+"transform-style:flat;",t.addEventListener(i.transitionEnd,fi._scroll_end,!1)}},_init_scroller:function(){-1!=fi._scroll_mode.indexOf("x")&&(fi._scroll[0]=fi._create_scroll("x",fi._scroll_stat.dx,fi._scroll_stat.px,"width")),-1!=fi._scroll_mode.indexOf("y")&&(fi._scroll[1]=fi._create_scroll("y",fi._scroll_stat.dy,fi._scroll_stat.py,"height")),fi._init_scroll_node(fi._scroll_node),window.setTimeout(fi._set_scroll_pos,1)},_create_scroll:function(t,e,i,s){if(e-i<2){var n=fi._get_matrix(fi._scroll_node),a="y"==t?n.e:0,r="y"==t?0:n.f;return fi._scroll_master||fi._set_matrix(fi._scroll_node,a,r,"0ms"),fi._scroll_mode=fi._scroll_mode.replace(t,""),""}var o=nt("DIV",{class:"webix_scroll_"+t},"");return o.style[s]=Math.max(i*i/e-7,10)+"px",fi._scroll_stat.left&&("x"===t?o.style.left=fi._scroll_stat.left+"px":o.style.right=-fi._scroll_stat.left+"px"),fi._scroll_stat.hidden&&(o.style.visibility="hidden"),fi._scroll_node.parentNode.appendChild(o),o},_axis_check:function(t,e,i){return t>fi.config.deltaStep?(fi._was_not_moved&&(fi._long_move(e),fi._locate(e),-1==(fi._scroll_mode||"").indexOf(e)&&(fi._scroll_mode="")),!1):i},_scroll_end:function(){var t,e,i;(i=Zt(fi._scroll_node||this))&&(fi._scroll_node?t=fi._get_matrix(fi._scroll_node):i.getScrollState&&(e=i.getScrollState(),t={e:e.x,f:e.y}),Y("onAfterScroll",[t]),i.callEvent&&i.callEvent("onAfterScroll",[t])),fi._scroll_mode||(rt(fi._scroll),fi._scroll=[null,null]),fi._active_transion=!1},_long_move:function(){window.clearTimeout(fi._long_touch_timer),fi._was_not_moved=!1},_stop_old_scroll:function(t){if(!fi._scroll[0]&&!fi._scroll[1])return!0;fi._stop_scroll(t,fi._scroll[0]?"x":"y")},_touchstart:function(t){var e=t.target||ie.srcElement;if(!(fi._disabled||e.tagName&&"textarea"==e.tagName.toLowerCase()&&e.offsetHeight<e.scrollHeight)){fi._long_touched=null,fi._scroll_context=fi._start_context=pi.context(t);var i=Zt(t);!fi._limited||fi._is_scroll()||i&&i.$touchCapture||(fi._scroll_context=null),fi._translate_event("onTouchStart"),fi._stop_old_scroll(t)&&(fi._long_touch_timer=window.setTimeout(fi._long_touch,fi.config.longTouchDelay)),!i||!i.touchable||e.className&&0===e.className.indexOf("webix_view")||(fi._css_button_remove=i.getNode(t),pt(fi._css_button_remove,"webix_touch"))}},_long_touch:function(){fi._start_context&&(fi._translate_event("onLongTouch"),Y("onClick",[fi._start_context]),fi._long_touched=!0)},_stop_scroll:function(t,e){fi._locate(e);var i=fi._scroll[0]||fi._scroll[1];if(i){var s=fi._get_event_view("onBeforeScroll",!0);s&&s.callEvent("onBeforeScroll",[fi._start_context,fi._current_context])}!i||fi._scroll_node&&i.parentNode==fi._scroll_node.parentNode||(fi._clear_artefacts(),fi._scroll_end(),fi._start_context=pi.context(t)),fi._touchmove(t)},_get_delta:function(t){return fi._prev_context=fi._current_context,fi._current_context=pi.context(t),fi._delta._x=Math.abs(fi._start_context.x-fi._current_context.x),fi._delta._y=Math.abs(fi._start_context.y-fi._current_context.y),fi._prev_context&&(fi._current_context.time-fi._prev_context.time<fi.config.scrollDelay?(fi._delta._x_moment=fi._delta._x_moment/1.3+fi._current_context.x-fi._prev_context.x,fi._delta._y_moment=fi._delta._y_moment/1.3+fi._current_context.y-fi._prev_context.y):fi._delta._y_moment=fi._delta._x_moment=0,fi._delta._time=fi._delta._time/1.3+(fi._current_context.time-fi._prev_context.time)),fi._delta},_get_sizes:function(t){fi._scroll_stat={dx:t.offsetWidth,dy:t.offsetHeight,px:t.parentNode.offsetWidth,py:t.parentNode.offsetHeight}},_is_scroll:function(t){var e=fi._start_context.target;if(!i.touch&&!i.transition&&!i.transform)return null;for(;e&&"BODY"!=e.tagName;){if(e.getAttribute){var s=e.getAttribute("touch_scroll");if(s&&(!t||-1!=s.indexOf(t)))return[e,s]}e=e.parentNode}return null},_locate:function(t){var e=this._is_scroll(t);return e&&(fi._scroll_mode=e[1],fi._scroll_node=e[0],fi._get_sizes(e[0])),e},_translate_event:function(t){Y(t,[fi._start_context,fi._current_context]);var e=fi._get_event_view(t);e&&e.callEvent(t,[fi._start_context,fi._current_context])},_get_event_view:function(t,e){var i=Zt(e?fi._scroll_node:fi._start_context);if(!i)return null;for(;i;){if(i.hasEvent&&i.hasEvent(t))return i;i=i.getParentView()}return null},_get_context:function(t){if(!t.touches[0]){var e=fi._current_context;return e.time=new Date,e}return{target:t.target,x:t.touches[0].pageX,y:t.touches[0].pageY,time:new Date}},_get_context_m:function(t){return{target:t.target||t.srcElement,x:t.pageX,y:t.pageY,time:new Date}}};function gi(t){t.down="touchstart",t.move="touchmove",t.up="touchend",t.context=fi._get_context}He(function t(){if(i.touch)fi.$init(),-1==document.body.className.indexOf("webix_full_screen")&&fi.limit(!0),window.MSCSSMatrix&&it(".webix_view{ -ms-touch-action: none; }");else var e=ie(document.body,"touchstart",function(s){if(s.touches.length&&s.touches[0].radiusX>4)for(var n in i.touch=!0,gi(pi),t(),Xt.views){var a=Xt.views[n];a&&a.$touch&&a.$touch()}se(e)},{capture:!0})});var pi=i.mouse={down:"mousedown",up:"mouseup",move:"mousemove",context:fi._get_context_m};window.navigator.pointerEnabled?(pi.down="pointerdown",pi.move="pointermove",pi.up="pointerup"):window.navigator.msPointerEnabled?(pi.down="MSPointerDown",pi.move="MSPointerMove",pi.up="MSPointerUp"):i.touch&&gi(pi);var _i={_drag_masters:H(["dummy"]),addDrop:function(t,e,i){(t=D(t)).webix_drop=this._getCtrl(e),i&&(t.webix_master=!0)},_getCtrl:function(t){t=t||_i;var e=this._drag_masters.find(t);return e<0&&(e=this._drag_masters.length,this._drag_masters.push(t)),e},_createTouchDrag:function(t){var e=_i,i=this._getActiveDragMaster();if(i&&i._getDragItemPos){e._html||e.createDrag(t);var s=e._drag_context;e._html.style.left=t.x+e.left+(s.x_offset||0)+"px",e._html.style.top=t.y+e.top+(s.y_offset||0)+"px"}},addDrag:function(t,e){(t=D(t)).webix_drag=this._getCtrl(e),ee(t,i.mouse.down,this._preStart,{bind:t}),ee(t,"dragstart",ut)},_preStart:function(t){if(_i._active){if(_i._saved_event==t)return;_i._preStartFalse(),_i.destroyDrag(t)}_i._active=this;var e=i.mouse.context(t);_i._start_pos=e,_i._saved_event=t,_i._webix_drag_mm=ie(document.body,i.mouse.move,_i._startDrag),_i._webix_drag_mu=ie(document,i.mouse.up,_i._preStartFalse),pt(document.body,"webix_noselect",1)},_preStartFalse:function(){_i._clean_dom_after_drag()},_startDrag:function(t){var e=i.mouse.context(t),s=_i._getActiveDragMaster(),n=s&&i.touch&&s._getDragItemPos&&!fi._long_touched;if(!(n||Math.abs(e.x-_i._start_pos.x)<5&&Math.abs(e.y-_i._start_pos.y)<5)&&(_i._clean_dom_after_drag(!0),_i._html||_i.createDrag(_i._saved_event)))return _i.sendSignal("start"),_i._webix_drag_mm=ie(document.body,i.mouse.move,_i._moveDrag),_i._webix_drag_mu=ie(document,i.mouse.up,_i._stopDrag),_i._moveDrag(t),i.touch?ut(t):void 0},_stopDrag:function(t){_i._clean_dom_after_drag(),_i._saved_event=null,_i._last&&(_i.$drop(_i._active,_i._last,t),_i.$dragOut(_i._active,_i._last,null,t)),_i.destroyDrag(t),_i.sendSignal("stop")},_clean_dom_after_drag:function(t){this._webix_drag_mm=se(this._webix_drag_mm),this._webix_drag_mu=se(this._webix_drag_mu),t||_t(document.body,"webix_noselect")},_moveDrag:function(t){var e=_i,s=dt(t),n=e.$dragPos(s,t),a=e._drag_context;e._html.style.top=s.y+e.top+(n||!a.y_offset?0:a.y_offset)+"px",e._html.style.left=s.x+e.left+(n||!a.x_offset?0:a.x_offset)+"px";var r=t;if(e._skip)e._skip=!1;else{if(i.touch){var o=i.mouse.context(t),l=document.elementFromPoint(o.x,o.y);r=new Proxy(t,{get:function(e,i){if("target"===i)return l;var s=e[i];return"function"==typeof s?s.bind(t):s}})}e._checkLand(r.target||r.srcElement,r)}return ut(t)},_checkLand:function(t,e){for(;t&&"BODY"!=t.tagName;){if(t.webix_drop)return this._last&&(this._last!=t||t.webix_master)&&this.$dragOut(this._active,this._last,t,e),!this._last||this._last!=t||t.webix_master?(this._last=null,this._landing=this.$dragIn(_i._active,t,e),void(this._landing&&(this._last=t))):void 0;t=t.parentNode}this._last&&(this._last=this._landing=this.$dragOut(this._active,this._last,null,e))},sendSignal:function(t){_i.active="start"==t,Y("onDragMode",[t])},getMaster:function(t){return this._drag_masters[t.webix_drag||t.webix_drop]},getContext:function(){return this._drag_context},getNode:function(){return this._html},createDrag:function(t){var e=_i,s=e._active;e._drag_context={};var n,a=this._drag_masters[s.webix_drag];if(a.$dragCreate){if(!(n=a.$dragCreate(s,t)))return!1;this._setDragOffset(t),n.style.position="absolute"}else{var r=e.$drag(s,t);if(e._setDragOffset(t),!r)return!1;(n=document.createElement("DIV")).innerHTML=r,n.className="webix_drag_zone",document.body.appendChild(n);var o=e._drag_context;o.html&&i.pointerevents&&(o.x_offset=-Math.round(.5*n.offsetWidth),o.y_offset=-Math.round(.75*n.offsetHeight))}return n.style.zIndex=Math.max(n.style.zIndex,De()),_i._skipDropH=ie(n,i.mouse.move,_i._skip_mark),_i._drag_context.from||(_i._drag_context={source:s,from:s}),_i._html=n,!0},_skip_mark:function(){_i._skip=!0},destroyDrag:function(t){var e=_i._active,i=this._drag_masters[e.webix_drag];i&&i.$dragDestroy?(_i._skipDropH=se(_i._skipDropH),_i._html&&i.$dragDestroy(e,_i._html,t)):rt(_i._html),i&&i._auto_scroll_delay&&(i._auto_scroll_delay=window.clearTimeout(i._auto_scroll_delay)),_i._dropHTML&&rt(_i._dropHTML),_i._landing=_i._active=_i._last=_i._html=_i._dropHTML=null},_getActiveDragMaster:function(){return _i._drag_masters[_i._active.webix_drag]},top:0,left:0,_setDragOffset:function(t){var e=_i,s=e._start_pos,n=e._drag_context;if(void 0!==n.x_offset&&void 0!==n.y_offset)return null;if(n.x_offset=n.y_offset=0,i.pointerevents){var a=_i._getActiveDragMaster();if(a._getDragItemPos&&a!==this){var r=a._getDragItemPos(s,t);r&&(n.x_offset=r.x-s.x,n.y_offset=r.y-s.y)}}},$dragPos:function(t,e){var i=this._drag_masters[_i._active.webix_drag];if(i.$dragPos&&i!=this)return i.$dragPos(t,e,_i._html),!0},$dragIn:function(t,e,i){var s=this._drag_masters[e.webix_drop];return s.$dragIn&&s!=this?s.$dragIn(t,e,i):(e.className=e.className+" webix_drop_zone",e)},$dragOut:function(t,e,i,s){var n=this._drag_masters[e.webix_drop];return n.$dragOut&&n!=this?n.$dragOut(t,e,i,s):(e.className=e.className.replace("webix_drop_zone",""),null)},$drop:function(t,e,i){var s=this._drag_masters[e.webix_drop];if(_i._drag_context.from=_i.getMaster(t),s.$drop&&s!=this)return s.$drop(t,e,i);e.appendChild(t)},$drag:function(t,e){var i=this._drag_masters[t.webix_drag];return i.$drag&&i!=this?i.$drag(t,e):"<div style='"+t.style.cssText+"'>"+t.innerHTML+"</div>"}};W("onLongTouch",function(t){_i._active&&_i._createTouchDrag(t)});var vi={move_setter:function(t){return t&&(this._move_admin=I(this._move_admin),this._move_admin.master=this,_i.addDrag(this._headobj?this._headobj:this.$view,this._move_admin)),t},_move_admin:{$dragCreate:function(t,e){if(this.master.config.move){var i=ht(t),s=dt(e);return _i.top=i.y-s.y,_i.left=i.x-s.x,D(this.master._viewobj)}},$dragDestroy:function(t,e){var i=this.master;i._settings&&(i._settings.top=parseInt(e.style.top,10),i._settings.left=parseInt(e.style.left,10)),_i.top=_i.left=0,this.master.callEvent("onViewMoveEnd",[])},$dragPos:function(t,e){this.master.callEvent("onViewMove",[t,e])}}},mi={_modal_set:function(t){if(t){if(!this._modal_cover){this._modal_cover=nt("div",{class:"webix_modal"});var i=this._settings.zIndex||De();this._previous_modality=e._modality,e._modality=i,this._modal_cover.style.zIndex=i-1,this._viewobj.style.zIndex=i,document.body.appendChild(this._modal_cover),document.body.style.overflow="hidden",ee(this._modal_cover,"click",T(this._ignore_clicks,this))}}else if(this._modal_cover){rt(this._modal_cover),document.body.style.overflow="";var s=this._previous_modality;setTimeout(function(){e._modality=s},1),this._modal_cover=null}return t}},bi={resize_setter:function(t){return t&&!this._resizeHandlers&&this._renderResizeHandler(),t},_renderResizeHandler:function(){if(!this._rwHandle){var t=this._viewobj;t.firstChild&&((t=t.firstChild).style.position="relative"),this._rwHandle=nt("DIV",{class:"webix_resize_handle",webix_disable_drag:"true"}),t.appendChild(this._rwHandle),ee(this._rwHandle,i.mouse.down,this._wrDown,{bind:this})}},_showResizeFrame:function(t,e){if(!this._resizeFrame){this._resizeFrame=nt("div",{class:"webix_resize_frame"},""),document.body.appendChild(this._resizeFrame);var i=ht(this._viewobj);this._resizeFrame.style.left=i.x+"px",this._resizeFrame.style.top=i.y+"px",this._resizeFrame.style.zIndex=De()}this._resizeFrame.style.width=t+"px",this._resizeFrame.style.height=e+"px"},_wrDown:function(){this.config.resize&&(pt(document.body,"webix_noselect webix_resize_cursor"),this._wsReady=ht(this._viewobj),this._resizeHandlersMove=ie(document.body,i.mouse.move,this._wrMove,{bind:this}),this._resizeHandlersUp=ie(document.body,i.mouse.up,this._wrUp,{bind:this}))},_wrMove:function(t){if(!1!==this._wsReady){var e=dt(t),i={x:e.x-this._wsReady.x,y:e.y-this._wsReady.y};if(this.$resizeMove)this.$resizeMove(i);else{var s=this.config,n=s.minWidth||100,a=s.minHeight||100;i.x<n?i.x=n:i.x>s.maxWidth&&(i.x=s.maxWidth),i.y<a?i.y=a:i.y>s.maxHeight&&(i.y=s.maxHeight)}this._wsProgress=i,this._showResizeFrame(i.x,i.y)}},_wrUp:function(){this._resizeFrame&&(this._resizeFrame=rt(this._resizeFrame)),_t(document.body,"webix_resize_cursor"),_t(document.body,"webix_noselect"),se(this._resizeHandlersMove),se(this._resizeHandlersUp),this._wsProgress&&(this.$resizeEnd?this.$resizeEnd(this._wsProgress):(this.config.width=this._wsProgress.x,this.config.height=this._wsProgress.y,this.resize())),this._wsReady=this._wsProgress=!1,this.callEvent("onViewResize",[])}};e._popups=H();var xi={name:"window",$init:function(t){this._viewobj.innerHTML="<div class='webix_win_content'><div class='webix_win_head'></div><div class='webix_win_body'></div></div>",this._contentobj=this._viewobj.firstChild,this._headobj=this._contentobj.childNodes[0],this._dataobj=this._bodyobj=this._contentobj.childNodes[1],this._viewobj.className+=" webix_window",this._viewobj.setAttribute("role","dialog"),this._viewobj.setAttribute("tabindex","0"),this._head_cell=this._body_cell=null,t._inner={top:!1,left:!1,right:!1,bottom:!1},t.id||(t.id=$()),ee(this._contentobj,"click",T(this._ignore_clicks,this)),this._contentobj.addEventListener&&ee(this._contentobj,"click",function(){!this._settings.zIndex&&this._settings.toFront&&(this._viewobj.style.zIndex=De())},{bind:this,capture:!0}),t.modal&&(this._modal=!0),t.close&&(this._settings.close=t.close),this.attachEvent("onViewMoveEnd",function(){this._settings.position&&delete this._settings.position})},_ignore_clicks:function(t){var s=e._popups,n=s.find(this);-1==n&&(n=s.length-1),t.click_view=n,i.isIE8&&(t.srcElement.click_view=n)},getChildViews:function(){return this._head_cell?[this._head_cell,this._body_cell]:[this._body_cell]},zIndex_setter:function(t){return this._viewobj.style.zIndex=t,t},_remove:function(){this.body_setter()},_replace:function(t,e){var i=(e=e||this._body_cell)==this._body_cell;e.destructor(),i?this._body_cell=t:this._head_cell=t,(i?this._bodyobj:this._headobj).appendChild(t._viewobj);var s=t._viewobj.style,n={top:!0,left:!0,right:!0,bottom:!0},a="0px";!1===t.config.borderless&&(n=I(this._settings._inner),a="1px"),t._settings._inner=n,s.borderTopWidth=s.borderBottomWidth=s.borderLeftWidth=s.borderRightWidth=a,this.resize(!0)},show:function(t,s,n){if(!0===t){if(!this._settings.hidden)return;t=null}if(!this.callEvent("onBeforeShow",arguments))return!1;var a,r,o;if(this._settings.hidden=!1,this._viewobj.style.zIndex=this._settings.zIndex||De(),(this._settings.modal||this._modal)&&(this._modal_set(!0),this._modal=null),(s=s||{}).pos||(s.pos=this._settings.relative),t){"object"!=u(t)||t.tagName?(_(t=D(t),"Not existing target for window:show"),a=ht(t)):t.target||t.srcElement?(a=dt(t),r=20,o=5):a=t;var l=Math.max(window.innerWidth||0,document.body.offsetWidth),h=Math.max(window.innerHeight||0,document.body.offsetHeight);r=r||t.offsetWidth||0,o=o||t.offsetHeight||0;var c=this._last_size,d=a.x,f=a.y,g=0,p=0,v=0,m=0,b=this._settings.autofit;if(b){var x="node"===b,y=6,w=6,S=6;this._settings.point||(y=w=S=0),n="top",f=0,d=0,v=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,l-a.x-r<c[0]&&"right"==s.pos&&!x&&(s.pos="left"),"right"==s.pos?(d=a.x+y+r,w=-o,n="left",g=Math.round(a.y+o/2),p=d-S):"left"==s.pos?(d=a.x-y-c[0]-1,w=-o,n="right",g=Math.round(a.y+o/2),p=d+c[0]+1):(d=a.x<v?v:l+v-a.x>c[0]?a.x:l+v-y-c[0],p=Math.round(a.x+r/2),p=Math.min(p,d+c[0]-3*S)),m=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,(!c[1]||h+m-o-a.y-w>c[1]||x)&&"top"!=s.pos?(f=o+a.y+w-(this._settings.point?4:0),g||(n="top",g=f-S)):(f=a.y-w-c[1])<0?(f=0,"top"==n&&(n=!1)):g||(n="bottom",g=--f+c[1]+1)}var k=s.x||0,C=s.y||0,A=this._checkFixedPosition();A&&(f-=m,g-=m),this.setPosition(d+k,f+C),this._set_point&&(n&&this._settings.point?this._set_point(n,p+k,g+C,A):this._hide_point())}else this._setPosition(this._settings.left,this._settings.top);this._viewobj.style.display="block",this._hide_timer=1,L(function(){this._hide_timer=0},this,[],i.touch?400:100),this._render_hidden_views(),this.config.autofocus&&(this._prev_focus=Ve.getFocus(),Ve.setFocus(this)),-1==e._popups.find(this)&&e._popups.push(this),this.callEvent("onShow",[])},_hide:function(t){if(!(this._settings.hidden||this._settings.modal||this._hide_timer||t&&t.showpopup||e._modality&&this._settings.zIndex<=e._modality)){if(t){var s=i.isIE8?t.srcElement.click_view:t.click_view;s||0===s||(s=-1);var n=e._popups.find(this);if(n<=s)return}this._hide_single()}},hidden_setter:function(t){return t?this.hide():this.show(),!!t},hide:function(){var t=this._hide_single();this._hide_sub_popups(t)},_hide_single:function(){if(!this.$destructed&&!this._settings.hidden){if(this._settings.modal&&this._modal_set(!1),this._hiding_process(),this._settings.autofocus){var t=document.activeElement;t&&this._viewobj&&(this._viewobj.contains(t)||t===document.body)&&(Ve.setFocus(this._prev_focus),this._prev_focus=null)}var i=e._popups.find(this);return i>-1&&e._popups.removeAt(i),i}},_hiding_process:function(){"top"==this._settings.position?ci(this._viewobj,{type:"slide",x:0,y:-(this._content_height+20),duration:300,callback:this._hide_callback,master:this}):this._hide_callback()},_hide_sub_popups:function(t){if(t>-1)for(var i=e._popups,s=i.length-1;s>=t;s--)i[s]._hide_point&&i[s]._hide_single()},destructor:function(){this._modal_set(!1),rt(this._viewobj),this._settings.autofocus&&(e._final_destruction||Ve.setFocus(this._prev_focus),this._prev_focus=null),this._hide_sub_popups(),this._hide_point&&this._hide_point(),We.destructor.apply(this,[])},_hide_callback:function(){this.$destructed||(this._viewobj.style.display="none",this._settings.hidden=!0,this.callEvent("onHide",[]))},close:function(){this.destructor()},_inner_body_set:function(t){void 0===t.borderless&&(t.borderless=!0)},body_setter:function(t){return"object"!=u(t)&&(t={template:t}),this._inner_body_set(t),e._parent_cell=this,this._body_cell=Xt._view(t),this._bodyobj.appendChild(this._body_cell._viewobj),t},head_setter:function(i){var s=this;if(!1===i)return i;var n="string"==typeof i;return n&&(this._viewobj.setAttribute("aria-label",i),i={template:i}),("template"==i.view||!i.view&&i.template)&&t.extend(i,{padding:0,css:"webix_win_title",type:"header",borderless:!0}),n&&this.config.close?i={padding:{left:ni.inputHeight+2,right:2},cols:[i,{view:"icon",icon:"wxi-close",click:function(){s.hide()}}]}:t.extend(i,{borderless:!0}),e._parent_cell=this,this._head_cell=Xt._view(i),this._headobj.appendChild(this._head_cell._viewobj),i},getBody:function(){return this._body_cell},getHead:function(){return this._head_cell},adjust:function(){return this.resize()},resizeChildren:function(){this._body_cell&&this.resize()},resize:function(){ti.api.adjust.call(this),Y("onResize",[]),this.isVisible()&&this._setPosition(this._settings.left,this._settings.top)},_checkFixedPosition:function(){if(this._settings.master){var t=Zt(this._settings.master).getTopParentView().$view;return t&&"fixed"===t.style.position}return!1},_setPosition:function(t,e){if(this._settings.position||this._checkFixedPosition()){this.$view.style.position="fixed";var i=this._content_width,s=this._content_height;if(i<=0||s<=0)return;var n=window.innerWidth||document.documentElement.offsetWidth,a=window.innerHeight||document.documentElement.offsetHeight,r=Math.round((n-i)/2),o=Math.round((a-s)/2);if("function"==typeof this._settings.position){var l={left:r,top:o,width:i,height:s,maxWidth:n,maxHeight:a};this._settings.position.call(this,l),l.width==i&&l.height==s||this.$setSize(l.width,l.height),this.setPosition(l.left,l.top)}else"top"==this._settings.position&&(o=ci.isSupported()?-1*s:10),this._settings.position||(r=this._settings.left||r,o=this._settings.top||o),this.setPosition(r,o);"top"==this._settings.position&&ci(this._viewobj,{type:"slide",x:0,y:s-2*(this._settings.padding||0),duration:300,callback:this._topPositionCallback,master:this})}else this.setPosition(t,e)},_topPositionCallback:function(t){ci.clear(t),this._settings.top=-2*(this._settings.padding||0),this.setPosition(this._settings.left,this._settings.top)},setPosition:function(t,e){this._viewobj.style.top=e+"px",this._viewobj.style.left=t+"px",this._settings.left=t,this._settings.top=e},$getSize:function(t,e){var i=this._settings._inner;i&&(t+=(i.left?0:1)+(i.right?0:1),e+=(i.top?0:1)+(i.bottom?0:1)),this._settings.head&&(e+=1);var s=this._body_cell.$getSize(0,0),n=0;if(this._head_cell){var a=this._head_cell.$getSize(0,0);a[3]==a[2]&&(this._settings.headHeight=a[3]),e+=this._settings.headHeight,n=a[0]}if(this._settings.fullscreen){var r=window.innerWidth||document.body.clientWidth,o=window.innerHeight||document.body.clientHeight;return[r,r,o,o]}var l=si.api.$getSize.call(this,0,0);return n&&s[1]>1e5&&(s[0]=Math.max(n,s[0])),l[1]=Math.min(l[1],(s[1]>=1e5&&l[1]>=1e5?Math.max(s[0],l[0]):s[1])+t),l[3]=Math.min(l[3],(s[3]>=1e5&&l[3]>=1e5?Math.max(s[2],l[2]):s[3])+e),l[0]=Math.min(Math.max(l[0],s[0]+t),l[1]),l[2]=Math.min(Math.max(l[2],s[2]+e),l[3]),l},$setSize:function(t,e){si.api.$setSize.call(this,t,e),t=this._content_width,e=this._content_height,!1===this._settings.head?(this._headobj.style.display="none",this._body_cell.$setSize(t,e)):(this._head_cell.$setSize(t,this._settings.headHeight),this._body_cell.$setSize(t,e-this._settings.headHeight))},$skin:function(){this.defaults.headHeight=ni.barHeight},defaults:{top:0,left:0,autofit:!0,relative:"bottom",body:"",head:"",hidden:!0,autofocus:!0,minWidth:300,minHeight:200}},yi=t.protoUI(xi,si.view,vi,mi,B,bi),wi={api:xi,view:yi},Si={defaults:{padding:"4",hidden:!0},body_setter:function(t){return t=wi.api.body_setter.call(this,t),this._body_cell._viewobj.style.borderWidth="0px",t},attachTo:function(t){var e;_(t,"Invalid target for Context::attach"),e=t.on_context?t.attachEvent("onAfterContextMenu",T(this._show_at_ui,this)):ie(t,"contextmenu",this._show_at_node,{bind:this}),this.attachEvent("onDestruct",function(){t.callEvent?t.detachEvent(e):se(e),t=null})},getContext:function(){return this._area},setContext:function(t){this._area=t},_show_at_node:function(t){return this._area=D(t||ie),this._show_at(t)},_show_at_ui:function(t,e){return this._area={obj:Zt(e),id:t},this._show_at(e)},_show_at:function(t){var e=this.show(t,null,!0);return!1===e?e:(Y("onClick",[]),ut(t))},_show_on_mouse_out:!0,master_setter:function(t){return this.attachTo(t),null}},ki={_area:null,_blur_id:null,_ctrl:0,
/*! create textarea or returns existing
	   **/
init:function(){return null!==this._area?this._area:(e.destructors.push({obj:this}),this._area=document.createElement("textarea"),this._area.className="webix_clipbuffer",this._area.setAttribute("webixignore",1),this._area.setAttribute("spellcheck","false"),this._area.setAttribute("autocapitalize","off"),this._area.setAttribute("autocorrect","off"),this._area.setAttribute("autocomplete","off"),document.body.appendChild(this._area),ie(document.body,"keydown",T(function(t){var e=t.keyCode,i=!(!t.ctrlKey&&!t.metaKey);86===e&&i&&(this._area.value="",L(this._paste,this,[t],100))},this)),this._area)},destructor:function(){this._area=null},
/*! set text into buffer
	   **/
set:function(t){this.init(),t=""===t?"\n":t,this._area.value=t,this.focus()},
/*! select text in textarea
	   **/
focus:function(){this._isSelectRange()||(this.init(),this._area.focus(),this._area.select())},
/*! checks document selection
	   **/
_isSelectRange:function(){var t="";return void 0!==window.getSelection?t=window.getSelection().toString():void 0!==document.selection&&"Text"==document.selection.type&&(t=document.selection.createRange().text),!!t},
/*! process ctrl+V pressing
	   **/
_paste:function(t){var e=t.target||t.srcElement;if(e===this._area){var i=this._area.value,s=Ve.getFocus();!s||s.getEditor&&s.getEditor()||(s.callEvent("onPaste",[i]),this._area.select())}}},Ci={clipboard_setter:function(t){return!0!==t&&1!==t||(t="modify"),this.attachEvent("onAfterSelect",function(t){var e=this.getItem(t),i=this.type.templateCopy(e);ki.set(i,this),ki.focus(),Ve.setFocus(this)}),this.attachEvent("onPaste",function(t){P(this._paste[this._settings.clipboard])||this._paste[this._settings.clipboard].call(this,t)}),this.attachEvent("onFocus",function(){ki.focus()}),this.attachEvent("onItemClick",function(t){this._selected&&-1===this._selected.find(t)||(ki.focus(),Ve.setFocus(this))}),t},_paste:{insert:function(t){this.add({value:t})},modify:function(t){for(var e=this.getSelectedId(!0),i=0;i<e.length;i++)this.getItem(e[i]).value=t,this.refresh(e[i])},custom:function(){}},templateCopy_setter:function(t){this.type.templateCopy=Vt(t)},type:{templateCopy:function(t){return this.template(t)}}},Ai={$customPrint:function(t,e){if(this._prePrint(t,e))return!0;var i=this._getTableArray(t),s=this._getTableHTML(i,t);if(e)return s;var n=nt("div",{class:"webix_ui_print"});n.appendChild(s),ot(n,t.docFooter,document.body),window.print(),rt(n)},_prePrint:function(e,i){if(!i&&("y"==this.config.layout||e.scroll||this.config.prerender||this.config.autoheight))return!0;"x"==this.config.layout&&t.extend(e||{},{xCount:this.count(),nobreaks:!0},!0)},_getPageWidth:function(t){if("page"==t.fit)return 1/0;var e=t.size,s=e["portrait"==t.mode?"width":"height"];return Math.min(s*i.printPPI-2*i.printMargin)},_getTableArray:function(t,e,i){var s,n,a,r=this._getPageWidth(t),o=t.xCount||this._getVisibleRange()._dx,l=[],h=[],c=0;i=i||0,e=e||[];for(var d=0;d<this.data.order.length;){var u=this.data.pull[this.data.order[d]];if(n=parseInt(d/o),a=d-n*o,u&&a>=i){if((c+=this.type.width)>r&&a>i){s=h.length+i,l.push(h),d+=o-h.length,h=[],c=0;continue}var f=this.type.template(u,this.type),g=this._itemClassName,p={display:"table-cell",height:this.type.height+"px",width:this.type.width+"px"};h.push({txt:f,className:g+" "+(u.$css||""),style:p}),(d+1)%o==0&&(l.push(h),h=[],c=0)}d++}return e.push(l),s&&this._getTableArray(t,e,s),e},_getTableHTML:function(t,e){var i=nt("div");return t.forEach(T(function(s,n){var a=nt("table",{class:"webix_table_print "+this.$view.className,style:"border-collapse:collapse"});if(s.forEach(function(t){var e=nt("tr");t.forEach(function(t){var i=nt("td");if(t.txt&&(i.innerHTML=t.txt),t.className&&(i.className=t.className),t.style){var s=Object.keys(t.style);s.forEach(function(e){t.style[e]&&(i.style[e]=t.style[e])})}t.span&&(t.span.colspan>1&&(i.colSpan=t.span.colspan),t.span.rowspan>1&&(i.rowSpan=t.span.rowspan)),e.appendChild(i)}),a.appendChild(e)}),i.appendChild(a),!e.nobreaks&&n+1<t.length){var r=nt("DIV",{class:"webix_print_pagebreak"});i.appendChild(r)}},this)),i}},Ii={addCss:function(t,e,i){if(!this.addRowCss&&!i&&!this.hasCss(t,e)){var s=this.getItemNode(t);s&&(s.className+=" "+e,i=!0)}return this.data.addMark(t,e,1,1,i)},removeCss:function(t,e,i){if(!this.addRowCss&&!i&&this.hasCss(t,e)){var s=this.getItemNode(t);s&&(s.className=s.className.replace(e,"").replace("  "," "),i=!0)}return this.data.removeMark(t,e,1,i)},hasCss:function(t,e){return this.data.getMark(t,e)},clearCss:function(t,e){return this.data.clearMark(t,1,e)}},Ei={copy:function(t,e,i,s){var n=(s=s||{}).newId||t;i=i||this;var a=this.getItem(t);return _(a,"Incorrect ID in DataMove::copy"),i&&(a=i._externalData(a)),i.data.add(i._externalData(a,n),e,s.parent||0)},_next_move_index:function(t,e,i){if(e&&t){var s=this.getIndexById(t);return s+(i==this&&i.getIndexById(e)<s?0:1)}},move:function(t,e,i,s){var n=(s=s||{}).newId||t;if(_((i=i||this).data,"moving attempt to component without datastore"),i.data){if(R(t)){t.length>3&&(this.$blockRender=i.$blockRender=!0);for(var a=0;a<t.length;a++){var r=this.move(t[a],e,i,s);e=i._next_move_index(r,t[a+1],this)}return this.$blockRender=i.$blockRender=!1,void(t.length>3&&(this.refresh(),i!=this&&i.refresh()))}var o=t,l=this.getItem(t);return _(l,"Incorrect ID in DataMove::move"),i&&i!=this?(o=i.data.add(i._externalData(l,n),e,s.parent||0),this.data.remove(t)):(e<0&&(e=this.data.order.length-1),this.data.move(this.getIndexById(t),e),this.data.callEvent("onDataMove",[t,e,null,this.data.order[e+1]])),o}},moveUp:function(t,e){var i=this.getIndexById(t)-(e||1);return this.move(t,i<0?0:i)},moveDown:function(t,e){return this.moveUp(t,-1*(e||1))},moveTop:function(t){return this.move(t,0)},moveBottom:function(t){return this.move(t,this.data.count()-1)},_externalData:function(e,i){var s=t.extend({},e);return s.id=!i||this.data.pull[i]?$():i,s.$template=null,this._settings.externalData&&(s=this._settings.externalData.call(this,s,i,e)),s}},Ti={isEmail:function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test((t||"").toString())},isNumber:function(t){return parseFloat(t)==t},isChecked:function(t){return!!t||"0"===t},isNotEmpty:function(t){return 0===t||t}},Mi={$init:function(){this._events&&this.attachEvent("onChange",this.clearValidation)},clearValidation:function(){if(this.elements)for(var t in this.elements)this._clear_invalid(t)},validate:function(t,e){_(this.callEvent,"using validate for eventless object"),this.callEvent("onBeforeValidate",[]);var i=this._validate_details={},s=!0,n=this._settings.rules,a=this.isVisible&&!this.isVisible(),r=t&&t.hidden,o=t&&t.disabled,l={},h={};for(var c in this.elements){var d=this.elements[c].config.name;(a||this.elements[c].isVisible()||r)&&(this.elements[c].isEnabled()||o)?l[d]=this.elements[c]:h[d]=!0}if((n||l)&&!e&&this.getValues&&(e=this.getValues()),n){n.$obj&&(s=this._validate(n.$obj,e,e,"")&&s);var u=n.$all,f=e;if(this._settings.complexData&&(f=Nt.collapseNames(e,"",{},function(t){return!n[t]})),u)for(var g in e)if(!h[g]){var p=this._validate(u,f[g],e,g);p||(i[g]=!0),s=p&&s}for(var v in n)if(!h[v]&&0!==v.indexOf("$")&&!i[v]){_(n[v],"Invalid rule for:"+v);var m=this._validate(n[v],f[v],e,v);m||(i[v]=!0),s=m&&s}}if(l)for(var b in l)if(!i[b]){var x=l[b];if(x.validate){var y=x.validate();s=y&&s,y||(i[b]=!0)}else{var w=x._settings;if(w){var S=w.validate;if(!S&&w.required&&(S=n.isNotEmpty),S){var k=this._validate(S,e[b],e,b);k||(i[b]=!0),s=k&&s}}}}return this.callEvent("onAfterValidation",[s,this._validate_details]),s},_validate:function(t,e,i,s){return"string"==typeof t&&(t=Ti[t]),t.call(this,e,i,s)?(this.callEvent("onValidationSuccess",[s,i])&&this._clear_invalid&&this._clear_invalid(s),!0):(this.callEvent("onValidationError",[s,i])&&this._mark_invalid&&this._mark_invalid(s),!1)}},Pi={};function Li(t,e){if("object"==u(t)&&t._settings&&(t=t._settings.id),Pi[t]||e)return Pi[t];"string"!=typeof t&&"number"!=typeof t||(t={master:Zt(t)});var i=new zi(t),s=i._settings.master._settings.id;return Pi[s]=i,Zt(s).attachEvent("onDestruct",function(){Pi[this._settings.id]=null,delete Pi[this._settings.id]}),i}g("dp",Li),Li.$$=function(t){return Pi[t]};var zi=t.proto({defaults:{autoupdate:!0,updateFromResponse:!1,mode:"post",operationName:"webix_operation",trackMove:!1},
/*! constructor
	   **/
$init:function(){this.reset(),this._ignore=!1,this.name="DataProcessor",this.$ready.push(this._after_init_call)},reset:function(){this._updates=[]},url_setter:function(t){var e="";if("string"==typeof t){var i=t.split("->");i.length>1&&(t=i[1],e=i[0])}else t&&t.mode&&(e=t.mode,t=t.url);return e?Ce(e,t):t},master_setter:function(t){var e=t;return"DataStore"!=t.name&&(e=t.data),this._settings.store=e,t},_promise:function(t){var e=this._waitSave;this._waitSave=[],t();var i=Promise.all(this._waitSave);return this._waitSave=e,e&&e.push(i),i},
/*! attaching onStoreUpdated event
	   **/
_after_init_call:function(){var t=this._settings.store;t&&(t.attachEvent("onStoreUpdated",T(this._onStoreUpdated,this)),t.attachEvent("onDataMove",T(this._onDataMove,this)))},ignore:function(t,e){var i=this._ignore;this._ignore=!0,t.call(e||this),this._ignore=i},off:function(){this._ignore=!0},on:function(){this._ignore=!1},_copy_data:function(t){var e={};for(var i in t)0!==i.indexOf("$")&&(e[i]=t[i]);return e},save:function(t,e,i){return e=e||"update",this._save_inner(t,i,e,!0)},_save_inner:function(t,e,i,s){if("object"==u(t)&&(t=t.toString()),t&&!0!==this._ignore&&i&&"paint"!=i){var n=this._settings.store;n&&(e=e||this._settings.store.getItem(t),n._scheme_serialize&&(e=n._scheme_serialize(e)));var a={id:t,data:this._copy_data(e),operation:i};if(P(e.$parent)||(a.data.parent=e.$parent),"delete"!=a.operation){var r=this._settings.master;r&&r.data&&r.data.getMark&&r.data.getMark(t,"webix_invalid")&&(a._invalid=!0),this.validate(null,a.data)||(a._invalid=!0)}return this._check_unique(a)&&this._updates.push(a),this._settings.autoupdate||s?this._sendData(t):void 0}},_onDataMove:function(t,e,i,s){if(this._settings.trackMove){var n=E(this._settings.store.getItem(t));n.webix_move_index=e,n.webix_move_id=s,n.webix_move_parent=i,this._save_inner(t,n,"order")}},_onStoreUpdated:function(t,e,i){switch(i){case"save":case"update":i="update";break;case"add":i="insert";break;case"delete":i="delete";break;default:return!0}return this._save_inner(t,e,i)},_check_unique:function(t){for(var e=0;e<this._updates.length;e++){var i=this._updates[e];if(i.id==t.id&&!i._in_progress)return"delete"==t.operation&&("insert"==i.operation?this._updates.splice(e,1):i.operation="delete"),i.data=t.data,i._invalid=t._invalid,!1}return!0},send:function(){return this._sendData()},_sendData:function(t){if(this._settings.url){for(var e,i=this._updates,s=[],n=this._settings.url,a=0;a<i.length;a++){var r=i[a];if(!r._in_progress&&!r._invalid){var o=r.id;if(this._settings.autoupdate||!t||t==o){var l=r.operation,h=Ce.$parse("object"!=u(n)||n.$proxy?n:n[l]),c=h&&(h.$proxy||"function"==typeof h);if(h){var d=this._settings.store;if(d&&d._scheme_save&&d._scheme_save(r.data),this.callEvent("onBefore"+l,[o,r])){if(r._in_progress=!0,!this.callEvent("onBeforeDataSend",[r]))return;r.data=this._updatesData(r.data);var f=void 0;h.$proxy?(h.save&&(f=h.save(this.config.master,r,this)),s.push(r)):("insert"==l&&delete r.data.id,c?f=h.call(this.config.master,r.id,r.operation,r.data):(r.data[this._settings.operationName]=l,f=this._send(h,r.data,this._settings.mode))),f&&(f=this._proxy_on_save(f,{id:r.id,status:r.operation}),t&&o===t&&(e=f)),this.callEvent("onAfterDataSend",[r])}}}}}if(n.$proxy&&n.saveAll&&s.length){var g=n.saveAll(this.config.master,s,this);g&&(g=this._proxy_on_save(g,null),e||(e=g))}return e}},_proxy_on_save:function(t,e){var i=this;if(t)return t.then||(t=Mt.resolve(t)),t=t.then(function(t){var s;if(t&&"function"==typeof t.json&&(t=t.json()),!(s=null===e?i._processResult(t):i._processResult(e,"",t,-1)))throw s;return s},function(t){throw i._processError(e,"",null,t),t}),this._waitSave&&this._waitSave.push(t),t},
/*! process updates list to POST and GET params according dataprocessor protocol
	   *	@param updates
	   *		list of objects { id: "item id", data: "data hash", operation: "type of operation"}
	   *	@return
	   *		object { post: { hash of post params as name: value }, get: { hash of get params as name: value } }
	   **/
_updatesData:function(t){var e={};for(var i in t)0!==i.indexOf("$")&&(e[i]=t[i]);return e},
/*! send dataprocessor query to server
	   *	and attach event to process result
	   *	@param url
	   *		server url
	   *	@param get
	   *		hash of get params
	   *	@param post
	   *		hash of post params
	   *	@mode
	   *		'post' or 'get'
	   **/
_send:function(t,e,i){return _(t,"url was not set for DataProcessor"),zt()[i](t,e)},attachProgress:function(t,e,i){this.attachEvent("onBeforeDataSend",t),this.attachEvent("onAfterSync",e),this.attachEvent("onAfterSaveError",i),this.attachEvent("onLoadError",i)},_processError:function(t,e,i,s){t?this._innerProcessResult(!0,t.id,!1,t.status,!1,{text:e,data:i,loader:s}):(this.callEvent("onLoadError",arguments),Y("onLoadError",[e,i,s,this]))},_innerProcessResult:function(t,e,i,s,n,a){var r=this._settings.master,o=this.getItemState(e);if(o._in_progress=!1,!t){this.setItemState(e,!1);var l=this._settings.store;return l&&l.exists(e)&&(i&&e!=i&&l.changeId(e,i),n&&"delete"!=s&&this._settings.updateFromResponse&&this.ignore(function(){l.updateItem(i||e,n)})),this._settings.undoOnError&&r._settings.undo&&r.removeUndo(i||e),this.callEvent("onAfterSave",[n,e,a]),this.callEvent("onAfter"+s,[n,e,a]),n||{}}this.callEvent("onBeforeSaveError",[e,s,n,a])&&(o._invalid=!0,this._settings.undoOnError&&r._settings.undo&&(this.ignore(function(){r.undo(e)}),this.setItemState(e,!1)),this.callEvent("onAfterSaveError",[e,s,n,a]))},processResult:function(t,e,i){var s=e&&("error"==e.status||"invalid"==e.status),n=!!e&&(e.newid||e.id);return this._innerProcessResult(s,t.id,n,t.status,e,i)},_processResult:function(t,e,i,s){var n,a=this;if(this.callEvent("onBeforeSync",[t,e,i,s]),R(t))n=[],t.forEach(function(t){n.push(a.processResult(t,t,{}))});else if(-1===s)n=this.processResult(t,i,{});else{var r,o=this._settings.url;o.$proxy&&o.result?n=o.result(t,this._settings.master,this,e,i,s)||{}:(e&&(r=i.json(),!e||null!==r&&void 0!==r||(r={status:"error"})),n=this.processResult(t,r,{text:e,data:i,loader:s}))}return this.callEvent("onAfterSync",[t,e,i,s]),n},
/*! if it's defined escape function - call it
	   *	@param value
	   *		value to escape
	   *	@return
	   *		escaped value
	   **/
escape:function(t){return this._settings.escape?this._settings.escape(t):encodeURIComponent(t)},getState:function(){if(!this._updates.length)return!1;for(var t=this._updates.length-1;t>=0;t--)if(this._updates[t]._in_progress)return"saving";return!0},getItemState:function(t){var e=this._get_stack_index(t);return this._updates[e]||null},setItemState:function(t,e){if(e)this._save_inner(t,null,"update");else{var i=this._get_stack_index(t);i>-1&&this._updates.splice(i,1)}},_get_stack_index:function(t){for(var e=-1,i=0;i<this._updates.length;i++)if(this._updates[i].id==t){e=i;break}return e}},Ye,B,Mi);function Ni(){this.name="DataStore",t.extend(this,B),this.setDriver("json"),this.pull={},this.order=H(),this._marks={}}Ni.prototype={setDriver:function(t){_(be[t],"incorrect DataDriver"),this.driver=be[t]},_parse:function(t){this.callEvent("onParse",[this.driver,t]),this._filter_order&&this.filter();var i=this.driver.getInfo(t);i.key&&(e.securityKey=i.key),i.config&&this.callEvent("onServerConfig",[i.config]);var s=this.driver.getOptions(t);s&&this.callEvent("onServerOptions",[s]);var n=this.driver.getRecords(t);this._inner_parse(i,n),this._scheme_group&&this._group_processing&&!this._not_grouped_order&&this._group_processing(this._scheme_group),this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,t]),this.refresh()},_inner_parse:function(e,i){var s=e.from,n=!0,a=!1;if(!s&&0!==s&&this.order[0]){if(this._removeMissed){a={};for(var r=0;r<this.order.length;r++)a[this.order[r]]=!0}n=!1,s=this.order.length}else s=1*(s||0);for(var o=0,l=0;l<i.length;l++){var h=this.driver.getDetails(i[l]),c=this.id(h);this.pull[c]?n&&this.order[o+s]&&o++:(this.order[o+s]=c,o++),this.pull[c]?(t.extend(this.pull[c],h,!0),this._scheme_update&&this._scheme_update(this.pull[c]),a&&delete a[c]):(this.pull[c]=h,this._scheme_init&&this._scheme_init(h))}if(a){for(var d in this.blockEvent(),a)this.remove(d);this.unblockEvent()}var u=1*e.size;u&&(this.order[u-1]||(this.order[u-1]=void 0),u<this.order.length&&(this.order=this.order.slice(0,u)))},id:function(t){return t.id||(t.id=$())},changeId:function(t,e){t!=e&&(this.pull[t]&&(this.pull[e]=this.pull[t]),this.pull[e].id=e,this.order[this.order.find(t)]=e,this._filter_order&&(this._filter_order[this._filter_order.find(t)]=e),this._marks[t]&&(this._marks[e]=this._marks[t],delete this._marks[t]),this.callEvent("onIdChange",[t,e]),this._render_change_id&&this._render_change_id(t,e),delete this.pull[t])},getItem:function(t){return this.pull[t]},updateItem:function(e,i,s){"object"===u(e)&&(e=e.toString());var n=this.getItem(e),a=null,r=this.hasEvent("onDataUpdate");_(n,"Invalid ID for updateItem"),_(!i||!i.id||i.id==e,"Attempt to change ID in updateItem"),P(i)||n===i||(r&&(a=E(n)),e=n.id,t.extend(n,i,!0),n.id=e),this._scheme_update&&this._scheme_update(n),this.callEvent("onStoreUpdated",[e,n,s||"update"]),r&&this.callEvent("onDataUpdate",[e,n,a])},refresh:function(t){this._skip_refresh||(t?this.exists(t)&&this.callEvent("onStoreUpdated",[t,this.pull[t],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(t,e){this._skip_refresh=!0,t.call(e||this),this._skip_refresh=!1},getRange:function(t,e){if(t=t?this.getIndexById(t):this.$min||this.startOffset||0,e?e=this.getIndexById(e):(e=0===this.$max?0:Math.min(this.$max?this.$max-1:this.endOffset||1/0,this.count()-1))<0&&(e=0),t>e){var i=e;e=t,t=i}return this.getIndexRange(t,e)},getIndexRange:function(t,e){e=Math.min(0===e?0:e||1/0,this.count()-1);for(var i=H(),s=t||0;s<=e;s++)i.push(this.getItem(this.order[s]));return i},count:function(){return this.order.length},exists:function(t){return!!this.pull[t]},move:function(t,e){if(_(t>=0&&e>=0,"DataStore::move"),t!=e){var i=this.getIdByIndex(t),s=this.getItem(i);this._filter_order&&this._move_inner(this._filter_order,0,0,this.getIdByIndex(t),this.getIdByIndex(e)),this._move_inner(this.order,t,e),this.callEvent("onStoreUpdated",[i,s,"move"])}},_move_inner:function(t,e,i,s,n){if(s||n){e=i=-1;for(var a=0;a<t.length;a++)t[a]==s&&e<0&&(e=a),t[a]==n&&i<0&&(i=a)}var r=t[e];t.removeAt(e),t.insertAt(r,Math.min(t.length,i))},scheme:function(t){for(var e in this._scheme={},this._scheme_save=t.$save,this._scheme_init=t.$init||t.$change,this._scheme_update=t.$update||t.$change,this._scheme_serialize=t.$serialize,this._scheme_group=t.$group,this._scheme_sort=t.$sort,this._scheme_export=t.$export,t)"$"!=e.substr(0,1)&&(this._scheme[e]=t[e])},importData:function(t,e){var i=t?t.data||t:[];if(this._filter_order=null,"function"==typeof i.serialize){if(this.order=H([].concat(i.order)),this._make_full_copy){this._make_full_copy=!1;var s=this.pull;for(var n in this.pull={},i.pull){var a=s[n];this.pull[n]=E(i.pull[n]),a&&a.open&&(this.pull[n].open=!0)}}else for(var r in this.pull={},i.pull)this.pull[r]=i.pull[r];i.branch&&this.branch&&(this.branch=E(i.branch),this._filter_branch=null)}else{var o,l;if(this.order=H(),this.pull={},R(t))for(var h=0;h<t.length;h++)"object"==u(l=o=t[h])?l.id=l.id||$():l={id:o,value:o},this.order.push(l.id),this._scheme_init&&this._scheme_init(l),this.pull[l.id]=l;else for(var c in i)this.order.push(c),this.pull[c]={id:c,value:i[c]}}if(this._extraParser&&!i.branch){this.branch={0:[]},this._datadriver_child||this._set_child_scheme("data");for(var d=0;d<this.order.length;d++){var f=this.order[d];this._extraParser(this.pull[f],0,0,!1)}}this.callEvent("onStoreLoad",[]),e||this.callEvent("onStoreUpdated",[])},sync:function(t,e,i){this.unsync();var s=u(t);if("string"==s&&(t=Zt(t)),"function"!=s&&"object"!=s&&(i=e,e=null),"DataStore"!=t.name&&"TreeStore"!=t.name){if(!t.data||"DataStore"!==t.data.name&&"TreeStore"!==t.data.name)return this._sync_source=t,Y("onSyncUnknown",[this,t,e]);t=t.data}var n=T(function(s,n,a){this._skip_next_sync||(e&&this.branch&&(this._make_full_copy=!0),this.importData(t,!0),e&&this.silent(e),this._on_sync&&this._on_sync(),s&&n&&a||(this._marks={}),"delete"==a&&this._marks[s]&&delete this._marks[s],this.callEvent("onSyncApply",[]),i?i=!1:this.refresh())},this);this._sync_events=[t.attachEvent("onStoreUpdated",n),t.attachEvent("onIdChange",T(function(t,e){this.changeId(t,e),this.refresh(e)},this))],this._sync_source=t,this._back_sync_handler=this.attachEvent("onStoreUpdated",function(e,i,s){"update"!=s&&"save"!=s||(this._skip_next_sync=1,t.updateItem(e,i),this._skip_next_sync=0)}),n()},unsync:function(){if(this._sync_source){var t=this._sync_source;if("DataStore"==t.name||"TreeStore"==t.name||t.data&&"DataStore"==t.data.name&&"TreeStore"==t.data.name){for(var e=0;e<this._sync_events.length;e++)t.detachEvent(this._sync_events[e]);this.detachEvent(this._back_sync_handler)}else Y("onUnSyncUnknown",[this,t]);this._sync_source=null}},destructor:function(){this.unsync(),this.pull=this.order=this._marks=null,this._evs_events=this._evs_handlers={}},add:function(t,e){if(this._scheme)for(var i in this._scheme)P(t[i])&&(t[i]=this._scheme[i]);this._scheme_init&&this._scheme_init(t);var s=this.id(t),n=arguments[2]||this.order,a=n.length;if((P(e)||e<0)&&(e=a),e>a&&(_(0,"Warning"),e=Math.min(n.length,e)),!1===this.callEvent("onBeforeAdd",[s,t,e]))return!1;if(_(!this.exists(s),"Not unique ID"),this.pull[s]=t,n.insertAt(s,e),this._filter_order){var r=this._filter_order.length;this.order.length&&(r=Math.min(e||0,r)),this._filter_order.insertAt(s,r)}return this.callEvent("onStoreUpdated",[s,t,"add"]),this.callEvent("onAfterAdd",[s,e]),t.id},remove:function(t){if(R(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else{if(!1===this.callEvent("onBeforeDelete",[t]))return!1;_(this.exists(t),"Not existing ID in remove command"+t);var i=this.getItem(t);this.order.remove(t),this._filter_order&&this._filter_order.remove(t),delete this.pull[t],this._marks[t]&&delete this._marks[t],this.callEvent("onStoreUpdated",[t,i,"delete"]),this.callEvent("onAfterDelete",[t])}},clearAll:function(t){this.pull={},this._marks={},this.order=H(),this._filter_order=null,t||(this.url=null),this.callEvent("onClearAll",[t]),this.refresh()},getIdByIndex:function(t){return _(t>=0,"DataStore::getIdByIndex Incorrect index"),this.order[t]},getIndexById:function(t){return this.pull[t]?this.order.find(t):-1},getNextId:function(t,e){return this.order[this.getIndexById(t)+(e||1)]},getFirstId:function(){return this.order[0]},getLastId:function(){return this.order[this.order.length-1]},getPrevId:function(t,e){return this.order[this.getIndexById(t)-(e||1)]},sort:function(t,e,i){var s=t;"function"==typeof t?s={as:t,dir:e}:"string"==typeof t&&(s={by:t,dir:e,as:i}),"string"==typeof s.by&&(s.by=s.by.replace(/#/g,""));var n=[s.by,s.dir,s.as,s];this.callEvent("onBeforeSort",n)&&(this.order=this._sort_core(s,this.order),this._filter_order&&this._filter_order.length!=this.order.length&&(this._filter_order=this._sort_core(s,this._filter_order)),this.refresh(),this.callEvent("onAfterSort",n))},_sort_core:function(t,e){var i=this.sorting.create(t);if(this.order.length){for(var s=e.splice(0,this.$freeze),n=H(),a=e.length-1;a>=0;a--)n[a]=this.pull[e[a]];return n.sort(i),H(s.concat(n.map(function(t){return _(t,"Client sorting can't be used with dynamic loading"),this.id(t)},this)))}return e},_filter_reset:function(t){this._filter_order&&!t&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(t,e,i){for(var s=H(),n=this.$freeze||0,a=0;a<this.order.length;a++){var r=this.order[a];(a<n||t(this.getItem(r),e))&&s.push(r)}i&&this._filter_order||(this._filter_order=this.order),this.order=s},find:function(t,e){var i=[];for(var s in this.pull){var n=this.pull[s],a=!0;if("object"==u(t)){for(var r in t)if(n[r]!=t[r]){a=!1;break}}else t(n)||(a=!1);if(a&&i.push(n),e&&i.length)return i[0]}return e?null:i},filter:function(t,e,i){if((t||this._filter_order||this._filter_branch)&&this.callEvent("onBeforeFilter",[t,e])&&(this._filter_reset(i),this.order.length)){if(t){var s=t;e=e||"","string"==typeof t&&(t=t.replace(/#/g,""),"function"==typeof e?s=function(i){return e(i[t])}:(e=e.toString().toLowerCase(),s=function(e,i){return _(e,"Client side filtering can't be used with dynamic loading"),-1!=(e[t]||"").toString().toLowerCase().indexOf(i)})),this._filter_core(s,e,i,this._filterMode)}this.refresh(),this.callEvent("onAfterFilter",[])}},_obj_array:function(){for(var t=[],e=this.order.length-1;e>=0;e--)t[e]=this.pull[this.order[e]];return t},each:function(t,e,i){var s=this.order;i&&(s=this._filter_order||s);for(var n=0;n<s.length;n++)s[n]&&t.call(e||this,this.getItem(s[n]),n)},_methodPush:function(t,e){return function(){return t[e].apply(t,arguments)}},provideApi:function(t,e){e&&this.mapEvent({onbeforesort:t,onaftersort:t,onbeforeadd:t,onafteradd:t,onbeforedelete:t,onafterdelete:t,ondataupdate:t});for(var i=["sort","add","remove","exists","getIdByIndex","getIndexById","getItem","updateItem","refresh","count","filter","find","getNextId","getPrevId","clearAll","getFirstId","getLastId","serialize","sync"],s=0;s<i.length;s++)t[i[s]]=this._methodPush(this,i[s])},addMark:function(t,e,i,s,n){var a=this._marks[t]||{};if(this._marks[t]=a,!a[e]){if(a[e]=s||!0,i){var r=a.$css||"";a.$css=r+" "+e}n||this.refresh(t)}return a[e]},removeMark:function(t,e,i,s){var n=this._marks[t];if(n){if(n[e]&&delete n[e],i){var a=n.$css;a&&(n.$css=a.replace(e,"").replace("  "," "))}s||this.refresh(t)}},getMark:function(t,e){var i=this._marks[t];return!!i&&i[e]},clearMark:function(t,e,i){for(var s in this._marks){var n=this._marks[s];n[t]&&(delete n[t],e&&n.$css&&(n.$css=n.$css.replace(t,"").replace("  "," ")),i||this.refresh(s))}},serialize:function(t){var e=this.order;t&&this._filter_order&&(e=this._filter_order);for(var i=[],s=0;s<e.length;s++){var n=this.pull[e[s]];this._scheme_serialize&&!1===(n=this._scheme_serialize(n))||i.push(n)}return i},sorting:{create:function(t){return this._dir(t.dir,this._by(t.by,t.as))},as:{server:function(){return!1},date:function(t,e){return(t-=0)>(e-=0)?1:t<e?-1:0},int:function(t,e){return(t*=1)>(e*=1)?1:t<e?-1:0},string_strict:function(t,e){return t=t.toString(),e=e.toString(),t>e?1:t<e?-1:0},string:function(t,e){return e?t?(t=t.toString().toLowerCase(),e=e.toString().toLowerCase(),t>e?1:t<e?-1:0):-1:1},raw:function(t,e){return t>e?1:t<e?-1:0}},_by:function(t,e){return t?("function"!=typeof e&&(e=this.as[e||"string"]),_(e,"Invalid sorting method"),function(i,s){return e(i[t],s[t])}):e},_dir:function(t,e){return"asc"!=t&&t?function(t,i){return-1*e(t,i)}:e}}};var $i=t.proto({$init:function(t){t=t||"",this._feed_last={},this._data_generation=1,this.data=new Ni,this.data.attachEvent("onClearAll",T(this._call_onclearall,this)),this.data.attachEvent("onServerConfig",T(this._call_on_config,this)),this.attachEvent("onDestruct",this._call_onclearall),this.data.feed=this._feed,this.data.owner=t.id},_feed:function(t,e,i,s){return this._load_count?(s=Mt.defer(),this._load_count=[t,e,i,s],s):(this._load_count=!0,this._feed_last.from=t,this._feed_last.count=e,this._feed_common.call(this,t,e,i,!1,!1,s))},_feed_common:function(t,e,i,s,n,a){var r=this,o=null;if(s=s||this.data.url,t<0&&(t=0),n||(n={start:t,count:e}),this.count()&&(n.continue="true"),this.getState&&(o=this.getState()),s&&"string"!=typeof s)return o&&(o.sort&&(n.sort=o.sort),o.filter&&(n.filter=o.filter)),this.load(s,0,n).then(function(t){return r._feed_on_load(t,i,a)},function(){return r._feed_callback()});s+=-1==s.indexOf("?")?"?":"&";var l=[];for(var h in n)l.push(h+"="+n[h]);if(o&&(o.sort&&l.push("sort["+o.sort.id+"]="+encodeURIComponent(o.sort.dir)),o.filter))for(var c in o.filter){var d=o.filter[c];"object"==u(d)&&(d=zt().stringify(d)),l.push("filter["+c+"]="+encodeURIComponent(d))}return s+=l.join("&"),this._feed_last.url!==s?(this._feed_last.url=s,this.load(s).then(function(t){return r._feed_on_load(t,i,a)},function(){return r._feed_callback()})):(this._load_count=!1,Mt.reject())},_feed_on_load:function(t,e,i){var s=this;return L(function(){return s._feed_callback()},"","",100),e&&zt.$callback(this,e,t),i&&i.resolve(t),t},_feed_callback:function(){var t=this._load_count;this._load_count=!1,"object"==u(t)&&this.data.feed.apply(this,t)},load:function(t){t=Ce.$parse(t);var e=Ae.load.apply(this,arguments);return this.data.url||(this.data.url=t),e},loadNext:function(t,e,i,s,n){var a=this._settings;if(a.datathrottle&&!n){this._throttle_request&&window.clearTimeout(this._throttle_request);var r=Mt.defer();return this._throttle_request=L(function(){r.resolve(this.loadNext(t,e,i,s,!0))},this,0,a.datathrottle),r}return e||0===e||(e=this.count()),t||(t=a.datafetch||this.count()),this.data.url=this.data.url||s,this.callEvent("onDataRequest",[e,t,i,s])&&this.data.url?this.data.feed.call(this,e,t,i):Mt.reject()},_maybe_loading_already:function(t,e){var i=this._feed_last;return!!(this._load_count&&i.url&&i.from<=e&&i.count+i.from>=t+e)},removeMissed_setter:function(t){return this.data._removeMissed=t},_init_dataprocessor:function(){var e=this._settings.save;!0===e&&(e=this._settings.save=this._settings.url);var i={master:this};e&&e.url?t.extend(i,e):i.url=e,Li(i)},save_setter:function(t){return t&&this.$ready.push(this._init_dataprocessor),t},waitSave:function(t){var e=this;return Li(this)._promise(function(){t.call(e)}).then(function(t){return 1==t.length?t[0]:t})},scheme_setter:function(t){this.data.scheme(t)},dataFeed_setter:function(t){return t=Ce.$parse(t),this.data.attachEvent("onBeforeFilter",T(function(t,e){var i=this;if("function"==typeof t)return!0;if(this._settings.dataFeed&&(t||e)){t=t||"id",e&&"object"==u(e)&&(e=e.id),this.clearAll();var s=this._settings.dataFeed;if("string"==typeof s){var n="filter["+t+"]="+encodeURIComponent(e);this.load(s+(s.indexOf("?")<0?"?":"&")+n,this._settings.datatype)}else{var a={};a[t]=e,"function"==typeof s?s.call(this,e,a):s.$proxy&&s.load&&s.load(this,{filter:a}).then(function(t){return i._onLoad(t)},function(t){return i._onLoadError(t)})}return!1}},this)),t},_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var t=F(this._settings.ready,this.$scope);t&&L(t,this,arguments),this.callEvent&&L(this.callEvent,this,["onReady",[]]),this._ready_was_used=!0}},_call_onclearall:function(t){this._data_generation++,t||(this._load_count=!1,this._feed_last={},this.waitData=Mt.defer())},_call_on_config:function(t){this._parseSeetingColl(t)}},Ae),Di={getState:function(){for(var t=this.config.columns.length,e=this.config.columns,i={ids:[],size:[],select:this.getSelectedId(!0),scroll:this.getScrollState()},s=0;s<t;s++){var n=e[s];i.ids.push(n.id),i.size.push(n.fillspace||n.adjust?-1:n.width)}if(i.order=[].concat(this._hidden_column_order.length?this._hidden_column_order:i.ids),this._last_sorted&&(i.sort={id:this._last_sorted,dir:this._last_order}),this._filter_elements&&this._dtable_fully_ready){var a={},r=0;for(var o in this._filter_elements)if(!this._hidden_column_hash[o]){var l=this._filter_elements[o];l[1].value=a[o]=l[2].getValue(l[0]),r=1}r&&(i.filter=a)}for(var h in i.hidden=[],this._hidden_column_hash)i.hidden.push(h);return i},setState:function(t){var e=this.config.columns;if(t){if(this._last_sorted=null,this.blockEvent(),t.order&&t.order.length&&(this._hidden_column_order=[].concat(t.order),this._hidden_split=[this._settings.leftSplit,t.order.length-this._settings.rightSplit]),t.hidden){for(var i={},s=0;s<t.hidden.length;s++)i[t.hidden[s]]=!0,this._hidden_column_order.length||this.hideColumn(t.hidden[s]);if(this._hidden_column_order.length)for(var n=0;n<this._hidden_column_order.length;n++){var a=this._hidden_column_order[n];!!i[a]==!this._hidden_column_hash[a]&&this.hideColumn(a,{},!1,!!i[a])}}if(t.ids){for(var r=!1,o=this.config.columns,l=0;l<o.length;l++)o[l].id!=t.ids[l]&&(r=!0);if(r){for(var h=0;h<t.ids.length;h++)o[h]=this.getColumnConfig(t.ids[h])||o[h];this.refreshColumns()}}if(t.size)for(var c=Math.min(t.size.length,e.length),d=0;d<c;d++){var u=e[d];u&&t.size[d]>0&&u.width!=t.size[d]&&(delete u.fillspace,delete u.adjust,this._setColumnWidth(d,t.size[d],!0))}this.unblockEvent();var f=!(this._settings.leftSplit||this._settings.rightSplit);if(this._updateColsSizeSettings(f),this.callEvent("onStructureUpdate",[]),t.sort){var g=e[this.getColumnIndex(t.sort.id)];g&&this._sort(t.sort.id,t.sort.dir,g.sort)}if(t.filter){var p=this.filterByAll;for(var _ in this.filterByAll=function(){},t.filter){var v=t.filter[_];if(v&&this._filter_elements[_]){var m=this._filter_elements[_];m[2].setValue(m[0],v);var b=m[1].contentId;b&&(this._active_headers[b].value=v)}}for(var x in this._filter_elements)if(!t.filter[x]){var y=this._filter_elements[x];y[2].setValue(y[0],"")}this.filterByAll=p,this.filterByAll()}if(t.select&&this.select){var w=t.select;this.unselect();for(var S=0;S<w.length;S++)w[S].row&&!this.exists(w[S].row)||this._select(w[S],!0)}t.scroll&&this.scrollTo(t.scroll.x,t.scroll.y)}}},Hi={_initHandlers:function(t,e,i){e||_i.addDrop(t._contentobj,t,!0),i||_i.addDrag(t._contentobj,t),this.attachEvent("onDragOut",function(t,e){this.$dragMark(t,e)}),this.attachEvent("onBeforeAutoScroll",function(){var t=_i.getContext();return!(!_i._active||!t||t.to!==this&&!this._auto_scroll_force)})},drag_setter:function(e){return e&&(t.extend(this,Ee,!0),"order"!=e&&"move"!=e||t.extend(this,p("DragOrder"),!0),"inner"!=e&&"order"!=e||(this._inner_drag_only=!0),this._initHandlers(this,"source"==e,"target"==e),delete this.drag_setter),e},$dragIn:function(t,e,i){var s=this.locate(i)||null,n=_i._drag_context;if((this._inner_drag_only||n.from._inner_drag_only)&&n.from!==this)return!1;var a=_i.getMaster(e),r=this.getItemNode(s,i)||this._dataobj;return r==_i._landing?r:(n.target=s,n.to=a,this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),!1!==this._settings.dragscroll&&(this._auto_scroll_delay=L(function(t,e){this._drag_pause(e),this._auto_scroll(t,e)},this,[dt(i),s],250)),this.$dropAllow(n,i)&&this.callEvent("onBeforeDragIn",[n,i])?(this.$dragMark(n,i),r):(n.to=n.target=null,this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),null))},$dropAllow:function(){return!0},_drag_pause:function(){},_target_to_id:function(t){return t&&"object"===u(t)?t.toString():t},$dragOut:function(t,e,i,s){var n=(this._viewobj.contains(i)?this.locate(s):null)||null,a=_i._drag_context;return(a.target||"").toString()==(n||"").toString()?null:(this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),a.target=a.to=null,this.callEvent("onDragOut",[a,s]),null)},$drop:function(t,e,i){var s=_i._drag_context;s.to=this,this._define_index(t,e,s),this.$dragMark({},i),s.from&&s.from!=s.to&&s.from.callEvent&&!s.from.callEvent("onBeforeDropOut",[s,i])||this.callEvent("onBeforeDrop",[s,i])&&(this._context_to_move(s,i),this.callEvent("onAfterDrop",[s,i]))},_define_index:function(t,e,i){var s=this._target_to_id(i.target);this.getBranchIndex?s?(i.parent=this.getParentId(s),i.index=this.getBranchIndex(s)):i.index=-1:i.index=s?this.getIndexById(s):this.count()},_context_to_move:function(t){if(_(t.from,"Unsopported d-n-d combination"),t.from&&t.from.move){var e={parent:t.parent,mode:t.pos};t.from.move(t.source,t.index,t.to,e)}},_getDragItemPos:function(t,e){if(this.getItemNode){var i=this.locate(e,!0),s=i?this.getItemNode(i):null;return s?ht(s):s}},$drag:function(t,e){var s=this.locate(e,!0);if(s){var n=[s];if(this.getSelectedId){var a=this.getSelectedId(!0,!0);if(a&&a.length>1&&-1!=O.find.call(a,s)){var r={};n=[];for(var o=0;o<a.length;o++)r[a[o]]=!0;for(var l=0;l<this.data.order.length;l++){var h=this.data.order[l];r[h]&&n.push(h)}}}var c=_i._drag_context={source:n,start:s};if(c.fragile=this.addRowCss&&i.touch&&(i.isWebKit||i.isFF),c.from=this,this.callEvent("onBeforeDrag",[c,e]))return fi&&(fi._start_context=null),c.html||this.$dragHTML(this.getItem(s),e,c)}return null},$dragHTML:function(t,e,i){var s=this._toHTML(t);return R(i.source)&&i.source.length>1&&(s=this._toMultipleHTML(s,i.source.length)),s},_toMultipleHTML:function(t,e){t="<div class='webix_drag_main'>"+t+"</div>";var i="<div class='webix_drag_multiple'></div>";return e>2&&(i="<div class='webix_drag_multiple_last'></div>"+i),i+t+"<span class='webix_badge'>"+e+"</span>"},$dragMark:function(t){var e=null;return t.target&&(e=this._target_to_id(t.target)),this._marked&&this._marked!=e&&(t.fragile||this._remove_css([this._marked],"webix_drag_over",!0),this._marked=null),!this._marked&&e?(this._marked=e,t.fragile||this._add_css([e],"webix_drag_over",!0),e):!!t.to},_add_css:function(t,e){for(var i=0;i<t.length;i++)this.addCss(t[i],e)},_remove_css:function(t,e){for(var i=0;i<t.length;i++)this.removeCss(t[i],e)},$dropHTML:function(){return""},_set_drop_area:function(t,e){var i=this.getItemNode(t);i?i.parentNode.insertBefore(_i._dropHTML[0],i):e.children[0].appendChild(_i._dropHTML[0])}},Fi={$drag:function(t,e){var i=Hi.$drag.apply(this,arguments);if(!i)return i;var s=_i._drag_context;return this._close_branches&&this._close_branches(s),this._inner_drag_only&&this.getBranchIndex&&(this._drag_order_stored_left=this._drag_order_complex?20*(this.getItem(s.start).$level+1)+8:0),R(s.source)&&!s.fragile&&(_i._setDragOffset(e),this._add_css(s.source,"webix_invisible")),i},$dragIn:function(t,e,i){var s=Hi.$dragIn.apply(this,arguments);if(!s)return s;_i._dropHTML||(_i._dropHTML=this._init_drop_area());var n=_i._drag_context,a="$webix-last";if(n.target&&(a=this._target_to_id(n.target)),"$webix-last"!=a&&"$webix-drop"!=a){var r={direction:this._settings.layout||this._drag_direction||"y",x:"width",y:"height"},o=ht(s),l=dt(i)[r.direction]-o[r.direction];2*l>o[r[r.direction]]&&(a=this.getNextId(a)||"$webix-last")}return a==this._marked_item_id||"$webix-drop"==a?s:(this._marked_item_id=a,this._set_drop_area(a,e),s)},$dragPos:function(t){if(!this._inner_drag_only){var e=_i._drag_context;return t.y+=e.y_offset,void(t.x+=e.x_offset)}var i=ht(this.$view),s="x"==this._settings.layout;if(s)if(i.x-=12,t.y=i.y-8,t.x=t.x-18,t.x<i.x)t.x=i.x;else{var n=i.x+i.width;t.x>n&&(t.x=n)}else if(i.y+=(this._header_height||0)-12,t.x=i.x+8+(this._drag_order_stored_left||0),t.y=t.y-18,t.y<i.y)t.y=i.y;else{var a=i.y+i.height-(this._header_height||0);t.y>a&&(t.y=a)}},$dragOut:function(t,e,i){return e!=i&&(rt(_i._dropHTML),this._marked_item_id=_i._dropHTML=null),Hi.$dragOut.apply(this,arguments)},_define_index:function(t,e,i){var s="$webix-last"==this._marked_item_id?null:this._marked_item_id;this.getBranchIndex?s?(i.parent=this.getParentId(s),i.index=this.getBranchIndex(s),t==e&&this.getParentId(i.start)==i.parent&&this.getBranchIndex(i.start)<i.index&&(i.index-=1)):i.index=-1:(i.index=s?this.getIndexById(s):this.count(),i.index-=t==e&&this.getIndexById(i.start)<i.index?1:0)},$dragDestroy:function(){var t=_i._drag_context;R(t.source)&&!t.fragile&&this._remove_css(t.source,"webix_invisible"),rt(_i._html)},_init_drop_area:function(){var t=document.createElement("div");return t.className="webix_drop_area",t.style.width=this.type.width+"px",t.style.height=this.type.height+"px",t.innerHTML=this.$dropHTML(),t.setAttribute(this._id,"$webix-drop"),[t]},$dragMark:function(){return!1}};g("DragOrder",Fi);var Ri={$init:function(){this._undoHistory=t.extend([],O,!0),this._undoCursor=-1},undo_setter:function(t){return t&&(this._init_undo(),this._init_undo=function(){}),t},_init_undo:function(){var t=this;this.attachEvent("onBeforeDrop",function(e){if(e.from==e.to){var i=t._draggedItem=E(this.getItem(e.start));this.data.branch?i.$index=this.getBranchIndex(i.id):i.$index=this.getIndexById(i.id)}}),this.data.attachEvent("onDataMove",function(e){if(t._draggedItem&&t._draggedItem.id==e){var i=t._draggedItem;t._draggedItem=null,t._addToHistory(e,i,"move")}}),this.data.attachEvent("onBeforeDelete",function(e){if(this.getItem(e)){var i=t._deletedItem=E(this.getItem(e));this.branch?(i.$index=this.getBranchIndex(e),this.branch[e]&&(i.$branch=E(this.serialize(e)))):i.$index=this.getIndexById(e)}}),this.data.attachEvent("onDataUpdate",function(e,i,s){t._addToHistory(e+"",s,"update")}),this.data.attachEvent("onStoreUpdated",function(e,i,s){var n=null;e&&("add"==s?n=E(i):"delete"==s&&(n=t._deletedItem),n&&t._addToHistory(e,n,s))}),this.data.attachEvent("onIdChange",function(e,i){"object"==u(e)&&(e=e.row);for(var s=0;s<t._undoHistory.length;s++)t._undoHistory[s].id==e&&(t._undoHistory[s].id=i)})},_addToHistory:function(t,e,i){!this._skipHistory&&this._settings.undo&&(this._undoHistory.push({id:t,action:i,data:e}),20==this._undoHistory.length&&this._undoHistory.splice(0,1),this._skipCursorInc||(this._undoCursor=this._undoHistory.length-1))},ignoreUndo:function(t,e){this._skipHistory=!0,t.call(e||this),this._skipHistory=!1},removeUndo:function(t){for(var e=this._undoHistory.length-1;e>=0;e--)this._undoHistory[e].id==t&&("id"==this._undoHistory[e].action&&(t=this._undoHistory[e].data),this._undoHistory.removeAt(e));this._undoCursor=this._undoHistory.length-1},undo:function(t){if(t)this.ignoreUndo(function(){var e,i;for(i=this._undoHistory.length-1;!e&&i>=0;i--)this._undoHistory[i].id==t&&(e=this._undoHistory[i]);e&&(this._undoAction(e),this._undoHistory.removeAt(i+1),this._undoCursor=this._undoHistory.length-1)});else{var e=this._undoHistory[this._undoCursor];e&&(this.ignoreUndo(function(){this._undoAction(e),this._undoHistory.removeAt(this._undoCursor)}),this._undoCursor--)}},_undoAction:function(t){if("delete"==t.action){var e=null,i=t.data.$parent;t.data.$branch&&(e={parent:t.id,data:E(t.data.$branch)},delete t.data.$branch,i&&!this.data.branch[i]&&(i=0)),this.add(t.data,t.data.$index,i),e&&this.parse(e)}else"add"==t.action?this.remove(t.id):"update"==t.action?this.updateItem(t.id,t.data):"move"==t.action&&(t.data.$parent?this.getItem(t.data.$parent)&&this.move(t.id,t.data.$index,null,{parent:t.data.$parent}):this.move(t.id,t.data.$index))}};function ji(t){if("string"==typeof t)return t;if(t.linkInput)return t._settings.id;"object"==u(t)?(R(t)&&(t={data:t}),t.view=t.view||"suggest"):!0===t&&(t={view:"suggest"});var e=Xt(t);return e.config.id}function Oi(t){var e=t.header&&t.header[0]?t.header[0].text:t.editValue||t.label;return(e||"").toString().replace(/<[^>]*>/g,"")}var Bi={text:{focus:function(){this.getInputNode(this.node).focus(),this.getInputNode(this.node).select()},getValue:function(){return this.getInputNode(this.node).value},setValue:function(t){var e=this.getInputNode(this.node);e.value=t,function(t,e){var i=t.config.suggest;if(i){var s=t.config.suggest=ji(i),n=Zt(s);n&&e&&n.linkInput(e)}}(this,e)},getInputNode:function(){return this.node.firstChild},render:function(){return nt("div",{class:"webix_dt_editor"},"<input type='text' aria-label='"+Oi(this.config)+"'>")}},"inline-checkbox":{render:function(){return{}},getValue:function(){return this.node.checked},setValue:function(){},focus:function(){this.node.focus()},getInputNode:function(){},$inline:!0},"inline-text":{render:function(){return{}},getValue:function(){return this.node.value},setValue:function(){},focus:function(){try{this.node.select(),this.node.focus()}catch(t){}},getInputNode:function(){},$inline:!0},checkbox:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().checked},setValue:function(t){this.getInputNode().checked=!!t},getInputNode:function(){return this.node.firstChild.firstChild},render:function(){return nt("div",{class:"webix_dt_editor"},"<div><input type='checkbox' aria-label='"+Oi(this.config)+"'></div>")}},select:{focus:function(){this.getInputNode().focus()},getValue:function(){return this.getInputNode().value},setValue:function(t){this.getInputNode().value=t},getInputNode:function(){return this.node.firstChild},render:function(){var t="",e=this.config.options||this.config.collection;if(_(e,"options not defined for select editor"),e.data&&e.data.each)e.data.each(function(e){t+="<option value='"+e.id+"'>"+e.value+"</option>"});else if(R(e))for(var i=0;i<e.length;i++){var s=e[i],n=P(s.id),a=n?s:s.id,r=n?s:s.value;t+="<option value='"+a+"'>"+r+"</option>"}else for(var o in e)t+="<option value='"+o+"'>"+e[o]+"</option>";return nt("div",{class:"webix_dt_editor"},"<select aria-label='"+Oi(this.config)+"'>"+t+"</select>")}},popup:{focus:function(){this.getInputNode().focus()},destroy:function(){this.getPopup().hide()},getValue:function(){return this.getInputNode().getValue()||""},setValue:function(t){this.getPopup().show(this.node),this.getInputNode().setValue(t)},getInputNode:function(){return this.getPopup().getChildViews()[0]},getPopup:function(){return this.config.$popup||(this.config.$popup=this.createPopup()),Zt(this.config.$popup)},createPopup:function(){var t,e=this.config.popup||this.config.suggest;if(e)return"object"!=u(e)||e.name?t=Zt(e):(e.view=e.view||"suggest",t=Xt(E(e))),t._linked||(t.linkInput?t.linkInput(document.body):this.linkInput&&this.linkInput(document.body),t._linked=!0),t;var i=Bi.$popup[this.popupType];return"string"==typeof i||i.name||(i=Bi.$popup[this.popupType]=Xt(i),this.popupInit(i),i.linkInput||this.linkInput(document.body)),i._settings.id},linkInput:function(t){ee(D(t),"keydown",T(function(t){if(this.config.$popup){var e,i=t.which||t.keyCode,s=this.getInputNode();s.isVisible()&&(s.moveSelection&&i<41&&i>32?(33==i&&(e="pgup"),34==i&&(e="pgdown"),35==i&&(e="bottom"),36==i&&(e="top"),37==i&&(e="left"),38==i&&(e="up"),39==i&&(e="right"),40==i&&(e="down"),s.moveSelection(e)):13!==i||"TEXTAREA"===t.target.nodeName&&t.shiftKey||Y("onEditEnd",[]))}},this))},popupInit:function(){},popupType:"text",render:function(){return{}},$inline:!0}};Bi.color=t.extend({focus:function(){},popupType:"color",popupInit:function(t){t.getChildViews()[0].attachEvent("onItemClick",function(t){Y("onEditEnd",[t])})}},Bi.popup),Bi.date=t.extend({focus:function(){},popupType:"date",setValue:function(t){this._is_string=this.config.stringResult||t&&"string"==typeof t,Bi.popup.setValue.call(this,t)},getValue:function(){return this.getInputNode().getValue(this._is_string?St.parseFormatStr:"")||""},popupInit:function(t){t.getChildViews()[0].attachEvent("onDateSelect",function(t){Y("onEditEnd",[t])})}},Bi.popup),Bi.combo=t.extend({_create_suggest:function(t){return this.config.popup?this.config.popup.config.id:t?ji(t):this._shared_suggest(t)},_shared_suggest:function(){var t=Bi.combo;return t._suggest=t._suggest||this._create_suggest(!0)},render:function(){var t=nt("div",{class:"webix_dt_editor"},"<input type='text' role='combobox' aria-label='"+Oi(this.config)+"'>"),e=this.config.suggest=this._create_suggest(this.config.suggest);return e&&(Zt(e).linkInput(t.firstChild,!0),ee(t.firstChild,"click",T(this.showPopup,this))),t},getPopup:function(){return Zt(this.config.suggest)},showPopup:function(){var t=this.getPopup(),e=t.getList(),i=this.getInputNode(),s=this._initial_value;t.show(i),i.setAttribute("aria-expanded","true"),s?(_(e.exists(s),"Option with ID "+s+" doesn't exist"),e.exists(s)&&(e.select(s),e.showItem(s))):(e.unselect(),e.showItem(e.getFirstId())),t._last_input_target=i},afterRender:function(){this.showPopup()},setValue:function(t){if(this._initial_value=t,this.config.suggest){var e=Zt(this.config.suggest),i=this.config.collection||this.config.options;i&&e.getList().data.importData(i),this.getInputNode(this.node).value=e.getItemText(t)}},getValue:function(){var t=this.getInputNode().value;if(this.config.suggest){var e=Zt(this.config.suggest),i=e.getList();(t||i.getSelectedId&&i.getSelectedId())&&(t=e.getSuggestion(t))}return t}},Bi.text),Bi.richselect=t.extend({focus:function(){},getValue:function(){return this.getPopup().getValue()},setValue:function(t){var e=this.config.collection||this.config.options;this.getInputNode(),e&&this.getPopup().getList().data.importData(e),this.getPopup().show(this.node),this.getPopup().setValue(t)},getInputNode:function(){return this.getPopup().getList()},popupInit:function(t){t.linkInput(document.body)},popupType:"richselect"},Bi.popup),Bi.password=t.extend({render:function(){return nt("div",{class:"webix_dt_editor"},"<input type='password' aria-label='"+Oi(this.config)+"'>")}},Bi.text),Bi.$popup={text:{view:"popup",width:250,height:150,body:{view:"textarea"}},color:{view:"popup",body:{view:"colorboard"}},date:{view:"popup",width:250,height:250,padding:0,body:{view:"calendar",icons:!0,borderless:!0}},richselect:{view:"suggest",body:{view:"list",select:!0}},multiselect:{view:"multisuggest",suggest:{button:!0}}};var Vi={defaults:{editaction:"click"},$init:function(e){this._editors={},this._in_edit_mode=0,this._edit_open_time=0,this._contentobj.style.position="relative",e&&(e.onDblClick=e.onDblClick||{}),this.attachEvent("onAfterRender",this._refocus_inline_editor),this._settings.editable&&this._init_edit_events_once(),t.extend(this,Ri)},_refocus_try:function(t){try{if("number"==typeof t.selectionStart)t.selectionStart=t.selectionEnd=t.value.length;else if(void 0!==t.createTextRange){var e=t.createTextRange();e.collapse(!1),e.select()}}catch(t){}},_refocus_inline_editor:function(){var t=this.getEditor();if(t&&t.$inline&&!t.getPopup){var e=this._locateInput(t);if(e&&e!=t.node){var i=t.node.value;t.node=e,e.value=i,e.focus(),this._refocus_try(e)}else this.editStop()}},editable_setter:function(t){return t&&this._init_edit_events_once(),t},_init_edit_events_once:function(){W("onEditEnd",T(function(){this._in_edit_mode&&this.editStop()},this)),W("onClick",T(function(t){this._in_edit_mode&&new Date-this._edit_open_time>200&&(this._last_editor&&!this._last_editor.popupType&&t&&this._last_editor.node&&this._last_editor.node.contains(t.target||t.srcElement)||this.editStop())},this)),this.data.attachEvent&&this.data.attachEvent("onIdChange",T(function(t,e){this._changeEditorId(t,e)},this)),this.attachEvent("onItemClick",function(t){this._settings.editable&&"click"==this._settings.editaction&&this.edit(t)}),this.attachEvent("onItemDblClick",function(t){this._settings.editable&&"dblclick"==this._settings.editaction&&this.edit(t)}),this._reset_active_editor=T(function(){this._edit_open_time=new Date},this),this._init_edit_events_once=function(){},this._component_specific_edit_init&&this._component_specific_edit_init()},_handle_live_edits:function(){L(function(){var t=this.getEditor();if(t&&t.config.liveEdit){var e={value:t.getValue(),old:t.value};if(e.value==e.old)return;t.value=e.value,this._set_new_value(t,e.value,!1),this.callEvent("onLiveEdit",[e,t])}},this)},_show_editor_form:function(t){var e=this._settings.form;"string"!=typeof e&&(this._settings.form=e=Xt(e).config.id);var i=(e=Zt(e)).setValues?e:e.getChildViews()[0];i.setValues(this.getItem(t.row||t)),e.config.master=this.config.id,e.show(this.getItemNode(t));var s=i.getChildViews()[0];s.focus&&s.focus()},edit:function(i,s,n){if(this._settings.editable&&this.callEvent("onBeforeEditStart",[i])){if(this._settings.form)return this._show_editor_form(i);var a=this._get_editor_type(i);if(a){if(this.getEditor(i))return;s||this.editStop(),_(Bi[a],"Invalid editor type: "+a);var r=t.extend({},Bi[a]),o=this._init_editor(i,r,n);r.config.liveEdit&&(this._live_edits_handler=this.attachEvent("onKeyPress",this._handle_live_edits));var l=r.getPopup?r.getPopup(o)._viewobj:o;return l&&ee(l,"click",this._reset_active_editor),o&&ee(o,"change",this._on_editor_change,{bind:{view:this,id:i}}),!1!==n&&r.focus(),this.$fixEditor&&this.$fixEditor(r),this._edit_open_time=e.edit_open_time=new Date,Ve.setFocus(this,!0),this.callEvent("onAfterEditStart",[i]),r}return null}},getEditor:function(t){return t?this._editors[t]:this._last_editor},_changeEditorId:function(t,e){var i=this._editors[t];i&&(this._editors[e]=i,i.id=e,delete this._editors[t])},_on_editor_change:function(){this.view.hasEvent("onEditorChange")&&this.view.callEvent("onEditorChange",[this.id,this.view.getEditorValue(this.id)])},_get_edit_config:function(){return this._settings},_init_editor:function(t,e,i){e.config=this._get_edit_config(t);var s=e.render();e.$inline&&(s=this._locateInput(t)),e.node=s;var n=this.getItem(t),a=n[this._settings.editValue||"value"];return P(a)&&(a=""),e.setValue(a,n),e.value=a,this._addEditor(t,e),!1!==i&&this.showItem(t),e.$inline||this._sizeToCell(t,s,!0),e.afterRender&&e.afterRender(),s},_locate_cell:function(t){return this.getItemNode(t)},_locateInput:function(t){var e=this._locate_cell(t);return e&&(e=e.getElementsByTagName("input")[0]||e),e},_get_editor_type:function(){return this._settings.editor},_addEditor:function(t,e){e.id=t,this._editors[t]=this._last_editor=e,this._in_edit_mode++},_removeEditor:function(t){this._last_editor==t&&(this._last_editor=0),t.destroy&&t.destroy(),delete t.popup,delete t.node,delete this._editors[t.id],this._in_edit_mode--},focusEditor:function(){var t=this.getEditor.apply(this,arguments);t&&t.focus&&t.focus()},editCancel:function(){this.editStop(null,null,!0)},_applyChanges:function(t){if(t){var e=this.getEditor();if(e&&e.getPopup&&e.getPopup()==t.getTopParentView())return}this.editStop()},editStop:function(t){if(!this._edit_stop){this._edit_stop=1;var e=arguments[2],i=1;return t?i=this._editStop(this._editors[t],e):this._for_each_editor(function(t){i*=this._editStop(t,e)}),this._edit_stop=0,i}},_cellPosition:function(t){var e=this.getItemNode(t);return{left:e.offsetLeft,top:e.offsetTop,height:e.offsetHeight,width:e.offsetWidth,parent:this._contentobj}},_sizeToCell:function(t,e,i){if(e.style){var s=this._cellPosition(t);return e.style.top=s.top+"px",e.style.left=s.left+"px",e.style.width=s.width-1+"px",e.style.height=s.height-1+"px",e.top=s.top,i&&s.parent.appendChild(e),s}},_for_each_editor:function(t){for(var e in this._editors)t.call(this,this._editors[e])},_editStop:function(t,i){if(t&&!e._final_destruction){var s={value:this._get_new_value(t),old:t.value};if(this.callEvent("onBeforeEditStop",[s,t,i])){if(!i){var n=s.old;if("string"==typeof s.value&&(n+=""),n!=s.value||t.config.liveEdit){var a=this._set_new_value(t,s.value,!0);this.updateItem(t.row||t.id,a)}}t.$inline?t.node=null:rt(t.node);var r=t.config.suggest;return r&&"string"==typeof r&&Zt(r).hide(),this._removeEditor(t),this._live_edits_handler&&this.detachEvent(this._live_edits_handler),this.callEvent("onAfterEditStop",[s,t,i]),1}return 0}},validateEditor:function(t){var e=!0;if(this._settings.rules){var i=this.getEditor(t),s=i.column||this._settings.editValue||"value",n=this._settings.rules[s],a=this._settings.rules.$all;if(n||a){var r=this.data.getItem(i.row||i.id),o=i.getValue(),l=i.getInputNode();n&&(e=n.call(this,o,r,s)),a&&(e=a.call(this,o,r,s)&&e),e?_t(l,"webix_invalid"):pt(l,"webix_invalid"),Y("onLiveValidation",[i,e,r,o])}}return e},getEditorValue:function(t){var e;if(e=0===arguments.length?this._last_editor:this.getEditor(t))return e.getValue()},getEditState:function(){return this._last_editor||!1},editNext:function(t,e){if(t=!1!==t,1==this._in_edit_mode||e){var i=this._find_cell_next(this._last_editor||e,function(t){return!!this._get_editor_type(t)},t);if(this.editStop())return i&&(this.edit(i),this._after_edit_next(i)),!1}},_after_edit_next:function(){},_find_cell_next:function(t,e,i){var s=this.getIndexById(t.id),n=this.data.order;if(i){for(var a=s+1;a<n.length;a++)if(e.call(this,n[a]))return n[a]}else for(var r=s-1;r>=0;r--)if(e.call(this,n[r]))return n[r];return null},_get_new_value:function(t){return t.getValue()},_set_new_value:function(t,e,i){var s=i?{}:this.getItem(t.id);return s[this._settings.editValue||"value"]=e,s}},Yi={$init:function(){this.$view.className+=" webix_flexlayout"},_fix_vertical_layout:function(){},_beforeResetBorders:function(){},_afterResetBorders:function(){},$getSize:function(){y(this,!0);var t=0,e=0,i=this._settings.gravity;this._sizes=[];for(var s=0;s<this._cells.length;s++){var n=this._cells[s].$getSize(0,0);this._sizes.push(n),t=Math.max(t,n[0]),e=Math.max(e,n[2])}t+=this._padding.left+this._padding.right,e+=this._padding.top+this._padding.bottom,this._settings.width&&(t=Math.max(t,this._settings.width)),this._settings.height&&(e=Math.max(e,this._settings.height));var a=[t,1e5,e,1e5,i];return w(0,a),a},render:function(){this.resize()},_set_child_size:function(){if(this.isVisible(this._settings.id)){var t=this.$view.style,e=Math.round(this._margin/2);t.paddingTop=this._padding.top-e+"px",t.paddingBottom=this._padding.bottom-e+"px",t.paddingLeft=this._padding.left-e+"px",t.paddingRight=this._padding.right-e+"px";for(var i=0;i<this._cells.length;i++)if(!this._cells[i]._settings.hidden){var s=this._cells[i].$view,n=this._sizes[i],a=this._cells[i]._settings;s&&(s.style.minWidth=n[0]+"px",n[1]<1e5&&n[1]!=n[0]&&(s.style.maxWidth=n[1]+"px"),s.style.flexBasis=a.flexBasis||n[0]+"px",s.style.flexGrow=a.flexGrow||(n[1]!=n[0]?n[4]:0),s.style.height=n[3]!=n[2]?"auto":n[2]+"px",s.style.minHeight=n[2]+"px",n[3]<1e5&&n[3]!=n[2]&&(s.style.maxHeight=n[3]+"px"),s.style.margin=e+"px")}for(var r=[],o=0;o<this._cells.length;o++)if(!this._cells[o]._settings.hidden){var l=this._cells[o].$view;r[o]=[l.offsetWidth,l.offsetHeight]}for(var h=0;h<this._cells.length;h++)if(!this._cells[h]._settings.hidden){var c=this._cells[h],d=c.$view;if(d){c._settings.flex=!0;var u=this._sizes[h],f=u[2]==u[3]?u[2]:r[h][1];c.$setSize(r[h][0],f),c._settings.flex=!1}}this.$height=this._content_height=this.$view.scrollHeight,this.$view.style.height=this._content_height+"px"}}},Wi={sum:function(t,e){e=e||this;for(var i=0,s=0;s<e.length;s++){var n=parseFloat(t(e[s]),10);isNaN(n)||(i+=n)}return i},min:function(t,e){e=e||this;for(var i=1/0,s=0;s<e.length;s++){var n=parseFloat(t(e[s]),10);isNaN(n)||n<i&&(i=n)}return i===1/0?0:1*i},max:function(t,e){e=e||this;for(var i=-1/0,s=0;s<e.length;s++){var n=parseFloat(t(e[s]),10);isNaN(n)||n>i&&(i=n)}return i===-1/0?0:1*i},count:function(t,e){for(var i=0,s=0;s<e.length;s++){var n=t(e[s]);null!==n&&void 0!==n&&i++}return i},any:function(t,e){return t(e[0])},string:function(t){return t.$name}},Xi={$init:function(){this.attachEvent("onClearAll",this._reset_groups),this.attachEvent("onSyncApply",this._reset_groups)},_reset_groups:function(){this.getBranchIndex?this._not_grouped_branches=this._created_groupes=null:this._not_grouped_order=this._not_grouped_pull=null},ungroup:function(t){if(this.getBranchIndex)return this._ungroup_tree.apply(this,arguments);this._not_grouped_order&&(this.order=this._not_grouped_order,this.pull=this._not_grouped_pull,this._not_grouped_pull=this._not_grouped_order=null),t||this.callEvent("onStoreUpdated",[])},_group_processing:function(t){this.blockEvent(),this.group(t),this.unblockEvent()},_group_prop_accessor:function(t){if("function"==typeof t)return t;var e=function(e){return e[t]};return e.$name=t,e},group:function(t,e){var i;if(_(t,"Empty config"),"string"==typeof t?(i=t,t={by:this._group_prop_accessor(t),map:{}}):"function"==typeof t?t={by:t,map:{}}:"string"==typeof t.by&&(i=t.by,t.by=this._group_prop_accessor(t.by)),t.map=t.map||{},i&&!t.map[i]&&(t.map[i]=[i]),t.missing=void 0===t.missing||t.missing,this.getBranchIndex)return this._group_tree(t,e);var s={},n=[],a=[];this.each(function(e){var i=t.by(e);if(!i&&0!==i){if(!1===t.missing)return;if(!0===t.missing)return void a.push(e);i=t.missing}s[i]||(n.push({id:i,value:i,$group:!0,$row:t.row}),s[i]=H()),s[i].push(e)});for(var r=0;r<n.length;r++){var o=n[r];this._map_group(t.map,o,s[n[r].id]),this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[o.id,o.value,s[n[r].id]])}this._not_grouped_order||(this._not_grouped_order=this.order,this._not_grouped_pull=this.pull),this.order=H(),this.pull={},this._fill_pull(n),this._fill_pull(a),this.callEvent("onStoreUpdated",[])},_fill_pull:function(t){for(var e=0;e<t.length;e++){var i=this.id(t[e]);this.pull[i]&&(i=t[e].id=$()),this.pull[i]=t[e],this.order.push(i),this._scheme_init&&this._scheme_init(t[e])}},_map_group:function(t,e,i){for(var s in t){var n=t[s][1]||"any",a=this._group_prop_accessor(t[s][0]);"function"!=typeof n&&(_(Wi[n],"Unknown grouping rule: "+n),n=Wi[n]),e[s]=n.call(this,a,i)}},_group_tree:function(t,e){var i=0;e?i=this.getItem(e).$level:e=0,this._not_grouped_branches||(this._not_grouped_branches=E(this.branch),this._created_groupes=[]);for(var s=[],n=[],a=[],r=this.branch[e],o=0;o<r.length;o++){var l=this.getItem(r[o]),h=t.by(l);if(!h&&0!==h){if(!1===t.missing)continue;if(!0===t.missing){a.push(l.id);continue}h=t.missing}var c=i+"$"+h,d=this.branch[c];if(!d){var u=this.pull[c]={id:c,value:h,$group:!0,$row:t.row};this._scheme_init&&this._scheme_init(u),n.push(u),(d=this.branch[c]=[])._formath=[],s.push(c)}d.push(l.id),d._formath.push(l)}this._created_groupes=this._created_groupes.concat(s),this.branch[e]=s.concat(a);for(var f=0;f<n.length;f++){var g=n[f];if(this._map_group(t.map,g,this.branch[n[f].id]._formath),this.hasEvent("onGroupCreated")&&this.callEvent("onGroupCreated",[g.id,g.value,this.branch[g.id]._formath]),t.footer){var p="footer$"+g.id,_=this.pull[p]={id:p,$footer:!0,value:g.value,$level:i,$count:0,$parent:g.id,$row:t.footer.row};this._map_group(t.footer,_,this.branch[n[f].id]._formath),this.branch[g.id].push(_.id),this.callEvent("onGroupFooter",[_.id,_.value,this.branch[g.id]._formath])}delete this.branch[g.id]._formath}this._fix_group_levels(this.branch[e],e,i+1),this.callEvent("onStoreUpdated",[])},_ungroup_tree:function(t){if(this._not_grouped_branches){for(this.branch=this._not_grouped_branches;this._created_groupes.length;)delete this.pull[this._created_groupes.pop()];this._not_grouped_branches=this._created_groupes=null,this._fix_group_levels(this.branch[0],0,1)}t||this.callEvent("onStoreUpdated",[])},_fix_group_levels:function(t,e,i){e&&(this.getItem(e).$count=t.length);for(var s=0;s<t.length;s++){var n=this.pull[t[s]];n.$level=i,n.$parent=e;var a=this.branch[n.id];a&&this._fix_group_levels(a,n.id,i+1)}}},Ui={$init:function(){t.extend(this.data,Xi)},group:function(t,e){e||0===e||this.data.ungroup(!0),this.data.group(t,e)},ungroup:function(t){this.data.ungroup(t)}},Gi={$init:function(){var t=this;(ni.customRadio||this.addOption)&&this.$ready.push(function(){ee(t.$view,"keydown",t._moveSelection,{bind:t})})},_focus:function(){if(!Ve.canFocus(this))return!1;var t=this._getInputNode();if(t)for(var e=0;e<t.length;e++)"0"==t[e].getAttribute("tabindex")&&t[e].focus()},_blur:function(){var t=this._getInputNode();if(t)for(var e=0;e<t.length;e++)"0"==t[e].getAttribute("tabindex")&&t[e].blur()},_moveSelection:function(t){var e=t.which||t.keyCode,i=this.addOption?34:36;if(e>i&&e<41){var s;ut(t);var n=this._getInputNode();if(35==e)s=n.length-1;else if(36===e)s=0;else for(var a=37===e||38===e?-1:1,r=0;r<n.length;r++)if("0"==n[r].getAttribute("tabindex")){(s=r+a)<0?s=n.length-1:s>=n.length&&(s=0);break}if(!P(s)){var o=n[s].getAttribute("button_id");this.setValue(o),n[s].focus()}}},_get_tooltip_data:function(t,e){for(var i=e.target||e.srcElement;i&&!i.webix_tooltip;){var s=i.getAttribute("webix_t_id");if(s)return this.getOption(s);i=i.parentNode}return null},getOption:function(t){for(var e=this._check_options(this._settings.options),i=0;i<e.length;i++)if(e[i].id==t)return e[i];return null}},qi=t.proto({$init:function(t){this._id="map_"+$(),this._key=t,this._map=[],this._areas=[]},addRect:function(t,e,i){this._createMapArea(t,"RECT",e,i)},addPoly:function(t,e,i){this._createMapArea(t,"POLY",e,i)},_createMapArea:function(t,e,i,s){var n="";4==arguments.length&&(n="userdata='"+s+"'"),this._map.push("<area "+this._key+"='"+t+"' shape='"+e+"' coords='"+i.join()+"' "+n+"></area>"),this._areas.push({index:s,points:i})},addSector:function(t,e,i,s,n,a,r,o){var l=[];l.push(s),l.push(Math.floor(n*r));for(var h=e;h<i;h+=Math.PI/18)l.push(Math.floor(s+a*Math.cos(h))),l.push(Math.floor((n+a*Math.sin(h))*r));return l.push(Math.floor(s+a*Math.cos(i))),l.push(Math.floor((n+a*Math.sin(i))*r)),l.push(s),l.push(Math.floor(n*r)),this.addPoly(t,l,o)},hide:function(t,e,i){if(t.querySelectorAll)for(var s=t.querySelectorAll('area[userdata="'+e+'"]'),n=0;n<s.length;n++){var a=s[n];i?a.getAttribute("coords")&&(a.coordsdis=a.getAttribute("coords"),a.setAttribute("coords",""),a.coords=""):i||a.coordsdis&&(a.setAttribute("coords",a.coordsdis),a.coords=a.coordsdis,a.coordsdis=""),s[n].style.display=i?"none":""}},render:function(t){var e=nt("DIV");e.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",t.appendChild(e);var s=i.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";e.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+s+" class='webix_map_img' usemap='#"+this._id+"'>",t._htmlmap=e,this._map=[]}}),Ki={$init:function(){this._elements={},this._translate_ids={},this.getTopParentView=this._get_self=T(function(){return this},this),this._run_inner_init_logic(),this.$ready.push(this._run_after_inner_init_logic)},$$:function(t){return this._elements[t]},innerId:function(t){return this._translate_ids[t]},_run_inner_init_logic:function(){this._prev_global_col=e._global_collection,e._global_collection=this},_run_after_inner_init_logic:function(){for(var t in this._elements){var i=this._elements[t];this.callEvent&&i.mapEvent&&!i._evs_map.onitemclick&&i.mapEvent({onitemclick:this}),i.getTopParentView=this._get_self}e._global_collection=this._prev_global_col,this._prev_global_col=0},_destroy_child:function(t){delete this._elements[t]},ui:function(){this._run_inner_init_logic();var t=Xt.apply(this,arguments);return this._run_after_inner_init_logic(),t}},Zi={$init:function(){this.getSelectedId&&this.attachEvent("onAfterRender",this._set_focusable_item),this.moveSelection&&this.attachEvent("onTabFocus",this._set_item_focus)},_set_item_focus:function(){if(this.getSelectedId){var t=this.getSelectedId(!0);t.length&&this.getItemNode(t[0])||this.moveSelection("down")}},_set_focusable_item:function(){var t=this.getSelectedId(!0);if(!t.length||!this.getItemNode(t[0])){var e=this._dataobj.querySelector("["+this._id+"]");e&&e.setAttribute("tabindex","0")}},_navigation_helper:function(t){return function(e,i){var s=i.srcElement||i.target;if(!s.getAttribute("webixignore")){var n=s.tagName;if("INPUT"==n||"TEXTAREA"==n||"SELECT"==n)return!0}return!(e&&e.moveSelection&&e.config.navigation&&!e._in_edit_mode)||(ut(i),e.moveSelection(t,{shift:i.shiftKey,ctrl:i.ctrlKey}))}},moveSelection:function(t,e,i){var s=this._settings;if(!s.disabled){var n=this.getSelectedId(!0),a=this.count&&("x"==s.layout||s.xCount>1);if(("right"==t||"left"==t)&&this._parent_menu){var r=Zt(this._parent_menu);return r._hide_sub_menu(!0),void("x"===r.config.layout?r.moveSelection(t):Ve.setFocus(r))}if(!n.length&&this.count()){if("down"==t||"right"==t&&a)t="top";else{if(!("up"==t||"left"==t&&a))return;t="bottom"}n=[this.getFirstId()]}if(1==n.length){var o=n=n[0];if("left"==t&&this.close)return this.close(n);if("right"==t&&this.open)return this.open(n);if("top"==t)n=this.getFirstId();else if("bottom"==t)n=this.getLastId();else if("up"==t||"left"==t||"pgup"==t){var l=this.getIndexById(n),h="pgup"==t?10:1;n=this.getIdByIndex(Math.max(0,l-h))}else{if("down"!=t&&"right"!=t&&"pgdown"!=t)return void _(!1,"Not supported selection moving mode");var c=this.getIndexById(n),d="pgdown"==t?10:1;n=this.getIdByIndex(Math.min(this.count()-1,c+d))}if(this._skip_item&&(n=this._skip_item(n,o,t)),this.showItem(n),this.select(n),this.getSubMenu&&this.getSubMenu(n)&&this._mouse_move_activation(n,this.getItemNode(n)),!this.config.clipboard&&!1!==i){var u=this.getItemNode(n);u&&u.focus()}}return!1}},navigation_setter:function(t){return t&&!Ve._global_nav_grid_hotkeys&&(Ve._global_nav_grid_hotkeys=!0,Ve.addHotKey("up",this._navigation_helper("up")),Ve.addHotKey("down",this._navigation_helper("down")),Ve.addHotKey("right",this._navigation_helper("right")),Ve.addHotKey("left",this._navigation_helper("left")),Ve.addHotKey("shift+up",this._navigation_helper("up")),Ve.addHotKey("shift+down",this._navigation_helper("down")),Ve.addHotKey("shift+right",this._navigation_helper("right")),Ve.addHotKey("shift+left",this._navigation_helper("left")),Ve.addHotKey("ctrl+shift+up",this._navigation_helper("up")),Ve.addHotKey("ctrl+shift+down",this._navigation_helper("down")),Ve.addHotKey("ctrl+shift+right",this._navigation_helper("right")),Ve.addHotKey("ctrl+shift+left",this._navigation_helper("left")),Ve.addHotKey("pageup",this._navigation_helper("pgup")),Ve.addHotKey("pagedown",this._navigation_helper("pgdown")),Ve.addHotKey("home",this._navigation_helper("top")),Ve.addHotKey("end",this._navigation_helper("bottom"))),t}},Ji={$init:function(){this.$ready.push(this._create_scheme_init),this.attachEvent("onStructureUpdate",this._create_scheme_init),this.attachEvent("onStructureLoad",function(){this._scheme_init_order.length||this._create_scheme_init()})},_create_scheme_init:function(){var t=this._scheme_init_order=[],e=this._settings;e.columns&&this._build_data_map(e.columns),this._settings.map&&this._process_field_map(e.map),t.length&&(this.data._scheme_init=function(e){for(var i=0;i<t.length;i++)t[i](e)})},_process_field_map:function(t){for(var e in t)this._scheme_init_order.push(this._process_single_map(e,t[e]))},_process_single_map:function(t,e,i){var s,n=e.replace(/^(\s|)\((date|number)\)/,"");return""===n?s=function(e){return e[t]}:(-1===n.indexOf("#")&&-1===n.indexOf("{")&&(n="#"+n+"#"),s=Vt(n)),0===e.indexOf("(date)")?(i&&!i.format&&(i.format=St.dateFormatStr),function(e){var i=(s(e)||"").toString();e[t]=St.parseFormatDate(i)}):0===e.indexOf("(number)")?function(e){e[t]=1*s(e)}:function(e){e[t]=s(e)||""}},_build_data_map:function(t){for(var e=0;e<t.length;e++){var i=t[e].map,s=t[e].id;s||(s=t[e].id="i"+$(),t[e].header||(t[e].header="")),i&&this._scheme_init_order.push(this._process_single_map(s,i,t[e])),this._map_options(t[e])}},_create_collection:function(t){if("string"==typeof t){var e=Zt(t);e?t=e:(t=new(p("DataCollection"))({url:t}),this._destroy_with_me.push(t)),t.getBody&&(t=e.getBody())}else if("function"==typeof t||t.$proxy)t=new(p("DataCollection"))({url:t}),this._destroy_with_me.push(t);else if(!t.loadNext){var i=R(t),s=[];if(i&&"object"!==u(t[0])){for(var n=0;n<t.length;n++)s.push({id:t[n],value:t[n]});t=s}else if(!i){for(var a in t)s.push({id:a,value:t[a]});t=s}t=new(p("DataCollection"))({data:t}),this._destroy_with_me.push(t)}return t},_map_options:function(t){var e=t.options||t.collection;e&&(e=this._create_collection(e),this._bind_collection(e,t)),t.header&&(this._map_header_options(t.header),this._map_header_options(t.footer))},_map_header_options:function(t){var e=this;t=t||[];for(var i=function(i){var s=t[i];if(s&&s.options){var n=s.options;n.loadNext||(n=s.options=e._create_collection(n));var a=n.data.attachEvent("onStoreUpdated",function(){e.refreshFilter&&e.refreshFilter(s.columnId)});e.attachEvent("onDestruct",function(){n.$destructed||n.data.detachEvent(a)})}},s=0;s<t.length;s++)i(s)},_bind_collection:function(t,e){var i=this;if(e){delete e.options,e.collection=t,e.template=e.template||this._bind_template(t,e.id,e.optionslist);var s=t.data.attachEvent("onStoreUpdated",function(){i.refresh(),i.refreshFilter&&i.refreshFilter(e.id)});this.attachEvent("onDestruct",function(){t.$destructed||t.data.detachEvent(s)})}},_bind_template:function(t,e,i){if(e=this.getColumnConfig?e:"value",i){var s="string"==typeof i?i:",";return function(i){var n=i[e];if(!n)return"";for(var a=n.toString().split(s),r=0;r<a.length;r++){var o=t.data.pull[a[r]];a[r]=o&&o.value||""}return a.join(", ")}}return function(i){var s=t.data.pull[i[e]];return s&&(s.value||0===s.value)?s.value:""}}},Qi={$init:function(t){t=t||{},this._clickstamp=0,this._dbl_sensetive=300,this._item_clicked=null,this._mouse_action_extend(t.onClick,"on_click"),this._mouse_action_extend(t.onContext,"on_context"),this._mouse_action_extend(t.onDblClick,"on_dblclick"),this._mouse_action_extend(t.onMouseMove,"on_mouse_move"),this.on_click&&(ee(this._contentobj,"click",this._onClick,{bind:this}),i.isIE8&&this.on_dblclick&&ee(this._contentobj,"dblclick",this._onDblClick,{bind:this})),this.on_context&&ee(this._contentobj,"contextmenu",this._onContext,{bind:this}),this.on_mouse_move&&this._enable_mouse_move()},_enable_mouse_move:function(){this._mouse_move_enabled||(this.on_mouse_move=this.on_mouse_move||{},ee(this._contentobj,"mousemove",this._onMouse,{bind:this}),ee(this._contentobj,i.isIE?"mouseleave":"mouseout",this._onMouse,{bind:this}),this._mouse_move_enabled=1,this.attachEvent("onDestruct",function(){this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer)}))},_mouse_action_extend:function(e,i){if(e){var s=this[i],n=s?t.extend({},s):{};this[i]=t.extend(n,e)}},_onClick:function(t){if(!this.isEnabled())return!1;if(Ve._focus_action(this),this.on_dblclick){var e=(new Date).valueOf();if(e-this._clickstamp<=this._dbl_sensetive&&this.locate){var i=this.locate(t);if(""+i==""+this._item_clicked)return this._clickstamp=0,this._onDblClick(t)}this._clickstamp=e}var s=this._mouseEvent(t,this.on_click,"ItemClick");return s},_onDblClick:function(t){return this._mouseEvent(t,this.on_dblclick,"ItemDblClick")},_onContext:function(t){this._mouseEvent(t,this.on_context,"BeforeContextMenu","AfterContextMenu")},_onMouse:function(t){if(!this.$destructed){if(document.createEventObject)t=document.createEventObject(event);else if(!P(t.movementY)&&!t.movementY&&!t.movementX)return;this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer),this.callEvent("onMouseMoving",[t]),this._mouse_move_timer=window.setTimeout(T(function(){"mousemove"==t.type?this._onMouseMove(t):this._onMouseOut(t)},this),this._settings.mouseEventDelay||500)}},_onMouseMove:function(t){this._mouseEvent(t,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[t||event])},_onMouseOut:function(t){this.callEvent("onMouseOut",[t||event])},_mouseEvent:function(t,e,s,n){if(!(t=t||event).processed&&this._viewobj){t.processed=!0;var a=t.target||t.srcElement;if(i.isIE8){var r=this._settings.id,o=a.w_view;if(o){if(o!==r)return}else a.w_view=r}for(var l="",h=null,c=!1;a&&a.parentNode&&this._viewobj&&a!=this._viewobj.parentNode;){if(!c&&a.getAttribute&&(h=a.getAttribute(this._id))){if(this._item_clicked=h,this.callEvent){if(!this.callEvent("on"+s,[h,t,a]))return;n&&this.callEvent("on"+n,[h,t,a])}c=!0}if(l=bt(a)){l=l.toString().split(" ");for(var d=0;d<l.length;d++)if(e[l[d]]){var u=F(e[l[d]],this.$scope),f=u.call(this,t,h||lt(t,this._id),a);if(!1===f)return c}}a=a.parentNode}return c}}},ts={$init:function(){this.$ready.push(function(){this.attachEvent("onKeyPress",this._onKeyPress)})},_moveActive:function(t,e){if(37===t||39===t){ut(e),this._showNavItem(37===t?-1:1);var i=this._navPanel.querySelector("[tabindex='0']");i&&i.focus()}},_renderPanel:function(){rt(this._navPanel),this._navPanel=nt("DIV",{class:"webix_nav_panel webix_nav_panel_"+this._settings.navigation.type,role:"tablist"},""),this._viewobj.appendChild(this._navPanel),this._renderNavItems(),this._renderNavButtons(),this._setLinkEventHandler()},_setLinkEventHandler:function(){var t=[];this._navPanel&&(t[0]=ie(this._navPanel,"click",T(function(t){for(var e=t.srcElement||t.target,i=!1;e!=this._navPanel&&!i;){var s=e.getAttribute(this._linkAttr);s&&(i=!0,this._showPanelBind(s)),e=e.parentNode}},this))),this._prevNavButton&&(t[1]=ie(this._prevNavButton,"click",T(function(){this._showNavItem(-1)},this))),this._nextNavButton&&(t[1]=ie(this._nextNavButton,"click",T(function(){this._showNavItem(1)},this))),this.attachEvent("onDestruct",function(){for(var e=0;e<t.length;e++)this.detachEvent(t[e]);t=null})},_showNavItem:function(t){if(this._cells){var e=this._active_cell+t;(e>=this._cells.length||e<0)&&(e=e<0?this._cells.length-1:0),this.setActiveIndex(e)}},_showPanelBind:function(t){this._cells&&Zt(t).show()},_renderNavItems:function(){var t,e;if((e=this._settings.navigation).items){this._linkAttr=e.linkAttr||"bind_id",this._navPanel?this._clearPanel():this._renderPanel();var i=this._cells?this._cells:this.data.order;if(i.length>1)for(var s=0;s<i.length;s++){t=nt("DIV",{class:"webix_nav_item webix_nav_"+(s==this._active_cell?"active":"inactive"),role:"tab",tabindex:s==this._active_cell?"0":"-1"});var n=this._cells?this._cells[s]._settings.id:i[s];n&&t.setAttribute(this._linkAttr,n),this._navPanel.appendChild(t)}}},_clearPanel:function(){if(this._navPanel)for(var t=this._navPanel.childNodes,e=t.length-1;e>=0;e--)rt(t[e])},_renderNavButtons:function(){var t=this._settings.navigation;t.buttons&&(this._prevNavButton&&rt(this._prevNavButton),this._prevNavButton&&rt(this._nextNavButton),this._prevNavButton=nt("DIV",{class:"webix_nav_button_"+t.type+" webix_nav_button_prev "},'<div role="button" tabindex="0" aria-label="'+St.aria.prevTab+'" class="webix_nav_button_inner"></div>'),this._viewobj.appendChild(this._prevNavButton),this._nextNavButton=nt("DIV",{class:"webix_nav_button_"+t.type+" webix_nav_button_next "},'<div role="button" tabindex="0" aria-label="'+St.aria.prevTab+'" class="webix_nav_button_inner"></div>'),this._viewobj.appendChild(this._nextNavButton))}},es={showOverlay:function(t){this._overlay?this._overlay.innerHTML=t:(this._overlay=nt("DIV",{class:"webix_overlay"},t||""),ot(this._overlay,this._viewobj.firstChild,this._viewobj),this._viewobj.style.position="relative")},hideOverlay:function(){this._overlay&&(rt(this._overlay),this._overlay=null)}},is={pager_setter:function(t){if("string"==typeof t){var e=Zt(t);if(!e)return this.$blockRender=!0,L(function(){var e=Zt(t);this._settings.pager=this.pager_setter(e);var i=e._settings;i.count=this.data._count_pager_total(i.level),e.refresh(),this.$blockRender=!1,this.render()},this),null;t=e}return this.attachEvent("onBeforeRender",function e(i){if(t.config.autosize&&this.getVisibleCount){var s=this.getVisibleCount();isNaN(s)?(t.config.size=1,L(e,this,[!0])):s!=t.config.size&&(t.config.size=s,t.refresh(),!0===i&&this.refresh())}var n=this._settings.pager;return-1!=n.page&&(this.data.$min=this._count_pager_index(0,n.page*n.size),this.data.$max=this._count_pager_index(this.data.$min,n.size),this.data.$pagesize=this.data.$max-this.data.$min,!0)}),t.$view||(t.view="pager",t=Xt(t)),this._pager=t,t.$master=this,this.data.attachEvent("onStoreUpdated",function(){var e=t._settings;e.count=this._count_pager_total(e.level),t.refresh()}),this.data._count_pager_total=this._count_pager_total,t._settings},_count_pager_total:function(t){if(t&&0!==t){var e=0;return this.each(function(i){i.$level==t&&e++}),e}return this.count()},_count_pager_index:function(t,e){var i=this._settings.pager;if(i.level&&0!==i.level){var s=t,n=this.data.order.length;if(e)for(;s<n;){if(this.data.order[s]&&this.data.getItem(this.data.order[s]).$level==i.level){if(0===e)break;e--}s++}return s}return t+e},setPage:function(t){this._pager&&this._pager.select(t)},getPage:function(){return this._pager._settings.page},getPager:function(){return this._pager}},ss={$init:function(){var t=this;P(this._progress)&&this.attachEvent&&(this.attachEvent("onBeforeLoad",function(){return t.showProgress()}),this.attachEvent("onAfterLoad",function(){return t.hideProgress()}),this._progress=null)},showProgress:function(e){var s;if(!this._progress){var n="icon"==(e=t.extend({position:0,delay:2e3,type:"icon",icon:"wxi-sync",hide:!1},e||{},!0)).type?e.icon+" webix_spin":"";if(this._progress=nt("DIV",{class:"webix_progress_"+e.type,role:"progressbar","aria-valuemin":"0","aria-valuemax":"100",tabindex:"0"},"<div class='webix_progress_state "+n+"'></div>"),this.setPosition||(this._viewobj.style.position="relative"),ot(this._progress,this._viewobj.firstChild,this._viewobj),this._viewobj.setAttribute("aria-busy","true"),!fi.$active&&this.getScrollState){var a=this.getScrollState();this._viewobj.scrollWidth!=this.$width&&(this._progress.style.left=a.x+"px"),this._viewobj.scrollHeight!=this.$height&&("bottom"!=e.type?this._progress.style.top=a.y+"px":this._progress.style.top=a.y+this.$height-this._progress.offsetHeight+"px")}this._progress_animate="icon"!=e.type}if(e){if(this._progress_animate){var r=e.position||1;if(void 0===this._progress.style[i.transitionDuration]&&e.delay){var o=0,l=0,h=r/e.delay*30,c=this;this._progressTimer&&(window.clearInterval(this._progressTimer),l=this._progress.firstChild.offsetWidth/this._progress.offsetWidth*100),this._progressTimer=window.setInterval(function(){30*o==e.delay?window.clearInterval(c._progressTimer):(c._progress&&c._progress.firstChild&&(c._progress.firstChild.style.width=l+o*h*r*100+"%"),o++)},30)}else e.delay&&(s=this._viewobj.firstChild.offsetWidth,this._progress.firstChild.style[i.transitionDuration]=e.delay+"ms"),this._progress.firstChild.style.width=100*r+"%"}return this._progress_hide&&clearTimeout(this._progress_hide),e.hide&&(this._progress_hide=L(this.hideProgress,this,[1],e.delay)),s}},hideProgress:function(t){this._progress&&(t||!this._progress_animate?(this._progressTimer&&window.clearInterval(this._progressTimer),rt(this._progress),this._progress=null,this._viewobj.removeAttribute("aria-busy")):this.showProgress({position:1.1,delay:300,hide:!0}))}},ns={$init:function(){_(this.data,"RenderStack :: Component doesn't have DataStore"),_(Vt,"template :: template is not accessible"),this._html=document.createElement("DIV"),this.data.attachEvent("onIdChange",T(this._render_change_id,this)),this.attachEvent("onItemClick",this._call_onclick),this.types||(this.types={default:this.type},this.type.name="default"),this.type=I(this.type)},customize:function(t){Yt(this,t)},item_setter:function(t){return this.type_setter(t)},type_setter:function(e){return this.types[e]?(this.type=I(this.types[e]),this.type.css&&(this._contentobj.className+=" "+this.type.css)):this.customize(e),this.type.on_click&&t.extend(this.on_click,this.type.on_click),e},template_setter:function(t){this.type.template=Vt(t)},_toHTML:function(t){var e=this.data._marks[t.id];return _(!t.$template||this.type["template"+t.$template],"RenderStack :: Unknown template: "+t.$template),this.callEvent("onItemRender",[t]),this.type.templateStart(t,this.type,e)+(t.$template?this.type["template"+t.$template]:this.type.template)(t,this.type,e)+this.type.templateEnd(t,this.type,e)},_toHTMLObject:function(t){return this._html.innerHTML=this._toHTML(t),this._html.firstChild},_render_change_id:function(t,e){var i=this.getItemNode(t);i&&(i.setAttribute(this._id,e),this._htmlmap[e]=this._htmlmap[t],delete this._htmlmap[t])},_call_onclick:function(){if(this._settings.click){var t=F(this._settings.click,this.$scope);t&&t.call&&t.apply(this,arguments)}},getItemNode:function(t){if(this._htmlmap)return this._htmlmap[t];this._htmlmap={};for(var e=this._dataobj.childNodes,i=0;i<e.length;i++){var s=e[i].getAttribute(this._id);s&&(this._htmlmap[s]=e[i])}return this.getItemNode(t)},locate:function(t){return lt(t,this._id)},showItem:function(t){var e=this.getItemNode(t);if(e&&this.scrollTo){var i=e.offsetLeft,s=i+e.offsetWidth,n=e.offsetTop,a=n+e.offsetHeight,r=this.getScrollState(),o=r.x;(o>i||o+this._content_width<s)&&(o=i);var l=r.y;(l>n||l+this._content_height<a)&&(l=n),this.scrollTo(o,l),this._setItemActive&&this._setItemActive(t)}},render:function(t,e,i){if(this.isVisible(this._settings.id)&&!this.$blockRender)if(t){var s=this.getItemNode(t);switch(i){case"paint":case"update":if(!s)return;var n=this._htmlmap[t]=this._toHTMLObject(e);ot(n,s),rt(s);break;case"delete":if(!s)return;rt(s),delete this._htmlmap[t];break;case"add":var a=this._htmlmap[t]=this._toHTMLObject(e);ot(a,this.getItemNode(this.data.getNextId(t)),this._dataobj);break;case"move":ot(this.getItemNode(t),this.getItemNode(this.data.getNextId(t)),this._dataobj);break;default:_(0,"Unknown render command: "+i)}}else this.callEvent("onBeforeRender",[this.data])&&((this._renderobj||this._dataobj).innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null,this.callEvent("onAfterRender",[]))}},as={$init:function(t){if(t&&!t.scroll&&this._one_time_scroll)return this._dataobj=this._dataobj||this._contentobj;(this._dataobj||this._contentobj).appendChild(nt("DIV",{class:"webix_scroll_cont"},"")),this._dataobj=(this._dataobj||this._contentobj).firstChild,i.touch&&"native"!==i.touch||ee(this._viewobj,"scroll",T(function(){this.callEvent&&L(function(){this.callEvent("onAfterScroll",[])},this)},this))},scroll_setter:function(t){if(!t)return!1;var e="auto"===t,s="x"==t?"x":"xy"==t?"xy":e?"xy":"y";if(fi.$active&&"native"!=i.touch)this._dataobj.setAttribute("touch_scroll",s),this.attachEvent&&this.attachEvent("onAfterRender",T(this._refresh_scroll,this)),this._touch_scroll=!0;else if(i.$customScroll)null.enable(this,s);else{var n=this._dataobj.parentNode.style;e?n.overflowX=n.overflowY="auto":(-1!=s.indexOf("x")&&(this._scroll_x=!0,n.overflowX="scroll"),-1!=s.indexOf("y")&&(this._scroll_y=!0,n.overflowY="scroll"))}return s},_onoff_scroll:function(t,e){if(!!this._settings.scroll!=!!t){if(!i.$customScroll){var s=this._dataobj.parentNode.style;s["x"===e?"overflowX":"overflowY"]=t?"auto":"hidden"}"x"===e?this._scroll_x=t:this._scroll_y=t,this._settings.scroll=!!t&&e}},getScrollState:function(){if(fi.$active){var t=fi._get_matrix(this._dataobj);return{x:-t.e,y:-t.f}}return{x:this._dataobj.parentNode.scrollLeft,y:this._dataobj.parentNode.scrollTop}},scrollTo:function(t,e){fi.$active&&"native"!=i.touch?(e=Math.max(0,Math.min(e,this._dataobj.offsetHeight-this._content_height)),t=Math.max(0,Math.min(t,this._dataobj.offsetWidth-this._content_width)),fi._set_matrix(this._dataobj,-t,-e,this._settings.scrollSpeed||"100ms")):(this._dataobj.parentNode.scrollLeft=t,this._dataobj.parentNode.scrollTop=e)},_refresh_scroll:function(){if(-1!=this._settings.scroll.toString().indexOf("x")){var t=this._dataobj.scrollWidth;t&&(this._dataobj.style.width="100%",this._dataobj.style.width=this._dataobj.scrollWidth+"px")}if(fi.$active&&this._touch_scroll){fi._clear_artefacts(),fi._scroll_end();var e=this.getScrollState(),i=this._dataobj.offsetWidth-this.$width-e.x,s=this._dataobj.offsetHeight-this.$height-e.y;if(i<0||s<0){var n=i<0?Math.min(-i-e.x,0):-e.x,a=s<0?Math.min(-s-e.y,0):-e.y;fi._set_matrix(this._dataobj,n,a,0)}}}},rs={$init:function(){this._selected=H(),_(this.data,"SelectionModel :: Component doesn't have DataStore"),this.data.attachEvent("onStoreUpdated",T(this._data_updated,this)),this.data.attachEvent("onStoreLoad",T(this._data_loaded,this)),this.data.attachEvent("onAfterFilter",T(this._data_filtered,this)),this.data.attachEvent("onSyncApply",T(this._select_check,this)),this.data.attachEvent("onIdChange",T(this._id_changed,this)),this.$ready.push(this._set_noselect)},_set_noselect:function(){("multiselect"==this._settings.select||this._settings.multiselect||"area"==this._settings.select)&&ee(this.$view,"mousedown",function(t){var i=(t||ie).shiftKey;i&&(e._noselect_element=this,pt(this,"webix_noselect",1))})},_id_changed:function(t,e){for(var i=this._selected.length-1;i>=0;i--)this._selected[i]==t&&(this._selected[i]=e)},_data_filtered:function(){for(var t=this._selected.length-1;t>=0;t--)if(this.data.getIndexById(this._selected[t])<0){var e=this._selected[t];this.removeCss(e,"webix_selected",!0),this._selected.splice(t,1),this.callEvent("onSelectChange",[e])}},_data_updated:function(t,e,i){"delete"==i?this.loadBranch?this._select_check():this._selected.remove(t):t||this.data.count()||this.data._filter_order||(this._selected=H())},_data_loaded:function(){this._settings.select&&this.data.each(function(t){t&&t.$selected&&this.select(t.id)},this)},_select_check:function(){for(var t=this._selected.length-1;t>=0;t--)this.exists(this._selected[t])||this._selected.splice(t,1)},_select_mark:function(t,e,i,s){var n=e?"onBeforeSelect":"onBeforeUnSelect";if(!this.callEvent(n,[t,e]))return!1;s&&(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1),e?this.addCss(t,"webix_selected",!0):this.removeCss(t,"webix_selected",!0),i?i.push(t):(e?this._selected.push(t):this._selected.remove(t),this._refresh_selection(t));var a=e?"onAfterSelect":"onAfterUnSelect";return this.callEvent(a,[t]),!0},select:function(t,e){var i=arguments[2],s=arguments[3];if(!t)return this.selectAll();if(R(t))for(var n=0;n<t.length;n++)this.select(t[n],n?1:e,i,s);else{if(_(this.data.exists(t),"Incorrect id in select command: "+t),s&&this._selected.length)return this.selectAll(this._selected[this._selected.length-1],t);var a=!1;i||e||1==this._selected.length&&this._selected[0]==t||(a=!0),a||!this.isSelected(t)?this._select_mark(t,!0,null,a):i&&this.unselect(t)}},unselect:function(t){if(!t)return this.unselectAll();this.isSelected(t)&&this._select_mark(t,!1)},selectAll:function(t,e){var i=[];(t||e?this.data.getRange(t||null,e||null):this.data.getRange()).each(function(t){this.data.getMark(t.id,"webix_selected")||(this._selected.push(t.id),this._select_mark(t.id,!0,i))},this),this._refresh_selection(i)},unselectAll:function(){var t=[];this._selected.each(function(e){this._select_mark(e,!1,t)},this),this._selected=H(),this._refresh_selection(t)},isSelected:function(t){return-1!=this._selected.find(t)},getSelectedId:function(t){switch(this._selected.length){case 0:return t?[]:"";case 1:return t?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},getSelectedItem:function(t){var e=this.getSelectedId(!0);if(e.length>1||t){for(var i=e.length-1;i>=0;i--)e[i]=this.getItem(e[i]);return e}if(e.length)return this.getItem(e[0])},_is_mass_selection:function(t){return t.length>100||t.length>this.data.count/2},_refresh_selection:function(t){if("object"!=u(t)&&(t=[t]),t.length){if(this._is_mass_selection(t))this.data.refresh();else for(var e=0;e<t.length;e++)this.render(t[e],this.data.getItem(t[e]),"update");this._silent_selection||this.callEvent("onSelectChange",[t])}}};He(function(){ie(document.body,"mouseup",function(){e._noselect_element&&(_t(e._noselect_element,"webix_noselect"),e._noselect_element=null)})});var os={_toHex:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],toHex:function(t,e){t=parseInt(t,10);for(var i="";t>0;)i=this._toHex[t%16]+i,t=Math.floor(t/16);for(;i.length<e;)i="0"+i;return i},rgbToHex:function(t){var e=[];return"string"==typeof t?t.replace(/[\d+.]+/g,function(t){e.push(parseFloat(t))}):R(t)&&(e=t),0===e[3]?"":e.slice(0,3).map(function(t){return os.toHex(Math.floor(t),2)}).join("")},hexToDec:function(t){return parseInt(t,16)},toRgb:function(t){var e,i,s,n;return"string"!=typeof t?(e=t[0],i=t[1],s=t[2]):-1!=t.indexOf("rgb")?(n=t.substr(t.indexOf("(")+1,t.lastIndexOf(")")-t.indexOf("(")-1).split(","),e=n[0],i=n[1],s=n[2]):("#"==t.substr(0,1)&&(t=t.substr(1)),e=this.hexToDec(t.substr(0,2)),i=this.hexToDec(t.substr(2,2)),s=this.hexToDec(t.substr(4,2))),e=parseInt(e,10)||0,i=parseInt(i,10)||0,s=parseInt(s,10)||0,(e<0||e>255)&&(e=0),(i<0||i>255)&&(i=0),(s<0||s>255)&&(s=0),[e,i,s]},hsvToRgb:function(t,e,i){var s,n,a,r,o,l,h,c;switch(s=Math.floor(t/60)%6,a=i*(1-e),r=i*(1-(n=t/60-s)*e),o=i*(1-(1-n)*e),l=0,h=0,c=0,s){case 0:l=i,h=o,c=a;break;case 1:l=r,h=i,c=a;break;case 2:l=a,h=i,c=o;break;case 3:l=a,h=r,c=i;break;case 4:l=o,h=a,c=i;break;case 5:l=i,h=a,c=r}return l=Math.floor(255*l),h=Math.floor(255*h),c=Math.floor(255*c),[l,h,c]},rgbToHsv:function(t,e,i){var s,n,a,r,o,l;return s=t/255,n=e/255,a=i/255,r=Math.min(s,n,a),o=Math.max(s,n,a),l=0,o==r?l=0:o==s&&n>=a?l=60*(n-a)/(o-r)+0:o==s&&n<a?l=60*(n-a)/(o-r)+360:o==n?l=60*(a-s)/(o-r)+120:o==a&&(l=60*(s-n)/(o-r)+240),[l,0===o?0:1-r/o,o]}};function ls(t){var e=" ";if(t)for(var i in t)e+=i+'="'+t[i]+'" ';return e}var hs={draw:function(t,e,i,s){var n={xmlns:"http://www.w3.org/2000/svg",version:"1.1",height:"100%",width:"100%",viewBox:"0 0 "+e+" "+i,class:s||""};return"<svg "+ls(n)+">"+t+"</svg>"},styleMap:{lineColor:"stroke",color:"fill"},group:function(t){return"<g>"+t+"</g>"}};hs._handlers={M:function(t){return" M "+t.x+" "+t.y},L:function(t){return" L "+t.x+" "+t.y},C:function(t,e,i){return" C "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+i.x+" "+i.y},A:function(t,e,i,s){var n=t.x+Math.cos(s)*e,a=t.y+Math.sin(s)*e,r=s-i>=Math.PI;return" A "+e+" "+e+" 0 "+(r?1:0)+" 1 "+n+" "+a}},hs.definePath=function(t,e){for(var i="",s=0;s<t.length;s++){_(t[s][0]&&"string"==typeof t[s][0],"Path type must be a string");var n=t[s][0].toUpperCase();_(this._handlers[n],"Incorrect path type"),i+=this._handlers[n].apply(this,t[s].slice(1))}return e&&(i+=" Z"),i},hs._linePoints=function(t){for(var e=[],i=0;i<t.length;i++)e.push([i?"L":"M",t[i]]);return e},hs.setOpacity=function(t,e){var i=os.toRgb(t);return i.push(e),"rgba("+i.join(",")+")"},hs._curvePoints=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];i||e.push(["M",s[0]]),e.push(["C",s[1],s[2],s[3]])}return e},hs.getPath=function(t,e,i){return i=ls(i),'<path class="'+e+'" vector-effect="non-scaling-stroke" d="'+t+'" '+i+"/>"},hs.getSector=function(t,e,i,s,n,a){a=ls(a);var r=t.x+Math.cos(i)*e,o=t.y+Math.sin(i)*e,l=[["M",t],["L",{x:r,y:o}],["A",t,e,i,s],["L",t]];return'<path class="'+n+'" vector-effect="non-scaling-stroke" d="'+hs.definePath(l,!0)+'" '+a+"/>"},hs.getCurve=function(t,e,i){i=ls(i);var s=this.definePath(this._curvePoints(t));return'<path fill="none" class="'+e+'" vector-effect="non-scaling-stroke" d="'+s+'" '+i+"/>"},hs.getLine=function(t,e,i,s){return this.getPath(this.definePath(this._linePoints([t,e]),!0),i,s)},hs.getCircle=function(t,e,i,s){return s=ls(s),'<circle class="'+i+'" cx="'+t.x+'" cy="'+t.y+'" r="'+e+'" '+s+"/>"},hs.getRect=function(t,e,i,s,n,a){return a=ls(a),'<rect class="'+n+'" rx="0" ry="0" x="'+t+'" y="'+e+'" width="'+i+'" height="'+s+'" '+a+"/>"};var cs={paddingX:6,paddingY:6,radius:2,minHeight:4,eventRadius:8};function ds(e){this.config=t.extend(E(cs),e||{},!0)}ds.prototype.draw=function(t,e,i){var s=this.getPoints(t,e,i),n=this.config,a=hs,r=n.color?this._applyColor(a,n.color):null,o=a.definePath(this._getLinePoints(s)),l=a.group(a.getPath(o,"webix_sparklines_line"+(r?" "+r.line:"")));l+=this._drawItems(a,s,n.radius,"webix_sparklines_item"+(r?" "+r.item:""));var h=Math.min(t.length?(e-2*(n.paddingX||0))/t.length:0,n.eventRadius);return l+=this._drawEventItems(a,s,h),a.draw(l,e,i,"webix_sparklines_line_chart"+(n.css?" "+n.css:""))},ds.prototype._applyColor=function(t,e){var i={line:{},item:{}},s=t.styleMap;if(e)for(var n in i.line[s.lineColor]=e,i.item[s.color]=e,i)i[n]=et(i[n]);return i},ds.prototype._drawItems=function(t,e,i,s,n){for(var a=[],r=0;r<e.length;r++)a.push(t.getCircle(e[r],i,s,n));return t.group(a.join(""))},ds.prototype._drawEventItems=function(t,e,i){for(var s=[],n=0;n<e.length;n++)s.push(t.getCircle(e[n],i,"webix_sparklines_event_area",{webix_area:n}));return t.group(s.join(""))},ds.prototype._getLinePoints=function(t){var e,i,s=[];for(e=0;e<t.length;e++)i=e?"L":"M",s.push([i,t[e]]);return s},ds.prototype.getPoints=function(t,e,i){var s=this.config,n=Math.min.apply(null,t);void 0!==s.origin&&(n=Math.min(s.origin,n));var a=Math.max.apply(null,t),r=[],o=s.paddingX||0,l=s.paddingY||0;e=(e||100)-2*o;var h=s.minHeight||0;if(i=(i||100)-2*l,t.length)if(1==t.length)r.push({x:e/2+o,y:i/2+o});else{var c=e/(t.length-1),d=s.scale||a-n,u=(i-h)/(d||1);d||(i/=2);for(var f=0;f<t.length;f++)r.push({x:Math.ceil(c*f)+o,y:i-Math.ceil(u*(t[f]-n))+l-h})}return r};var us={paddingX:3,paddingY:4,radius:1,minHeight:4,eventRadius:8};function fs(e){this.config=t.extend(E(us),e||{},!0)}fs.prototype.draw=function(t,e,i){var s,n,a,r,o,l=this.config,h=ds.prototype,c=hs;return r=this.getPoints(t,e,i),a=c.definePath(h._getLinePoints(r),!0),l.color&&(o=this._applyColor(c,l.color)),n=c.group(c.getPath(a,"webix_sparklines_area"+(o?" "+o.area:""))),r.splice(r.length-3,3),a=c.definePath(h._getLinePoints(r)),n+=c.group(c.getPath(a,"webix_sparklines_line"+(o?" "+o.line:""))),n+=h._drawItems(c,r,l.radius,"webix_sparklines_item"+(o?" "+o.item:"")),s=Math.min(t.length?(e-2*(l.paddingX||0))/t.length:0,l.eventRadius),n+=h._drawEventItems(c,r,s),c.draw(n,e,i,"webix_sparklines_area_chart"+(l.css?" "+l.css:""))},fs.prototype._applyColor=function(t,e){var i={area:{},line:{},item:{}},s=t.styleMap;if(e)for(var n in i.area[s.color]=t.setOpacity(e,.2),i.line[s.lineColor]=e,i.item[s.color]=e,i)i[n]=et(i[n]);return i},fs.prototype.getPoints=function(t,e,i){var s=ds.prototype,n=s.getPoints.call(this,t,e,i),a=this.config.paddingX||0,r=this.config.paddingY||0;return n.push({x:e-a,y:i-r},{x:a,y:i-r},{x:a,y:n[0].y}),n};var gs={paddingX:3,paddingY:4,width:20,margin:4,minHeight:4,eventRadius:8,origin:0,itemCss:function(t){return t<(this.config.origin||0)?" webix_sparklines_bar_negative":""}};function ps(e){this.config=t.extend(E(gs),e||{},!0)}ps.prototype.draw=function(t,e,i){var s,n,a,r,o,l=this.config,h="",c=[],d=this.getPoints(t,e,i),u=hs;for(s=0;s<d.length;s++)n="function"==typeof l.itemCss?l.itemCss.call(this,t[s]):l.itemCss||"",l.negativeColor&&t[s]<l.origin?n+=" "+this._applyColor(u,l.negativeColor):l.color&&(n+=" "+this._applyColor(u,l.color)),a=d[s],c.push(u.getRect(a.x,a.y,a.width,a.height,"webix_sparklines_bar "+n));h+=u.group(c.join("")),r=parseInt(this._getOrigin(t,e,i),10)+.5,o=l.paddingX||0,h+=u.group(u.getLine({x:o,y:r},{x:e-o,y:r},"webix_sparklines_origin"));var f=this._getEventPoints(t,e,i),g=[];for(s=0;s<f.length;s++)a=f[s],g.push(u.getRect(a.x,a.y,a.width,a.height,"webix_sparklines_event_area ",{webix_area:s}));return h+=u.group(g.join("")),u.draw(h,e,i,"webix_sparklines_bar_chart"+(l.css?" "+l.css:""))},ps.prototype._applyColor=function(t,e){var i={},s=t.styleMap;return e&&(i[s.color]=e),et(i)},ps.prototype._getOrigin=function(t,e,i){var s=this.config,n=s.paddingY||0,a=n+(i=(i||100)-2*n);if(!1!==s.origin){var r=Math.min.apply(null,t),o=Math.max.apply(null,t),l=s.origin||-1e-6;if(l>=o)a=n;else if(l>r){var h=i/(o-r);a-=h*(l-r)}}return a},ps.prototype._getEventPoints=function(t,e,i){var s=[],n=this.config.paddingX||0,a=this.config.paddingY||0;if(e=(e||100)-2*n,i=(i||100)-2*a,t.length)for(var r=e/t.length,o=0;o<t.length;o++)s.push({x:Math.ceil(r*o)+n,y:a,height:i,width:r});return s},ps.prototype.getPoints=function(t,e,i){var s=this.config,n=Math.min.apply(null,t);s.origin<n&&(n=s.origin);var a=Math.max.apply(null,t),r=[],o=s.paddingX,l=s.paddingY,h=s.margin,c=s.width||20,d=this._getOrigin(t,e,i);if(e=(e||100)-2*o,i=(i||100)-2*l,t.length){var u=e/t.length,f=s.scale||a-n;c=Math.min(u-h,c),h=u-c;var g=0,p=n;!1!==s.origin&&s.origin>n?p=s.origin||0:g=s.minHeight;for(var _=(i-g)/(f||1),v=0;v<t.length;v++){var m=Math.ceil(_*(t[v]-p));r.push({x:Math.ceil(u*v)+o+h/2,y:d-(t[v]>=p?m:0)-g,height:Math.abs(m)+g,width:c})}}return r};var _s={paddingY:2};function vs(e){this.config=t.extend(_s,e||{},!0)}vs.prototype._defColorsCursor=0,vs.prototype._defColors=["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],vs.prototype._getColor=function(t,e){var i=e.length,s=this._defColors.length;return s>i?(t&&(t=t<s-i?this._defColorsCursor+2:this._defColorsCursor+1),this._defColorsCursor=t):t%=s,this._defColors[t]},vs.prototype.draw=function(t,e,i){var s,n,a,r,o=this.config,l=o.color||this._getColor,h=this.getAngles(t),c=hs,d=o.paddingY||0,u=i/2-d,f=e/2,g=i/2;for("function"!=typeof l&&(l=function(){return l}),r="",a=0;a<h.length;a++)(s={})[c.styleMap.color]=l.call(this,a,t,this._context),r+=c.getSector({x:f,y:g},u,h[a][0],h[a][1],"webix_sparklines_sector",s);for(n=c.group(r),r="",a=0;a<h.length;a++)r+=c.getSector({x:f,y:g},u,h[a][0],h[a][1],"webix_sparklines_event_area",{webix_area:a});return n+=c.group(r),c.draw(n,e,i,"webix_sparklines_pie_chart"+(o.css?" "+o.css:""))},vs.prototype.getAngles=function(t){var e,i,s=-Math.PI/2,n=[],a=this._getRatios(t);for(i=0;i<t.length;i++)e=-Math.PI/2+a[i]-1e-4,n.push([s,e]),s=e;return n},vs.prototype._getTotalValue=function(t){for(var e=0,i=0;i<t.length;i++)e+=1*t[i];return e},vs.prototype._getRatios=function(t){var e,i,s=[],n=0,a=this._getTotalValue(t);for(e=0;e<t.length;e++)i=1*t[e],s[e]=2*Math.PI*(a?(i+n)/a:1/t.length),n+=i;return s};var ms={paddingX:3,paddingY:6,radius:2,minHeight:4,eventRadius:8};function bs(e){this.config=t.extend(E(ms),e||{},!0)}bs.prototype.draw=function(t,e,i){var s=this.config,n="",a=ds.prototype,r=this.getPoints(t,e,i),o=hs,l=s.color?this._applyColor(o,s.color):null;n+=o.group(o.getCurve(r,"webix_sparklines_line"+(l?" "+l.line:"")));var h=a.getPoints.call(this,t,e,i);n+=a._drawItems(o,h,s.radius,"webix_sparklines_item"+(l?" "+l.item:""));var c=Math.min(t.length?(e-2*(s.paddingX||0))/t.length:0,s.eventRadius);return n+=a._drawEventItems(o,h,c),o.draw(n,e,i,"webix_sparklines_line_chart"+(s.css?" "+s.css:""))},bs.prototype._applyColor=function(t,e){var i={line:{},item:{}},s=t.styleMap;if(e)for(var n in i.line[s.lineColor]=e,i.item[s.color]=e,i)i[n]=et(i[n]);return i},bs.prototype.getPoints=function(t,e,i){var s,n,a,r,o=[],l=[],h=[],c=ds.prototype;for(n=c.getPoints.call(this,t,e,i),s=0;s<n.length;s++)l.push(n[s].x),h.push(n[s].y);for(a=this._getControlPoints(l),r=this._getControlPoints(h),s=0;s<n.length-1;s++)o.push([n[s],{x:a[0][s],y:r[0][s]},{x:a[1][s],y:r[1][s]},n[s+1]]);return o},bs.prototype._getControlPoints=function(t){var e,i,s=[],n=[],a=[],r=[],o=[],l=[],h=t.length-1;for(s[0]=0,n[0]=2,a[0]=1,r[0]=t[0]+2*t[1],e=1;e<h-1;e++)s[e]=1,n[e]=4,a[e]=1,r[e]=4*t[e]+2*t[e+1];for(s[h-1]=2,n[h-1]=7,a[h-1]=0,r[h-1]=8*t[h-1]+t[h],e=1;e<h;e++)i=s[e]/n[e-1],n[e]=n[e]-i*a[e-1],r[e]=r[e]-i*r[e-1];for(o[h-1]=r[h-1]/n[h-1],e=h-2;e>=0;--e)o[e]=(r[e]-a[e]*o[e+1])/n[e];for(e=0;e<h-1;e++)l[e]=2*t[e+1]-o[e+1];return l[h-1]=.5*(t[h]+o[h-1]),[o,l]};var xs={paddingX:3,paddingY:6,radius:1,minHeight:4,eventRadius:8};function ys(e){this.config=t.extend(E(xs),e||{},!0)}function ws(){}ys.prototype=E(bs.prototype),ys.prototype.draw=function(t,e,i){var s=this.config,n=ds.prototype,a=hs,r=s.color?this._applyColor(a,s.color):null,o=this.getPoints(t,e,i),l=o.splice(o.length-3,3),h=a._linePoints(l);h[0][0]="L";var c=a._curvePoints(o).concat(h),d=a.group(a.getPath(a.definePath(c),"webix_sparklines_area"+(r?" "+r.area:""),!0));d+=a.group(a.getPath(a.definePath(a._curvePoints(o)),"webix_sparklines_line"+(r?" "+r.line:"")));var u=n.getPoints.call(this,t,e,i);d+=n._drawItems(a,u,s.radius,"webix_sparklines_item"+(r?" "+r.item:""));var f=Math.min(t.length?(e-2*(s.paddingX||0))/t.length:0,s.eventRadius);return d+=n._drawEventItems(a,u,f),a.draw(d,e,i,"webix_sparklines_splinearea_chart"+(s.css?" "+s.css:""))},ys.prototype._applyColor=function(t,e){var i={area:{},line:{},item:{}},s=t.styleMap;if(e)for(var n in i.area[s.color]=t.setOpacity(e,.2),i.line[s.lineColor]=e,i.item[s.color]=e,i)i[n]=et(i[n]);return i},ys.prototype.getPoints=function(t,e,i){var s=bs.prototype.getPoints.call(this,t,e,i),n=this.config.paddingX||0,a=this.config.paddingY||0;return s.push({x:e-n,y:i-a},{x:n,y:i-a},{x:n,y:s[0][0].y}),s},ws.types={},ws.getTemplate=function(e){var i=e||{};"string"==typeof e&&(i={type:e}),t.extend(i,{type:"line"});var s=this.types[i.type];return _(s,"Unknown sparkline type"),T(this._template,new s(i))},ws._template=function(t,e,i,s){return s?this.draw(function(t){for(var e=[],i=t.length-1;i>=0;i--){var s=t[i];e[i]="object"===u(s)?s.value:s}return e}(i),s.width,33):this.draw(t.data||t,e.width,e.height)},W("onDataTable",function(t){t.type.sparklines=ws.getTemplate()}),ws.types.area=fs,ws.types.bar=ps,ws.types.line=ds,ws.types.pie=vs,ws.types.spline=bs,ws.types.splineArea=ys;var Ss={escape:!0,delimiter:{rows:"\n",cols:"\t"},parse:function(t,e){if(e=e||this.delimiter,!this.escape)return this._split_clip_data(t,e);for(var i=t.replace(/\n$/,"").split(e.rows),s=0;s<i.length-1;)this._substr_count(i[s],'"')%2==1&&(i[s]+=e.rows+i[s+1],delete i[s+1],s++),s++;var n=[];for(s=0;s<i.length;s++)if(void 0!==i[s]){for(var a=i[s],r=0,o=[],l=!1,h=0;h<=a.length;h++){if(!l&&a[h]===e.cols||h===a.length){var c=a.substr(r,h-r);c[0]===c[c.length-1]&&'"'===c[0]&&(c=c.substr(1,c.length-2).replace('""','"')),o.push(c),r=h+1}'"'!==a[h]||(l=!l)}n.push(o)}return n},_split_clip_data:function(t,e){for(var i=t.split(e.rows),s=0;s<i.length;s++)i[s]=i[s].split(e.cols);return i},
/*! counts how many occurances substring in string **/
_substr_count:function(t,e){var i=t.split(e);return i.length-1},stringify:function(t,e){if(e=e||this.delimiter,!this.escape){for(var i=0;i<t.length;i++)t[i]=t[i].join(e.cols);return t.join(e.rows)}for(var s=/\n|"|;|,/,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++){var r=t[n][a];r instanceof Date?t[n][a]=St.parseFormatStr(r):s.test(r)&&(t[n][a]='"'+r.toString().replace(/"/g,'""')+'"')}t[n]=t[n].join(e.cols)}return t=t.join(e.rows)}},ks={clipboard_setter:function(t){return!0!==t&&1!==t||(t="block"),ki.init(),this.attachEvent("onSelectChange",this._sel_to_clip),this.attachEvent("onItemClick",function(){document.activeElement&&this.$view.contains(document.activeElement)&&(ki.focus(),Ve.setFocus(this))}),this.attachEvent("onPaste",this._clip_to_sel),t},templateCopy_setter:Vt,_sel_to_clip:function(){var t=this._get_sel_text();ki.set(t),Ve.setFocus(this)},_get_sel_text:function(){var t=[],e=this._settings.templateCopy;this.mapSelection(function(i,s,n,a){t[a]||(t[a]=[]);var r=e?e(i,s,n):i;return t[a].push(r),i});var i=1===t.length&&1===t[0].length?t[0][0]:Ss.stringify(t,this._settings.delimiter);return i},_clip_to_sel:function(t){if(!P(this._paste[this._settings.clipboard])){var e=Ss.parse(t,this._settings.delimiter);this._paste[this._settings.clipboard].call(this,e)}},_paste:{block:function(t){var e=this.mapSelection(null);e&&(this.mapCells(e.row,e.column,t.length,null,function(e,i,s,n,a){return t[n]&&t[n].length>a?t[n][a]:e}),this.render())},selection:function(t){this.mapSelection(function(e,i,s,n,a){return t[n]&&t[n].length>a?t[n][a]:e}),this.render()},repeat:function(t){this.mapSelection(function(e,i,s,n,a){return(i=t[n%t.length])[a%i.length]}),this.render()},custom:function(){}}},Cs={open:function(t,e){if(t){var i=this.getItem(t);_(i,"Incorrect ID to open: "+t),i.$count&&!i.open&&(this.callEvent("onBeforeOpen",[t])&&(i.open=!0,this.data.callEvent("onStoreUpdated",[t,0,"branch"]),this.callEvent("onAfterOpen",[t])),e&&"0"!=t&&this.open(this.getParentId(t),e))}},close:function(t){if(t){var e=this.getItem(t);e.open&&this.callEvent("onBeforeClose",[t])&&(e.open=!1,this.data.callEvent("onStoreUpdated",[t,0,"branch"]),this.callEvent("onAfterClose",[t]))}},openAll:function(t){this.data.eachSubItem(t||0,function(t,e){e&&(t.open=!0)}),this.data.refresh()},closeAll:function(t){this.data.eachSubItem(t||0,function(t,e){e&&(t.open=!1)}),this.data.refresh()},_tree_check_uncheck:function(t,e,i){if(this._settings.threeState)return this._tree_check_uncheck_3(t,null!==e?e:"");var s,n=this.getItem(t),a=i?i.target||i.srcElement:null;s=a&&"checkbox"==a.type?!!a.checked:null!==e?e:!n.checked,n.checked=s,this.callEvent("onItemCheck",[t,n.checked,i])},isBranchOpen:function(t){if("0"==t)return!0;var e=this.getItem(t);return!!e.open&&this.isBranchOpen(e.$parent)},getOpenItems:function(){var t=[];for(var e in this.data.branch)this.exists(e)&&this.getItem(e).open&&t.push(e);return t},getState:function(){return{open:this.getOpenItems(),select:this.getSelectedId(!0)}},_repeat_set_state:function(t,e){var i=this.data.attachEvent("onStoreLoad",function(){t.setState.call(t,e),t.data.detachEvent(i),t=null})},setState:function(t){if(t.open){this.closeAll();for(var e=t.open,i=0;i<e.length;i++){var s=this.getItem(e[i]);if(s&&s.$count&&(s.open=!0,-1==s.$count))return this._repeat_set_state(this,t),this.refresh(),0}this.refresh()}if(t.select&&this.select){var n=t.select;this.unselect();for(var a=0;a<n.length;a++)this.exists(n[a])&&this.select(n[a],!0)}return 1}},As={webix_tree_open:function(t,e){return this.close(e),!1},webix_tree_close:function(t,e){return this.open(e),!1},webix_tree_checkbox:function(t,e){return this._tree_check_uncheck(e,null,t),!1}},Is={$init:function(){this.data.attachEvent("onStoreUpdated",T(this._sync_hierarchy,this),null,!0),this._feed_common=this._feed_commonA},_feed_commonA:function(t,e,i,s){var n=0===e?{parent:encodeURIComponent(t)}:null;return $i.prototype._feed_common.call(this,t,e,i,s,n)},loadBranch:function(t,e,i){return t=t||0,this.data.url=i||this.data.url,this.callEvent("onDataRequest",[t,e,this.data.url])&&this.data.url?this.data.feed.call(this,t,0,e,i):Mt.reject()},_sync_hierarchy:function(t,e,i){i&&"add"!=i&&"delete"!=i&&"branch"!=i||this.data._sync_to_order(this)}},Es={$init:function(){_(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(t,e,i,s){return(s=s||{}).copy=!0,this.move(t,e,i,s)},_next_move_index:function(t,e,i){if(e&&t){var s=this.getBranchIndex(t),n=this.getParentId(t)==this.getParentId(e);return s+(i==this&&n&&i.getBranchIndex(e)<s?0:1)}},_check_branch_child:function(t,e){var i=this.data.branch[t];if(i&&i.length)for(var s=0;s<i.length;s++){if(i[s]==e)return!0;if(this._check_branch_child(i[s],e))return!0}return!1},_remove_childs:function(t){for(var e=0;e<t.length;e++)for(var i=t[e];this.getParentId(i);)i=this.getParentId(i),-1==O.find.call(t,i)||(t.splice(e,1),e--);return t},move:function(t,e,i,s){s=s||{},e=e||0;var n=s.newId||t,a=s.parent||0;if(_((i=i||this).data,"moving attempt to component without datastore"),i.data){if(!R(t)){if(this!=i||s.copy){if(n=i.data.add(i._externalData(this.getItem(t),n),e,a||0),this.data.branch[t]&&i.getBranchIndex){var r=this.data._scheme_serialize;this.data._scheme_serialize=function(t){var e=E(t);return delete e.$parent,delete e.$level,delete e.$child,i.data.pull[e.id]&&(e.id=$()),e};var o={data:this.serialize(t,!0),parent:n};this.data._scheme_serialize=r,i.parse(o)}s.copy||this.data.remove(t)}else{if(t==a||this._check_branch_child(t,a))return;var l=this.getItem(t),h=this.data.branch[a];h||(h=this.data.branch[a]=[]);var c=this.data.branch[l.$parent],d=O.find.call(c,t);if(e<0&&(e=h.length),c===h&&e===d)return;if(O.removeAt.call(c,d),O.insertAt.call(h,t,Math.min(h.length,e)),c.length||delete this.data.branch[l.$parent],l.$parent&&"0"!=l.$parent&&this.getItem(l.$parent).$count--,a&&"0"!=a){var u=i.getItem(a);u.$count++,this._set_level_rec(l,u.$level+1)}else this._set_level_rec(l,1);l.$parent=a,i.data.callEvent("onDataMove",[t,e,a,h[e+1]])}return this.refresh(),n}this._remove_childs(t);for(var f=0;f<t.length;f++){var g=this.move(t[f],e,i,s);e=i._next_move_index(g,t[f+1],this)}}},_set_level_rec:function(t,e){t.$level=e;var i=this.data.branch[t.id];if(i)for(var s=0;s<i.length;s++)this._set_level_rec(this.getItem(i[s]),e+1)},_drag_pause:function(t){t&&!t.header&&this.exists(t)&&this._target_to_id(t)!=_i._drag_context.start&&this.open(t)},$dropAllow:function(t){if(t.from!=t.to)return!0;for(var e=0;e<t.source.length;e++)if(this._check_branch_child(t.source,t.target))return!1;return!0},_externalData:function(t,e){var i=Ei._externalData.call(this,t,e);return delete i.open,i}},Ts={$init:function(){_(this.render,"TreeRenderStack :: Object must use RenderStack first")},_toHTMLItem:function(t){var e=this.data._marks[t.id];return this.callEvent("onItemRender",[t]),this.type.templateStart(t,this.type,e)+(t.$template?this.type["template"+t.$template](t,this.type,e):this.type.template(t,this.type,e))+this.type.templateEnd()},_toHTMLItemObject:function(t){return this._html.innerHTML=this._toHTMLItem(t),this._html.firstChild},_toHTML:function(t){_(!t.$template||this.type["template"+t.$template],"RenderStack :: Unknown template: "+t.$template);var e="<div role='presentation' class='webix_tree_branch_"+t.$level+"'>"+this._toHTMLItem(t);return t.open&&(e+=this._toHTMLLevel(t.id)),e+="</div>"},_toHTMLLevel:function(t){var e="",i=this.data.branch[t];if(i){e+="<div role='presentation' class='webix_tree_leaves'>";for(var s=i.length-1,n=0;n<=s;n++){var a=this.getItem(i[n]),r=this.type._tree_branch_render_state;0!==r&&(r[a.$level]=n==s),e+=this._toHTML(a)}e+="</div>"}return e},render:function(t,e,i){if(Ts._obj=this,this.isVisible(this._settings.id)&&!this.$blockRender){if(t){var s,n,a=this.getItem(t);if("add"!=i&&!(s=this.getItemNode(t)))return;switch(i){case"branch":var r=s.parentNode;ot(n=this._toHTMLObject(a),r),rt(r),this._htmlmap=null;break;case"paint":case"update":ot(n=this._htmlmap[t]=this._toHTMLItemObject(a),s),rt(s);break;case"delete":rt(s.parentNode);break;case"add":var o;if(0==a.$parent)o=this._dataobj.firstChild;else if(this.getItem(a.$parent).open&&(o=this.getItemNode(a.$parent))){if(!o.nextSibling){var l=nt("DIV",{class:"webix_tree_leaves"},"");o.parentNode.appendChild(l)}o=o.nextSibling}if(o){var h=this.data.getNextSiblingId(t);(h=this.getItemNode(h))&&(h=h.parentNode),n=this._toHTMLObject(a),this._htmlmap[t]=n.firstChild,ot(n,h,o)}break;default:return!1}this.callEvent("onPartialRender",[t,e,i])}else this.callEvent("onBeforeRender",[this.data])&&(this.type._tree_branch_render_state=[],this._dataobj.innerHTML=this._toHTMLLevel(0),this._htmlmap=null,this.callEvent("onAfterRender",[]));return this.type._tree_branch_render_state=0,Ts._obj=null,!0}},getItemNode:function(t){if(this._htmlmap)return this._htmlmap[t];this._htmlmap={};for(var e=this._dataobj.getElementsByTagName("DIV"),i=0;i<e.length;i++){var s=e[i].getAttribute(this._id);s&&(this._htmlmap[s]=e[i])}return this.getItemNode(t)},_branch_render_supported:1},Ms={_init_render_tree_state:function(){if(this._branch_render_supported){var t=this.render;this.render=function(e,i){var s=t.apply(this,arguments);this._settings.threeState&&s&&"checkbox"!=i&&this._setThirdState.apply(this,arguments)},this._init_render_tree_state=function(){}}},threeState_setter:function(t){return t&&this._init_render_tree_state(),t},_setThirdState:function(t){var e,i,s,n,a;if(s=[],a=this,t&&!a.data.pull[t]&&(t=0),!t||a.data.pull[t].$count)for((i=this._getAllLeaves(t)).sort(function(t,e){return a.data.pull[e].$level-a.data.pull[t].$level}),e=0;e<i.length;e++)e&&a.data.pull[i[e]].$parent==a.data.pull[i[e-1]].$parent||(s=s.concat(a._setParentThirdState(i[e])));else s=s.concat(a._setParentThirdState(t));for(n={},e=0;e<s.length;e++)n[s[e]]||(n[s[e]]=1,this._setCheckboxIndeterminate(s[e]));a=null},_setCheckboxIndeterminate:function(t){var e,i;(i=this.getItemNode(t))&&(this.render(t,"checkbox","update"),this.getItem(t).indeterminate&&(i=this.getItemNode(t),(e=i.getElementsByTagName("input")[0])&&(e.indeterminate=this.getItem(t).indeterminate)))},_setParentThirdState:function(t){var e,i,s,n,a,r,o;for(n=this.getParentId(t),a=[];n&&"0"!=n;){r=0,i=0,this.data.eachChild(n,function(t){t.indeterminate?r++:t.checked&&i++}),e=s=o=!1;var l=this.getItem(n);i==l.$count?e=!0:(i>0||r>0)&&(s=!0),(s||s!=l.indeterminate)&&(o=!0),l.indeterminate=s,(e||l.checked!=e)&&(o=!0),l.checked=e,o?(a.push(n),n=this.getParentId(n)):n=0}return a},getChecked:function(){var t=[],e=this;return this.data.eachSubItem(0,function(i){e.isChecked(i.id)&&t.push(i.id)}),t},_tree_check_uncheck_3:function(t,e){var i=this.getItem(t);if(i&&(""===e&&(e=!i.checked),i.checked!=e||i.indeterminate)){i.checked=e,this._correctThreeState(t);var s=this._setParentThirdState(t);if(this._branch_render_supported&&s.length<5)for(var n=0;n<s.length;n++)this._setCheckboxIndeterminate(s[n]);else this.refresh();this.callEvent("onItemCheck",[t,e])}},checkItem:function(t){this._tree_check_uncheck(t,!0),this.updateItem(t)},uncheckItem:function(t){this._tree_check_uncheck(t,!1),this.updateItem(t)},_checkUncheckAll:function(t,e,i){var s=e?"checkItem":"uncheckItem";t?this[s](t):t=0,this._settings.threeState?t||this.data.eachChild(0,function(t){this[s](t.id)},this,i):this.data.each(function(t){this[s](t.id)},this,i,t)},checkAll:function(t,e){this._checkUncheckAll(t,!0,e)},uncheckAll:function(t,e){this._checkUncheckAll(t,!1,e)},_correctThreeState:function(t){var e,i=this.getItem(t);i.indeterminate=!1,e=i.checked,this.data.eachSubItem(t,function(t){t.indeterminate=!1,t.checked=e}),this._branch_render_supported&&this.isBranchOpen(i.$parent)&&this.render(t,0,"branch")},isChecked:function(t){return this.getItem(t).checked},_getAllLeaves:function(t){var e=[];return this.data.eachSubItem(t,function(t,i){i||e.push(t.id)}),e}},Ps={name:"TreeStore",$init:function(){this._filterMode={showSubItems:!0},this.branch={0:[]},this.attachEvent("onParse",function(t){this._set_child_scheme(t.child)}),this.attachEvent("onClearAll",T(function(){this._filter_branch=null},this))},filterMode_setter:function(e){return t.extend(this._filterMode,e,!0)},_filter_reset:function(t){if(this._filter_branch&&!t){for(var e in this.branch=this._filter_branch,this.order=H(E(this.branch[0])),this.branch)"0"!=e&&(this.getItem(e).$count=this.branch[e].length);delete this._filter_branch}},_filter_core:function(t,e,i,s){i&&this._filter_branch||(this._filter_branch=this.branch,this.branch=I(this.branch)),this.branch[0]=this._filter_branch_rec(t,e,this.branch[0],1,s||{})},_filter_branch_rec:function(t,e,i,s,n){for(var a=[],r=n.level&&n.level!=s,o=0;o<i.length;o++){var l=i[o],h=this.getItem(l),c=!1,d=this.branch[l];if(r)c=!0;else if(t(this.getItem(l),e)){if(a.push(l),!1!==n.openParents)for(var u=this.getParentId(l);u&&"0"!=u;)this.getItem(u).open=1,u=this.getParentId(u);if(n.level||n.showSubItems)continue}else c=!0;if((r||!n.level)&&d){var f=this.branch[l]=this._filter_branch_rec(t,e,d,s+1,n);h.$count=f.length,c&&f.length&&a.push(l)}}return a},count:function(){if(this.order.length)return this.order.length;var t=0;return this.eachOpen(function(){t++}),t},_change_branch_id:function(t,e,i,s){if(t[i]){for(var n=t[s]=t[i],a=0;a<n.length;a++)this.getItem(n[a]).$parent=s;delete t[i]}if(t[e]){var r=O.find.call(t[e],i);r>=0&&(t[e][r]=s)}},changeId:function(t,e){if(t!=e){var i=this.getItem(t).$parent;return this._change_branch_id(this.branch,i,t,e),this._filter_branch&&this._change_branch_id(this._filter_branch,i,t,e),Ni.prototype.changeId.call(this,t,e)}},clearAll:function(t){this.branch={0:[]},Ni.prototype.clearAll.call(this,t)},getPrevSiblingId:function(t){var e=this.branch[this.getItem(t).$parent],i=O.find.call(e,t)-1;return i>=0?e[i]:null},getNextSiblingId:function(t){var e=this.branch[this.getItem(t).$parent],i=O.find.call(e,t)+1;return i<e.length?e[i]:null},getParentId:function(t){return this.getItem(t).$parent},getFirstChildId:function(t){var e=this.branch[t];return e&&e.length?e[0]:null},isBranch:function(t){return!!this.branch[t]},getBranchIndex:function(t){var e=this.branch[this.pull[t].$parent];return O.find.call(e,t)},_set_child_scheme:function(t){this._datadriver_child="string"==typeof t?function(e){var i=e[t];return i&&delete e[t],i}:t},_inner_parse:function(e,i){for(var s=e.parent||0,n=0;n<i.length;n++){var a=this.driver.getDetails(i[n]),r=this.id(a),o=!!this.pull[r];o?(a=t.extend(this.pull[r],a,!0),this._scheme_update&&this._scheme_update(a)):(this._scheme_init&&this._scheme_init(a),this.pull[r]=a),this._extraParser(a,s,0,o,e.from?1*e.from+n:0)}var l=this.pull[s]||{},h=this.branch[s]||[];l.$count=h.length,delete l.webix_kids,e.size&&e.size!=h.length&&(h[e.size-1]=void 0)},_extraParser:function(e,i,s,n,a){e.$count=0,e.$parent="0"!=i?i:0,e.$level=s||("0"!=i?this.pull[i].$level+1:1);var r=this.branch[e.$parent];if(r||(r=this.branch[e.$parent]=[]),this._filter_branch&&(this._filter_branch[e.$parent]=r),!n){var o=a||r.length;r[o]=e.id}var l=this._datadriver_child(e);if(e.webix_kids)return e.$count=-1;if(!l)return e.$count=0;R(l)||(l=[l]);for(var h=0;h<l.length;h++){var c=be.json.getDetails(l[h]),d=this.id(c);(n=!!this.pull[d])?(c=t.extend(this.pull[d],c,!0),this._scheme_update&&this._scheme_update(c)):(this._scheme_init&&this._scheme_init(c),this.pull[d]=c),this._extraParser(c,e.id,e.$level+1,n)}var u=this.branch[e.id];u&&(e.$count=u.length)},_sync_to_order:function(t){this.order=H(),this._sync_each_child(this.order,0,t)},_sync_each_child:function(t,e,i){for(var s=this.branch[e],n=0;n<s.length;n++){var a=s[n];t.push(a);var r=this.pull[a];r&&r.open&&(-1==r.$count?i.loadBranch(a):r.$count&&this._sync_each_child(t,a,i))}},provideApi:function(t,e){for(var i=["getPrevSiblingId","getNextSiblingId","getParentId","getFirstChildId","isBranch","getBranchIndex","filterMode_setter"],s=0;s<i.length;s++)t[i[s]]=this._methodPush(this,i[s]);t.getIndexById||Ni.prototype.provideApi.call(this,t,e)},getTopRange:function(){return H([].concat(this.branch[0])).map(function(t){return this.getItem(t)},this)},eachChild:function(t,e,i,s){var n=this.branch;s&&this._filter_branch&&(n=this._filter_branch);var a=n[t];if(a)for(var r=0;r<a.length;r++)a[r]&&e.call(i||this,this.getItem(a[r]))},each:function(t,e,i,s){this.eachChild(s||0,function(s){var n=this.branch;t.call(e||this,s),i&&this._filter_branch&&(n=this._filter_branch),s&&n[s.id]&&this.each(t,e,i,s.id)},this,i)},eachOpen:function(t,e,i){this.eachChild(i||0,function(i){t.call(e||this,i),this.branch[i.id]&&i.open&&this.eachOpen(t,e,i.id)})},eachSubItem:function(t,e){var i=this.branch[t||0];if(i)for(var s=0;s<i.length;s++){var n=i[s];this.branch[n]?(e.call(this,this.getItem(n),!0),this.eachSubItem(n,e)):e.call(this,this.getItem(n),!1)}},eachLeaf:function(t,e){var i=this.branch[t||0];if(i)for(var s=0;s<i.length;s++){var n=i[s];this.branch[n]?this.eachLeaf(n,e):e.call(this,this.getItem(n),!1)}},_sort_core:function(t,e){var i=this.sorting.create(t);for(var s in this.branch){for(var n=this.branch[s],a=[],r=0;r<n.length;r++)a.push(this.pull[n[r]]);a.sort(i);for(var o=0;o<n.length;o++)a[o]=a[o].id;this.branch[s]=a}return e},add:function(t,e,i){var s=!1,n=this.getItem(i||0);if(n&&(this.branch[n.id]||(s=!0),n.$count++,n.$count||(n.$count=1)),this.branch[i||0]=this.order=H(this.branch[i||0]),t.$count=t.webix_kids?-1:0,t.$level=n?n.$level+1:1,t.$parent=n?n.id:0,this._filter_branch){var a=this._filter_branch[i||0];if(a||(a=this._filter_branch[i]=this.order),this.order!==a){var r=a.length;!e&&this.branch[i||0].length&&(r=0),a=H(a),t.id=t.id||$(),a.insertAt(t.id,r)}}var o=Ni.prototype.add.call(this,t,e);return s&&this.refresh(i),o},_rec_remove:function(t){var e=this.pull[t];if(this.branch[e.id]&&this.branch[e.id].length>0)for(var i=this.branch[t],s=0;s<i.length;s++)this._rec_remove(i[s],!0);delete this.branch[t],this._filter_branch&&delete this._filter_branch[t],delete this.pull[t],this._marks[t]&&delete this._marks[t]},_filter_removed:function(t,e,i){var s=t[e];1==s.length&&s[0]==i&&e?delete t[e]:H(s).remove(i)},remove:function(t){if(R(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else{_(this.exists(t),"Not existing ID in remove command"+t);var i=this.pull[t],s=i.$parent||0;if(!1===this.callEvent("onBeforeDelete",[t]))return!1;this._rec_remove(t),this.callEvent("onAfterDelete",[t]);var n=this.pull[s];this._filter_removed(this.branch,s,t),this._filter_branch&&this._filter_removed(this._filter_branch,s,t);var a=0;n&&(n.$count--,n.$count<=0&&(n.$count=0,n.open=0,a=1)),this.callEvent("onStoreUpdated",[t,i,"delete"]),a&&this.refresh(n.id)}},getBranch:function(t){var e=[],i=(this._filter_branch||this.branch)[t];if(i)for(var s=0;s<i.length;s++)e[s]=this.pull[i[s]];return e},serialize:function(t,e){var i=this.branch;e&&this._filter_branch&&(i=this._filter_branch);for(var s=i[t||0],n=[],a=0;a<s.length;a++){var r,o=this.pull[s[a]];if(this._scheme_serialize){if(!1===(r=this._scheme_serialize(o)))continue}else r=E(o);i[o.id]&&(r.data=this.serialize(o.id,e)),n.push(r)}return n}},Ls={insert:function(t){for(var e=this.getSelectedId(!0,!0),i=0;i<t.length;i++){for(var s={},n=0;n<this._settings.columns.length;n++)s[this._settings.columns[n].id]=t[i][n]||"";!P(s.id)&&this.exists(s.id)&&(s.id=$()),this.add(s,null,e[0])}}},zs={space:function(t){for(var e="",i=1;i<t.$level;i++)e+="<div class='webix_tree_none'></div>";return e},icon:function(t){return t.$count?t.open?"<div class='webix_tree_open'></div>":"<div class='webix_tree_close'></div>":"<div class='webix_tree_none'></div>"},checkbox:function(t){return t.nocheckbox?"":"<input type='checkbox' class='webix_tree_checkbox' "+(t.checked?"checked":"")+(t.disabled?" disabled":"")+">"},folder:function(t){return t.icon?"<div class='webix_tree_file webix_tree_"+t.icon+"'></div>":t.$count?t.open?"<div class='webix_tree_folder_open'></div>":"<div class='webix_tree_folder'></div>":"<div class='webix_tree_file'></div>"}},Ns={flash:{$render:function(){window.swfobject||ve("legacy/swfobject.js",!0);var t=this._settings;t.swfId=t.swfId||"webix_swf_"+$(),this._getBox().innerHTML+="<div class='webix_upload_flash'><div id='"+t.swfId+"'></div></div>",this._upload_area=this._getBox().lastChild,swfobject.embedSWF(i.codebase+"/legacy/uploader.swf",t.swfId,"100%","100%","9",null,{uploaderId:t.id,ID:t.swfId,enableLogs:t.enableLogs?"1":"",paramName:t.inputName,multiple:t.multiple?"Y":""},{wmode:"transparent"}),ee(this._viewobj,"click",T(function(){var t=new Date;t-(this._upload_timer_click||0)>250&&this.fileDialog()},this)),this.files.attachEvent("onBeforeDelete",T(this._stop_file,this))},$applyFlash:function(t,e){return this[t].apply(this,e)},getSwfObject:function(){return swfobject.getObjectById(this._settings.swfId)},fileDialog:function(){this.getSwfObject()&&this.getSwfObject().showDialog()},send:function(e){if("function"==typeof e&&(this._last_assigned_upload_callback=e,e=0),e){var i=this.files.getItem(e);if("client"!==i.status)return!1;if(i.status="transfer",this.getSwfObject()){var s=this._get_active_url(i),n=this._settings.formData||{};"function"==typeof n&&(n=n.call(this));var a=t.extend(i.formData||{},n);this.getSwfObject().upload(e,s,a)}return!0}var r=this.files.data.order,o=!0;if(r.length)for(var l=0;l<r.length;l++)o=this.send(r[l])&&o;o&&this._upload_complete()},$beforeAddFileToQueue:function(t,e,i){var s=e.split(".").pop(),n=this._format_size(i);return this.callEvent("onBeforeFileAdd",[{id:t,name:e,size:i,sizetext:n,type:s}])},$addFileToQueue:function(t,e,i){if(this.files.exists(t))return!1;this._settings.multiple||this.files.clearAll();var s=e.split(".").pop(),n=this._format_size(i),a={name:e,id:t,size:i,sizetext:n,type:s,status:"client"};this.files.add(a),this.callEvent("onAfterFileAdd",[a]),t&&this._settings.autosend&&this.send(t)},stopUpload:function(t){this._stop_file(t)},_stop_file:function(t){var e=this.files.getItem(t);"transfer"==e.status&&(this.getSwfObject().uploadStop(t),e.status="client")},_drop:function(){},$onUploadComplete:function(){this._settings.autosend&&this._upload_complete()},$onUploadSuccess:function(e,i,s){var n=this.files.getItem(e);n&&(n.status="server",n.progress=100,s.text&&"string"==typeof s.text&&(be.json.toObject(s.text),t.extend(n,s,!0)),this.callEvent("onFileUpload",[n,s]),this.callEvent("onChange",[]),this.files.updateItem(e))},$onUploadFail:function(t){var e=this.files.getItem(t);e.status="error",delete e.percent,this.files.updateItem(t),this.callEvent("onFileUploadError",[e,""])}},html5:{$render:function(){if(this._upload_area)this._contentobj.firstChild.appendChild(this._upload_area);else{this.files.attachEvent("onBeforeDelete",this._stop_file);var t={type:"file",class:"webix_hidden_upload",tabindex:-1};this._settings.accept&&(t.accept=this._settings.accept),this._settings.multiple&&(t.multiple="true"),this._settings.directory&&(t.webkitdirectory="true",t.mozdirectory="true",t.directory="true");var e=nt("input",t);this._upload_area=this._contentobj.firstChild.appendChild(e),ee(this._viewobj,"drop",T(function(t){this._drop(t),ut(t)},this)),ee(e,"change",T(function(){if(this._add_files(e.files),i.isIE){var t=document.createElement("form");t.appendChild(this._upload_area),t.reset(),this._contentobj.firstChild.appendChild(e)}else e.value=""},this)),ee(this._viewobj,"click",T(function(){var t=new Date;t-(this._upload_timer_click||0)>250&&this.fileDialog()},this)),ee(this._viewobj,"dragenter",ut),ee(this._viewobj,"dragexit",ut),ee(this._viewobj,"dragover",ut)}},_directoryEntry:function(t){return t.isDirectory},_directoryDrop:function(t,e,i){if(t.isFile)t.file(function(t){e.addFile(t,null,null,{name:i+"/"+t.name})});else if(t.isDirectory){var s=t.createReader();s.readEntries(function(s){for(var n=0;n<s.length;n++)e._directoryDrop(s[n],e,(i?i+"/":"")+t.name)})}},_drop:function(t){var e=t.dataTransfer.files,i=t.dataTransfer.items;if(this.callEvent("onBeforeFileDrop",[e,t])){i=i||e;for(var s=0;s<i.length;s++){var n=i[s];n.webkitGetAsEntry&&(n=n.webkitGetAsEntry()).isDirectory?this._directoryDrop(n,this,""):this.addFile(e[s])}}this.callEvent("onAfterFileDrop",[e,t])},fileDialog:function(t){this._upload_timer_click=new Date,this._last_file_context=t;var e=this._viewobj.getElementsByTagName("INPUT");e[e.length-1].click()},send:function(e){if("function"==typeof e&&(this._last_assigned_upload_callback=e,e=0),e){var i=this.files.getItem(e);if("client"!==i.status)return!1;_(this._settings.upload,"You need to define upload url for uploader component"),i.status="transfer";var s=new FormData;s.append(this.config.inputName,i.file,i.name),s.append(this.config.inputName+"_fullpath",i.name);var n={},a=this._settings.formData||{};"function"==typeof a&&(a=a.call(this));var r=t.extend(i.formData||{},a),o=new XMLHttpRequest,l=this._get_active_url(i);if(Y("onBeforeAjax",["POST",l,r,o,n,s])){for(var h in r)s.append(h,r[h]);for(var c in i.xhr=o,o.upload.addEventListener("progress",T(function(t){this.$updateProgress(e,t.loaded/t.total*100)},this),!1),o.onload=T(function(){o.aborted||this._file_complete(e)},this),o.open("POST",l,!0),n)o.setRequestHeader(c,n[c]);o.send(s)}return this.$updateProgress(e,0),!0}var d=this.files.data.order,u=!0;if(d.length)for(var f=0;f<d.length;f++)u=!this.send(d[f])&&u;u&&this._upload_complete()},_file_complete:function(t){var e=this.files.getItem(t);if(e){var i=null;if(e.xhr.status<400){var s=be[this._settings.datatype||"json"];(i=s.toObject(e.xhr.responseText))&&(i=s.getDetails(i))}i&&"error"!=i.status?(_(!i.status||"server"==i.status,"Not supported status value, use 'error' or 'server'"),this._complete(t,i)):(e.status="error",delete e.percent,this.files.updateItem(t),this.callEvent("onFileUploadError",[e,i])),delete e.xhr}},stopUpload:function(t){T(this._stop_file,this.files)(t)},_stop_file:function(t){var e=this.getItem(t);void 0!==e.xhr&&(e.xhr.aborted=!0,e.xhr.abort(),delete e.xhr,e.status="client")}}},$s={_validate_init_once:function(){this.data.attachEvent("onStoreUpdated",T(function(t,e,i){!t||"add"!=i&&"update"!=i||this.validate(t)},this)),this.data.attachEvent("onClearAll",T(this.clearValidation,this)),this._validate_init_once=function(){}},rules_setter:function(t){return t&&this._validate_init_once(),t},clearValidation:function(){this.data.clearMark("webix_invalid",!0)},validate:function(t){var e=!0;if(t){this._validate_details={};var i=this.getItem(t);(e=Mi.validate.call(this,null,i))?this.callEvent("onValidationSuccess",[t,i])&&this._clear_invalid(t):this.callEvent("onValidationError",[t,i,this._validate_details])&&this._mark_invalid(t,this._validate_details)}else for(var s in this.data.pull)e=this.validate(s)&&e;return e},_validate:function(t,e,i,s){"string"==typeof t&&(t=Ti[t]);var n=t.call(this,e,i,s);return n||(this._validate_details[s]=!0),n},_clear_invalid:function(t){this.data.removeMark(t,"webix_invalid",!0)},_mark_invalid:function(t){this.data.addMark(t,"webix_invalid",!0)}},Ds={$init:function(){this.elements={}},focus:function(t){if(t)_(this.elements[t],"unknown input name: "+t),this._focus(this.elements[t]);else for(var e in this.elements)if(!1!==this._focus(this.elements[e]))return!0;return!1},_focus:function(t){return!(!t||!t.focus)&&t.focus()},setValues:function(t,e){var i=this;this._settings.complexData&&(t=Nt.collapseNames(t,"",{},function(t){return P(i._values[t])})),this._inner_setValues(t,e)},_inner_setValues:function(t,e){for(var i in this._is_form_dirty=e,this.blockEvent(),e&&this._values||(this._values={}),t)this.elements[i]||(this._values[i]=t[i]);for(var s in this.elements){var n=this.elements[s];n&&(P(t[s])?!e&&n.$allowsClear&&n.setValue(""):n.setValue(t[s]),this._values[s]=n.getValue())}this.unblockEvent(),this.callEvent("onValues",[])},isDirty:function(){return!!this._is_form_dirty||1===this.getDirtyValues(1)},setDirty:function(t){this._is_form_dirty=t,t||(this._values=this._inner_getValues())},getDirtyValues:function(){var t={};if(this._values)for(var e in this.elements){var i=this.elements[e].getValue();if(this._values[e]!=i&&(t[e]=i,arguments[0]))return 1}return t},getCleanValues:function(){return this._values},getValues:function(t){var e=this._inner_getValues(t);return this._settings.complexData&&(e=Nt.expandNames(e)),e},_inner_getValues:function(t){var e,i=null,s=this._values?E(this._values):{};for(var n in this.elements)i=this.elements[n],e=!0,t&&("object"==u(t)?(!1===t.hidden&&(e=i.isVisible()),e&&!1===t.disabled&&(e=i.isEnabled())):e=t.call(this,i)),e?s[n]=i.getValue():delete s[n];return s},clear:function(){this._is_form_dirty=!1;var t={};for(var e in this.elements)this.elements[e].$allowsClear&&(t[e]="");this._inner_setValues(t)},markInvalid:function(t,e){if(!1===e)this._clear_invalid(t);else{if("string"==typeof e){var i=this.elements[t];i&&(i._settings.invalidMessage=e)}this._validate_details&&(this._validate_details[t]=!0),this._mark_invalid(t)}},_mark_invalid:function(t){var e=this.elements[t];if(t&&e){this._clear_invalid(t,!0),pt(e._viewobj,"webix_invalid"),e._settings.invalid=!0;var i=e._settings.invalidMessage;"string"==typeof i&&e.setBottomText&&e.setBottomText()}},_clear_invalid:function(t,e){var i=this.elements[t];if(t&&i&&i.$view&&i._settings.invalid){_t(i._viewobj,"webix_invalid"),i._settings.invalid=!1;var s=i._settings.invalidMessage;"string"==typeof s&&!e&&i.setBottomText&&i.setBottomText()}}},Hs={$init:function(){_(this.render,"VirtualRenderStack :: Object must use RenderStack first"),this._htmlmap={},ee(this._viewobj,"scroll",T(this._render_visible_rows,this)),i.touch&&this.attachEvent("onAfterScroll",T(this._render_visible_rows,this)),this._unrendered_area=[]},getItemNode:function(t){return this._htmlmap[t]},showItem:function(t){var e=this._getVisibleRange(),i=this.data.getIndexById(t),s=Math.floor(i/e._dx)*e._y,n=this.getScrollState();(s<n.y||s+this._settings.height>=n.y+this._content_height)&&this.scrollTo(0,s)},render:function(t,e,i){if(this.isVisible(this._settings.id)&&!this.$blockRender)if(t){var s=this.getItemNode(t);switch(i){case"update":if(!s)return;var n=this._htmlmap[t]=this._toHTMLObject(e);ot(n,s),rt(s);break;default:this._render_delayed()}}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(T(function(){this.render()},this),1))},_create_placeholder:function(t){i.maxHTMLElementSize&&(t=Math.min(i.maxHTMLElementSize,t));var e=document.createElement("DIV");return e.style.cssText="height:"+t+"px; width:100%; overflow:hidden;",e},_render_visible_rows:function(t,e){this._unrendered_area=[];var i=this._getVisibleRange();this._dataobj.firstChild&&!e||(this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(i._max)),this._htmlrows=[this._dataobj.firstChild]);for(var s=i._from;s<=i._height;){for(;this._htmlrows[s]&&this._htmlrows[s]._filled&&s<=i._height;)s++;if(s>i._height)break;for(var n=s;!this._htmlrows[n];)n--;var a=this._htmlrows[n],r=s*i._dx+(this.data.$min||0);if(r>(this.data.$max||1/0))break;var o=Math.min(r+i._dx-1,this.data.$max?this.data.$max-1:1/0),l=this._create_placeholder(i._y),h=this.data.getIndexRange(r,o);if(!h.length)break;for(var c={$template:"Loading"},d=0;d<h.length;d++)h[d]||this._unrendered_area.push(r+d),h[d]=this._toHTML(h[d]||c);l.innerHTML=h.join("");for(var u=0;u<h.length;u++)this._htmlmap[this.data.getIdByIndex(r+u)]=l.childNodes[u];var f=parseFloat(a.style.height,10),g=(s-n)*i._y,p=f-g-i._y;if(ot(l,g?a.nextSibling:a,this._dataobj),this._htmlrows[s]=l,l._filled=!0,g<=0&&p>0)a.style.height=p+"px",this._htmlrows[s+1]=a;else if(g<0?rt(a):a.style.height=g+"px",p>0){var _=this._htmlrows[s+1]=this._create_placeholder(p);ot(_,l.nextSibling,this._dataobj)}s++}if(this._unrendered_area.length){var v=this._unrendered_area[0],m=this._unrendered_area.pop()+1;if(m>v){var b=m-v;if(this._maybe_loading_already(b,v))return;b=Math.max(b,this._settings.datafetch||this._settings.loadahead||0),this.loadNext(b,v)}}},_getVisibleRange:function(){var t=this.getScrollState(),e=Math.max(0,t.y),i=this._content_width,s=this._content_height,n=this.type,a=Math.floor(i/n.width)||1,r=Math.floor(e/n.height),o=Math.ceil((s+e)/n.height)-1,l=this.data.$max?this.data.$max-this.data.$min:this.data.count(),h=Math.ceil(l/a)*n.height;return{_from:r,_height:o,_top:e,_max:h,_y:n.height,_dx:a}},_cellPosition:function(t){var e=this.getItemNode(t);return e||(this.showItem(t),this._render_visible_rows(),e=this.getItemNode(t)),{left:e.offsetLeft,top:e.offsetTop,height:e.offsetHeight,width:e.offsetWidth,parent:this._contentobj}}},Fs={$init:function(){this._htmlmap={},fi.$active?(this.attachEvent("onBeforeScroll",function(){this._in_touch_scroll=!0}),this.attachEvent("onAfterScroll",function(){this.render(null,null,"paint"),this._in_touch_scroll=!1}),this.attachEvent("onTouchMove",function(){this._in_touch_scroll&&(this.blockEvent(),this.render(null,null,"paint"),this.unblockEvent())})):ee(this._viewobj,"scroll",T(function(){this.render(null,null,"paint")},this))},_sync_scroll:function(t,e,i){this._settings.footer&&fi._set_matrix(this._footer.childNodes[1].firstChild,t,0,i),this.callEvent("onSyncScroll",[t,e,i])},getItemNode:function(t){return this._htmlmap&&this._htmlmap[t]},showItem:function(t){var e=this.data.getIndexById(t);if(e>-1){var i=e*this.type.height,s=i+this.type.height,n=this.getScrollState(),a=ht(this.$view);i<n.y?this.scrollTo(0,i):s>n.y+a.height&&this.scrollTo(0,s-a.height)}},render:function(t,e,i){if(this.isVisible(this._settings.id)&&!this.$blockRender){var s=this._renderobj||this._dataobj;if(!t||"paint"!=i&&"update"!=i){if("paint"!=i&&(this._htmlmap={},s.innerHTML=""),this.callEvent("onBeforeRender",[this.data])){var n=this.data.count(),a=this.getScrollState(),r=ht(this._viewobj),o=Math.floor(a.y/this.type.height)-2,l=Math.ceil((a.y+r.height)/this.type.height)+2;o=Math.max(0,o),l=Math.min(this.data.count()-1,l);for(var h=[],c=o;c<=l;c++){var d=this.data.order[c];if(this._htmlmap[d])h.push("<div></div>");else{var u=this.data.getItem(d);if(!u){this._run_load_next({count:l-c+(this._settings.loadahead||0),start:c});break}h.push(this._toHTML(u))}}this._html.innerHTML=h.join(""),s.style.position="relative",s.style.height=n*this.type.height+"px";for(var f=this._html.childNodes,g=f.length-1;g>=0;g--){var p=f[g],_=p.getAttribute(this._id);_&&(p.style.position="absolute",p.style.top=(o+g)*this.type.height+"px",p.style.left=0,p.style.width="100%",s.appendChild(p),this._htmlmap[_]=p)}this.callEvent("onAfterRender",[])}}else{var v=this.getItemNode(t);if(v){var m=this._htmlmap[t]=this._toHTMLObject(e);return m.style.top=v.style.top,m.style.position="absolute",m.style.left=0,m.style.width="100%",ot(m,v),void rt(v)}}}},$setSize:function(){si.api.$setSize.apply(this,arguments)&&this.render(null,null,"paint")},_run_load_next:function(t){var e=Math.max(t.count,this._settings.datafetch||this._settings.loadahead||0);this._maybe_loading_already(t.count,t.start)||this.loadNext(e,t.start)}},Rs="non-existing view for export";function js(t,e,i){return!i&&e.format?function(i){return e.format(i[t])}:function(e){return e[t]}}function Os(e,i){var s,n=[],a=0,r=0,o=e.getColumnConfig,l=i.columns,h=!!i.rawValues,c="TreeStore"==e.data.name,d=i.treeLines;if((!0===d||P(d))&&(d="value"),n.heights={},l){if(!l.length){var u=[];for(var f in l)u.push(t.extend({id:f},t.extend({},l[f])));l=u}}else if(o)l=[].concat(e._columns);else{l=[];var g=e.data.pull[e.data.order[0]];for(var p in g)"id"!==p&&"$"!=p[0]&&l.push({id:p,isTree:c&&p===d})}if(i.ignore)for(var _=l.length-1;_>=0;_--)i.ignore[l[_].id]&&l.splice(_,1);if(i.id&&n.push({id:"id",width:50,header:" ",template:function(t){return t.id}}),i.flatTree){for(var v=i.flatTree.id,m=[].concat(i.flatTree.columns),b=[],x=!!i.flatTree.fill,y=1;y<=m.length;y++)m[y-1].template=function(t){return function(e){return e.$level==t?b[t]=e[v]:x&&t<e.$level?b[t]:""}}(y);for(var w=0,S=l.length-1;S>=0;S--)l[S].id===v&&(w=S);l=[].concat(l.slice(0,w)).concat(m).concat(l.slice(w+1))}for(var k=0;k<l.length;k++){var C=l[k],A=C.id;if(!C.noExport){var I=h&&o;if(o){var E=e._columns_pull[A];!C.template||E&&E.template==C.template||(I=!1),E&&(C=t.extend(t.extend({},C),E))}var T={id:C.id,template:I||!C.template?js(A,C,h):C.template,width:(C.width||200)*("excel"===i.export_mode?8.43/70:1),header:!1!==C.header?C.header||A:""};c&&A===d&&(T.isTree=s=!0),"excel"===i.export_mode&&t.extend(T,{type:C.exportType||"",format:C.exportFormat||""}),"string"==typeof T.header?T.header=[{text:T.header}]:T.header=[].concat(T.header);for(var M=0;M<T.header.length;M++){var L=T.header[M]||{},z=L.contentId?e.getHeaderContent(L.contentId).getValue(!0):L.text;T.header[M]=(z||"").toString().replace(/<[^>]*>/gi,"")}if(a=Math.max(a,T.header.length),e._settings.footer){var N=C.footer||"";N="string"==typeof N?[{text:N}]:[].concat(N);for(var $=0;$<N.length;$++)N[$]?N[$]=N[$].contentId?e.getHeaderContent(N[$].contentId).getValue():N[$].text:N[$]="";T.footer=N,r=Math.max(r,T.footer.length)}n.push(T)}}!s&&c&&i.treeLines!=d&&n[0]&&(n[0].isTree=!0);for(var D=0;D<n.length;D++){for(var H=a-n[D].header.length,F=0;F<H;F++)n[D].header.push("");if(e._settings.footer){H=r-n[D].footer.length;for(var R=0;R<H;R++)n[D].footer.push("")}}return n}function Bs(t,e,i){var s,n,a=!!e.filterHTML,r=/<[^>]*>/gi,o=[],l=e.export_mode;if("excel"!==l&&"csv"!=l||!e.docHeader||(o=[[(e.docHeader.text||e.docHeader).toString()],[""]],"excel"===l&&e.docHeader.height&&(i.heights[0]=e.docHeader.height)),!1!==e.header&&i.length)for(var h=0;h<i[0].header.length;h++){n=[];for(var c=0;c<i.length;c++)s="",i[c].header[h]&&(s=i[c].header[h],a&&(s=i[c].header[h]=s.replace(r,""))),n.push(s);"excel"!=l||!t._columns||!1===e.heights||t._headers[h]===ni.barHeight&&"all"!=e.heights||(i.heights[o.length]=t._headers[h]),"pdf"!==l&&(o[o.length]=n)}e.yCorrection=(e.yCorrection||0)-o.length;var d=e.flatTree||e.plainOutput?"":"-";if(t.data.each(function(s){if(!e.filter||e.filter(s)){this.data._scheme_export&&(s=t.data._scheme_export(s));for(var n=[],h=0;h<i.length;h++){var c=i[h],u=null;if(e.math&&s["$"+c.id]&&"="==s["$"+c.id].charAt(0)&&!s["$"+c.id].match(/^=(image|link|sparkline)\(/i)&&(u=s["$"+c.id]),this._spans_pull){var f=this.getSpan(s.id,c.id);f&&f[4]&&f[0]==s.id&&f[1]==c.id&&(u=f[4],a&&"string"==typeof u&&(u=u.replace(r,"")))}u||((u=c.template(s,t.type,s[c.id],c,h))||0===u||(u=""),c.isTree&&d&&(u=" "+Array(s.$level).join(d)+" "+u),a&&"string"==typeof u&&(u=u.replace(r,"")),"string"==typeof u&&"csv"===l&&(u=u.trim()),"string"!=typeof u||"excel"!==l&&"csv"!==l||(u=u.replace(/<br\s*\/?>/gm,"\n"))),n.push(u)}"excel"==l&&t._columns&&!1!==e.heights&&(s.$height&&s.$height!==ni.rowHeight||"all"==e.heights)&&(i.heights[o.length]=s.$height||this.config.rowHeight),o.push(n)}},t),!1!==e.footer)for(var u=i[0].footer?i[0].footer.length:0,f=0;f<u;f++){for(var g=[],p=0;p<i.length;p++){var _=i[p].footer[f];a&&(_=i[p].footer[f]=_.toString().replace(r,"")),g.push(_)}"excel"!=l||!t._columns||!1===e.heights||t._footers[f]===ni.barHeight&&"all"!=e.heights||(i.heights[o.length]=t._footers[f]),"pdf"!==l&&o.push(g)}return"excel"===l&&e.docFooter&&(o=o.concat([[],[(e.docFooter.text||e.docFooter).toString()]]),e.docFooter.height&&(i.heights[o.length-1]=e.docFooter.height)),o}var Vs={};function Ys(t,e){var i=(e.filename||"Data")+".pdf",s=new Blob([t.toString()],{type:"application/pdf"});return!1!==e.download&&mt(s,i),s}function Ws(e,i){for(var s=function(t){var e=t.width||595.296,i=t.height||841.896;return t.orientation&&"landscape"===t.orientation&&(i=[e,e=i][0]),new pdfjs.Document({padding:40,font:t._export_font,threshold:256,width:e,height:i})}(i),n=[],a=0;a<e.length;a++)e[a].node?n.push(Us(e[a].node)):n.push(Mt.resolve());return Mt.all(n).then(function(a){for(var r=0;r<n.length;r++){var o=e[r].viewOptions;o.textBefore&&Xs(s,"before",o.textBefore),a[r]?s.image(a[r],{align:"center"}):qs(e[r].scheme,e[r].data,o,s),o.textAfter&&Xs(s,"after",o.textAfter),r!=e.length-1&&s.pageBreak()}return function(e,i){if(!1!==i.docFooter){var s=e.footer();s.text({color:6710886,textAlign:"center"}).append(St.dataExport.page||"Page").pageNumber().append("  "+(St.dataExport.of||"of")+"  ").pageCount()}var n={text:0,image:1};if(i.docHeader&&("string"==typeof i.docHeader&&(i.docHeader={text:i.docHeader}),t.extend(i.docHeader,{color:6710886,textAlign:"right",order:0}),n.text=i.docHeader.order),i.docHeaderImage&&("string"==typeof i.docHeaderImage&&(i.docHeaderImage={url:i.docHeaderImage}),t.extend(i.docHeaderImage,{align:"right",order:1}),n.image=i.docHeaderImage.order),i.docHeader&&n.image>n.text&&e.header({paddingBottom:10}).text(i.docHeader.text,i.docHeader),i.docHeaderImage){var a=Mt.defer();return pdfjs.load(i.docHeaderImage.url,function(t,s){if(!t){var r=new pdfjs.Image(s);e.header({paddingBottom:10}).image(r,i.docHeaderImage),i.docHeader&&n.image<n.text&&e.header({paddingBottom:10}).text(i.docHeader.text,i.docHeader)}a.resolve(e.render())}),a}return Mt.resolve(e.render())}(s,i)})}function Xs(t,e,i){"after"==e&&t.text().br(),"string"==typeof i&&(i={text:i}),t.text(i.text,i.options||{}),"before"==e&&t.text().br()}function Us(t){return window.html2canvas(t,{background:"#fff",logging:!1}).then(function(t){for(var e=t.toDataURL("image/jpeg"),i=window.atob(e.split("base64,")[1]),s=i.length,n=new Uint8Array(s),a=0;a<s;a++)n[a]=i.charCodeAt(a);return new pdfjs.Image(n.buffer)})}function Gs(t,e){for(var i=e.orientation&&"landscape"==e.orientation?"height":"width",s=80,n=0;n<t.length;n++)s+=t[n].width;e[i]=Math.max(e[i]||0,s)}function qs(e,i,s,n){s.header=P(s.header)||!0===s.header?{}:s.header,s.footer=P(s.footer)||!0===s.footer?{}:s.footer,s.table=s.table||{};for(var a=!1===s.header?0:e[0].header.length,r=!1!==s.footer&&e[0].footer?e[0].footer.length:0,o=[],l=0;l<e.length;l++)o[l]=e[l].width;var h=t.extend(s.table,{borderWidth:1,height:20,lineHeight:1.1,borderColor:15658734,backgroundColor:16777215,color:6710886,textAlign:"left",paddingRight:10,paddingLeft:10,headerRows:a,widths:o.length?o:["100%"]}),c=n.table(h);if(a)for(var d=t.extend(s.header,{borderRightColor:11587299,borderBottomColor:11587299,color:4868682,backgroundColor:13820911,height:27,lineHeight:1.2}),u=0;u<a;u++)for(var f=c.tr(d),g=0;g<e.length;g++)f.td(e[g].header[u].toString());for(var p=0;p<i.length;p++)for(var _=c.tr({}),v=0;v<i[p].length;v++)_.td(i[p][v]);if(r)for(var m=t.extend(s.footer,{borderRightColor:15658734,borderBottomColor:15658734,backgroundColor:16448250,color:6710886,height:27,lineHeight:1.2}),b=0;b<r;b++)for(var x=c.tr(m),y=0;y<e.length;y++)x.td(e[y].footer[b].toString())}var Ks=function(t,e){(e=e||{}).export_mode="excel",t=R(t)?t:[t];for(var s=[],n=0;n<t.length;n++){var a=Zt(t[n]);if(a&&a.$exportView&&(a=a.$exportView(e)),a&&(s=s.concat(a)),_(a,Rs),e.dataOnly){var r=Os(a,e);s[n]={scheme:r,exportData:Bs(a,e,r),spans:e.spans?en(a,e):[]}}}if(e.dataOnly)return s;var o=Mt.defer();return ve(i.cdn+"/extras/xlsx.core.styles.min.js").then(function(){if(!s.length)return o.reject(Rs);for(var t={SheetNames:[],Sheets:{},Workbook:{WBProps:{},Names:[]}},i=R(e.sheets)?e.sheets:[e.name||"Data"],n=0;n<s.length;n++){var a=s[n].scheme||Os(s[n],e),r=s[n].exportData||Bs(s[n],e,a),l=s[n].spans?s[n].spans:e.spans?en(s[n],e):[],h=s[n].ranges||[],c=s[n].styles||[],d=Qs(r,a,l,c,e),u=(i[n]||"Data"+n).replace(/[*?:[\]\\/]/g,"").replace(/&/g,"&amp;").substring(0,31);t.SheetNames.push(u),t.Sheets[u]=d,t.Workbook.Names=t.Workbook.Names.concat(h)}var f=XLSX.write(t,{bookType:"xlsx",bookSST:!1,type:"binary"}),g=(e.filename||i.join(","))+".xlsx",p=new Blob([function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),s=0;s!=t.length;++s)i[s]=255&t.charCodeAt(s);return e}(f)],{type:"application/xlsx"});return!1!==e.download&&mt(p,g),o.resolve(p),o})},Zs={number:"n",date:"n",string:"s",boolean:"b"},Js="_table";function Qs(t,e,i,s,n){for(var a={},r={s:{c:1e7,r:1e7},e:{c:0,r:0}},o=0;o!=t.length;++o)for(var l=0;l!=t[o].length;++l){r.s.r>o&&(r.s.r=o),r.s.c>l&&(r.s.c=l),r.e.r<o&&(r.e.r=o),r.e.c<l&&(r.e.c=l);var h={v:t[o][l]};if(null!==h.v){var c=XLSX.utils.encode_cell({c:l,r:o}),d=h.v.toString(),u="="===d.charAt(0),f=(n.docHeader?2:0)+e[0].header.length;if(o>=f&&!u){var g=e[l];g.type&&(h.t=Zs[g.type]||""),g.format&&(h.z=g.format)}if(h.v instanceof Date?(h.t=h.t||"n",h.z=h.z||XLSX.SSF[Js][14],h.v=nn(h.v)):h.t||("boolean"==typeof h.v?h.t="b":"number"==typeof h.v||parseFloat(h.v)==h.v?(h.v=1*h.v,h.t="n"):(h.v=d,u?(h.t="n",h.f=h.v,delete h.v):h.t="s")),s){var p=tn(o,l,s);p.format&&(h.z=p.format,delete p.format),h.s=p}a[c]=h}}return r.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(r)),a["!rows"]=function(t){for(var e in t)t[e]={hpx:t[e],hpt:.75*t[e]};return t}(e.heights),a["!cols"]=function(t){for(var e=[],i=0;i<t.length;i++)e.push({wch:t[i].width});return e}(e),i.length&&(a["!merges"]=i),a}function tn(t,e,i){return i[t]&&i[t][e]?i[t][e]:""}function en(t,e){var i=t.getColumnConfig,s=t._spans_pull,n=[];if(i){if(!1!==e.header&&(n=sn(t,e,"header",n)),s){var a=e.xCorrection||0,r=e.yCorrection||0;for(var o in s){var l=s[o];for(var h in l){var c=t.getColumnIndex(h)-a,d=t.getIndexById(o)-r;if(!(c<0||d<0)){var u=c+l[h][0]-1,f=d+(l[h][1]-1);n.push({s:{c:c,r:d},e:{c:u,r:f}})}}}}!1!==e.footer&&(n=sn(t,e,"footer",n))}return n}function sn(t,e,i,s){for(var n=t.config.columns,a=(e.docHeader?2:0)+("header"==i?0:(!1!==e.header?t._headers.length:0)+t.count()),r=0;r<n.length;r++)for(var o=n[r][i],l=0;l<o.length;l++)o[l]&&(o[l].colspan||o[l].rowspan)&&s.push({s:{c:r,r:l+a},e:{c:r+(o[l].colspan||1)-1,r:l+(o[l].rowspan||1)-1+a}});return s}function nn(t){return Math.round(25569+t/864e5)}function an(t,e){-1!=t.type.indexOf("confirm")&&!1===e?t._promise.reject():t._promise.resolve(e);var i=t.callback;i&&i(e,t.details),pn.hide(t.id)}function rn(t){var e=pn.order.length;if(e>0&&_n.keyboard){var i=(t=t||ie).which||ie.keyCode,s=pn.pull[pn.order[e-1]];return 13!=i&&32!=i||an(s,!0),27==i&&an(s,!1),t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function on(t,e){var i,s=e||document.body;if(P(s.modality)){if((i=nt("DIV",{class:"webix_modal_cover",style:"position:"+(e?"absolute":"fixed")+";"})).onkeydown=rn,e){var n=window.getComputedStyle(e).position;"fixed"!=n&&"absolute"!=n&&"sticky"!=n&&"relative"!=n&&(s.style.position="relative")}s.appendChild(i),s.modality=1}else t?s.modality++:s.modality--;if(t&&1===s.modality||0===s.modality)if(i)i.style.display="inline-block";else{i=s.querySelectorAll(".webix_modal_cover");for(var a=0;a<i.length;a++)if(i[a].parentNode==s){i[a].style.display=1==s.modality?"inline-block":"none";break}}}function ln(t,e,i){return"<div role='button' tabindex='0' aria-label='"+t+"' class='webix_popup_button"+(i?" "+i:"")+"' result='"+e+"' ><div>"+t+"</div></div>"}function hn(t,e,i){var s=t.tagName?t:function(t,e,i){var s=document.createElement("DIV"),n=t.css?" "+t.css:"";s.className="webix_modal_box webix_"+t.type+n,s.setAttribute("webixbox",1),s.setAttribute("role","alertdialog"),s.setAttribute("aria-label",t.title||""),s.setAttribute("tabindex","0");var a="";if(t.width&&(s.style.width=t.width+(Ti.isNumber(t.width)?"px":"")),t.height&&(s.style.height=t.height+(Ti.isNumber(t.height)?"px":"")),t.title&&(a+='<div class="webix_popup_title">'+t.title+"</div>"),a+='<div class="webix_popup_text"><span>'+(t.content?"":t.text)+'</span></div><div  class="webix_popup_controls">',i&&(a+=ln(t.cancel||St.message.cancel,!1)),e&&(a+=ln(t.ok||St.message.ok,!0,"confirm")),t.buttons&&!e&&!i)for(var r=0;r<t.buttons.length;r++)a+=ln(t.buttons[r],r);if(a+="</div>",s.innerHTML=a,t.content){var o=t.content;"string"==typeof o&&(o=document.getElementById(o)),"none"==o.style.display&&(o.style.display=""),s.childNodes[t.title?1:0].appendChild(o)}return s.onclick=function(e){var i=(e=e||ie).target||e.srcElement;if(i.className||(i=i.parentNode),-1!=i.className.indexOf("webix_popup_button")){var s=i.getAttribute("result");an(t,s="true"==s||"false"!=s&&s)}e.cancelBubble=!0},t._box=s,s}(t,e,i),n=t.container?t.container.offsetWidth:window.innerWidth||document.documentElement.offsetWidth,a=t.container?t.container.offsetHeight:window.innerHeight||document.documentElement.offsetHeight;t.container&&(s.style.position="absolute"),D((t.container||document.body).appendChild(s)),on(!0,t.container);var r=t.left||Math.abs(Math.floor((n-s.offsetWidth)/2)),o=t.top||Math.abs(Math.floor((a-s.offsetHeight)/2));return"top"==t.position?s.style.top="-3px":s.style.top=o+"px",s.style.left=r+"px",s.onkeydown=rn,s.focus(),t.id?pn.pull[t.id]&&pn.hide(t.id):t.id=Me("modalbox"),pn.order.push(t.id),pn.pull[t.id]=t,t._promise=Mt.defer(),t._promise}function cn(t){return hn(t,!0)}function dn(t){return hn(t,!0,!0)}function un(t){return hn(t)}function fn(t,e,i){return"object"!=u(t)&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}function gn(){var t=fn.apply(this,arguments);return t.type=t.type||"confirm",dn(t)}function pn(){var t=fn.apply(this,arguments);return t.type=t.type||"alert",un(t)}function _n(t,e,i,s){(t=function(t,e,i,s){return"object"!=u(t)&&(t={text:t,type:e,expire:i,id:s}),t.id=t.id||Me("message"),t.expire=t.expire||vn.expire,t}.apply(this,arguments)).type=t.type||"info";var n=t.type.split("-")[0];switch(n){case"alert":return cn(t);case"confirm":return dn(t);case"modalbox":return un(t);default:return function(t){vn.area||(vn.area=document.createElement("DIV"),vn.area.className="webix_message_area",vn.area.style[vn.position]="5px",document.body.appendChild(vn.area)),vn.area.setAttribute("role","alert"),vn.area.setAttribute("aria-atomic",!0),vn.hide(t.id);var e=document.createElement("DIV");return e.innerHTML="<div>"+t.text+"</div>",e.className="webix_message webix_"+t.type,e.onclick=function(){t&&vn.hide(t.id),t=null},"bottom"==vn.position&&vn.area.firstChild?vn.area.insertBefore(e,vn.area.firstChild):vn.area.appendChild(e),t.expire>0&&(vn.timers[t.id]=window.setTimeout(function(){vn.hide(t.id)},t.expire)),e.style.height=e.offsetHeight-2+"px",vn.pull[t.id]=e,e=null,t.id}(t)}}ie(document,"keydown",rn,{capture:!0}),pn.pull={},pn.order=[],pn.hide=function(t){if(t&&pn.pull[t]){var e=pn.pull[t]._box;e&&(e.parentNode.removeChild(e),pn.order.splice(pn.order.indexOf(t),1),on(!1,pn.pull[t].container),delete pn.pull[t])}},pn.hideAll=function(){for(var t in pn.pull)this.hide(t)};var vn=_n;vn.expire=4e3,vn.keyboard=!0,vn.position="top",vn.pull={},vn.timers={},vn.hideAll=function(){for(var t in vn.pull)vn.hide(t)},vn.hide=function(t){var e=vn.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.style.height=0,e.className+=" hidden",vn.area.removeAttribute("role"),vn.timers[t]&&window.clearTimeout(vn.timers[t]),delete vn.pull[t])},g("message",_n),i.isIE8&&(Object.defineProperty=function(t,e,i){t[e]=i.value});var mn={startOnMonday:!1,toFixed:function(t,e){return t<10&&(t="0"+t),e&&t<100&&(t="0"+t),t},weekStart:function(t){var e=(t=this.copy(t)).getDay();return this.startOnMonday&&(0===e?e=6:e--),this.datePart(this.add(t,-1*e,"day"))},monthStart:function(t){return(t=this.copy(t)).setDate(1),this.datePart(t)},yearStart:function(t){return(t=this.copy(t)).setMonth(0),this.monthStart(t)},dayStart:function(t){return this.datePart(t,!0)},dateToStr:function(t,e){if("function"==typeof t)return t;if(i.strict)return function(e){if(!e)return"";e.getMonth||(e=St.parseFormatDate(e));var i="",s=0;return t.replace(/%[a-zA-Z]/g,function(n,a){i+=t.slice(s,a),i+=function(t){if("%d"==n)return mn.toFixed(t.getDate());if("%m"==n)return mn.toFixed(t.getMonth()+1);if("%j"==n)return t.getDate();if("%n"==n)return t.getMonth()+1;if("%y"==n)return mn.toFixed(t.getFullYear()%100);if("%Y"==n)return t.getFullYear();if("%D"==n)return St.calendar.dayShort[t.getDay()];if("%l"==n)return St.calendar.dayFull[t.getDay()];if("%M"==n)return St.calendar.monthShort[t.getMonth()];if("%F"==n)return St.calendar.monthFull[t.getMonth()];if("%h"==n)return mn.toFixed((t.getHours()+11)%12+1);if("%g"==n)return(t.getHours()+11)%12+1;if("%G"==n)return t.getHours();if("%H"==n)return mn.toFixed(t.getHours());if("%i"==n)return mn.toFixed(t.getMinutes());if("%a"==n)return t.getHours()>11?St.pm[0]:St.am[0];if("%A"==n)return t.getHours()>11?St.pm[1]:St.am[1];if("%s"==n)return mn.toFixed(t.getSeconds());if("%S"==n)return mn.toFixed(t.getMilliseconds(),!0);if("%W"==n)return mn.toFixed(Date.getISOWeek(t));if("%c"==n){var e=t.getFullYear();return e+="-"+mn.toFixed(t.getMonth()+1),e+="-"+mn.toFixed(t.getDate()),e+="T",e+=mn.toFixed(t.getHours()),e+=":"+mn.toFixed(t.getMinutes()),e+=":"+mn.toFixed(t.getSeconds())}return n}(e),s=a+2}),i+=t.slice(s,t.length)};t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+wDate.toFixed(date.getDate())+"';case"%m":return'"+wDate.toFixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+wDate.toFixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+i18n.calendar.dayShort[date.getDay()]+"';case"%l":return'"+i18n.calendar.dayFull[date.getDay()]+"';case"%M":return'"+i18n.calendar.monthShort[date.getMonth()]+"';case"%F":return'"+i18n.calendar.monthFull[date.getMonth()]+"';case"%h":return'"+wDate.toFixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+wDate.toFixed(date.getHours())+"';case"%i":return'"+wDate.toFixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?i18n.pm[0]:i18n.am[0])+"';case"%A":return'"+(date.getHours()>11?i18n.pm[1]:i18n.am[1])+"';case"%s":return'"+wDate.toFixed(date.getSeconds())+"';case"%S":return'"+wDate.toFixed(date.getMilliseconds(), true)+"';case"%W":return'"+wDate.toFixed(wDate.getISOWeek(date))+"';case"%c":var i='"+date.getFullYear()+"';return i+='-"+wDate.toFixed((date.getMonth()+1))+"',i+='-"+wDate.toFixed(date.getDate())+"',i+="T",i+='"+wDate.toFixed(date.getHours())+"',i+=':"+wDate.toFixed(date.getMinutes())+"',i+=':"+wDate.toFixed(date.getSeconds())+"',!0===e&&(i+="Z"),i;default:return t}}),!0===e&&(t=t.replace(/date\.get/g,"date.getUTC"));var s=new Function("date","i18n","wDate","if (!date) return ''; if (!date.getMonth) date=i18n.parseFormatDate(date);  return \""+t+'";');return function(t){return s(t,St,mn)}},strToDate:function(t,e){if("function"==typeof t)return t;var s,n,a,r=t.match(/%[a-zA-Z]/g),o="var temp=date.split(/[^0-9a-zA-Z]+/g);";if(!St.calendar.monthShort_hash){for(a=St.calendar.monthShort,n=St.calendar.monthShort_hash={},s=0;s<a.length;s++)n[a[s]]=s;for(a=St.calendar.monthFull,n=St.calendar.monthFull_hash={},s=0;s<a.length;s++)n[a[s]]=s}if(i.strict)return function(t){if(!t)return"";if("object"==u(t))return t;var i=t.split(/[^0-9a-zA-Z]+/g),n=[0,0,1,0,0,0,0];for(s=0;s<r.length;s++){var a=r[s];if("%y"==a)n[0]=1*i[s]+(i[s]>30?1900:2e3);else if("%Y"==a)n[0]=1*(i[s]||0),n[0]<30&&(n[0]+=2e3);else if("%n"==a||"%m"==a)n[1]=(i[s]||1)-1;else if("%M"==a)n[1]=St.calendar.monthShort_hash[i[s]]||0;else if("%F"==a)n[1]=St.calendar.monthFull_hash[i[s]]||0;else if("%j"==a||"%d"==a)n[2]=i[s]||1;else if("%g"==a||"%G"==a||"%h"==a||"%H"==a)n[3]=i[s]||0;else if("%a"==a)n[3]=n[3]%12+((i[s]||"")==St.am[0]?0:12);else if("%A"==a)n[3]=n[3]%12+((i[s]||"")==St.am[1]?0:12);else if("%i"==a)n[4]=i[s]||0;else if("%s"==a)n[5]=i[s]||0;else if("%S"==a)n[6]=i[s]||0;else if("%c"==a){var o=/(\d+)-(\d+)-(\d+)T(\d+):(\d+):(\d+)(\+.*|)/g.exec(t);n[0]=1*(o[1]||0),n[0]<30&&(n[0]+=2e3),n[1]=(o[2]||1)-1,n[2]=o[3]||1,n[3]=o[4]||0,n[4]=o[5]||0,n[5]=o[6]||0}}return e?new Date(Date.UTC(n[0],n[1],n[2],n[3],n[4],n[5],n[6])):new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[6])};for(s=0;s<r.length;s++)switch(r[s]){case"%j":case"%d":o+="set[2]=temp["+s+"]||1;";break;case"%n":case"%m":o+="set[1]=(temp["+s+"]||1)-1;";break;case"%y":o+="set[0]=temp["+s+"]*1+(temp["+s+"]>30?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":o+="set[3]=temp["+s+"]||0;";break;case"%i":o+="set[4]=temp["+s+"]||0;";break;case"%Y":o+="set[0]=(temp["+s+"]||0)*1; if (set[0]<30) set[0]+=2000;";break;case"%a":o+="set[3]=set[3]%12+(temp["+s+"]==i18n.am[0]?0:12);";break;case"%A":o+="set[3]=set[3]%12+(temp["+s+"]==i18n.am[1]?0:12);";break;case"%s":o+="set[5]=temp["+s+"]||0;";break;case"%S":o+="set[6]=temp["+s+"]||0;";break;case"%M":o+="set[1]=i18n.calendar.monthShort_hash[temp["+s+"]]||0;";break;case"%F":o+="set[1]=i18n.calendar.monthFull_hash[temp["+s+"]]||0;";break;case"%c":o+="var res = date.split('T');",o+="if(res[0]){ var d = res[0].split('-');",o+="set[0]= (d[0]||0)*1; if (set[0]<30) set[0]+=2000;",o+="set[1]= (d[1]||1)-1;",o+="set[2]= d[2]||1;}",o+="if(res[1]){ var t = res[1].split(':');",o+="set[3]= t[0]||0;",o+="set[4]= t[1]||0;",o+="set[5]= parseInt(t[2])||0;}"}var l="set[0],set[1],set[2],set[3],set[4],set[5], set[6]";e&&(l=" Date.UTC("+l+")");var h=new Function("date","i18n","if (!date) return ''; if (typeof date == 'object') return date; var set=[0,0,1,0,0,0,0]; "+o+" return new Date("+l+");");return function(t){return h(t,St)}},getISOWeek:function(t){if(!t)return!1;var e=t.getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var s=i.getFullYear(),n=Math.floor((i.getTime()-new Date(s,0,1).getTime())/864e5),a=1+Math.floor(n/7);return a},getUTCISOWeek:function(t){return this.getISOWeek(t)},_correctDate:function(t,e,i,s){if(i){var n=s(t,e);if(n)for(var a=i>0?1:-1;n;)t.setHours(t.getHours()+a),n=s(t,e),a+=i>0?1:-1}},add:function(t,e,i,s){s&&(t=this.copy(t));var n=mn.copy(t);switch(i){case"day":t.setDate(t.getDate()+e),this._correctDate(t,n,e,function(t,e){return mn.datePart(e,!0).valueOf()==mn.datePart(t,!0).valueOf()});break;case"week":t.setDate(t.getDate()+7*e),this._correctDate(t,n,7*e,function(t,e){return mn.datePart(e,!0).valueOf()==mn.datePart(t,!0).valueOf()});break;case"month":t.setMonth(t.getMonth()+e),this._correctDate(t,n,e,function(t,e){return e.getMonth()==t.getMonth()&&e.getYear()==t.getYear()});break;case"year":t.setYear(t.getFullYear()+e),this._correctDate(t,n,e,function(t,e){return e.getFullYear()==t.getFullYear()});break;case"hour":t.setHours(t.getHours()+e),this._correctDate(t,n,e,function(t,e){return e.getHours()==t.getHours()&&Date.datePart(e,!0)==Date.datePart(t,!0)});break;case"minute":t.setMinutes(t.getMinutes()+e);break;default:mn.add[i](t,e,i)}return t},datePart:function(t,e){e&&(t=this.copy(t));var i=this.copy(t);return i.setHours(0),i.getDate()!=t.getDate()?t.setHours(1):t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},timePart:function(t,e){return e&&(t=this.copy(t)),(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},copy:function(t){return new Date(t.valueOf())},equal:function(t,e){return!(!t||!e)&&t.valueOf()===e.valueOf()},isHoliday:function(t){if(0===(t=t.getDay())||6==t)return"webix_cal_event"}},bn={getConfig:function(t){var e={decimalSize:0,groupSize:999,prefix:"",sufix:""},i=t.split(/[0-9].*[0-9]/g);i[0].length&&(e.prefix=i[0]),i[1].length&&(e.sufix=i[1]),(e.prefix||e.sufix)&&(t=t.substr(e.prefix.length,t.length-e.prefix.length-e.sufix.length));var s=t.indexOf("1");s>0&&(e.prefix=t.substr(0,s),t=t.substr(s));var n=t.indexOf("0");n>0&&(e.decimalSize=t.length-n,e.decimalDelimiter=t[n-1],t=t.substr(0,n-1));var a=t.match(/[^0-9]/);return a&&(e.groupSize=t.length-a.index-1,e.groupDelimiter=t[a.index]),e},parse:function(t,e){if(!t||"string"!=typeof t)return t;e.prefix&&(t=t.toLowerCase().replace(e.prefix.toLowerCase()||"","")),e.sufix&&(t=t.toLowerCase().replace(e.sufix.toLowerCase()||"",""));var i="";if(e.decimalDelimiter){var s=t.indexOf(e.decimalDelimiter);s>-1&&(i=(i=t.substr(s+1).replace(/[^0-9]/g,"")).substr(0,Math.min(i.length,e.decimalSize)),t=t.substr(0,s))}var n="-"===t[0]?-1:1;return(t=t.replace(/[^0-9]/g,""))||(t="0"),i&&(t+="."+i),parseFloat(t)*n},format:function(t,e){if(""===t||void 0===t)return t;e=e||St;var i=(t=parseFloat(t))<0?"-":"";t=Math.abs(t),e.decimalOptional||(t=t.toFixed(e.decimalSize));var s=t.toString();s=s.split(".");var n="";if(e.groupSize){var a=e.groupSize,r=s[0].length;do{var o=(r-=a)>0?s[0].substr(r,a):s[0].substr(0,a+r);n=o+(n?e.groupDelimiter+n:"")}while(r>0)}else n=s[0];return s=e.decimalSize?i+n+(s[1]?e.decimalDelimiter+s[1]:""):i+n,e.prefix||e.sufix?e.prefix+s+e.sufix:s},numToStr:function(t){return function(e){return bn.format(e,t)}}},xn=["fullDateFormat","timeFormat","dateFormat","longDateFormat","parseFormat","parseTimeFormat"];St.setLocale=function(t){"string"==typeof t&&(t=St.locales[t]),t&&(t.priceSettings=E(t.priceSettings||t),function t(e,i){for(var s in i)"object"!=u(i[s])||R(i[s])?e[s]=i[s]:(e[s]||(e[s]={}),t(e[s],i[s]))}(St,t));for(var e=0;e<xn.length;e++){var i=xn[e],s=St[i+"UTC"];St[i+"Str"]=mn.dateToStr(St[i],s),St[i+"Date"]=mn.strToDate(St[i],s)}var n=Vt(St.price),a=St.priceSettings||St;St.intFormat=bn.numToStr({groupSize:St.groupSize,groupDelimiter:St.groupDelimiter,decimalSize:0}),St.priceFormat=function(t){return n(bn.format(t,a))},St.numberFormat=bn.format},St.locales={"en-US":{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%m/%d/%Y",timeFormat:"%h:%i %A",longDateFormat:"%d %F %Y",fullDateFormat:"%m/%d/%Y %h:%i %A",am:["am","AM"],pm:["pm","PM"],price:"${obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hours:"Hours",minutes:"Minutes",done:"Done",clear:"Clear",today:"Today"},dataExport:{page:"Page",of:"of"},PDFviewer:{of:"of",automaticZoom:"Automatic Zoom",actualSize:"Actual Size",pageFit:"Page Fit",pageWidth:"Page Width",pageHeight:"Page Height",enterPassword:"Enter password",passwordError:"Wrong password"},aria:{calendar:"Calendar",increaseValue:"Increase value",decreaseValue:"Decrease value",navMonth:["Previous month","Next month"],navYear:["Previous year","Next year"],navDecade:["Previous decade","Next decade"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Hours: %h %A",minuteFormat:"Minutes: %i",removeItem:"Remove item",pages:["First page","Previous page","Next page","Last page"],page:"Page",headermenu:"Header menu",openGroup:"Open column group",closeGroup:"Close column group",closeTab:"Close tab",showTabs:"Show more tabs",resetTreeMap:"Reset tree map",navTreeMap:"Level up",nextTab:"Next tab",prevTab:"Previous tab",multitextSection:"Add section",multitextextraSection:"Remove section",showChart:"Show chart",hideChart:"Hide chart",resizeChart:"Resize chart"},richtext:{underline:"Underline",bold:"Bold",italic:"Italic"},combo:{select:"Select",selectAll:"Select all",unselectAll:"Unselect all"},message:{ok:"OK",cancel:"Cancel"},comments:{send:"Send",confirmMessage:"The comment will be removed. Are you sure?",edit:"Edit",remove:"Remove",placeholder:"Type here..",moreComments:"More comments"}}},St.setLocale("en-US");var yn={track:function(t,e){if(this._init_state(t,e),this._aHandler&&Zt(this._aViewId).detachEvent(this._aHandler),t){this._aViewId=t;var i=Zt(t),s=function(){yn._ignored||i.getValue&&yn.push(t,i.getValue())};i.getActiveId?this._aHandler=i.attachEvent("onViewChange",s):this._aHandler=i.attachEvent("onChange",s)}},_set_state:function(t,e){yn._ignored=1,(t=Zt(t)).callEvent("onBeforeHistoryNav",[e])&&t.setValue&&t.setValue(e),yn._ignored=0},push:function(t,e,i){t=Zt(t);var s="";e&&(s="#!/"+e),P(i)&&(i=t.getValue?t.getValue():e),window.history.pushState({webix:!0,id:t._settings.id,value:i},"",s)},_init_state:function(t,i){ie(window,"popstate",function(t){t.state&&t.state.webix&&yn._set_state(t.state.id,t.state.value)});var s=window.location.hash;e.noanimate=!0,s&&0===s.indexOf("#!/")?yn._set_state(t,s.replace("#!/","")):i&&(yn.push(t,i),yn._set_state(t,i)),e.noanimate=!1,this._init_state=function(){}}},wn={namespace:"x",attribute:"data-",dataTag:"li",_dash:/-([a-z])/g,_after_dash:function(t){return t[1].toUpperCase()},_parse_int:{width:!0,height:!0,gravity:!0,margin:!0,padding:!0,paddingX:!0,paddingY:!0,minWidth:!0,maxWidth:!0,minHeight:!0,maxHeight:!0,headerRowHeight:!0},_parse_bool:{disabled:!0,hidden:!0},_view_has_method:function(t,e){return qt(t,e)},init:function(t,e,i){t=t||document.body;for(var s=[],n=this._get_core_els(t),a=n.html,r=null,o=n.length-1;o>=0;o--)s[o]=n[o];for(var l=0;l<s.length;l++){var h;(h=this._sub_markup(s[l],a)).$scope=i,r=this._initComponent(h,s[l],a,e)}return r},parse:function(t,e){"string"==typeof t&&(t=be[e||"xml"].toObject(t,t));var i=this._get_core_els(t,e);return this._sub_markup(i[0],i.html)},_initComponent:function(t,e,i,s){return s?t.container=s:(t.container=e.parentNode,rt(e)),this._view_has_method(t.view,"setPosition")&&delete t.container,Xt(t)},_get_core_els:function(t){this._full_prefix=this.namespace?this.namespace+":":"",this._full_prefix_top=this._full_prefix+"ui";var e=t.getElementsByTagName(this._full_prefix_top);return!e.length&&t.documentElement&&t.documentElement.tagName==this._full_prefix_top&&(e=[t.documentElement]),!e.length&&this.namespace&&!(e=t.getElementsByTagName("ui")).length&&t.documentElement&&"ui"==t.documentElement.tagName&&(e=[t.documentElement]),e.length||((e=this._get_html_tops(t)).html=!0),e},_get_html_tops:function(t){if(t.getAttribute&&t.getAttribute(this.attribute+"view"))return[t];for(var e=t.querySelectorAll("["+this.attribute+"view]"),i=[],s=0;s<e.length;s++)e[s].parentNode.getAttribute(this.attribute+"view")||i.push(e[s]);return i},_sub_markup:function(t,e,i){var s=!1;if(!i){var n=this._get_name(t,e);if("ui"==n)for(var a=t.childNodes,r=0;r<a.length;r++)if(1==a[r].nodeType)return this._sub_markup(a[r],e);i={view:n},e&&"table"==t.tagName.toLowerCase()&&(i.data=t,i.datatype="htmltable",s=!0)}for(var o="cols"==i.view||"rows"==i.view||this._view_has_method(i.view,"addView"),l=[],h=0,c=!(e||t.style),d=t.firstChild;d;){if(1==d.nodeType){var u=this._get_name(d,e);if("data"==u){h=1;var f=d;d=d.nextSibling,i.data=this._handle_data(f,e);continue}if("config"==u){this._get_config_html(d,i,e);var g=d;d=d.nextSibling,rt(g);continue}if("column"==u){h=1;var p=this._tag_to_json(d,e);p.header=p.header||p.value,p.width=1*p.width||"",i.columns=i.columns||[],i.columns.push(p)}else if(u||o&&e){var _=this._sub_markup(d,e,{view:u});"head"==_.view?i.head=_.rows?_.rows[0]:_.template:"body"==_.view?this._view_has_method(i.view,"addView")?l.push({body:_.rows?_.rows[0]:_.value,header:_.header||""}):i.body=_.rows?1==_.rows.length?_.rows[0]:{rows:_.rows}:_.value:l.push(_)}else if(c){h=1;var v=d.tagName;e&&(v=v.toLowerCase().replace(this._dash,this._after_dash)),i[v]=be.xml.tagToObject(d)}}d=d.nextSibling}if(this._attrs_to_json(t,i,e),l.length)i.stack?i[i.stack]=l:i.subui?i[i.subui]=l[0]:this._view_has_method(i.view,"setValues")?i.elements=l:"rows"==i.view?(i.view="layout",i.rows=l):"cols"==i.view?(i.view="layout",i.cols=l):this._view_has_method(i.view,"setValue")?i.cells=l:this._view_has_method(i.view,"getBody")?i.body=1==l.length?l[0]:{rows:l}:i.rows=l;else if(!s&&!h)if(!e||i.template||i.view&&"template"!=i.view){var m=this._content(t,e);if(m){var b="template";this._view_has_method(i.view,"setValue")&&(b="value"),i[b]=i[b]||m}}else i.view="template",i.content=t;return i},_empty:function(t){var e=t.replace(/\s+/gm,"");return!(e.length>0)},_markup_names:{body:1,head:1,data:1,rows:1,cols:1,cells:1,elements:1,ui:1,column:1,config:1},_get_config_html:function(t,e,i){var s=this._attrs_to_json(t,{});s.name?(e[s.name]=s,delete s.name):s.stack?e[s.stack]=[]:e=s;for(var n=t.childNodes,a=0;a<n.length;a++){var r=null;1==n[a].nodeType&&"config"==n[a].tagName.toLowerCase()&&n[a].attributes.length?r=this._get_config_html(n[a],s,i):1==n[a].nodeType&&"data"==n[a].tagName.toLowerCase()?(r=this._handle_data(n[a],i),s.stack||(s.data=r)):r=n[a].innerHTML,s.stack&&r&&e[s.stack].push(r)}return e},_get_name:function(t,e){if(e)return t.getAttribute(this.attribute+"view")||("config"==t.tagName.toLowerCase()?"config":null);var i=t.tagName.toLowerCase();if(this.namespace){if(0===i.indexOf(this._full_prefix)||t.scopeName==this.namespace)return i.replace(this._full_prefix,"")}else if(Xt[i]||this._markup_names[i])return i;return 0},_handle_data:function(t,e){for(var i=[],s=t.getElementsByTagName(wn.dataTag),n=0;n<s.length;n++){var a=s[n];if(a.parentNode.parentNode.tagName!=wn.dataTag){var r=this._tag_to_json(a,e);a.className&&(r.$css=a.className),i.push(r)}}return rt(t),i},_content:function(t){return t.style?t.innerHTML:t.firstChild&&(t.firstChild.wholeText||t.firstChild.data)||""},_tag_to_json:function(t,e){if(!e)return be.xml.tagToObject(t);var i=this._attrs_to_json(t,{},e);return!i.value&&t.childNodes.length&&(i.value=this._content(t,e)),i},_attrs_to_json:function(t,e,i){for(var s=t.attributes,n=0;n<s.length;n++){var a=s[n].name;if(i){if(0!==a.indexOf(this.attribute))continue;a=a.replace(this.attribute,"").replace(this._dash,this._after_dash)}var r=s[n].value;-1!=r.indexOf("json://")&&(r=JSON.parse(r.replace("json://",""))),this._parse_int[a]?r=parseInt(r,10):this._parse_bool[a]&&(r=r&&"false"!==r&&"0"!=r),e[a]=r}return e}};i.printPPI=96,i.printMargin=.75*i.printPPI;var Sn=i.printMargin,kn={a4:"A4",a3:"A3",letter:"letter"},Cn={page:!0,data:!0},An={portrait:!0,landscape:!0},In={A3:{width:11.7,height:16.5},A4:{width:8.27,height:11.7},letter:{width:8.5,height:11}};function En(t,e){var i=nt("div",{class:"webix_view webix_print_"+t.toLowerCase(),style:"height:0px;visibility:hidden;"},e["doc"+t]);"Header"===t?ot(i,document.body.firstChild):document.body.appendChild(i),e["doc"+t]=i}var Tn={phone:{mask:"+# (###) ###-####",allow:/[0-9]/g},card:{mask:"#### #### #### ####",allow:/[0-9]/g},date:{mask:"####-##-## ##:##",allow:/[0-9]/g}},Mn={set:function(t,e){e=e||{},this._view&&this.exit(),Zt(t)?t=Zt(t):("string"==typeof t&&(t=document.getElementById(t)),t instanceof Element&&(t={$view:t,$html:!0}),_(t,"Incorrect view for fullscreen mode")),this._view=t;var i=t.config;t.setPosition?(this._pos={left:t.config.left,top:t.config.top},t.setPosition(0,0),i.fullscreen=!0,t.resize()):(this._fullscreen=Xt({view:"window",head:this._getHeadConfig(e),fullscreen:!0,body:{rows:[]}}),i&&(this._sizes={width:i.width,minWidth:i.minWidth,maxWidth:i.maxWidth,height:i.height,minHeight:i.minHeight,maxHeight:i.maxHeight}),t.getParentView&&t.getParentView()?(this._parent=t.getParentView(),this._parent.index&&(this._pos={index:this._parent.index(t),active:!!this._parent.getActiveId&&this._parent.getActiveId()==i.id})):(this._parent=t.$view.parentNode,this._pos=nt("div"),this._parent.replaceChild(this._pos,t.$view)),this._fullscreen.getBody().addView(t.$html?{view:"template",content:t.$view,css:"webix_fullscreen_html"}:t),this._fullscreen.show(),this._setSizes(t))},exit:function(){if(this._view){var t=this._view.config;this._view.setPosition?(t.fullscreen=!1,this._view.setPosition(this._pos.left,this._pos.top),this._view.resize()):(this._parent instanceof Element?(this._view._parent_cell=null,this._view._set_inner&&this._view._set_inner(this._view.config),this._parent.replaceChild(this._view.$view,this._pos)):P(this._pos)?(this._view._parent_cell=this._parent,this._parent._replace(this._view)):(this._parent.addView(this._view,this._pos.index),this._pos.active&&this._view.show(!1,!1)),this._setSizes(this._view,this._sizes),this._view.$html||(this._fullscreen.getBody()._cells=[]),this._fullscreen.close()),this._clearValues()}},_clearValues:function(){delete this._parent,delete this._view,delete this._sizes,delete this._pos},_setSizes:function(t,e){t.$html||(e=e||{height:0,minHeight:0,maxHeight:0,width:0,minWidth:0,maxWidth:0},t.define(e),t.resize())},_getHeadConfig:function(t){var e=this;return!1===t.head||"object"==u(t.head)?t.head:{cols:[{template:t.head||"",type:"header",borderless:!0},{view:"icon",icon:"wxi-close",click:function(){e.exit()}}]}}},Pn={denySelect:J,allowSelect:Q,index:tt,createCss:et,addStyle:it,removeStyle:st,create:nt,getValue:at,remove:rt,insertBefore:ot,locate:lt,offset:ht,posRelative:ct,pos:dt,preventEvent:ut,stopEvent:ft,triggerEvent:gt,addCss:pt,removeCss:_t,getTextSize:vt,download:mt,_getClassName:bt,setSelectionRange:xt,getSelectionRange:yt,addMeta:wt},Ln={};function zn(t,e,i,s){var n=Mt.defer(),a="webix_jsonp_"+$(),r=document.createElement("script");r.id=a,r.type="text/javascript";var o=document.getElementsByTagName("head")[0];"function"==typeof e&&(s=i,i=e,e={}),e||(e={}),e.jsonp=a,window[a]=function(){i&&i.apply(s||window,arguments),n.resolve(arguments[0]),window.clearTimeout(Ln[a]),delete Ln[a],r.parentNode.removeChild(r),i=o=s=r=null,delete window[a]},Ln[a]=window.setTimeout(function(){n.reject(),delete window[a]},zn.timer);var l=[];for(var h in e)l.push(h+"="+encodeURIComponent(e[h]));return t+=(-1==t.indexOf("?")?"?":"&")+l.join("&"),r.src=t,o.appendChild(r),n}function Nn(t,e){this._proxy={},this._queue=[],this._url=t,this._key="",e?this._process(e):this._ready=zt(t).then(function(t){return t.text()}).then(T(function(t){return t=t.split("/*api*/")[1],this._process(JSON.parse(t)),this._proxy},this))}function $n(t,e){var i=new Nn(t,e),s=i._getProxy();for(var n in s)Dn[n]=s[n];return s}zn.timer=3e3,Nn.prototype={_process:function(t){if(t.$key&&(this._key=t.$key),t.$vars)for(var e in t.$vars)this._proxy[e]=t.$vars[e];this._parse(t,this._proxy,"")},_parse:function(t,e,i){for(var s in t)if("$key"!==s&&"$vars"!==s){var n=t[s];if("object"==u(n)){var a=e[s]={};this._parse(n,a,i+s+".")}else e[s]=this._proxy_call(this,i+s)}},_call:function(t,e){var i=this._deffer(this,t,e);return this._queue.push(i),this._start_queue(),i},_start_queue:function(){this._timer||(this._timer=setTimeout(T(this._run_queue,this),1))},_run_queue:function(){for(var t=[],e=this._queue,i=0;i<this._queue.length;i++){var s=this._queue[i];s.$sync?(e.splice(i,1),i--):t.push({name:s.$name,args:s.$args})}if(e.length){var n=zt(),a=this._pack(t);Y("onBeforeRemoteCall",[n,a,{}]);var r=n.post(this._url,a).then(function(t){for(var i=t.json(),s=i.data,n=0;n<s.length;n++){var a=s[n],r=s[n]&&s[n].__webix_remote_error;r?(Y("onRemoteError",[r]),e[n].reject(r)):e[n].resolve(a)}},function(t){for(var i=0;i<e.length;i++)e[i].reject(t);throw t});Y("onAfterRemoteCall",[r])}this._queue=[],this._timer=null},_sync:function(){var t=null;this.$sync=!0;var e=[{name:this.$name,args:this.$args}];try{var i=zt(),s=this.$context._pack(e);Y("onBeforeRemoteCall",[i,s,{sync:!0}]);var n=i.sync().post(this.$context._url,s);Y("onAfterRemoteCall",[null]),(t=JSON.parse(n.responseText).data[0]).__webix_remote_error&&(t=null)}catch(t){}return t},_deffer:function(t,e,i){var s=Mt.defer();return s.sync=t._sync,s.$name=e,s.$args=i,s.$context=this,s},_proxy_call:function(t,e){return function(){return t._call(e,[].slice.call(arguments))}},_getProxy:function(){return this._ready||this._proxy},_pack:function(t){return{key:this._key,payload:t}}};var Dn=function(t,e){if("object"===u(t)){var i=document.getElementsByTagName("script");return e=t,$n(t=i[i.length-1].src,e)}return $n(t,e)};function Hn(){var t=!!(window.orientation%180);e.orientation!==t&&(e.orientation=t,Y("onRotate",[t]))}i.touch&&(e.orientation=!!((P(window.orientation)?90:window.orientation)%180),ie(window,"onorientationchange"in window?"orientationchange":"resize",Hn));var Fn={textWaitDelay:500,summColumn:{getValue:function(t){return t.firstChild.innerHTML},setValue:function(){},refresh:function(t,e,i){var s=0;t.mapCells(null,i.columnId,null,1,function(t){t*=1,isNaN(t)||(s+=t)},!0),i.format&&(s=i.format(s)),i.template&&(s=i.template({value:s})),e.firstChild.innerHTML=s},trackCells:!0,render:function(t,e){return e.template&&(e.template=Vt(e.template)),""}},masterCheckbox:{getValue:function(){},setValue:function(){},getHelper:function(t,e){return{check:function(){e.checked=!1,t.onclick()},uncheck:function(){e.checked=!0,t.onclick()},isChecked:function(){return e.checked}}},refresh:function(t,e,i){e.onclick=function(){this.getElementsByTagName("input")[0].checked=i.checked=!i.checked;var e=t.getColumnConfig(i.columnId),s=i.checked?e.checkValue:e.uncheckValue;t.data.each(function(e){e[i.columnId]=s,t.callEvent("onCheck",[e.id,i.columnId,s]),this.callEvent("onStoreUpdated",[e.id,e,"save"])}),t.refresh()}},render:function(t,e){return"<input type='checkbox' "+(e.checked?"checked='1'":"")+">"}},textFilter:{getInputNode:function(t){return t.firstChild?t.firstChild.firstChild:{value:null}},getValue:function(t){return this.getInputNode(t).value},setValue:function(t,e){this.getInputNode(t).value=e},refresh:function(t,e,i){e.component=t._settings.id,t.registerFilter(e,i,this),e._comp_id=t._settings.id,i.value&&this.getValue(e)!=i.value&&this.setValue(e,i.value),e.onclick=ut,ee(e,"keydown",this._on_key_down)},render:function(t,e){return this.init&&this.init(e),e.css="webix_ss_filter","<input "+(e.placeholder?'placeholder="'+e.placeholder+'" ':"")+"type='text'>"},_on_key_down:function(t){var e=this._comp_id;9!=(t.which||t.keyCode)&&(this._filter_timer&&window.clearTimeout(this._filter_timer),this._filter_timer=window.setTimeout(function(){var t=Zt(e);t&&t.filterByAll()},Fn.textWaitDelay))}},selectFilter:{getInputNode:function(t){return t.firstChild?t.firstChild.firstChild:{value:null}},getValue:function(t){return this.getInputNode(t).value},setValue:function(t,e){this.getInputNode(t).value=e},refresh:function(t,e,i){i.compare=i.compare||function(t,e){return t==e},e.component=t._settings.id,t.registerFilter(e,i,this);var s=Fn._get_data(t,i);!1!==i.emptyOption&&s.unshift({id:"",value:i.emptyOption||""});for(var n=document.createElement("select"),a=0;a<s.length;a++){var r=document.createElement("option");r.value=s[a].id,r.text=s[a].value,n.add(r)}e.firstChild.innerHTML="",e.firstChild.appendChild(n),i.value&&this.setValue(e,i.value),e.onclick=ut,n._comp_id=t._settings.id,ee(n,"change",this._on_change)},render:function(t,e){return this.init&&this.init(e),e.css="webix_ss_filter",""},_on_change:function(){Zt(this._comp_id).filterByAll()}},_get_data:function(t,e){var i=e.options;return i?t._collectValues.call(i,"id","value"):t.collectValues(e.columnId,e.collect)}};Fn.serverFilter=t.extend({$server:!0,_on_key_down:function(t){var e=this._comp_id,i=t.which||t.keyCode;9==i||i>=33&&i<=40||(this._filter_timer&&window.clearTimeout(this._filter_timer),this._filter_timer=window.setTimeout(function(){Zt(e).filterByAll()},Fn.textWaitDelay))}},Fn.textFilter),Fn.serverSelectFilter=t.extend({$server:!0,_on_change:function(){var t=this._comp_id;Zt(t).filterByAll()}},Fn.selectFilter),Fn.numberFilter=t.extend({init:function(t){t.prepare=function(e){var i,s=this,n=-1!=e.indexOf("="),a=this.format(e);return""===a?"":(-1!=e.indexOf(">")?i=this._greater:-1!=e.indexOf("<")&&(i=this._lesser),t.compare=i&&n?function(t,e){return s._equal(t,e)||i(t,e)}:i||this._equal,a)}},format:function(t){return t.replace(/[^\-.0-9]/g,"")},_greater:function(t,e){return 1*t>e},_lesser:function(t,e){return""!==t&&1*t<e},_equal:function(t,e){return""!==t&&1*t==e}},Fn.textFilter),Fn.dateFilter=t.extend({format:function(t){if(""===t)return"";var e=new Date;if(-1!=t.indexOf("today"))e=mn.dayStart(e);else if(-1==t.indexOf("now")){var i=t.match(/[0-9]+/g);if(!i||!i.length)return"";i.length<3?(i.reverse(),e=new Date(i[0],(i[1]||1)-1,1)):e=St.dateFormatDate(t.replace(/^[>< =]+/,""))}return e.valueOf()}},Fn.numberFilter),i.scrollSize=i.touch||i.$customScroll?0:17,He(function(){var t=function(){var t=nt("div");t.className="webix_skin_mark",t.style.cssText="position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth,s={200:"flat",210:"compact",230:"contrast",240:"material",250:"mini"}[10*Math.floor(t.offsetHeight/10)];return document.body.removeChild(t),s&&di(s),i.$customScroll?0:e}();i.scrollSize=i.touch?0:t});var Rn=!1;g("_fixHeight",function(){Rn||(it("html, body{ height:100%; }"),document.body.className+=" webix_full_screen",fi.limit(!1),Rn=!0)}),Xt.animate=function(t,e,i){var s=Zt(e);if(s){var n=i||{type:"slide",direction:"left"},a=s._viewobj.cloneNode(!0),r=Xt(t,e);r._viewobj.parentNode.appendChild(a);var o=ci.formLine(r._viewobj,a,n);return n.callback=function(){ci.breakLine(o)},ci(o,n),r}},Xt.animateView=function(t,e,i){if(t=Zt(t)){i=i||{type:"slide",direction:"left"};for(var s=function(t){var e=t._viewobj,i=e.className,s=e.innerHTML;return"<div class='"+i+"' style='width:"+e.offsetWidth+"px;height:"+e.offsetHeight+"px;'>"+s+"</div>"},n=[],a=0;a<t._viewobj.childNodes.length;a++){var r=t._viewobj.childNodes[a],o=r.currentStyle?r.currentStyle.display:getComputedStyle(r,null).display;n.push(o||"")}var l=s(t);"function"==typeof e&&e.call(this);for(var h=s(t),c=t._viewobj.insertBefore(nt("DIV",{class:"webix_view_animate",style:"width:"+t._viewobj.offsetWidth+"px;height:"+t._viewobj.offsetHeight+"px;"},h+l),t._viewobj.firstChild),d=1;d<t._viewobj.childNodes.length;d++)t._viewobj.childNodes[d].style.display="none";var u=ci.formLine(c.childNodes[0],c.childNodes[1],i);return i.callback=function(){if(c){t._viewobj.removeChild(c),c=null;for(var e=0;e<t._viewobj.childNodes.length;e++)t._viewobj.childNodes[e].style.display=n[e]}},ci(u,i),t}},Xt.freeze=ze,Xt.resize=Ne,Xt.each=$e,Xt.zIndex=De,Xt.hasMethod=qt,Xt.datafilter=Fn,Xt.fullScreen=function(){if(i.touch){wt("apple-mobile-web-app-capable","yes"),wt("viewport","initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no");var t=function(){var t=window.innerWidth,i=window.innerHeight;i&&(document.body.style.height=i+"px",document.body.style.width=t+"px"),e._freeze_resize=!1,Ne()},s=function(){e._freeze_resize=!0,L(t,null,[],500)};W("onRotate",s),Hn(),L(s)}},St.locales["de-DE"]={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d.%n.%Y",timeFormat:"%H:%i",longDateFormat:"%j. %F %Y",fullDateFormat:"%j. %F %Y %H:%i",am:null,pm:null,price:"{obj} ",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},calendar:{monthFull:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthShort:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayFull:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayShort:["So","Mo","Di","Mi","Do","Fr","Sa"],hours:"Stunden",minutes:"Minuten",done:"Fertig",clear:"Entfernen",today:"Heute"},dataExport:{page:"Seite",of:"aus"},PDFviewer:{of:"aus",automaticZoom:"Automatisch Zoom",actualSize:"Aktuelles Ausma",pageFit:"Seite Ausma",pageWidth:"Seite Breite",pageHeight:"Seite Hhe",enterPassword:"Passwort eingeben",passwordError:"Falsches passwort"},aria:{calendar:"Kalender",increaseValue:"Wert erhhen",decreaseValue:"Wert verringern",navMonth:["Vorheriger Monat","Nchsten Monat"],navYear:["Vorheriges Jahr","Nchstes Jahr"],navDecade:["Zurck Jahrzehnt","Als nchstes Jahrzehnt"],dateFormat:"%j. %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Stunden: %H",minuteFormat:"Minuten: %i",removeItem:"Element entfernen",pages:["Erste Seite","Vorherige Seite","Folgeseite","Letzte Seite"],page:"Seite",headermenu:"Titelmen",openGroup:"ffnen Spaltengruppe ",closeGroup:"Schlieen Spaltengruppe ",closeTab:"Tab schlieen",showTabs:"Weitere Tabs",resetTreeMap:"Zurck zur ursprnglichen Ansicht",navTreeMap:"Aufleveln",nextTab:"Weiter tab",prevTab:"Zurck tab",multitextSection:"Element hinzufgen",multitextextraSection:"Element entfernen",showChart:"Chart anzeigen",hideChart:"Chart verstecken",resizeChart:"Chart Gre ndern"},richtext:{underline:"Unterstreichen",bold:"Fettgedruckt",italic:"Kursiv"},combo:{select:"Auswhlen",selectAll:"Alles auswhlen",unselectAll:"Alles widerrufen"},message:{ok:"OK",cancel:"Abbrechen"},comments:{send:"Absenden",confirmMessage:"Der Kommentar wird entfernt. Sind Sie sicher?",edit:"Redigieren",remove:"Lschen",placeholder:"Geben Sie hier ein..",moreComments:"Mehr Kommentare"}},St.locales["es-ES"]={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%n/%Y",timeFormat:"%G:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d %F %Y %G:%i",am:null,pm:null,price:"{obj} ",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},calendar:{monthFull:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],dayFull:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],dayShort:["dom","lun","mar","mi","jue","vie","sb"],hours:"Horas",minutes:"Minutos",done:"Listo",clear:"Reinicio",today:"Hoy"},dataExport:{page:"Pgina",of:"de"},PDFviewer:{of:"de",automaticZoom:"Zoom automtico",actualSize:"Tamao real",pageFit:"Tamao de pgina",pageWidth:"Ancho de pgina",pageHeight:"Altura de la pgina",enterPassword:"Introduzca la contrasea",passwordError:"Contrasea incorrecta"},aria:{calendar:"alendario",increaseValue:"Aumentar el valor",decreaseValue:"Disminuye el valor",navMonth:["Mes anterior","Prximo mes"],navYear:["Ao anterior","Prximo ao"],navDecade:["Dcada anterior","Prxima dcada"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Horas: %G",minuteFormat:"Minutos: %i",removeItem:"Retire el elemento",pages:["Primera pgina","Pagina anterior","Siguiente pgina","ltima pgina"],page:"Pgina",headermenu:"Men de ttulos",openGroup:"Grupo de columnas abiertas",closeGroup:"Primer grupo de columnas",closeTab:"Cerrar tab",showTabs:"Mostrar ms tabs",resetTreeMap:"Volver a la vista original",navTreeMap:"Elevar a mismo nivel",nextTab:"Siguiente tab",prevTab:"Tab anterior",multitextSection:"Aadir elemento",multitextextraSection:"Retire el elemento",showChart:"Espectculo chart",hideChart:"Esconder chart",resizeChart:"Cambiar el tamao el chart"},richtext:{underline:"Subrayar",bold:"Negrita",italic:"Itlico"},combo:{select:"Seleccionar",selectAll:"Seleccionar todo",unselectAll:"Deselecciona todo"},message:{ok:"OK",cancel:"Cancelar"},comments:{send:"Enviar",confirmMessage:"El comentario ser eliminado. Ests seguro?",edit:"Corregir",remove:"Suprimir",placeholder:"Escriba aqu..",moreComments:"Ms comentarios"}},St.locales["fr-FR"]={groupDelimiter:" ",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",price:"{obj} ",priceSettings:null,calendar:{monthFull:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],monthShort:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Au","Sep","Oct","Nov","Dc"],dayFull:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],hours:"Heures",minutes:"Minutes",done:"Fini",clear:"Effacer",today:"Aujourd'hui"},dataExport:{page:"Page",of:"sur"},PDFviewer:{of:"sur",automaticZoom:"Zoom automatique",actualSize:"Taille actuelle",pageFit:"Taille de la page",pageWidth:"Largeur de la page",pageHeight:"Hauteur de page",enterPassword:"Entrez le mot de passe",passwordError:"Mauvais mot de passe"},aria:{calendar:"alendrier",increaseValue:"Augmenter la valeur",decreaseValue:"Diminution de la valeur",navMonth:["Le mois prcdent","Le mois prochain"],navYear:["Anne prcdente","L'anne prochaine"],navDecade:["Dcennie prcdente","Suivant dcennie"],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Heures: %H",minuteFormat:"Minutes: %i",removeItem:"Retirer l'lment",pages:["Premire page","Page prcdente","Page suivante","Dernire page"],page:"Page",headermenu:"Menu de titre",openGroup:"Ouvrir groupe de colonnes ",closeGroup:"Fermer groupe de colonnes",closeTab:"Fermer tab",showTabs:"Montrer plus tabs",resetTreeMap:"Revenir  la vue originale",navTreeMap:"Niveau suprieur",nextTab:"Prochain tab",prevTab:"Prcdent tab",multitextSection:"Ajouter l'lment",multitextextraSection:"Retirer l'lment",showChart:"Montrer chart",hideChart:"Cacher chart",resizeChart:"Redimensionner chart"},richtext:{underline:"Souligner",bold:"Gras",italic:"Italique"},combo:{select:"Slectionner",selectAll:"Tout slectionner",unselectAll:"Tout dselectionner"},message:{ok:"OK",cancel:"Annuler"},comments:{send:"Envoyer",confirmMessage:"Le commentaire sera supprim. tes-vous sr?",edit:"Modifier",remove:"Effacer",placeholder:"crivez ici..",moreComments:"Plus de commentaires"}},St.locales["it-IT"]={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%j %F %Y",fullDateFormat:"%j %F %Y %H:%i",am:null,pm:null,price:" {obj}",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},calendar:{monthFull:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],monthShort:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],dayFull:["domenica","luned","marted","mercoled","gioved","venerd","sabato"],dayShort:["dom","lun","mar","mer","gio","ven","sab"],hours:"Orario",minutes:"Minuti",done:"Pronto",clear:"Pulisci",today:"Oggi"},dataExport:{page:"Pagina",of:"di"},PDFviewer:{of:"di",automaticZoom:"Zoom automatico",actualSize:"Dimensione reale",pageFit:"Dimensioni della pagina",pageWidth:"Larghezza della pagina",pageHeight:"Altezza della pagina",enterPassword:"Inserisci la password",passwordError:"Password errata"},aria:{calendar:"Calendario",increaseValue:"Aumenta il valore",decreaseValue:"Riduci il valore",navMonth:["Il mese scorso","Il prossimo mese"],navYear:["L'anno scorso","L'anno prossimo"],navDecade:["Decennio precedente","Prossimo decennio"],dateFormat:"%j %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Orario: %H",minuteFormat:"Minuti: %i",removeItem:"Rimuovere l'elemento",pages:["Prima pagina","Pagina precedente","Pagina successiva","Ultima pagina"],page:"Pagina",headermenu:"Menu del titolo",openGroup:"Aperto gruppo di colonne",closeGroup:"Chiudi gruppo di colonne",closeTab:"Chiudi tab",showTabs:"Mostra pi tabs",resetTreeMap:"Tornare alla vista originale",navTreeMap:"Livello superiore",nextTab:"Tab successivo",prevTab:"Tab precedente",multitextSection:"Aggiungi elemento",multitextextraSection:"Rimuovere l'elemento",showChart:"Mostrare grafico",hideChart:"Nascondere grafico",resizeChart:"Ridimensionare grafico"},richtext:{underline:"Sottolineare",bold:"Grassetto",italic:"Corsivo"},combo:{select:"Selezionare",selectAll:"Seleziona tutto",unselectAll:"Deseleziona tutto"},message:{ok:"OK",cancel:"Annullare"},comments:{send:"Inviare",confirmMessage:"Il commento verr rimosso. Sei sicuro?",edit:"Correggere",remove:"Elimina",placeholder:"Digitare qui..",moreComments:"Altri commenti"}},St.locales["ja-JP"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%Y.%m.%d",timeFormat:"%H:%i",longDateFormat:"%Y%m%d",fullDateFormat:"%Y.%m.%d %H:%i",price:"{obj}",priceSettings:{groupSize:3,groupDelimiter:",",decimalDelimiter:"",decimalSize:0},calendar:{monthFull:["1","2","3","4","5","6","7","8","9","10","11","12"],monthShort:["1","2","3","4","5","6","7","8","9","10","11","12"],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"",clear:"",today:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:"",actualSize:"",pageFit:"",pageWidth:"",pageHeight:"",enterPassword:"",passwordError:""},aria:{calendar:"",increaseValue:"",decreaseValue:"",navMonth:["",""],navYear:["",""],navDecade:["","10"],dateFormat:"%Y%m%d",monthFormat:"%Y%m",yearFormat:"%Y",hourFormat:": %H",minuteFormat:": %i",removeItem:"",pages:["","","",""],page:"",headermenu:"",openGroup:"",closeGroup:"",closeTab:"",showTabs:"",resetTreeMap:"",navTreeMap:"",nextTab:"",prevTab:"",multitextSection:"",multitextextraSection:"",showChart:"",hideChart:"",resizeChart:""},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:"",unselectAll:""},message:{ok:"OK",cancel:""},comments:{send:"",confirmMessage:". ",edit:"",remove:"",placeholder:"..",moreComments:""}},St.locales["pt-BR"]={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%G:%i",longDateFormat:"%d de %F de %Y",fullDateFormat:"%d de %F de %Y %G:%i",am:null,pm:null,price:"R$ {obj}",priceSettings:{groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2},fileSize:["b","Kb","Mb","Gb","Tb","Pb","Eb"],calendar:{monthFull:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayFull:["Domingo","Segunda-Feira","Tera-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sbado"],dayShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],hours:"Horas",minutes:"Minutos",done:"Feito",clear:"Limpar",today:"Hoje"},dataExport:{page:"Pgina",of:"de"},PDFviewer:{of:"de",automaticZoom:"Zoom automtico",actualSize:"Tamanho atual",pageFit:"Tamanho da pgina",pageWidth:"Largura da pgina",pageHeight:"Altura da pgina",enterPassword:"Digite a senha",passwordError:"Senha incorreta"},aria:{calendar:"Calendrio",increaseValue:"Aumentar o valor",decreaseValue:"Diminuir o valor",navMonth:["Ms anterior","Prximo ms"],navYear:["Ano anterior","Prximo ano"],navDecade:["Dcada anterior","Prxima dcada"],dateFormat:"%d de %F de %Y",monthFormat:"%F de %Y",yearFormat:"%Y",hourFormat:"Horas: %G",minuteFormat:"Minutos: %i",removeItem:"Remover elemento",pages:["Primeira pgina","Pgina anterior","Prxima pgina","ltima pgina"],page:"Pgina",headermenu:"Menu de ttulos",openGroup:"Grupo coluna aberta",closeGroup:"Fechar grupo de colunas",closeTab:"Fechar tab",showTabs:"Mostre mais tabs",resetTreeMap:"oltar  vista original",navTreeMap:"Upar",nextTab:"Prximo tab",prevTab:"Anterior tab",multitextSection:"Adicionar elemento",multitextextraSection:"Remover elemento",showChart:"Exposio chart",hideChart:"Esconder chart",resizeChart:"Redimensionar chart"},richtext:{underline:"Sublinhado",bold:"Negrito",italic:"itlico"},combo:{select:"Selecionar",selectAll:"Selecionar tudo",unselectAll:"Desmarque todos"},message:{ok:"OK",cancel:"Cancelar"},comments:{send:"Enviar",confirmMessage:"Comentrio ser removido. Voc tem certeza?",edit:"Editar",remove:"Excluir",placeholder:"Digite aqui..",moreComments:"Mais comentrios"}},St.locales["zh-CN"]={groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2,dateFormat:"%Y/%m/%j",timeFormat:"%G:%i",longDateFormat:"%Y''%m''%j''",fullDateFormat:"%Y''%m''%j'' %G:%i",am:["",""],pm:["",""],price:"{obj}",priceSettings:{groupDelimiter:",",groupSize:3,decimalDelimiter:".",decimalSize:2},calendar:{monthFull:["","","","","","","","","","","",""],monthShort:["","","","","","","","","","","",""],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"",clear:"",today:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:"",actualSize:"",pageFit:"",pageWidth:"",pageHeight:"",enterPassword:"",passwordError:""},aria:{calendar:"",increaseValue:"",decreaseValue:"",navMonth:["",""],navYear:["",""],navDecade:["",""],dateFormat:"%Y''%m''%j''",monthFormat:"%Y''%m'",yearFormat:"%Y'",hourFormat:": %G",minuteFormat:": %i",removeItem:"",pages:["","","",""],page:"",headermenu:"",openGroup:"",closeGroup:"",closeTab:"",showTabs:"",resetTreeMap:"",navTreeMap:"",nextTab:"",prevTab:"",multitextSection:"",multitextextraSection:"",showChart:"",hideChart:"",resizeChart:""},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:"",unselectAll:""},message:{ok:"",cancel:""},comments:{send:"",confirmMessage:". ?",edit:"",remove:"",placeholder:"..",moreComments:""}},St.locales["ru-RU"]={groupDelimiter:" ",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d.%m.%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",price:"{obj} .",priceSettings:null,calendar:{monthFull:["","","","","Ma","","","","","O","",""],monthShort:["","","Ma","A","Ma","","","A","","","",""],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"oo",clear:"",today:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:" ",actualSize:" ",pageFit:" ",pageWidth:" ",pageHeight:" ",enterPassword:" ",passwordError:" "},aria:{calendar:"",increaseValue:" ",decreaseValue:" ",navMonth:[" "," "],navYear:[" "," "],navDecade:["  ","  "],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:": %H",minuteFormat:": %i",removeItem:" ",pages:[" "," "," "," "],page:"",headermenu:"  ",openGroup:"  ",closeGroup:"  ",closeTab:" ",showTabs:"  ",resetTreeMap:"   ",navTreeMap:"   ",nextTab:" ",prevTab:" ",multitextSection:" ",multitextextraSection:" ",showChart:" ",hideChart:" ",resizeChart:"  "},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:" ",unselectAll:" "},message:{ok:"OK",cancel:""},comments:{send:"",confirmMessage:"  .  ?",edit:"",remove:"",placeholder:" ..",moreComments:" "}},St.locales["be-BY"]={groupDelimiter:" ",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d.%m.%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",price:"{obj} .",priceSettings:{groupSize:3,groupDelimiter:" ",decimalDelimiter:"",decimalSize:0},calendar:{monthFull:["","","","","","","","","","","",""],monthShort:["","","","","","","","","","","",""],dayFull:["","","","","","",""],dayShort:["","","","","","",""],hours:"",minutes:"",done:"",today:"C",clear:""},dataExport:{page:"",of:""},PDFviewer:{of:"",automaticZoom:" ",actualSize:" ",pageFit:" ",pageWidth:" ",pageHeight:" ",enterPassword:" ",passwordError:" "},aria:{calendar:"",increaseValue:" ",decreaseValue:" ",navMonth:[" "," "],navYear:[" "," "],navDecade:["  ","  "],dateFormat:"%d %F %Y",monthFormat:"%F %Y",yearFormat:"%Y",hourFormat:"Hours: %h",minuteFormat:": %i",removeItem:" ",pages:[" "," "," "," "],page:"",headermenu:" ",openGroup:"  ",closeGroup:"  ",closeTab:" ",showTabs:"  ",resetTreeMap:"   ",navTreeMap:"   ",nextTab:" ",prevTab:" ",multitextSection:" ",multitextextraSection:" ",showChart:" ",hideChart:" ",resizeChart:"  "},richtext:{underline:"",bold:"",italic:""},combo:{select:"",selectAll:" ",unselectAll:" "},message:{ok:"",cancel:""},comments:{send:"",confirmMessage:"  .  ?",edit:"",remove:"",placeholder:" ..",moreComments:" "}};var jn={name:"baselayout",restore:function(t,e,i){var s=this._restore(E(t),e);if(i)return s;Xt(s.cols||s.rows,this)},_restore:function(t,e){if(!t.$layout)return e.call(this,t);for(var i=t.cols||t.rows,s=0;s<i.length;s++)i[s]=this._restore(i[s],e);return t},serialize:function(t){for(var e=[],i=this.getChildViews(),s=0;s<i.length;s++){var n=i[s];if(n.movePortlet){var a=n.getChildViews();e.push(t.call(this,a[a.length-1]))}else n.serialize?e.push(n.serialize(t,!0)):e.push(t.call(this,n))}var r={$layout:!0,type:this.config.type};return this.config.rows?r.rows=e:r.cols=e,r},$init:function(e){this.$ready.push(this._parse_cells),this._dataobj=this._contentobj,this._layout_sizes=[],this._responsive=[],this._padding={top:0,left:0,right:0,bottom:0},e.$topView&&(e.borderless=!0,e._inner={top:!0,left:!0,bottom:!0,right:!0}),e.isolate&&t.extend(this,Ki)},rows_setter:function(t){return this._vertical_orientation=1,this._collection=t,!0},cols_setter:function(t){return this._vertical_orientation=0,this.$view.style.whiteSpace="nowrap",this._collection=t,!0},_remove:function(t){var e=O.find.call(this._cells,t);this._beforeRemoveView&&this._beforeRemoveView(e),O.removeAt.call(this._cells,e),this.resizeChildren(!0)},_replace:function(t,e){if(P(e)){for(var i=0;i<this._cells.length;i++)this._cells[i].destructor();this._collection=t,this._parse_cells()}else{var s;"number"==typeof e?((e<0||e>this._cells.length)&&(e=this._cells.length),O.insertAt.call(this._cells,t,e),t._settings.hidden||this._insertBeforeView(t,this._cells[e])):(s=Zt(e),_(-1!=(e=O.find.call(this._cells,s)),"Attempt to replace the non-existing view"),t._settings.hidden||this._insertBeforeView(t,s),s.destructor(),this._cells[e]=t),this._vertical_orientation||this._fix_vertical_layout(t)}this.resizeChildren(!0);var n=this.elements?this:this.getFormView();n&&n._recollect_elements(),Y("onReconstruct",[this])},_fix_vertical_layout:function(t){t._viewobj.style.display="inline-block",t._viewobj.style.verticalAlign="top"},addView:function(t,i){P(i)&&(i=this._cells.length);var s=this.$$?this:this.getTopParentView();e._parent_cell=this;var n=s&&s.ui?s.ui(t,this,i):Xt(t,this,i);return e._parent_cell=null,n._settings.id},removeView:function(t){var e;e="object"!=u(t)?Zt(t)||(this.$$?this.$$(t):null):t;var i=O.find.call(this._cells,e);if(i>=0){this._beforeRemoveView&&this._beforeRemoveView(i,e);var s=this.elements?this:this.getFormView();this._cells.splice(i,1),s&&Xt.each(e,function(t){t.name&&delete s.getCleanValues()[t.config.name]},s,!0),e.destructor(),this.resizeChildren(!0),s&&s._recollect_elements()}else _(!1,"Attemp to remove not existing view: "+t);Y("onReconstruct",[this])},reconstruct:function(){this._hiddencells=0,this._replace(this._collection)},_hide:function(t,i,s){t._settings.hidden||(t._settings.hidden=!0,rt(t._viewobj),this._hiddencells++,s||e._ui_creation||this.resizeChildren(!0))},_signal_hidden_cells:function(t){t.callEvent&&t.callEvent("onViewShow",[])},resizeChildren:function(){if(!e._freeze_resize&&this._layout_sizes){var t=this.getParentView();if(t)return t.resizeChildren?t.resizeChildren():t.resize();var i,s,n,a,r=this.$getSize(0,0);if(n=i=this._layout_sizes[0]||0,a=s=this._layout_sizes[1]||0,(r[1]>=1e5||r[3]>=1e5)&&this._viewobj.parentNode&&(n=i=Math.max(r[0],this._settings.width||this._viewobj.parentNode.offsetWidth||i||0),a=s=Math.max(r[2],this._settings.height||this._viewobj.parentNode.offsetHeight||s||0)),t)this._set_child_size(i,s);else{r[0]>i&&(n=r[0]),r[2]>s&&(a=r[2]);var o=this._viewobj.parentNode==document.body&&!this.setPosition;!o&&i>r[1]&&(n=r[1]),!o&&s>r[3]&&(a=r[3]),this.$setSize(n,a)}e._responsive_exception&&(e._responsive_exception=!1,this.resizeChildren()),Y("onResize",[])}},getChildViews:function(){return this._cells},index:function(t){t._settings&&(t=t._settings.id);for(var e=0;e<this._cells.length;e++)if(this._cells[e]._settings.id==t)return e;return-1},_insertBeforeView:function(t,e){if(e)if(e._settings.hidden||t===e){for(var i=this.index(e)+1;this._cells[i]&&this._cells[i]._settings.hidden;)i++;e=this._cells[i]?this._cells[i]._viewobj:null}else e=e._viewobj;ot(t._viewobj,e,this._dataobj||this._viewobj)},_show:function(t,e,i){t._settings.hidden&&(this._insertBeforeView(t,t),t._settings.hidden=!1,this._hiddencells--,i||(this.resizeChildren(!0),t.refresh&&t.refresh()),t.callEvent&&(t.callEvent("onViewShow",[]),Xt.each(t,this._signal_hidden_cells)))},showBatch:function(t,e){var i=void 0!==e;if(e=!1!==e,i)this._settings.visibleBatch="";else{if(this._settings.visibleBatch==t)return;this._settings.visibleBatch=t}for(var s=[],n=0;n<this._cells.length;n++)this._cells[n]._settings.batch||this._cells[n]._settings.hidden?this._cells[n]._settings.batch==t?e?s.push(this._cells[n]):this._hide(this._cells[n],null,!0):i||this._hide(this._cells[n],null,!0):s.push(this._cells[n]);for(var a=0;a<s.length;a++)this._show(s[a],null,!0),s[a]._render_hidden_views();this.resizeChildren(!0)},_parse_cells:function(t){this._cells=[],_(t,this.name+" was incorrectly defined. <br><br> You have missed rows|cols|cells|elements collection");for(var i=0;i<t.length;i++)e._parent_cell=this,t[i]._inner||(t[i].borderless=!0),this._cells[i]=Xt._view(t[i],this),this._vertical_orientation||this._fix_vertical_layout(this._cells[i]),this._settings.visibleBatch&&this._settings.visibleBatch!=this._cells[i]._settings.batch&&this._cells[i]._settings.batch&&(this._cells[i]._settings.hidden=!0,this._hiddencells++),this._cells[i]._settings.hidden||((this._dataobj||this._contentobj).appendChild(this._cells[i]._viewobj),this._cells[i].$nospace&&this._hiddencells++);this._parse_cells_ext_end&&this._parse_cells_ext_end(t)},_fix_container_borders:function(t,e){e.top&&(t.borderTopWidth="0px"),e.left&&(t.borderLeftWidth="0px"),e.right&&(t.borderRightWidth="0px"),e.bottom&&(t.borderBottomWidth="0px")},_bubble_size:function(t,e,i){if(this._vertical_orientation!=i)for(var s=0;s<this._cells.length;s++)this._cells[s]._settings[t]=e,this._cells[s]._bubble_size&&this._cells[s]._bubble_size(t,e,i)},$getSize:function(t,e){y(this,!0);var i=0,s=1e5,n=1e5,a=0;this._vertical_orientation?n=0:s=0;var r=0,o=0,l=0;this._sizes=[];for(var h=0;h<this._cells.length;h++)if(!this._cells[h]._settings.hidden){var c=this._sizes[h]=this._cells[h].$getSize(0,0);this._cells[h].$nospace?o++:this._vertical_orientation?(c[0]>i&&(i=c[0]),c[1]<s&&(s=c[1]),a+=c[2],n+=c[3],c[2]==c[3]&&-1!=c[2]?(r+=c[2],o++):l+=c[4]):(c[2]>a&&(a=c[2]),c[3]<n&&(n=c[3]),i+=c[0],s+=c[1],c[0]==c[1]&&-1!=c[0]?(r+=c[0],o++):l+=c[4])}a>n&&(n=a),i>s&&(s=i),this._master_size=[r,this._cells.length-o,l],this._desired_size=[i+t,a+e];var d=ti.api.$getSize.call(this,0,0);return d[1]>=1e5&&(d[1]=0),d[3]>=1e5&&(d[3]=0),d[0]=(d[0]||i)+t,d[1]=Math.max(d[0],(d[1]||s)+t),d[2]=(d[2]||a)+e,d[3]=Math.max(d[2],(d[3]||n)+e),w(0,d),!this._vertical_orientation&&this._settings.responsive&&(d[0]=0),d},$setSize:function(t,e){this._layout_sizes=[t,e],y(this),ti.api.$setSize.call(this,t,e),this._set_child_size(t,e),w(0,[t,e])},_set_child_size_a:function(t,e,i){e=t[e],i=t[i];var s=e;if(e!=i){var n=this._set_size_delta*t[4]/this._set_size_gravity;if(n<e)s=e,this._set_size_gravity-=t[4],this._set_size_delta-=s;else{if(!(n>i))return-1;s=i,this._set_size_gravity-=t[4],this._set_size_delta-=s}}return s},_responsive_hide:function(t,e){var i=Zt(e);"hide"!==i&&i?(i||(i=Xt({view:"popup",body:[{}]})),t._responsive_width=t._settings.width,t._responsive_height=t._settings.height,t._responsive_marker=i._settings.id,t._settings.width=0,t._settings.height||(t._settings.autoheight=!0),Xt(t,i,this._responsive.length)):(t.hide(),t._responsive_marker="hide"),this._responsive.push(t)},_responsive_show:function(t){var e=t._responsive_marker;if(t._responsive_marker=0,"hide"!==e&&e){t._settings.width=t._responsive_width,t._settings.height=t._responsive_height,delete t._settings.autoheight;for(var i=0;this._cells[i]&&!1===this._cells[i]._settings.responsiveCell;)i++;Xt(t,this,i)}else t.show();this._responsive.pop()},_responsive_cells:function(t){if(e._responsive_tinkery=!0,t+this._padding.left+this._padding.right+this._margin*(this._cells.length-1)<this._desired_size[0])for(var i=this._cells.length-1,s=0;s<i;s++){var n=this._cells[s];if(!n._responsive_marker){if(!1!==n._settings.responsiveCell){this._responsive_hide(n,this._settings.responsive),Y("onResponsiveHide",[n._settings.id]),e._responsive_exception=!0;break}i=this._cells.length}}else if(this._responsive.length){var a=this._responsive[this._responsive.length-1],r="hide"==a._responsive_marker?0:a._responsive_width,o=a.$getSize(r,0);o[0]+this._desired_size[0]+this._margin+20<=t&&(this._responsive_show(a),Y("onResponsiveShow",[a._settings.id]),e._responsive_exception=!0)}e._responsive_tinkery=!1},_set_child_size:function(t,i){e._child_sizing_active=(e._child_sizing_active||0)+1,!this._vertical_orientation&&this._settings.responsive&&this._responsive_cells(t,i),this._set_size_delta=(this._vertical_orientation?i:t)-this._master_size[0],this._set_size_gravity=this._master_size[2];for(var s=t,n=i,a=[],r=0;r<this._cells.length;r++)if(!this._cells[r]._settings.hidden&&this._sizes[r]){var o=this._sizes[r];if(this._vertical_orientation){if((n=this._set_child_size_a(o,2,3))<0){a.push({oldIndex:r,view:this._cells[r]});continue}}else if((s=this._set_child_size_a(o,0,1))<0){a.push({oldIndex:r,view:this._cells[r]});continue}this._cells[r].$setSize(s,n)}for(var l=0;l<a.length;l++){var h=a[l].oldIndex,c=this._sizes[h],d=Math.round(this._set_size_delta*c[4]/this._set_size_gravity);this._set_size_delta-=d,this._set_size_gravity-=c[4],this._vertical_orientation?n=d:s=d,a[l].view.$setSize(s,n)}e._child_sizing_active-=1},_next:function(t,e){var i=this.index(t);return-1==i?null:this._cells[i+e]},_first:function(){return this._cells[0]}},On=t.protoUI(jn,B,ti.view),Bn={api:jn,view:On},Vn=(t.protoUI({name:"spacer",defaults:{borderless:!0},$init:function(){this._viewobj.className+=" webix_spacer"}},si.view),{name:"template",$init:function(e){var i=this._template_types[e.type];i&&(i.css&&e.css&&(this._viewobj.className+=" "+i.css),t.extend(e,i),e.borderless&&(delete e._inner,this._set_inner(e))),this._dataobj==this._viewobj?(this._dataobj=nt("DIV"),this._dataobj.className=" webix_template",this._viewobj.appendChild(this._dataobj)):this._dataobj.className+=" webix_template",this.attachEvent("onAfterRender",this._correct_width_scroll)},setValues:function(e,i){this.data=i?t.extend(this.data,e,!0):e,this.render()},getValues:function(){return this.data},$skin:function(){this._template_types.header.height=ni.barHeight-2*ni.borderWidth,this._template_types.section.height=ni.barHeight},_template_types:{header:{css:"webix_header"},section:{css:"webix_section",borderless:!0},clean:{css:"webix_clean",borderless:!0}},onClick_setter:function(e){return this.on_click=t.extend(this.on_click||{},e,!0),this._onClick||t.extend(this,Qi),e},defaults:{template:Vt.empty},_render_me:function(){this._not_render_me=!1,this._probably_render_me(),this.resize()},_probably_render_me:function(){this._not_render_me||(this._not_render_me=!0,this.render())},src_setter:function(t){return this._not_render_me=!0,this.callEvent("onBeforeLoad",[])?(zt(t,T(function(t){this._settings.template=Vt(t),this._render_me(),this.callEvent("onAfterLoad",[])},this)),t):""},_correct_width_scroll:function(){this._settings.autoheight&&(this._last_size=null,this.resize()),this._settings.scroll&&-1!=this._settings.scroll.indexOf("x")&&(this._dataobj.style.width=this._dataobj.scrollWidth+"px")},content_setter:function(t){t&&(this._not_render_me=!0,this.render=function(){},this._dataobj.appendChild(D(t)),L(this._correct_width_scroll,this))},refresh:function(){this.render()},setHTML:function(t){this._settings.template=function(){return t},this.refresh()},setContent:function(t){this._dataobj.innerHTML="",this.content_setter(t)},$setSize:function(t,e){if(si.api.$setSize.call(this,t,e)){if(this._probably_render_me(),this._settings.autoheight){var i=this.getTopParentView();clearTimeout(i._template_resize_timer),i._template_resize_timer=L(this.resize,this)}return!0}},$getSize:function(t,e){return!this._settings.autoheight||this._settings.type&&"clean"!=this._settings.type||(this._settings.height=this._get_auto_height()),si.api.$getSize.call(this,t,e)},_get_auto_height:function(){var t,e=ni.layoutPadding.space;return this._probably_render_me(),this.isVisible()?(this._dataobj.style.height="auto",t=this._dataobj.scrollHeight,this._dataobj.style.height=""):t=vt(this._toHTML(this.data)||this._dataobj.innerHTML,"webix_template",(this.$width||(this.getParentView()?this.getParentView().$width:0))-e).height,t},_one_time_scroll:!0}),Yn=t.protoUI(Vn,as,li,Ae,Ie,B,si.view),Wn={api:Vn,view:Yn},Xn={name:"scrollview",defaults:{scroll:"y",scrollSpeed:"0ms"},$init:function(){this._viewobj.className+=" webix_scrollview"},body_setter:function(t){t.borderless=!0,e._parent_cell=this,this._body_cell=Xt._view(t),this._dataobj.appendChild(this._body_cell._viewobj)},getChildViews:function(){return[this._body_cell]},getBody:function(){return this._body_cell},resizeChildren:function(){this._body_cell&&(this._desired_size=this._body_cell.$getSize(0,0),this._resizeChildren(),Y("onResize",[]))},_resizeChildren:function(){var t=Math.max(this._content_width,this._desired_size[0]),s=Math.max(this._content_height,this._desired_size[2]);if(this._body_cell.$setSize(t,s),this._dataobj.style.width=this._body_cell._content_width+"px",this._dataobj.style.height=this._body_cell._content_height+"px",i.touch){var n=this.getScrollState(),a=this._body_cell._content_height-this._content_height;a<n.y&&this.scrollTo(null,a)}e._responsive_exception&&(e._responsive_exception=!1,this._desired_size=this._body_cell.$getSize(0,0),this._resizeChildren())},$getSize:function(t,e){var s=this._desired_size=this._body_cell.$getSize(0,0),n=si.api.$getSize.call(this,t,e),a=this._native_scroll||i.scrollSize;return"x"==this._settings.scroll?(n[2]=Math.max(n[2],s[2])+a,n[3]=Math.min(n[3],s[3])+a):"y"==this._settings.scroll&&(n[0]=Math.max(n[0],s[0])+a,n[1]=Math.min(n[1],s[1])+a),n},$setSize:function(t,s){var n=i.scrollSize;i.scrollSize=this._native_scroll||n,(si.api.$setSize.call(this,t,s)||e._force_resize)&&this._resizeChildren(),i.scrollSize=n},scroll_setter:function(t){var e=i.$customScroll;return"string"==typeof t&&0===t.indexOf("native-")&&(this._native_scroll=17,t=t.replace("native-"),i.$customScroll=!1),t=as.scroll_setter.call(this,t),i.$customScroll=e,t},_replace:function(t){this._body_cell.destructor(),this._body_cell=t,this._bodyobj.appendChild(this._body_cell._viewobj),this.resize()},showView:function(t){var e=Zt(t).$view.offsetTop-Zt(t).$view.parentNode.offsetTop;this.scrollTo(0,e)}},Un=(t.protoUI(Xn,as,B,si.view),t.protoUI({name:"iframe",$init:function(){this._dataobj=this._contentobj,this._contentobj.innerHTML="<iframe style='width:100%; height:100%' frameborder='0' onload='var t = $$(this.parentNode.getAttribute(\"view_id\")); if (t) t.callEvent(\"onAfterLoad\",[]);' src='about:blank'></iframe>"},load:function(t){this.src_setter(t)},src_setter:function(t){return this.callEvent("onBeforeLoad",[])?(this.getIframe().src=t,t):""},getIframe:function(){return this._contentobj.getElementsByTagName("iframe")[0]},getWindow:function(){return this.getIframe().contentWindow}},si.view,B),{name:"layout",$init:function(){this._hiddencells=0},defaults:{type:"line"},_parse_cells:function(){this._parse_cells_ext&&(e=this._parse_cells_ext(e)),this._parse_once||(this._viewobj.className+=" webix_layout_"+(this._settings.type||""),this._parse_once=1),void 0!==this._settings.margin&&(this._margin=this._settings.margin),void 0!==this._settings.padding&&"object"!==u(this._settings.padding)&&(this._padding.left=this._padding.right=this._padding.top=this._padding.bottom=this._settings.padding),void 0!==this._settings.paddingX&&(this._padding.left=this._padding.right=this._settings.paddingX),void 0!==this._settings.paddingY&&(this._padding.top=this._padding.bottom=this._settings.paddingY),"object"===u(this._settings.padding)&&t.extend(this._padding,this._settings.padding,!0),(this._padding.left||this._padding.right||this._padding.top||this._padding.bottom)&&(this._padding.defined=!0),this._hasBorders()&&!this._settings.borderless&&(this._contentobj.style.borderWidth="1px",this._render_borders=!0);var e=this._collection;this._settings.borderless&&(this._settings._inner={top:!0,left:!0,right:!0,bottom:!0}),this._beforeResetBorders(e),Bn.api._parse_cells.call(this,e),this._afterResetBorders(e)},$getSize:function(t,e){t=t||0,e=e||0;var i=this._margin*(this._cells.length-this._hiddencells-1);if(this._render_borders||this._hasBorders()){var s=this._settings._inner;s&&(t+=(s.left?0:1)+(s.right?0:1),e+=(s.top?0:1)+(s.bottom?0:1))}return this._settings.height||(e+=this._padding.top+this._padding.bottom+(this._vertical_orientation?i:0)),this._settings.width||(t+=this._padding.left+this._padding.right+(this._vertical_orientation?0:i)),Bn.api.$getSize.call(this,t,e)},$setSize:function(t,e){this._layout_sizes=[t,e],y(this),this._hasBorders()||this._render_borders?si.api.$setSize.call(this,t,e):ti.api.$setSize.call(this,t,e),e=this._content_height,t=this._content_width;var i=this._settings;i.scroll&&(e=Math.max(e,this._desired_size[1]),t=Math.max(t,this._desired_size[0])),this._set_child_size(t,e),w(0,[t,e])},_set_child_size:function(t,e){var i=this._margin*(this._cells.length-this._hiddencells-1);return e-=this._padding.top+this._padding.bottom,t-=this._padding.left+this._padding.right,this._vertical_orientation?e-=i:t-=i,Bn.api._set_child_size.call(this,t,e)},resizeChildren:function(t){if(t){this._last_size=null;for(var i=[],s=0;s<this._cells.length;s++){var n=this._cells[s];i[s]=n._settings;var a=n._layout_sizes&&!n._render_borders||n._settings.borderless?"0px":"1px";n._viewobj.style.borderTopWidth=n._viewobj.style.borderBottomWidth=n._viewobj.style.borderLeftWidth=n._viewobj.style.borderRightWidth=a}this._beforeResetBorders(i);for(var r=0;r<i.length;r++)i[r].borderless&&this._cells[r]._set_inner&&this._cells[r]._set_inner(i[r]);this._afterResetBorders(this._cells)}e._responsive_tinkery||Bn.api.resizeChildren.call(this)},_hasBorders:function(){return this._padding.defined&&this._margin>0&&!this._cleanlayout},_beforeResetBorders:function(t){if(!this._hasBorders()||this._settings.borderless&&"space"!=this._settings.type){for(var e=0;e<t.length;e++)t[e]._inner=I(this._settings._inner);var i=!1;this._cleanlayout&&(i=!0);var s=t.length;if(this._vertical_orientation){for(var n=1;n<s-1;n++)t[n]._inner.top=t[n]._inner.bottom=i;if(s>1){for("head"!=this._settings.type&&(t[0]._inner.bottom=i);t[s-1].hidden&&s>1;)s--;s>0&&(t[s-1]._inner.top=i)}}else{for(var a=1;a<s-1;a++)t[a]._inner.left=t[a]._inner.right=i;if(s>1){for("head"!=this._settings.type&&(t[0]._inner.right=i),t[s-1]._inner.left=i;s>1&&t[s-1].hidden;)s--;s>0&&(t[s-1]._inner.left=i)}}}else for(var r=0;r<t.length;r++)t[r]._inner&&t[r].borderless||(t[r]._inner={top:!1,left:!1,right:!1,bottom:!1})},_afterResetBorders:function(t){for(var e=0,i=0;i<t.length;i++){var s=this._cells[i],n=s._settings._inner;if(s._settings.hidden&&this._cells[i+1]){var a=this._cells[i+1]._settings._inner;n.top||(a.top=!1),n.left||(a.left=!1),i==e&&e++}this._fix_container_borders(s._viewobj.style,s._settings._inner)}for(var r=this._vertical_orientation?"marginLeft":"marginTop",o=this._vertical_orientation?"marginTop":"marginLeft",l=this._vertical_orientation?this._padding.left:this._padding.top,h=this._vertical_orientation?this._padding.top:this._padding.left,c=0;c<t.length;c++)this._cells[c]._viewobj.style[r]=l+"px";this._cells.length&&(this._cells[e]._viewobj.style[o]=h+"px");for(var d=e+1;d<t.length;d++)this._cells[d]._viewobj.style[o]=this._margin+"px"},type_setter:function(t){return this._margin=void 0!==this._margin_set[t]?this._margin_set[t]:this._margin_set.line,this._padding.left=this._padding.right=this._padding.top=this._padding.bottom=void 0!==this._margin_set[t]?this._padding_set[t]:this._padding_set.line,this._cleanlayout="material"==t||"clean"==t,"material"==t&&(this._settings.borderless=!0),t},$skin:function(){this._margin_set=ni.layoutMargin,this._padding_set=ni.layoutPadding}}),Gn=t.protoUI(Un,Bn.view),qn={api:Un,view:Gn};Gn.call(-1);var Kn={name:"accordion",defaults:{panelClass:"accordionitem",multi:!1,collapsed:!1},$init:function(){this._viewobj.setAttribute("role","tablist"),this._viewobj.setAttribute("aria-multiselectable","true")},_replace:function(t){qn.api._replace.apply(this,arguments),t.collapsed_setter&&t.refresh&&t.refresh()},_parse_cells:function(){for(var t=this._settings.panelClass,e=this._collection,i=0;i<e.length;i++)!e[i].body&&!e[i].header||e[i].view||e[i].align||(e[i].view=t),P(e[i].collapsed)&&(e[i].collapsed=this._settings.collapsed);this._skin_render_collapse=!0,qn.api._parse_cells.call(this),this._skin_render_collapse=!1;for(var s=0;s<this._cells.length;s++)this._cells[s].name==t&&this._cells[s].refresh(),this._cells[s]._accLastChild=!1;for(var n=!1,a=this._cells.length-1;a>=0&&!n;a--)this._cells[a]._settings.hidden||(this._cells[a]._accLastChild=!0,n=!0)},_afterOpen:function(t){if(!1===this._settings.multi&&!0!==this._skin_render_collapse)for(var e=0;e<this._cells.length;e++)t!=this._cells[e]&&!this._cells[e]._settings.collapsed&&this._cells[e].collapse&&this._cells[e].collapse();t.callEvent&&(t.callEvent("onViewShow",[]),$e(t,this._signal_hidden_cells))},_canCollapse:function(t){if(!0===this._settings.multi||this._skin_render_collapse)return!0;for(var e=0;e<this._cells.length;e++)if(t!=this._cells[e]&&!this._cells[e]._settings.collapsed&&this._cells[e].isVisible()&&!this._cells[e].$nospace)return!0;return!1},$skin:function(){var t=this.defaults;ni.accordionType&&(t.type=ni.accordionType)}},Zn=t.protoUI(Kn,qn.view),Jn={api:Kn,view:Zn},Qn=(t.protoUI({name:"headerlayout",defaults:{type:"accordion",multi:"mixed",collapsed:!1}},Jn.view),{name:"accordionitem",$init:function(t){this._viewobj.innerHTML="<div tabindex='0' webix_ai_id='"+t.id+"'  class='webix_accordionitem_header'><div class='webix_accordionitem_button' ></div><div class='webix_accordionitem_label' ></div></div><div class='webix_accordionitem_body'></div>",this._contentobj=this._viewobj,this._headobj=this._contentobj.childNodes[0],t.header||(this._headobj.style.display="none"),this._headlabel=this._contentobj.childNodes[0].childNodes[1],this._headbutton=this._contentobj.childNodes[0].childNodes[0],this._bodyobj=this._contentobj.childNodes[1],this._viewobj.className+=" webix_accordionitem",this._head_cell=this._body_cell=null,this._cells=!0,this._bodyobj.setAttribute("role","tabpanel"),this._headobj.setAttribute("role","tab"),this.attachEvent("onKeyPress",this._onKeyPress)},_remove:function(){this.body_setter()},_replace:function(t){this._body_cell.destructor(),this._body_cell=t,this._bodyobj.appendChild(this._body_cell._viewobj),this.resize()},_id:"webix_ai_id",getChildViews:function(){return[this._body_cell]},body_setter:function(t){return"object"!=u(t)&&(t={template:t}),t._inner={top:!0,left:!0,right:!0,bottom:!0},e._parent_cell=this,this._body_cell=Xt._view(t),this._bodyobj.appendChild(this._body_cell._viewobj),t},header_setter:function(t){return t&&(t=Vt(t)),t},headerAlt_setter:function(t){return t&&(t=Vt(t)),t},$getSize:function(t,e){var i=this._body_cell.$getSize(0,0),s=this._settings._inner;s&&(t+=(s.left?0:1)+(s.right?0:1),e+=(s.top?0:1)+(s.bottom?0:1));var n=0,a=ti.api.$getSize.call(this,0,0);a[0]=(a[0]||i[0])+t,a[1]>=1e5&&(a[1]=i[1]),a[1]+=t,a[2]=(a[2]||i[2])+e;var r=a[3]<1e5;return r||(a[3]=i[3]),a[3]+=e,this.getParentView()._vertical_orientation?this._settings.collapsed?a[2]=a[3]=this._getHeaderSize()+e:this._settings.header&&(n=this._settings.headerHeight):(this._settings.collapsed&&(a[0]=a[1]=this._getHeaderSize()+t),this._settings.header&&(n=this._settings.headerHeight)),r||(a[2]+=n,a[3]+=n),S(this,a,!0),a},on_click:{webix_accordionitem_header:function(t){return this._toggle(t),!1},webix_accordionitem_header_v:function(t){return this._toggle(t),!1}},_toggle:function(){this.define("collapsed",!this._settings.collapsed)},collapsed_setter:function(t){if(!1!==this._settings.header){var i=this.getParentView();if(i){if(t)if(i._canCollapse(this))this._collapse();else{var s=0;if(i._cells.length>1)for(var n=0;n<i._cells.length;n++){var a=i._cells[n];if(this!=a&&a.isVisible()&&a.expand){a.expand(),this._collapse(),s=1;break}}if(!s)return}else this._expand();this._settings.collapsed=t,t||i._afterOpen(this),this.refresh(),e._ui_creation||this.resize(),i.callEvent("onAfter"+(t?"Collapse":"Expand"),[this._settings.id]),this._settings.$noresize=t}return t}},collapse:function(){this.define("collapsed",!0),Ve._moveChildFocus(this)},expand:function(){this.define("collapsed",!1)},_show:function(){this.show()},_hide:function(){this.hide()},_expand:function(){this._bodyobj.style.display="",_t(this.$view,"collapsed"),_t(this._headobj,"collapsed"),this._headobj.setAttribute("aria-expanded","true")},_collapse:function(){this._settings.headerAlt&&(this._headlabel.innerHTML=this._settings.headerAlt()),this._bodyobj.style.display="none",pt(this.$view,"collapsed"),pt(this._headobj,"collapsed"),this._headobj.setAttribute("aria-expanded","false")},refresh:function(){var t=this._settings[this._settings.collapsed?"headerAlt":"header"]||this._settings.header;t&&(this._headlabel.innerHTML=t(),this._headbutton.setAttribute("aria-label",t()));var e=this.getParentView()._vertical_orientation?"vertical":"horizontal";this._viewobj.className.indexOf(" "+e)<0&&pt(this._viewobj,e),i.transform||pt(this._viewobj,"webix_ie",!0)},_getHeaderSize:function(){return this._settings.collapsed?this._settings.headerAltHeight:this._settings.headerHeight},$setSize:function(t,e){if(si.api.$setSize.call(this,t,e)||this._getHeaderSize()!=this._last_set_header_size){t=this._content_width,e=this._content_height;var s=this._last_set_header_size=this._getHeaderSize();if(this._settings.header)if(this._headobj.style.height=s+"px",this._headobj.style.width="auto",this._headobj.style[i.transform]="",this._headobj.style.borderBottomWidth=(this._settings.collapsed?0:1)+"px",this.getParentView()._vertical_orientation||!this._settings.collapsed)e-=this._getHeaderSize();else if(this._settings.collapsed)if(ci.isSupported()){this._headobj.style.width=e+"px",this._headobj.style.height=t+3+"px";var n=Math.floor(e/2-t/2)+(t-this._settings.headerAltHeight)/2;this._headobj.style[i.transform]="rotate(90deg) translate("+n+"px, "+(n+1)+"px)"}else this._headobj.style.width=t+"px",this._headobj.style.height=e+3+"px";this._settings.collapsed||(this._body_cell.$setSize(t,e),this._last_size_y=e)}else if(!this._settings.collapsed){var a=this._body_cell;this._last_size_y&&a.$setSize(this._content_width,this._last_size_y)}},$skin:function(){var t=this.defaults;t.headerAltHeight=t.headerHeight=ni.barHeight-2*ni.borderWidth},defaults:{header:!1,headerAlt:!1,body:""}}),ta=(t.protoUI(Qn,Qi,B,si.view),{name:"resizearea",defaults:{dir:"x"},$init:function(t){var e=t.dir||"x",s=D(t.container),n="x"==e?"width":"height",a=t.margin?t.margin+"px":0;this._key_property="x"==e?"left":"top",this._viewobj=nt("DIV",{class:"webix_resize_area webix_dir_"+e}),ee(this._viewobj,i.mouse.down,ft),a&&(a="x"==e?a+" 0 "+a:"0 "+a+" 0 "+a),this._dragobj=nt("DIV",{class:"webix_resize_handle_"+e,style:a?"padding:"+a:""},"<div class='webix_handle_content'></div>"),this._originobj=nt("DIV",{class:"webix_resize_origin_"+e}),t[n]&&(this._originobj.style[n]=t[n]+(t.border?1:0)+"px",this._dragobj.style[n]=t[n]+"px"),t.cursor&&(this._dragobj.style.cursor=this._originobj.style.cursor=this._viewobj.style.cursor=t.cursor),this._moveev=ie(s,i.mouse.move,this._onmove,{bind:this}),this._upev=ie(document.body,i.mouse.up,this._onup,{bind:this}),this._dragobj.style[this._key_property]=this._originobj.style[this._key_property]=t.start+"px",s.appendChild(this._viewobj),s.appendChild(this._dragobj),s.appendChild(this._originobj)},_onup:function(){this.callEvent("onResizeEnd",[this._last_result]),se(this._moveev),se(this._upev),rt(this._viewobj),rt(this._dragobj),rt(this._originobj),this._viewobj=this._dragobj=this._originobj=null},_onmove:function(t){var e=dt(t);this._last_result=("x"==this._settings.dir?e.x:e.y)+this._settings.start-this._settings.eventPos,this._dragobj.style[this._key_property]=this._last_result+"px",this.callEvent("onResize",[this._last_result])}}),ea=(t.protoUI(ta,B,Ye),{name:"resizer",defaults:{width:7,height:7},$init:function(t){_(this.getParentView(),"Resizer can't be initialized outside a layout"),this._viewobj.className+=" webix_resizer";var e=this.getParentView()._margin;ee(this._viewobj,i.mouse.down,this._rsDown,{bind:this}),ie(document.body,i.mouse.up,this._rsUp,{bind:this});var s=this._getResizeDir();this._rs_started=!1,this._resizer_dir=s,this._resizer_dim="x"==s?"width":"height","x"==s?t.height=0:t.width=0,e>0?(this._viewobj.className+=" webix_resizer_v"+s,this._viewobj.style.marginRight="-"+e+"px","x"==s?t.width=e:t.height=e,this.$nospace=!0):this._viewobj.className+=" webix_resizer_"+s,this._viewobj.innerHTML="<div class='webix_resizer_content'></div>","y"==s&&e>0&&(this._viewobj.style.marginBottom="-"+(t.height||this.defaults.height)+"px"),this._viewobj.setAttribute("webix_disable_drag","true"),this._viewobj.setAttribute("tabindex","-1"),this._viewobj.setAttribute("aria-grabbed","false")},_rsDown:function(t){var e=this._getResizerCells();if(e&&!this._settings.disabled){t=t||ie,this._rs_started=!0,this._rs_process=dt(t),this._rsLimit=[],this._viewobj.setAttribute("aria-grabbed","true");for(var i=0;i<2;i++)e[i].$view.setAttribute("aria-dropeffect","move");this._viewobj.setAttribute("aria-dropeffect","move"),this._rsStart(t,e[0])}},_rsUp:function(){this._rs_started=!1,this._rs_process=!1},_rsStart:function(t,e){var i,s,n,a,r;t=t||ie,i=this._resizer_dir,this.getParentView()._viewobj.style.position="relative",n=ht(this._viewobj),a=ht(this.getParentView()._viewobj),r=n[i]-a[i],s=ht(e.$view)[i]-ht(this.getParentView().$view)[i],this._rs_progress=[i,e,r,s],this._resizeStick=new Xt.resizearea({container:this.getParentView()._viewobj,dir:i,eventPos:this._rs_process[i],start:r-1,height:this.$height,width:this.$width,border:1,margin:this.getParentView()._padding["x"===i?"left":"top"]}),this._resizeStick.attachEvent("onResizeEnd",T(this._rsEnd,this)),this._resizeStick.attachEvent("onResize",T(this._rsResizeHandler,this)),pt(document.body,"webix_noselect",1)},_getResizeDir:function(){return this.getParentView()._vertical_orientation?"y":"x"},_rsResizeHandler:function(){var t,e,i,s,n,a,r,o,l,h;if(this._rs_progress)for(t=this._getResizerCells(),n=this._rs_progress[0],s=this._resizeStick._last_result-this._rs_progress[2],l=this._rsGetDiffCellSizes(t,n,s),h=t[0]["$"+this._resizer_dim]+t[1]["$"+this._resizer_dim],r="y"==n?["minHeight","maxHeight"]:["minWidth","maxWidth"],a=0;a<2;a++){e=t[a]._settings,i=a?-s:s;var c=e[r[0]],d=e[r[1]];if(i>0&&d&&d<=l[a]||i<0&&(c||3)>=l[a])return this._rsLimit[a]=i>0?d:c||3,o=this._rsGetLimitCellSizes(t,n),void(this._resizeStick._dragobj.style["y"==n?"top":"left"]=this._rs_progress[3]+o[0]+"px");l[a]<3?this._resizeStick._dragobj.style["y"==n?"top":"left"]=this._rs_progress[3]+a*h+1+"px":this._rsLimit[a]=null}},_getResizerCells:function(){var t,e,i;for(t=this.getParentView()._cells,e=0;e<t.length;e++)if(t[e]==this)return(i=[this._getRsCell(t,e,1,-1),this._getRsCell(t,e,1,1)])[0]&&i[1]||(i=null),i},_getRsCell:function(t,e,i,s){var n=t[e+s*i];return n&&n._settings.hidden?this._getRsCell(t,e,i+1,s):n&&n._settings.$noresize?null:n},_rsEnd:function(t){if(void 0!==t){var e,i,s,n,a=this.getParentView()._vertical_orientation;if(this._resizerStick=null,this._rs_progress){if(i=this._rs_progress[0],s=t-this._rs_progress[2],(e=this._getResizerCells())[0]&&e[1]){n=this._rsGetCellSizes(e,i,s);for(var r=0;r<2;r++){var o=e[r].$getSize(0,0);if(a?o[2]==o[3]:Math.abs(o[1]-o[0])<3)e[r]._settings[this._resizer_dim]=n[r],e[r]._bubble_size&&e[r]._bubble_size(this._resizer_dim,n[r],a);else{var l=e[r].$view[a?"offsetHeight":"offsetWidth"];e[r]._settings.gravity=n[r]/l*e[r]._settings.gravity}}e[0].resize();for(var h=0;h<2;h++)e[h].callEvent&&e[h].callEvent("onViewResize",[]),e[h].$view.removeAttribute("aria-dropeffect");Y("onLayoutResize",[e])}this._rs_progress=!1}this._rs_progress=!1,this._rs_started=!1,this._rsLimit=null,_t(document.body,"webix_noselect"),this._viewobj.setAttribute("aria-grabbed","false"),this._viewobj.removeAttribute("aria-dropeffect")}},_rsGetLimitCellSizes:function(t){var e,i,s;return s=t[0]["$"+this._resizer_dim]+t[1]["$"+this._resizer_dim],this._rsLimit[0]?(e=this._rsLimit[0],i=s-e):this._rsLimit[1]&&(i=this._rsLimit[1],e=s-i),[e,i]},_rsGetDiffCellSizes:function(t,e,i){for(var s=[],n="height"==this._resizer_dim?"offsetHeight":"offsetWidth",a=0;a<2;a++)s[a]=t[a].$view[n]+(a?-1:1)*i;return s},_rsGetCellSizes:function(t,e,i){var s,n,a;if(this._rsLimit[0]||this._rsLimit[1])n=this._rsGetLimitCellSizes(t,e);else for(n=this._rsGetDiffCellSizes(t,e,i),s=0;s<2;s++)n[s]<0&&(a=n[0]+n[1],n[s]=1,n[1-s]=a-1);return n}}),ia=(t.protoUI(ea,Qi,We,si.view),{name:"align",defaults:{borderless:!0,left:0,top:0,right:0,bottom:0},$init:function(){this._viewobj.className+=" webix_view_align"},getChildViews:function(){return[this._body_cell]},body_setter:function(t){return t._inner={top:!1,left:!1,right:!1,bottom:!1},e._parent_cell=this,this._body_cell=Xt._view(t),this._viewobj.appendChild(this._body_cell._viewobj),t},align_setter:function(t){"string"==typeof t&&(t=t.split(",")),this._x_align=this._y_align=this._p_align="";for(var e=0;e<t.length;e++){var i=t[e];"center"!==i&&"left"!==i&&"right"!==i||(this._x_align=i),"top"!==i&&"bottom"!==i&&"middle"!==i||(this._y_align=i),"absolute"===i&&(this._x_align=this._y_align=this._p_align="precise")}return t},getBody:function(){return this._body_cell},$setSize:function(t,e){var i,s;si.api.$setSize.call(this,t,e),this._p_align?(i=t-this._settings.left-this._settings.right,s=e-this._settings.top-this._settings.bottom):(i=this._desired_size[0]||t,s=this._desired_size[2]||e),this._body_cell.$setSize(i,s);var n=this._body_cell._viewobj;"center"==this._x_align?n.style.marginLeft=Math.ceil((t-i)/2)+"px":"right"==this._x_align?n.style.marginLeft=t-i+"px":n.style.marginLeft=(this._p_align?this._settings.left:0)+"px","middle"==this._y_align?n.style.marginTop=Math.ceil((e-s)/2)+"px":"bottom"==this._y_align?n.style.marginTop=e-s+"px":n.style.marginTop=(this._p_align?this._settings.top:0)+"px"},$getSize:function(t,e){var i=this._desired_size=this._body_cell.$getSize(0,0),s=ti.api.$getSize.call(this,0,0);return this._p_align&&(t+=this._settings.left+this._settings.right,e+=this._settings.top+this._settings.bottom),!this._x_align||this._p_align?(s[0]=i[0]+t,s[1]=i[1]+t):(s[0]=(s[0]||i[0])+e,s[1]+=t),!this._y_align||this._p_align?(s[2]=i[2]+e,s[3]=i[3]+e):(s[2]=(s[2]||i[2])+e,s[3]+=e),s}}),sa=(t.protoUI(ia,si.view),{name:"multiview",defaults:{animate:{}},setValue:function(t){Zt(t).show()},getValue:function(){return this.getActiveId()},$init:function(){this._active_cell=0,this._vertical_orientation=1,this._viewobj.style.position="relative",this._viewobj.className+=" webix_multiview",this._back_queue=[]},_ask_render:function(t,e){var i=Zt(t);i._render_hash||(i._render_queue=[],i._render_hash={}),i._render_hash[e]||(i._render_hash[e]=!0,i._render_queue.push(e))},_render_activation:function(t){var e=Zt(t);if(this._settings.keepViews&&(e._viewobj.style.display=""),this._back_queue[this._back_queue.length-2]!=t?(10==this._back_queue.length&&this._back_queue.splice(0,1),this._back_queue.push(t)):this._back_queue.splice(this._back_queue.length-1,1),e._render_hash){for(var i=0;i<e._render_queue.length;i++){var s=Zt(e._render_queue[i]);s&&s.render()}e._render_queue=[],e._render_hash={}}},addView:function(t,e){var i=!P(e)&&e<=this._active_cell?1:0,s=Bn.api.addView.apply(this,arguments);return this._cells.length>1&&(this._settings.keepViews?Zt(s)._viewobj.style.display="none":rt(Zt(s)._viewobj),this._active_cell+=i),s},_replace:function(t){if(!t._settings.borderless){var e=I(this._settings._inner);t._settings._inner=e;var i=t._viewobj.style;i.borderTopWidth=i.borderBottomWidth=i.borderLeftWidth=i.borderRightWidth="1px",this._fix_container_borders(i,e)}Bn.api._replace.apply(this,arguments)},_beforeRemoveView:function(t){if(t==this._active_cell){var e=t?t-1:1;this._cells[e]&&(this._in_animation=!1,this._show(this._cells[e],!1))}t<this._active_cell&&this._active_cell--},_hide:function(){},_parse_cells:function(t){t=t||this._collection;for(var e=0;e<t.length;e++)t[e]._inner=this._settings.borderless?{top:1,left:1,right:1,bottom:1}:this._settings._inner||{};Bn.api._parse_cells.call(this,t);for(var i=1;i<this._cells.length;i++)this._settings.keepViews?this._cells[i]._viewobj.style.display="none":rt(this._cells[i]._viewobj);for(var s=0;s<t.length;s++){var n=this._cells[s];n._cells&&!n._render_borders||(this._fix_container_borders(n._viewobj.style,n._settings._inner),n._viewobj.setAttribute("role","tabpanel"))}this._render_activation(this.getActiveId())},cells_setter:function(t){_(t&&t.length,"Multiview must have at least one view in 'cells'"),this._collection=t},_getDirection:function(t,e){var i=(this._settings.animate||{}).direction,s="top"==i||"bottom"==i;return t<e?s?"bottom":"right":s?"top":"left"},_show:function(e,i){var s=this.getParentView();if(s&&s.getTabbar&&s.getTabbar().setValue(e._settings.$id||e._settings.id),this._in_animation)return L(this._show,this,[e,i],100);for(var n=-1,a=0;a<this._cells.length;a++)if(this._cells[a]==e){n=a;break}if(!(n<0||n==this._active_cell)){var r=this._cells[this._active_cell],o=this._cells[n];if(r.$getSize(0,0),(i||void 0===i)&&ci.isSupported()&&this._settings.animate){var l=t.extend({},this._settings.animate);this._settings.keepViews&&(l.keepViews=!0),l.direction=this._getDirection(n,this._active_cell),l=Ye._mergeSettings(i||{},l);var h=ci.formLine(o._viewobj,r._viewobj,l);o.$getSize(0,0),o.$setSize(this._content_width,this._content_height);var c=l.callback;l.callback=function(){ci.breakLine(h,this._settings.keepViews),this._in_animation=!1,c&&c.call(this),c=l.master=l.callback=null,this.resize()},l.master=this,this._active_cell=n,this._render_activation(this.getActiveId()),ci(h,l),this._in_animation=!0}else this._settings.keepViews?r._viewobj.style.display="none":(rt(r._viewobj),this._viewobj.appendChild(this._cells[a]._viewobj)),this._active_cell=n,this.resizeChildren(),this._render_activation(this.getActiveId());o.callEvent&&(o.callEvent("onViewShow",[]),$e(o,this._signal_hidden_cells)),this.callEvent("onViewChange",[r._settings.id,o._settings.id])}},$getSize:function(t,e){if(!this._cells.length)return ti.api.$getSize.call(this,0,0);y(this,!0);var i=this._cells[this._active_cell].$getSize(0,0);if(this._settings.fitBiggest)for(var s=0;s<this._cells.length;s++)if(s!=this._active_cell)for(var n=this._cells[s].$getSize(0,0),a=0;a<4;a++)i[a]=Math.max(i[a],n[a]);var r=ti.api.$getSize.call(this,0,0);return r[1]>=1e5&&(r[1]=0),r[3]>=1e5&&(r[3]=0),r[0]=(r[0]||i[0])+t,r[1]=(r[1]||i[1])+t,r[2]=(r[2]||i[2])+e,r[3]=(r[3]||i[3])+e,w(0,r),r},$setSize:function(t,e){this._cells.length&&(this._layout_sizes=[t,e],ti.api.$setSize.call(this,t,e),this._cells[this._active_cell].$setSize(t,e))},isVisible:function(t,e){return e&&e!=this.getActiveId()?(t&&this._ask_render(e,t),!1):si.api.isVisible.call(this,t,this._settings.id)},getActiveId:function(){return this._cells.length?this._cells[this._active_cell]._settings.id:null},back:function(t){if(t=t||1,this.callEvent("onBeforeBack",[this.getActiveId(),t])){if(this._back_queue.length>t){var e=this._back_queue[this._back_queue.length-t-1];return Zt(e).show(),e}return null}return null},_insertBeforeView:function(t,e){!this._settings.keepViews&&e&&e!=this._cells[this._active_cell]||Bn.api._insertBeforeView.call(this,t,e)}}),na=(t.protoUI(sa,Bn.view),{name:"tabview",setValue:function(t){this._cells[0].setValue(t)},getValue:function(){return this._cells[0].getValue()},getTabbar:function(){return this._cells[0]},getMultiview:function(){return this._cells[1]},addView:function(t){var e=this.getMultiview().addView(t.body);t.id=e,t.value=t.header,delete t.body,delete t.header;var i=this.getTabbar();return i.addOption(t),e},removeView:function(t){var e=this.getTabbar();e.removeOption(t),e.refresh()},$init:function(e){this.$ready.push(this._init_tabview_handlers);var i=e.cells,s=[];_(i&&i.length,"tabview must have cells collection");for(var n=i.length-1;n>=0;n--){var a=i[n].body||i[n];a.id||(a.id="view"+$()),s[n]={value:i[n].header,id:a.id,close:i[n].close,width:i[n].width,hidden:!!i[n].hidden},i[n]=a}var r={view:"tabbar",multiview:!0},o={view:"multiview",cells:i,animate:!!e.animate};e.value&&(r.value=e.value),e.tabbar&&t.extend(r,e.tabbar,!0),e.multiview&&t.extend(o,e.multiview,!0),r.options=r.options||s,e.rows=[r,o],delete e.cells,delete e.tabs},_init_tabview_handlers:function(){this.getTabbar().attachEvent("onOptionRemove",function(t){var e=Zt(t);if(e){var i=e.getParentView();i&&i.removeView(e)}})}}),aa=(t.protoUI(na,qn.view),{name:"carousel",defaults:{scrollSpeed:"300ms",type:"clean",navigation:{},animate:!0},$init:function(){this._viewobj.className+=" webix_carousel",this._layout=null,this._dataobj=null,this._active_cell=0,this.$ready.unshift(this._initLayout),this.$ready.push(this._after_init_call)},addView:function(t,e){var i=this._layout.addView(t,e);return this._fix_after_view_add(),i},removeView:function(t){this._layout.removeView(t),this._fix_after_view_add()},_replace:function(t,e){this._layout._replace(t,e),this._fix_after_view_add()},_fix_after_view_add:function(){this._cells=this._layout._cells,this._renderPanel(),this.setActiveIndex(Math.min(this._active_cell,this._cells.length-1))},_initLayout:function(){this._layout&&this._layout.destructor&&this._layout.destructor();var i="";this.config.cols?(i="cols",this._vertical_orientation=0):(i="rows",this._vertical_orientation=1);var s={borderless:!0,type:"clean"};s[i]=E(this._settings[i]);for(var n=["type","margin","marginX","marginY","padding","paddingX","paddingY"],a={},r=0;r<n.length;r++)this._settings[n[r]]&&(a[n[r]]=this._settings[n[r]]);t.extend(s,a,!0),e._parent_cell=this,this._layout=Xt._view(s),this._viewobj.appendChild(this._layout._viewobj),this._cells=this._layout._cells,this._layout._show=T(aa._show,this),this._layout.adjustScroll=T(aa.adjustScroll,this),W("onReconstruct",T(function(t){t==this._layout&&this._setScroll()},this)),this._contentobj=this._viewobj.firstChild},_onKeyPress:function(t,e){this._settings.navigation.items&&"tab"===e.target.getAttribute("role")&&this._moveActive(t,e),ti.api._onKeyPress.call(this,t,e)},getChildViews:function(){return[this._layout]},getLayout:function(){return this._layout},_after_init_call:function(){this._contentobj.setAttribute("touch_scroll",this._vertical_orientation?"y":"x"),this._layout.attachEvent("onAfterScroll",T(function(){this.callEvent("onShow",[this.getActiveId()])},this)),$e(this._layout,function(t){t._viewobj.setAttribute("role","tabpanel")})},adjustScroll:function(t){var e,i=this._vertical_orientation?this._content_height:this._content_width;return this._vertical_orientation?(e=Math.round(t.f/i),t.f=e*i):(e=Math.round(t.e/i),t.e=e*i),this._active_cell=-e,this._settings.navigation&&this._renderNavItems(),!0},_show:function(t){var e,i,s,n,a,r;for(s=-1,i=this._layout,e=0;e<i._cells.length;e++)if(i._cells[e]==t){s=e;break}s<0||s==this._active_cell||(this._active_cell=s,n=i._vertical_orientation?this._content_height:this._content_width,a=-(i._vertical_orientation?0:s*n),r=-(i._vertical_orientation?s*n:0),this.scrollTo(a,r),this.callEvent("onShow",[i._cells[this._active_cell]._settings.id]),this._settings.navigation&&this._renderPanel())},scrollTo:function(t,e){fi&&ci.isSupported()&&this._settings.animate?fi._set_matrix(this._contentobj,t,e,this._settings.scrollSpeed||"100ms"):(this._contentobj.style.marginLeft=t+"px",this._contentobj.style.marginTop=e+"px")},navigation_setter:function(t){return this._mergeSettings(t,{type:"corner",buttons:!0,items:!0}),t},showNext:function(){this._active_cell<this._layout._cells.length-1&&this.setActiveIndex(this._active_cell+1)},showPrev:function(){this._active_cell>0&&this.setActiveIndex(this._active_cell-1)},setActiveIndex:function(t){_(t<this._layout._cells.length,"Not existing index in collection");var e=this._layout._cells[t]._settings.id;Zt(e).show()},getActiveIndex:function(){return this._active_cell},$getSize:function(t,e){var i=this._layout.$getSize(0,0),s=si.api.$getSize.call(this,t,e);return this._layout._vertical_orientation?(s[0]=Math.max(s[0],i[0]),s[1]=Math.min(s[1],i[1])):(s[2]=Math.max(s[2],i[2]),s[3]=Math.min(s[3],i[3])),s},$setSize:function(t,e){var i=this._layout,s=i._cells.length,n=si.api.$setSize.call(this,t,e),a=this._content_height*(i._vertical_orientation?s:1),r=this._content_width*(i._vertical_orientation?1:s);n?(this._contentobj.style.height=a+"px",this._contentobj.style.width=r+"px",i.$setSize(r,a),this._setScroll()):i.$setSize(r,a)},_setScroll:function(){var t=this._layout,e=this._active_cell||0,i=t._vertical_orientation?this._content_height:this._content_width,s=-(t._vertical_orientation?0:e*i),n=-(t._vertical_orientation?e*i:0);this.scrollTo(s,n),this._settings.navigation&&this._renderPanel()},getActiveId:function(){var t=this._layout._cells[this._active_cell];return t?t._settings.id:null},setActive:function(t){Zt(t).show()}}),ra=(t.protoUI(aa,B,ts,si.view),{name:"proxy",body_setter:function(t){return e._parent_cell=this,this._body_cell=Xt._view(t),this._viewobj.appendChild(this._body_cell._viewobj),t},getChildViews:function(){return[this._body_cell]},$setSize:function(t,e){si.api.$setSize.call(this,t,e),this._body_cell.$setSize(this.$width,this.$height)},$getSize:function(t,e){var i=si.api.$getSize.call(this,t,e),s=this._body_cell.$getSize(t,e);return s[0]=Math.max(i[0],s[0]),s[1]=Math.min(i[1],s[1]),s[2]=Math.max(i[2],s[2]),s[3]=Math.min(i[3],s[3]),s[4]=Math.max(i[4],s[4]),s},_replace:function(t){this._body_cell.destructor(),this._body_cell=t,this._viewobj.appendChild(t._viewobj),this.resize()}});t.protoUI(ra,si.view),t.protoUI({name:"portlet",defaults:{template:"GPL version doesn't support portlet <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"dashboard",defaults:{template:"GPL version doesn't support dashboard <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"panel",defaults:{template:"GPL version doesn't support panel <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"abslayout",defaults:{template:"GPL version doesn't support abslayout <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"gridlayout",defaults:{template:"GPL version doesn't support gridlayout <br> You need Webix PRO"}},Wn.view);var oa={$init:function(){t.extend(this,Yi,!0)},name:"flexlayout"};t.protoUI(oa,qn.view),t.protoUI({name:"flexdatalayout",defaults:{template:"GPL version doesn't support flexdatalayout <br> You need Webix PRO"}},Wn.view);var la={name:"popup",$init:function(){var t=this;this._settings.head=!1,this.$view.className+=" webix_popup",W("onClick",function(e){return t._hide(e)}),this.attachEvent("onHide",this._hide_point)},$skin:function(){this.defaults.headHeight=ni.barHeight,this.defaults.padding=ni.popupPadding,this.defaults.point=!ni.popupNoPoint,this.defaults.borderless=ni.borderlessPopup},close:function(){rt(this._point_element),wi.api.close.call(this)},$getSize:function(t,e){return wi.api.$getSize.call(this,t+2*this._settings.padding,e+2*this._settings.padding)},$setSize:function(t,e){si.api.$setSize.call(this,t,e),t=this._content_width-2*this._settings.padding,e=this._content_height-2*this._settings.padding,this._contentobj.style.padding=this._settings.padding+"px",this._headobj.style.display="none",this._body_cell.$setSize(t,e)},_inner_body_set:function(t){void 0===t.borderless&&(t.borderless=!1)},head_setter:function(){},_set_point:function(t,e,i,s){this._hide_point(),document.body.appendChild(this._point_element=nt("DIV",{class:"webix_point_"+t},"")),this._point_element.style.zIndex=De(),this._point_element.style.position=s?"fixed":"absolute",this._point_element.style.top=i+"px",this._point_element.style.left=e+"px"},_hide_point:function(){this._point_element=rt(this._point_element)}},ha=t.protoUI(la,wi.view),ca={api:la,view:ha},da={name:"toolbar",defaults:{type:"toolbar"},_render_borders:!0,_form_classname:"webix_toolbar",_form_vertical:!1,$init:function(t){t.borderless||(this._contentobj.style.borderWidth="1px",this._settings._inner={top:!1,left:!1,right:!1,bottom:!1}),this._contentobj.className+=" "+this._form_classname,this._viewobj.setAttribute("role","toolbar")},_recollect_elements:function(){var t=this;t.elements={},$e(this,function(e){if(e._settings.name&&e.getValue&&e.setValue&&(t.elements[e._settings.name]=e,e.mapEvent&&e.mapEvent({onbeforetabclick:t,onaftertabclick:t,onitemclick:t,onchange:t})),e.setValues)return!1});var e=this._values;if(this.setDirty(!1),e){var i=this._values;for(var s in t.elements)e[s]&&i[s]!=e[s]&&(i[s]=e[s],this.setDirty(!0))}},_parse_cells_ext_end:function(){this._recollect_elements()},_parse_cells_ext:function(t){var e=this._settings;return e.elements&&!t&&(this._collection=t=e.elements,this._vertical_orientation=this._form_vertical,delete e.elements),this._settings.elementsConfig&&this._rec_apply_settings(this._collection,e.elementsConfig),t},_rec_apply_settings:function(e,i){for(var s=0;s<e.length;s++){var n=e[s];t.extend(n,i);var a,r=i;n.elementsConfig&&(r=t.extend(t.extend({},n.elementsConfig),i)),(a=n.body?[n.body]:n.rows||n.cols||n.cells||n.body)&&this._rec_apply_settings(a,r)}},$getSize:function(t,e){var i=qn.api.$getSize.call(this,t,e),s=this.getParentView(),n=this._vertical_orientation?3:1;return s&&this._vertical_orientation!=s._vertical_orientation&&(i[n]+=1e5),S(this,i,!0),i},render:function(){},refresh:function(){this.render()}},ua=t.protoUI(da,as,Ae,Ds,qn.view,Mi),fa={api:da,view:ua},ga={name:"form",defaults:{type:"form",autoheight:!0},_default_height:-1,_form_classname:"webix_form",_form_vertical:!0,$init:function(){this._viewobj.setAttribute("role","form")},$getSize:function(t,e){this._scroll_y&&!this._settings.width&&(t+=i.scrollSize);var s=qn.api.$getSize.call(this,t,e);return!this._settings.scroll&&this._settings.autoheight||(s[2]=this._settings.height||this._settings.minHeight||0,s[3]=this._settings.height||1e5),s}},pa=(t.protoUI(ga,fa.view),{name:"fieldset",defaults:{borderless:!0,$cssName:"webix_fieldset",paddingX:18,paddingY:30},$init:function(t){t.body=t.body||{};var e=this.defaults.$cssName;this._viewobj.className+=" "+e,this._viewobj.innerHTML="<fieldset><legend class='"+e+"_label"+(t.required?" webix_required":"")+"'></legend><div class='"+e+"_body'></div></fieldset>"},label_setter:function(t){return this._viewobj.firstChild.childNodes[0].innerHTML=t,t},getChildViews:function(){return[this._body_view]},body_setter:function(t){return e._parent_cell=this,this._body_view=Xt(t,this._viewobj.firstChild.childNodes[1]),t},getBody:function(){return this._body_view},resizeChildren:function(){if(this._body_view){var t=this.$width-this._settings.paddingX,e=this.$height-this._settings.paddingY,i=this._body_view.$getSize(0,0);i[0]>t&&(t=i[0]),i[2]>e&&(e=i[2]),this._body_view.$setSize(t,e),this.resize()}},$getSize:function(t,e){y(this,!0),t+=this._settings.paddingX,e+=this._settings.paddingY;var i=this._body_view.$getSize(t,e),s=this._last_body_size=si.api.$getSize.call(this,t,e);return s[0]<i[0]&&(s[0]=i[0]),s[2]<i[2]&&(s[2]=i[2]),s[1]>i[1]&&(s[1]=i[1]),s[3]>i[3]&&(s[3]=i[3]),s[1]<s[0]&&(s[1]=s[0]),s[3]<s[2]&&(s[3]=s[2]),w(0,s),s},$setSize:function(t,e){si.api.$setSize.call(this,t,e)&&(t=Math.min(this._last_body_size[1],t),e=Math.min(this._last_body_size[3],e),this._body_view.$setSize(t-this._settings.paddingX,e-this._settings.paddingY))}}),_a=t.protoUI(pa,si.view),va={api:pa,view:_a},ma={name:"forminput",defaults:{$cssName:"webix_forminput",labelWidth:80,labelAlign:"left",paddingY:0,paddingX:0},setValue:function(t){this._body_view.setValue?this._body_view.setValue(t):this._body_view.setValues&&this._body_view.setValues(t)},focus:function(){return!!this._body_view.focus&&this._body_view.focus()},getValue:function(){return this._body_view.getValue?this._body_view.getValue():this._body_view.getValues?this._body_view.getValues():void 0},getBody:function(){return this._body_view},$skin:function(){this._inputPadding=ni.inputPadding,this._inputSpacing=ni.inputSpacing,this._labelTopHeight=ni.labelTopHeight||15},$init:function(t){if(this.$ready.push(function(){var t=this._viewobj.firstChild.childNodes[0];if(!this._settings.label||!this._settings.labelWidth)return t.style.display="none",void(this._settings.paddingX=this._settings.paddingY=0);"top"==this._settings.labelPosition?(t.style.lineHeight=this._labelTopHeight-this._inputPadding+"px",t.className+=" "+this.defaults.$cssName+"_label_top"):t.style.width=this._settings.paddingX+"px",t.style.textAlign=this._settings.labelAlign,this._settings.value&&this.setValue(this._settings.value)}),"top"!=t.labelPosition){var e=P(t.labelWidth)?this.defaults.labelWidth:t.labelWidth;t.paddingX=e-2*this._inputPadding+2*this._inputSpacing}else t.paddingY=this._labelTopHeight},setBottomText:function(t){var e=this._settings;if(void 0!==t){if(e.bottomLabel==t)return;e.bottomLabel=t}var i=(e.invalid?e.invalidMessage:"")||e.bottomLabel;this._invalidMessage&&rt(this._invalidMessage),i&&(this.$view.style.position="relative",this._invalidMessage=nt("div",{class:"webix_inp_bottom_label",role:e.invalid?"alert":"","aria-relevant":"all",style:"position:absolute; bottom:0px; padding:2px; background: white; left:"+this._settings.labelWidth+"px; "},i),this._viewobj.appendChild(this._invalidMessage))}};function ba(t){return t.tagName?t.tagName.toLowerCase():null}function xa(t,e){if(!t.getAttribute)return null;var i=t.getAttribute(e);return i?i.toLowerCase():null}function ya(){var t=ba(this);return wa[t]?wa[t](this):wa.other(this)}t.protoUI(ma,va.view);var wa={radio:function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e].value;return""},input:function(t){var e=xa(t,"type");return"checkbox"===e?t.checked:t.value},textarea:function(t){return t.value},select:function(t){var e=t.selectedIndex;return t.options[e].value},other:function(t){return t.innerHTML}};function Sa(t){var e=ba(this);return ka[e]?ka[e](this,t):ka.other(this,t)}var ka={radio:function(t,e){for(var i=0;i<t.length;i++)t[i].checked=t[i].value==e},input:function(t,e){var i=xa(t,"type");"checkbox"===i?t.checked=!!e:t.value=e},textarea:function(t,e){t.value=e},select:function(t,e){t.value=e,-1===t.selectedIndex&&(t.value=t.firstElementChild.value)},other:function(t,e){t.innerHTML=e}},Ca={name:"htmlform",$init:function(t){this.elements={},this._default_values=!1,t.content&&(t.container==t.content||!t.container&&t.content==document.body)&&(this._copy_inner_content=!0)},content_setter:function(t){if(t=D(t),this._copy_inner_content)for(;t.childNodes.length>1;)this._viewobj.childNodes[0].appendChild(t.childNodes[0]);else this._viewobj.childNodes[0].appendChild(t);return this._parse_inputs(),!0},render:function(){Wn.api.render.apply(this,arguments),this._parse_inputs()},_parse_inputs:function(){var t=this._viewobj.querySelectorAll("[name]");this.elements={};for(var e=0;e<t.length;e++){var i=t[e],s=xa(i,"name");if(s){var n="button"===ba(i),a=xa(i,"type"),r=n||"button"===a||"submit"===a;if("radio"===a){var o=this.elements[s]||[];o.tagName="radio",o.push(i),i=o}this.elements[s]=i,i.getValue=ya,i.setValue=Sa,i.$allowsClear=!r}}return this.elements},_mark_invalid:function(t,e){this._clear_invalid(t,e);var i=this._viewobj.querySelector('[name="'+t+'"]');i&&pt(i,"invalid")},_clear_invalid:function(t){var e=this._viewobj.querySelector('[name="'+t+'"]');e&&_t(e,"invalid")},focus:function(t){if(!t&&this.$view.contains(document.activeElement))return!1;Ds.focus.apply(this,arguments)}},Aa=(t.protoUI(Ca,Wn.view,Ds),{name:"property",$init:function(){this._contentobj.className+=" webix_property",this._contentobj.setAttribute("role","listbox"),this._destroy_with_me=[],this.attachEvent("onAfterEditStart",function(t){var e=this.getItemNode(t);pt(e,"webix_focused")}),this.attachEvent("onAfterEditStop",function(t,e){var i=this.getItemNode(e.config.id);_t(i,"webix_focused")})},defaults:{nameWidth:100,editable:!0},on_render:{checkbox:function(t){return"<input type='checkbox' class='webix_property_check' "+(t?"checked":"")+">"},color:function(t){return'<div class="webix_property_col_val"><div class=\'webix_property_col_ind\' style="background-color:'+(t||"#FFFFFF")+';"></div><span>'+t+"</span></div>"}},on_edit:{label:!1},_id:"webix_f_id",on_click:{webix_property_check:function(t){var e=this.locate(t);return this.getItem(e).value=!this.getItem(e).value,this.callEvent("onCheck",[e,this.getItem(e).value]),!1}},on_dblclick:{},registerType:function(t,e){if(e.template&&(this.on_render[t]=e.template),e.editor&&(this.on_edit[t]=e.editor),e.click)for(var i in e.click)this.on_click[i]=e.click[i]},elements_setter:function(t){this._idToLine={};for(var e=0;e<t.length;e++){var i=t[e];"multiselect"==i.type&&(i.optionslist=!0),i.id=i.id||$(),i.label=i.label||"",i.value=i.value||"",this._idToLine[i.id]=e,this._map_options(t[e])}return t},showItem:function(t){ns.showItem.call(this,t)},locate:function(){return lt(arguments[0],this._id)},getItemNode:function(t){return this._dataobj.childNodes[this._idToLine[t]]},getItem:function(t){return this._settings.elements[this._idToLine[t]]},_get_editor_type:function(t){var e=this.getItem(t).type;if("checkbox"==e)return"inline-checkbox";var i=this.on_edit[e];return!1!==i&&(i||e)},_get_edit_config:function(t){return this.getItem(t)},_find_cell_next:function(t,e,i){var s=this._idToLine[t.id],n=this._settings.elements;if(i){for(var a=s+1;a<n.length;a++)if(e.call(this,n[a].id))return n[a].id}else for(var r=s-1;r>=0;r--)if(e.call(this,n[r].id))return n[r].id;return null},updateItem:function(e,i){i=i||{};var s=this.getItem(e);s&&t.extend(s,i,!0),this.refresh()},_cellPosition:function(t){var e=this.getItemNode(t);return{left:e.offsetLeft+this._settings.nameWidth,top:e.offsetTop,height:e.firstChild.offsetHeight,width:this._data_width,parent:this._contentobj}},_clear:function(){for(var t=this._settings.elements,e=0;e<t.length;e++)t[e].value=""},clear:function(){this._clear(),this._props_dataset={},this.refresh()},setValues:function(t,e){var i=this;for(var s in this._settings.complexData&&(t=Nt.collapseNames(t,"",{},function(t){return P(i._idToLine[t])})),e||this._clear(),t){var n=this.getItem(s);n&&(n.value=t[s])}this._props_dataset=t,this.refresh()},getValues:function(){for(var t=I(this._props_dataset||{}),e=0;e<this._settings.elements.length;e++){var i=this._settings.elements[e];"label"!=i.type&&(t[i.id]=i.value)}return this._settings.complexData&&(t=Nt.expandNames(t)),t},refresh:function(){this.render()},$setSize:function(t,e){si.api.$setSize.call(this,t,e)&&(this._data_width=this._content_width-this._settings.nameWidth,this.render())},$getSize:function(t,e){if(this._settings.autoheight){var i=this._settings.elements.length;this._settings.height=Math.max(this.type.height*i,this._settings.minHeight||0)}return si.api.$getSize.call(this,t,e)},_toHTML:function(){var t=[],e=this._settings.elements;if(e)for(var i=0;i<e.length;i++){var s=e[i];s.css&&"object"==u(s.css)&&(s.css=et(s.css));var n='<div webix_f_id="'+s.id+'"'+("label"!==s.type?'role="option" tabindex="0"':"")+' class="webix_property_line '+(s.css||"")+'">';if("label"==s.type)t[i]=n+"<div class='webix_property_label_line'>"+s.label+"</div></div>";else{var a,r=this.on_render[s.type],o="<div class='webix_property_label' style='width:"+this._settings.nameWidth+"px'>"+s.label+"</div><div class='webix_property_value' style='width:"+this._data_width+"px'>";a=s.collection||s.options?s.template(s):s.format?s.format(s.value):s.value,r&&(a=r.call(this,s.value,s)),t[i]=n+o+a+"</div></div>"}}return t.join("")},type:{height:24,templateStart:Vt(""),templateEnd:Vt("</div>")},$skin:function(){this.type.height=ni.propertyItemHeight}}),Ia=(t.protoUI(Aa,li,Vi,Ji,Qi,as,ri,Ae,B,si.view),{name:"calendar",defaults:{date:new Date,select:!1,navigation:!0,monthSelect:!0,weekHeader:!0,monthHeader:!0,weekNumber:!1,skipEmptyWeeks:!1,calendarHeader:"%F %Y",events:mn.isHoliday,minuteStep:5,timeIcon:"wxi-clock",icons:!1,timepickerHeight:30,headerHeight:70,dayTemplate:function(t){return t.getDate()},width:260,height:250},dayTemplate_setter:Vt,calendarHeader_setter:mn.dateToStr,calendarTime_setter:function(t){return this._calendarTime=t,mn.dateToStr(t)},date_setter:function(t){return this._string_to_date(t)},maxDate_setter:function(t){return this._string_to_date(t)},minDate_setter:function(t){return this._string_to_date(t)},minTime_setter:function(t){return"string"==typeof t&&(t=[(t=St.parseTimeFormatDate(t)).getHours(),t.getMinutes()]),t},maxTime_setter:function(t){return"string"==typeof t&&(t=[(t=St.parseTimeFormatDate(t)).getHours(),t.getMinutes()]),t},_ariaFocus:function(){var t="focus"+(i.isIE?"in":"");i.touch||ee(this.$view,t,T(function(t){var e=t.target.className,i=-1!==e.indexOf("webix_cal_day")?"webix_cal_day":-1!==e.indexOf("webix_cal_block")?"webix_cal_block":"";if(new Date-Ve._tab_time>300&&new Date-Ve._mouse_time>100&&i){var s=t.relatedTarget;if(s&&!P(s.className)){var n="webix_cal_day"==i?this._locate_day(t.target):this._locate_date(t.target);this._moveSelection(n)}}},this),{capture:!i.isIE})},$init:function(){this._viewobj.className+=" webix_calendar",this._viewobj.setAttribute("role","region"),this._viewobj.setAttribute("aria-label",St.aria.calendar),this._special_dates={},this._selected_days={},this._zoom_level=0,this._ariaFocus(),this.attachEvent("onKeyPress",this._onKeyPress),this.attachEvent("onAfterZoom",function(t){t>=0&&this.$view.querySelector(".webix_cal_month_name").blur()})},minuteStep_setter:function(t){return Math.max(Math.min(t,60),this.defaults.minuteStep)},type_setter:function(t){return"time"==t?(this._zoom_in=!0,this._zoom_level=-1):"year"==t&&(this._fixed=!0),t},$setSize:function(t,e){si.api.$setSize.call(this,t,e)&&this.render()},$getSize:function(t,e){if(this._settings.cellHeight){var i=this._getDateBoundaries(this._settings.date);this._settings.height=this._settings.cellHeight*i._rows+(ni.calendarHeight||70)}return si.api.$getSize.call(this,t,e)},moveSelection:function(t,e,i){if(!this.config.master){var s=this.getSelectedDate();this.config.multiselect&&(s=s[0]);var n=mn.copy(s||this.getVisibleDate());this._moveSelection(n,t,i)}},_moveSelection:function(t,e,i){var s=this._zoom_logic[this._zoom_level]._keyshift(t,e,this);if(!1!==i){var n=this._viewobj.querySelector("."+s+"[tabindex='0']");n&&n.focus()}},_getDateBoundaries:function(t,e){if(!this._set_date_bounds||e){var i=t.getMonth(),s=t.getFullYear(),n=new Date(s,i+1,1),a=mn.weekStart(new Date(s,i,1)),r=Math.round((n.valueOf()-a.valueOf())/864e5),o=this._settings.skipEmptyWeeks?Math.ceil(r/7):6;this._set_date_bounds={_month:i,_start:a,_next:n,_rows:o}}return this._set_date_bounds},$skin:function(){ni.calendar&&(ni.calendar.width&&(this.defaults.width=ni.calendar.width),ni.calendar.height&&(this.defaults.height=ni.calendar.height),ni.calendar.headerHeight&&(this.defaults.headerHeight=ni.calendar.headerHeight),ni.calendar.timepickerHeight&&(this.defaults.timepickerHeight=ni.calendar.timepickerHeight))},_getColumnConfigSizes:function(t){for(var e=this._getDateBoundaries(t),i=this._settings,s=[],n=[],a=1/0,r=this._content_width-36,o=this._content_height-this._settings.headerHeight-10-(this._settings.timepicker||this._icons?this._settings.timepickerHeight:0),l=i.weekNumber?8:7,h=0;h<l;h++)n[h]=Math.ceil(r/(l-h)),r-=n[h],a=Math.min(a,n[h]);for(var c=e._rows,d=0;d<c;d++)s[d]=Math.ceil(o/(c-d)),o-=s[d],a=Math.min(a,s[d]);return[n,s,a]},icons_setter:function(t){t?"object"==u(t)?this._icons=t:this._icons=this._icons2:this._icons=null},_icons:[],_icons2:[{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_today webix_cal_icon'>"+St.calendar.today+"</span>"},on_click:{webix_cal_icon_today:function(){var t=new Date;this._settings.timepicker||(t=mn.datePart(t)),this.setValue(t),this.callEvent("onTodaySet",[this.getSelectedDate()])}}},{template:function(){return"<span role='button' tabindex='0' class='webix_cal_icon_clear webix_cal_icon'>"+St.calendar.clear+"</span>"},on_click:{webix_cal_icon_clear:function(){this.setValue(""),this.callEvent("onDateClear",[this.getSelectedDate()])}}}],refresh:function(){this.render()},render:function(){this._zoom_level=0,this._zoom_size=!1;var t=this._settings;if(this.isVisible(t.id)){this._current_time=mn.datePart(new Date),this.callEvent("onBeforeRender",[]);var e=this._settings.date,i=this._getDateBoundaries(e,!0),s=this._getColumnConfigSizes(e),n=s[0],a=s[1],r="";if(t.monthHeader&&(r+="<div class='webix_cal_month'><span aria-live='assertive' aria-atomic='true' class='webix_cal_month_name"+(t.monthSelect&&t.navigation?"' role='button' tabindex='0'":" webix_readonly'")+">"+t.calendarHeader(e)+"</span>",t.navigation&&(r+="<div role='button' tabindex='0' aria-label='"+St.aria.navMonth[0]+"' class='webix_cal_prev_button'></div><div role='button' tabindex='0' aria-label='"+St.aria.navMonth[1]+"' class='webix_cal_next_button'></div>"),r+="</div>"),t.weekHeader&&(r+="<div class='webix_cal_header' aria-hidden='true'>"+this._week_template(n)+"</div>"),r+="<div class='webix_cal_body'>"+this._body_template(n,a,i,s[2])+"</div>",(this._settings.timepicker||this._icons)&&(r+="<div class='webix_cal_footer'>",this._settings.timepicker&&(r+=this._timepicker_template(e)),this._icons&&(r+=this._icons_template()),r+="</div>"),this._contentobj.innerHTML=r,"time"==this._settings.type){var o=this._settings.date;o&&("string"==typeof o?e=St.parseTimeFormatDate(o):R(o)&&(e.setHours(o[0]),e.setMinutes(o[1]))),this._changeZoomLevel(-1,e)}else"month"==this._settings.type?this._changeZoomLevel(1,e):"year"==this._settings.type&&this._changeZoomLevel(2,e);this.callEvent("onAfterRender",[])}},_icons_template:function(e){for(var i="<div class='webix_cal_icons'>",s=this._icons,n=0;n<s.length;n++){if(s[n].template){var a="function"==typeof s[n].template?s[n].template:a(s[n].template);i+=a.call(this,e)}s[n].on_click&&t.extend(this.on_click,s[n].on_click)}return i+="</div>"},_timepicker_template:function(t){var e=this._settings.calendarTime||St.timeFormatStr,i=this._settings.timeIcon,s="";if(this._settings.master){var n=E(Zt(this._settings.master)._settings.value);for(var a in mn.equal(n.end,t)&&(n.start=n.end),n)s+="<div role='button' tabindex='0' class='webix_range_time_"+a+" webix_cal_time'><span class='webix_icon "+i+"'></span> "+e(n[a])+"</div>"}else s="<div role='button' tabindex='0' class='webix_cal_time"+(this._icons?" webix_cal_time_icons":"")+"'><span class='webix_icon "+i+"'></span> "+e(t)+"</div>";return s},_week_template:function(t){var e=this._settings,i="",s=0;e.weekNumber&&(s=1,i+="<div class='webix_cal_week_header' style='width: "+t[0]+"px;' >"+e.calendarWeekHeader+"</div>");for(var n=mn.startOnMonday?1:0,a=0;a<7;a++){var r=(n+a)%7,o=St.calendar.dayShort[r];i+="<div day='"+r+"' style='width: "+t[a+s]+"px;' >"+o+"</div>"}return i},blockDates_setter:function(t){return F(t,this.$scope)},_day_css:function(t,e){var i="",s=!1;return mn.equal(t,this._current_time)&&(i+=" webix_cal_today"),this._checkDate(t)||(i+=" webix_cal_day_disabled"),t.getMonth()!=e._month&&(s=!0,i+=" webix_cal_outside"),!s&&this._selectedDay(t)&&(i+=" webix_cal_select"),this._settings.events&&(i+=" "+(this._settings.events(t,s)||"")),i+=" webix_cal_day"},_body_template:function(t,e,i,s){for(var n=this._settings,a="",r=mn.datePart(mn.copy(i._start)),o=n.weekNumber?1:0,l=mn.getISOWeek(mn.add(r,2,"day",!0)),h=0;h<e.length;h++){a+="<div class='webix_cal_row' style='height:"+e[h]+"px;line-height:"+e[h]+"px'>",o&&(!r.getMonth()&&r.getDate()<7&&(l=mn.getISOWeek(mn.add(r,2,"day",!0))),a+="<div class='webix_cal_week_num' aria-hidden='true' style='width:"+t[0]+"px'>"+l+"</div>");for(var c=o;c<t.length;c++){var d=this._day_css(r,i),f=this._settings.dayTemplate.call(this,r),g=this._selectedDay(r),p="",_=r.getMonth()!=i._month;"object"==u(f)?(p=f.aria||p,f=f.text):p=mn.dateToStr(St.aria.dateFormat)(r),a+="<div day='"+c+"' role='gridcell' "+(_?"aria-hidden='true'":"")+" aria-label='"+p+"' tabindex='"+(g&&!_?"0":"-1")+"' aria-selected='"+(g&&!_?"true":"false")+"' class='"+d+"' style='text-align:center; width:"+t[c]+"px'><span aria-hidden='true' class='webix_cal_day_inner' style='display:inline-block; "+this._getCalSizesString(s,s)+"'>"+f+"</span></div>",(r=mn.add(r,1,"day")).getHours()&&(r=mn.datePart(r))}a+="</div>",l++}return a},_changeDate:function(t,e){var i=this._settings.date;e||(e=this._zoom_logic[this._zoom_level]._changeStep),this._zoom_level||(i=mn.copy(i)).setDate(1);var s=mn.add(i,t*e,"month",!0);this._changeDateInternal(i,s)},_changeDateInternal:function(t,e){this.callEvent("onBeforeMonthChange",[t,e])&&(this._zoom_level?this._update_zoom_level(e):this.showCalendar(e),this.callEvent("onAfterMonthChange",[e,t]))},_zoom_logic:{"-2":{_isBlocked:function(t){var e=this._settings,i=e.date,s=!1,n=e.minTime?e.minTime[0]:0,a=e.maxTime?e.maxTime[0]+(e.maxTime[1]?1:0):24,r=e.minTime&&i.getHours()==n?e.minTime[1]:0,o=e.maxTime&&e.maxTime[1]&&i.getHours()==a-1?e.maxTime[1]:60;if(this._settings.blockTime){var l=mn.copy(i);l.setMinutes(t),s=this._settings.blockTime(l)}return t<r||t>=o||s},_setContent:function(t,e){t.setMinutes(e)},_findActive:function(t,e,i){if(!this._isBlocked.call(i,t.getMinutes()))return t;var s=i._settings.minuteStep,n=mn.add(t,"right"==e?s:-s,"minute",!0);return t.getHours()===n.getHours()?this._findActive(n,e,i):void 0}},"-1":{_isBlocked:function(t){var e=this._settings,i=e.date,s=e.minTime?e.minTime[0]:0,n=e.maxTime?e.maxTime[0]+(e.maxTime[1]?1:0):24;if(t<s||t>=n)return!0;if(e.blockTime){var a=mn.copy(i);a.setHours(t);for(var r=e.minTime&&t==s?e.minTime[1]:0,o=e.maxTime&&e.maxTime[1]&&t==n-1?e.maxTime[1]:60,l=r;l<o;l+=e.minuteStep)if(a.setMinutes(l),!e.blockTime(a))return!1;return!0}},_setContent:function(t,e){t.setHours(e)},_keyshift:function(t,e,i){var s,n,a=i._settings.minuteStep;return"bottom"===e||"top"===e?(t.setHours("bottom"===e?23:0),t.setMinutes("bottom"===e?55:0),t.setSeconds(0),t.setMilliseconds(0),s=t):"left"===e||"right"===e?(n="right"===e?a:-a,"left"===e&&t.getMinutes()<a&&(n=60-a),"right"===e&&t.getMinutes()>=60-a&&(n=a-60),n-=t.getMinutes()%a,s=i._zoom_logic[-2]._findActive(mn.add(t,n,"minute"),e,i)):"up"===e||"down"===e?(n="down"===e?1:-1,"down"===e&&23===t.getHours()&&(n=-23),"up"===e&&0===t.getHours()&&(n=23),s=this._findActive(mn.add(t,n,"hour"),e,i)):!1===e&&(s=this._findActive(t,e,i)),i.selectDate(s,!1),s&&(i._update_zoom_level(s),i.selectDate(s,!1)),"webix_cal_block"+("left"===e||"right"===e?"_min":"")},_findActive:function(t,e,i){if(!this._isBlocked.call(i,t.getHours()))return t;var s=mn.add(t,"down"==e?1:-1,"hour",!0);return t.getDate()===s.getDate()?this._findActive(s,e,i):void 0}},0:{_changeStep:1,_keyshift:function(t,e,i){var s=t;return"pgup"===e||"pgdown"===e?s=mn.add(t,"pgdown"===e?1:-1,"month"):"bottom"===e?s=new Date(t.getFullYear(),t.getMonth()+1,0):"top"===e?s=new Date(t.setDate(1)):"left"===e||"right"===e?s=mn.add(t,"right"===e?1:-1,"day"):"up"!==e&&"down"!==e||(s=mn.add(t,"down"===e?1:-1,"week")),i._checkDate(s)||(s=i._findActive(t,e)),s&&i.selectDate(s,!0),"webix_cal_day"}},1:{_isBlocked:function(t,e){var i=!1,s=e._settings.minDate,n=e._settings.maxDate,a=e._settings.date.getFullYear();if(s){var r=s.getFullYear();i=a<r||a==r&&s.getMonth()>t}if(n&&!i){var o=n.getFullYear();i=a>o||a==o&&n.getMonth()<t}return i},_correctDate:function(t,e){return t<e._settings.minDate?t=mn.copy(e._settings.minDate):t>e._settings.maxDate&&(t=mn.copy(e._settings.maxDate)),mn.monthStart(t)},_getTitle:function(t){return t.getFullYear()},_getContent:function(t){return St.calendar.monthShort[t]},_setContent:function(t,e){e!=t.getMonth()&&t.setDate(1),t.setMonth(e)},_changeStep:12,_keyshift:function(t,e,i){var s=t;return"pgup"===e||"pgdown"===e?s=mn.add(t,"pgdown"===e?1:-1,"year"):"bottom"===e?s=new Date(t.setMonth(11)):"top"===e?s=new Date(t.setMonth(0)):"left"===e||"right"===e?s=mn.add(t,"right"===e?1:-1,"month"):"up"!==e&&"down"!==e||(s=mn.add(t,"down"===e?4:-4,"month")),i._checkDate(s)||(s=i._findActive(t,e)),s&&(i._update_zoom_level(s),i.selectDate(s,!1)),"webix_cal_block"}},2:{_isBlocked:function(t,e){t+=e._zoom_start_date;var i=e._settings.minDate,s=e._settings.maxDate;return!!(i&&i.getFullYear()>t||s&&s.getFullYear()<t)},_correctDate:function(t,e){return t<e._settings.minDate?t=mn.copy(e._settings.minDate):t>e._settings.maxDate&&(t=mn.copy(e._settings.maxDate)),mn.yearStart(t)},_getTitle:function(t,e){var i=t.getFullYear();return e._zoom_start_date=i=i-i%10-1,i+" - "+(i+10+1)},_getContent:function(t,e){return e._zoom_start_date+t},_setContent:function(t,e,i){t.setFullYear(i._zoom_start_date+e)},_changeStep:120,_keyshift:function(t,e,i){var s=t;return"pgup"===e||"pgdown"===e?s=mn.add(t,"pgdown"===e?10:-10,"year"):"bottom"===e?s=new Date(t.setYear(i._zoom_start_date+10)):"top"===e?s=new Date(t.setYear(i._zoom_start_date)):"left"===e||"right"===e?s=mn.add(t,"right"===e?1:-1,"year"):"up"!==e&&"down"!==e||(s=mn.add(t,"down"===e?4:-4,"year")),i._checkDate(s)||(s=i._findActive(t,e)),s&&(i._update_zoom_level(s),i.selectDate(s,!1)),"webix_cal_block"}}},_correctBlockedTime:function(){var t;if(this._zoom_logic[-1]._isBlocked.call(this,this._settings.date.getHours()))for(t=0;t<24;t++)if(!this._zoom_logic[-1]._isBlocked.call(this,t)){this._settings.date.setHours(t);break}if(this._zoom_logic[-2]._isBlocked.call(this,this._settings.date.getMinutes()))for(t=0;t<60;t+=this._settings.minuteStep)if(!this._zoom_logic[-2]._isBlocked.call(this,t)){this._settings.date.setMinutes(t);break}},_update_zoom_level:function(t){var e,i,s,n,a,r,o,l,h,c,d,u,f="";if(e=this._settings,a=e.weekHeader?2:1,c=this._zoom_logic[this._zoom_level],r=this._contentobj.childNodes,t&&(e.date=t),l=e.type,this._zoom_size||(this._reserve_box_height=this._contentobj.offsetHeight-e.headerHeight,"year"!=l&&"month"!=l?this._reserve_box_height-=e.timepickerHeight:this._icons&&(this._reserve_box_height-=10),this._reserve_box_width=r[a].offsetWidth,this._zoom_size=1),this._zoom_in){s=this._reserve_box_height/6;var g=6,p=this._calendarTime||St.timeFormat,_=p.match(/%([a,A])/);for(_&&g++,h=parseInt((this._reserve_box_width-3)/g,10),u=Math.min(h,s),f+="<div class='webix_time_header'>"+this._timeHeaderTemplate(h,_)+"</div>",f+="<div  class='webix_cal_body' style='height:"+this._reserve_box_height+"px'>",this._correctBlockedTime(),f+="<div class='webix_hours'>",o=e.date.getHours(),d=mn.copy(e.date),n=0;n<24;n++){if(i="",_&&n%4==0){var v=n?12==n?St.pm[0]:"":St.am[0];f+="<div class='webix_cal_block_empty"+i+"' style='"+this._getCalSizesString(h,s)+"clear:both;'>"+v+"</div>"}this._zoom_logic[-1]._isBlocked.call(this,n)?i+=" webix_cal_day_disabled":o==n&&(i+=" webix_selected"),d.setHours(n),f+="<div aria-label='"+mn.dateToStr(St.aria.hourFormat)(d)+"' role='gridcell' tabindex='"+(o==n?"0":"-1")+"' aria-selected='"+(o==n?"true":"false")+"' class='webix_cal_block"+i+"' data-value='"+n+"' style='"+this._getCalSizesString(h,s)+(n%4!=0||_?"":"clear:both;")+"'><span style='display:inline-block; "+this._getCalSizesString(u,u)+"'>"+mn.toFixed(_?n&&12!=n?n%12:12:n)+"</span></div>"}for(f+="</div>",f+="<div class='webix_minutes'>",o=e.date.getMinutes(),d=mn.copy(e.date),n=0;n<60;n+=e.minuteStep)i="",this._zoom_logic[-2]._isBlocked.call(this,n)?i=" webix_cal_day_disabled":o==n&&(i=" webix_selected"),d.setMinutes(n),f+="<div aria-label='"+mn.dateToStr(St.aria.minuteFormat)(d)+"' role='gridcell' tabindex='"+(o==n?"0":"-1")+"' aria-selected='"+(o==n?"true":"false")+"' class='webix_cal_block webix_cal_block_min"+i+"' data-value='"+n+"' style='"+this._getCalSizesString(h,s)+(n/e.minuteStep%2==0?"clear:both;":"")+"'><span style='display:inline-block; "+this._getCalSizesString(u,u)+"'>"+mn.toFixed(n)+"</span></div>";f+="</div>",f+="</div>",f+="<div  class='webix_time_footer'>"+this._timeButtonsTemplate()+"</div>",this._contentobj.innerHTML=f}else{var m=r[0].childNodes,b=St.aria["nav"+(1==this._zoom_level?"Year":"Decade")];for(m[0].innerHTML=c._getTitle(e.date,this),e.navigation&&(m[1].setAttribute("aria-label",b[0]),m[2].setAttribute("aria-label",b[1])),s=Math.floor(this._reserve_box_height/3),h=Math.floor(this._reserve_box_width/4),u=Math.min(s,h),this._checkDate(e.date)&&(o=1==this._zoom_level?e.date.getMonth():e.date.getFullYear()),n=0;n<12;n++){i=o==(1==this._zoom_level?n:c._getContent(n,this))?" webix_selected":"",c._isBlocked(n,this)&&(i+=" webix_cal_day_disabled");var x=St.aria[(1==this._zoom_level?"month":"year")+"Format"];f+="<div role='gridcell' aria-label='"+mn.dateToStr(x)(e.date)+"' tabindex='"+(-1!==i.indexOf("selected")?"0":"-1")+"' aria-selected='"+(-1!==i.indexOf("selected")?"true":"false")+"' class='webix_cal_block"+i+"' data-value='"+n+"' style='"+this._getCalSizesString(h,s)+"'><span style='display:inline-block; "+this._getCalSizesString(u,u)+"'>"+c._getContent(n,this)+"</span></div>"}a-1&&(r[a-1].style.display="none"),r[a].innerHTML=f,"year"!=l&&"month"!=l&&(r[a+1]?r[a+1].innerHTML=this._timeButtonsTemplate():this._contentobj.innerHTML+="<div  class='webix_time_footer'>"+this._timeButtonsTemplate()+"</div>"),r[a].style.height=this._reserve_box_height+"px"}},_getCalSizesString:function(t,e){return"width:"+t+"px; height:"+e+"px; line-height:"+e+"px;"},_timeButtonsTemplate:function(){return"<input type='button' style='width:100%' class='webix_cal_done' value='"+St.calendar.done+"'>"},_timeHeaderTemplate:function(t,e){var i=t*(e?5:4),s=2*t;return"<div class='webix_cal_hours' style='width:"+i+"px'>"+St.calendar.hours+"</div><div class='webix_cal_minutes' style='width:"+s+"px'>"+St.calendar.minutes+"</div>"},_changeZoomLevel:function(t,e){var i=this._zoom_level;this.callEvent("onBeforeZoom",[t,i])&&(this._zoom_level=t,t?this._update_zoom_level(e):this.showCalendar(e),this.callEvent("onAfterZoom",[t,i]))},_correctDate:function(t){return!this._checkDate(t)&&this._zoom_logic[this._zoom_level]._correctDate&&(t=this._zoom_logic[this._zoom_level]._correctDate(t,this)),t},_mode_selected:function(t){var e=this._locate_date(t),i=this._zoom_level-(this._fixed?0:1);if(e=this._correctDate(e),this._checkDate(e)){this._changeZoomLevel(i,e);var s=this._settings.type;"month"!=s&&"year"!=s||this._selectDate(e)}},_selectDate:function(t,e){this.callEvent("onBeforeDateSelect",[t])&&(this.selectDate(t,!0,e),this.callEvent("onDateSelect",[t]),this.callEvent("onAfterDateSelect",[t]))},_locate_day:function(t){var e=tt(t)-(this._settings.weekNumber?1:0),i=tt(t.parentNode),s=mn.add(this._getDateBoundaries()._start,e+7*i,"day",!0);return this._settings.timepicker&&(s.setHours(this._settings.date.getHours()),s.setMinutes(this._settings.date.getMinutes())),s},_locate_date:function(t){var e=1*t.getAttribute("data-value"),i=-1!=t.className.indexOf("webix_cal_block_min")?this._zoom_level-1:this._zoom_level,s=this._settings.date,n=mn.copy(s);return this._zoom_logic[i]._setContent(n,e,this),n},on_click:{webix_cal_prev_button:function(){this._changeDate(-1)},webix_cal_next_button:function(){this._changeDate(1)},webix_cal_day_disabled:function(){return!1},webix_cal_outside:function(){if(!this._settings.navigation)return!1},webix_cal_day:function(t,e,i){var s=this._locate_day(i),n="touch"===this._settings.multiselect||t.ctrlKey||t.metaKey;this._selectDate(s,n)},webix_cal_time:function(){if(this._zoom_logic[this._zoom_level-1]){this._zoom_in=!0;var t=this._zoom_level-1;this._changeZoomLevel(t)}},webix_range_time_start:function(){Zt(this._settings.master)._time_mode="start"},webix_range_time_end:function(){Zt(this._settings.master)._time_mode="end"},webix_cal_done:function(){var t=mn.copy(this._settings.date);t=this._correctDate(t),this._selectDate(t)},webix_cal_month_name:function(){if(this._settings.navigation&&(this._zoom_in=!1,2!=this._zoom_level&&this._settings.monthSelect)){var t=Math.max(this._zoom_level,0)+1;this._changeZoomLevel(t)}},webix_cal_block:function(t,e,i){if(this._zoom_in){if(-1!==i.className.indexOf("webix_cal_day_disabled"))return!1;var s=this._locate_date(i);this._update_zoom_level(s)}else-1==i.className.indexOf("webix_cal_day_disabled")&&this._mode_selected(i)}},_string_to_date:function(t,e){return t?("string"==typeof t&&(t=e?mn.strToDate(e)(t):St.parseFormatDate(t)),t):mn.datePart(new Date)},_checkDate:function(t){var e=this._settings.blockDates&&this._settings.blockDates.call(this,t),i=this._settings.minDate,s=this._settings.maxDate,n=t<i||t>s;return!e&&!n},_findActive:function(t,e){var i,s="top"===e||"left"===e||"pgup"===e||"up"===e?-1:1,n=mn.add(t,s,"day",!0);return this._checkDate(n)?n:(0===this._zoom_level?i=t.getMonth()===n.getMonth():1===this._zoom_level?i=t.getFullYear()===n.getFullYear():2===this._zoom_level&&(i=n.getFullYear()>this._zoom_start_date&&n.getFullYear()<this._zoom_start_date+10),i?this._findActive(n,e):void 0)},showCalendar:function(t){t=this._string_to_date(t),this._settings.date=t,this.render(),this.resize()},_selectedDay:function(t){return t&&this._selected_days[t.valueOf()]},getSelectedDate:function(){var t=[];for(var e in this._selected_days)t.push(mn.copy(this._selected_days[e]));return this.config.multiselect?t:t[0]||null},getVisibleDate:function(){return mn.copy(this._settings.date)},setValue:function(t){this.selectDate(t,!0)},getValue:function(t){var e=this.getSelectedDate();return t&&(e=mn.dateToStr(t)(e)),e},selectDate:function(t,e,i){if(t&&i&&this.config.multiselect||(this._selected_days={}),t){R(t)||(t=[t]);for(var s=0;s<t.length;s++){var n=this._string_to_date(t[s]),a=mn.datePart(mn.copy(n)).valueOf();if(this._selected_days[a]&&i?delete this._selected_days[a]:this._selected_days[a]=n,!this.config.multiselect)break}t.length&&e&&this.showCalendar(t[0])}!1!==e&&this.render(),this.callEvent("onChange",[t])},locate:function(){return null}}),Ea=(t.protoUI(Ia,Zi,Qi,si.view,B),{name:"colorboard",defaults:{template:'<div style="width:100%;height:100%;background-color:{obj.val}"></div>',palette:null,height:220,width:220,cols:12,rows:10,minLightness:.15,maxLightness:1,navigation:!0},$init:function(){ee(this._viewobj,"click",T(function(t){var e=lt(t,"webix_val");e&&(this.setValue(e),this.callEvent("onItemClick",[this._settings.value,t]),this.callEvent("onSelect",[this._settings.value]))},this)),this.$view.setAttribute("role","grid"),this._viewobj.setAttribute("aria-readonly","true")},_set_item_focus:function(){this.getValue()||this.moveSelection("up")},_findIndex:function(t){var e=this._settings.palette;t=(t||"").toUpperCase();for(var i=0,s=e.length;i<s;i++)for(var n=0,a=e[i].length;n<a;n++)if(e[i][n].toUpperCase()==t)return{row:i,col:n};return null},$setSize:function(t,e){si.api.$setSize.call(this,t,e)&&this.render()},getValue:function(){return this._settings.value},_getBox:function(){return this._viewobj.firstChild},setValue:function(t){t&&"#"!=t.toString().charAt(0)&&(t="#"+t);var e=this._settings.value;return this._settings.value=t,this.$setValue(t,e),t},_selectBox:null,_getSelectBox:function(){if(this._selectBox&&this._selectBox.parentNode)return this._selectBox;var t=this._selectBox=document.createElement("div");return t.className="webix_color_selector",this._viewobj.lastChild.appendChild(t),t},$setValue:function(t,e){if(this.isVisible(this._settings.id)){var i,s,n,a,r,o=0,l=0;if(e&&(n=this._findIndex(e)),n||(n={row:0,col:0}),this._viewobj.lastChild.childNodes[n.row].childNodes[n.col].setAttribute("tabindex","-1"),(n=this._findIndex(t))&&(i=this._viewobj.lastChild.childNodes[n.row].childNodes[n.col]),!(i&&i.parentNode&&i.parentNode.parentNode))return this._selectBox&&(this._selectBox.style.left="-100px"),void this._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0");a=i.parentNode,o=i.offsetLeft-a.offsetLeft,l=-(this.$height-(i.offsetTop-a.parentNode.offsetTop)),i.setAttribute("tabindex","0"),i.setAttribute("aria-selected","true"),i.setAttribute("tabindex","0"),i.setAttribute("aria-selected","true"),s=this._getSelectBox(),r=["left:"+o+"px","top:"+l+"px","width:"+i.style.width,"height:"+i.style.height].join(";"),void 0!==s.style.cssText?s.style.cssText=r:s.setAttribute("style",r)}},_initPalette:function(t){function e(t){return os.toHex(t,2)}function i(t,i,s){return"#"+e(Math.floor(t))+e(Math.floor(i))+e(Math.floor(s))}function s(t,e,i){var s,a,r;if(e){var o=i<.5?i*(1+e):i+e-i*e,l=2*i-o;s=n(l,o,t+1/3),a=n(l,o,t),r=n(l,o,t-1/3)}else s=a=r=i;return{r:255*s,g:255*a,b:255*r}}function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<=.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var a=[],r=t.rows-1,o=1/t.cols,l=(t.maxLightness-t.minLightness)/r,h=null;a.push(function(t){for(var e=[],s=255,n=s/t,a=0;a<t;a++)s=Math.round(s>0?s:0),e.push(i(s,s,s)),s-=n;return e[e.length-1]="#000000",e}(t.cols));for(var c=0,d=t.minLightness;c<r;c++){h=[];for(var u=0,f=0;u<t.cols;u++){var g=s(f,1,d);h.push(i(g.r,g.g,g.b)),f+=o}a.push(h),d+=l}this._settings.palette=a},moveSelection:function(t,e,i){var s,n,a=this.getValue();if(a&&(s=this._findIndex(a)),s||(s={row:0,col:0}),s&&("up"==t||"down"==t?s.row=s.row+("up"==t?-1:1):"right"==t||"left"==t?s.col=s.col+("right"==t?1:-1):"top"==t?s.row=s.col=0:"bottom"==t&&(s.row=this._viewobj.lastChild.querySelectorAll(".webix_color_row").length-1,s.col=this._viewobj.lastChild.childNodes[s.row].childNodes.length-1),s.row=Math.max(s.row,0),s.row>=0&&(n=this._viewobj.lastChild.childNodes[s.row].childNodes[s.col]),n&&(a=n.getAttribute("webix_val"),this.setValue(a),this.callEvent("onSelect",[this._settings.value]),!1!==i))){var r=this._viewobj.querySelector("div[tabindex='0']");r&&r.focus()}},render:function(){if(this.isVisible(this._settings.id)){this._settings.palette||this._initPalette(this._settings);var t=this._settings.palette;this.callEvent("onBeforeRender",[]);for(var e=this._settings,i=Vt('<div role=\'gridcell\' tabindex=\'-1\' aria-label="{obj.val}" style="width:{obj.width}px;height:{obj.height}px;" webix_val="{obj.val}">'+(e.template||"")+"</div>"),s={width:0,height:0,val:0},n=this.$width,a=this.$height,r=[],o='<div class="webix_color_palette"role="rowgroup">',l="object"==u(t[0])?t[0]:t,h=0;h<l.length;h++)r[h]=Math.floor(n/(l.length-h)),n-=r[h];if("object"==u(t[0]))for(var c=0;c<t.length;c++){var d=Math.floor(a/(t.length-c));a-=d;var f=t[c];o+=g(f,r,d)}else o+=g(t,r,a);o+="</div>",this._viewobj.innerHTML=o,this._selectBox=null,this._settings.value?this.$setValue(this._settings.value):this._viewobj.lastChild.childNodes[0].childNodes[0].setAttribute("tabindex","0"),this.callEvent("onAfterRender",[])}function g(t,e,n){for(var a='<div class="webix_color_row" role="row">',r=0;r<t.length;r++)s.width=e[r],s.height=n,s.val=t[r],a+=i(s);return a+="</div>"}},refresh:function(){this.render()}}),Ta=(t.protoUI(Ea,Zi,si.view,B),{name:"button",touchable:!0,$skin:function(){this.defaults.height=ni.buttonHeight||ni.inputHeight,this._labelTopHeight=ni.labelTopHeight||15,this._borderWidth=ni.borderWidth},defaults:{template:function(t,e){var i=e.$renderInput(t,e);return t.badge&&(i=i.replace("</button>","<span class='webix_badge'>"+t.badge+"</span></button>")),"<div class='webix_el_box' style='width:"+t.awidth+"px; height:"+t.aheight+"px'>"+i+"</div>"},label:"",borderless:!0},$renderInput:function(t){return"<button type='button' "+(t.popup?"aria-haspopup='true'":"")+" class='webix_button'>"+Vt.escape(t.label||t.value)+"</button>"},$init:function(t){this._viewobj.className+=" webix_control webix_el_"+(this.$cssName||this.name),this._set_default_css(t),this.data=this._settings,this._dataobj=this._viewobj,this.$ready.push(function(){this._calc_size(this.config)})},hotkey_setter:function(t){var e=this;this._addElementHotKey(t,function(t,i){if(e.isVisible()){var s=e.$view.firstChild;gt(s,"MouseEvents","click"),ut(i)}})},_set_default_css:function(t){t.type&&this._deprecated_css_types[t.type]?this._viewobj.className+=" "+this._deprecated_css_types[t.type]:t.css&&this._get_class(t.css)&&(!this.defaults.css||this._get_class(this.defaults.css))||(this._viewobj.className+=" webix_secondary")},_get_class:function(t){if("string"==typeof t)for(var e in{webix_danger:1,webix_transparent:1,webix_primary:1})if(-1!==t.indexOf(e))return!0;return!1},_deprecated_css_types:{form:"webix_primary",danger:"webix_danger"},_deprecated_types:{imageButton:"image",imageButtonTop:"imageTop",iconButton:"icon",iconButtonTop:"iconTop"},_addElementHotKey:function(t,e,i){var s=Ve.addHotKey(t,e,i);this.attachEvent("onDestruct",function(){Ve.removeHotKey(s,e,i)})},type_setter:function(t){return this._deprecated_types[t]&&(t=this._deprecated_types[t]),this._types[t]&&(this.$renderInput=Vt(this._types[t])),t},_set_inner_size:!1,_types:{htmlbutton:"<button type='button' class='webix_button'>#label#</button>",image:"<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><img class='webix_image' style='max-width:#cheight#px; max-height:#cheight#px;' src = '#image#'>#label#</button>",imageTop:"<button type='button' class='webix_button webix_img_btn_top'><div class='webix_image' style='width:100%;height:100%;background-image:url(#image#);'></div><div class='webix_img_btn_text'>#label#</div></button>",icon:"<button type='button' class='webix_button webix_img_btn' style='line-height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;'></span>#label#</button>",iconTop:"<button type='button' class='webix_button webix_img_btn_top' style='width:100%;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#label#</div></button>"},_findAllInputs:function(){for(var t=[],e=["input","select","textarea","button"],i=0;i<e.length;i++)for(var s=this.$view.getElementsByTagName(e[i]),n=0;n<s.length;n++)t.push(s[n]);return t},disable:function(){var t,e,i=this._getBox();if(ti.api.disable.apply(this,arguments),i&&-1==i.className.indexOf(" webix_disabled_box")){i.className+=" webix_disabled_box";var s=this._findAllInputs();for(t=0;t<s.length;t++)s[t].setAttribute("disabled",!0);if((e=this.getInputNode())&&"div"==e.tagName.toLowerCase()&&(this._disabledTabIndex=e.getAttribute("tabIndex"),e.removeAttribute("tabIndex")),"top"==this._settings.labelPosition){var n=this._dataobj.firstChild;n&&(n.className+=" webix_disabled_top_label")}}},enable:function(){ti.api.enable.apply(this,arguments);var t,e=this._getBox();if(e){e.className=e.className.replace(" webix_disabled_box","");for(var i=this._findAllInputs(),s=0;s<i.length;s++)i[s].removeAttribute("disabled");if((t=this.getInputNode())&&!P(this._disabledTabIndex)&&t.setAttribute("tabIndex",this._disabledTabIndex),"top"==this._settings.labelPosition){var n=this._dataobj.firstChild;n&&(n.className=n.className.replace(" webix_disabled_top_label",""))}}},$setSize:function(t,e){si.api.$setSize.call(this,t,e)&&this.render()},setValue:function(t){t=this.$prepareValue(t);var e=this._settings.value;if(this.$compareValue(e,t))return!1;this._settings.value=t,this._rendered_input&&this.$setValue(t),this.callEvent("onChange",[t,e])},$compareValue:function(t,e){return"number"==typeof e&&(e=e.toString()),"number"==typeof t&&(t=t.toString()),t==e},$prepareValue:function(t){return this._pattern(t,!1)},_pattern:function(t){return 0===t?"0":(t||"").toString()},$setValue:function(t){var e=this.getInputNode();e&&("BUTTON"==e.tagName?e.innerHTML=t:e.value=t)},getValue:function(){var t=this._rendered_input?this.$getValue():this._settings.value;return void 0===t?"":t},$getValue:function(){return this._settings.value||""},focus:function(){if(!Ve.canFocus(this))return!1;var t=this.getInputNode();t&&t.focus&&t.focus()},blur:function(){var t=this.getInputNode();t&&t.blur&&t.blur()},getInputNode:function(){return this._dataobj.getElementsByTagName("input")[0]||this._dataobj.getElementsByTagName("button")[0]},_getBox:function(){for(var t=0;t<this._dataobj.childNodes.length;t++)if(this._dataobj.childNodes[t].className.indexOf("webix_el_box")>=0)return this._dataobj.childNodes[t];return null},_get_tooltip_data:function(t,e){var i=e.target||e.srcElement,s=this._getBox();return s&&s.contains(i)?this._settings:null},_sqrt_2:Math.sqrt(2),_calc_size:function(t){if((t=t||this._settings).autowidth){var e=vt(t.value||t.label||"","webixbutton").width+(t.badge?16:0)+("iconButton"===t.type||"icon"===t.type?24:0)+("imageButton"===t.type||"image"===t.type?t.height-ni.inputPadding:0);e=Math.max(t.minWidth||0,e),t.width=Math.min(t.maxWidth||1/0,e)}},_calck_input_size:function(){this._input_width=this._settings.inputWidth||(this._content_width-this._settings.width>2?this._settings.width:0)||this._content_width,this._input_height=this._settings.inputHeight||this._inputHeight||0},resize:function(){return this._calc_size(),si.api.resize.apply(this,arguments)},render:function(){if(this._calck_input_size(),this._settings.awidth=this._input_width||this._content_width,this._settings.aheight=this._input_height||this._content_height,this._settings.bheight=this._settings.aheight+2,this._settings.cheight=this._settings.aheight-2*ni.inputPadding,this._settings.dheight=this._settings.cheight-2,Ie.render.call(this)){if(this._rendered_input=!0,this._set_inner_size&&this._set_inner_size(),this._settings.align){var t=this._dataobj.firstChild;switch("top"==this._settings.labelPosition&&t.nextSibling&&(t=t.nextSibling),this._settings.align){case"right":t.style.cssFloat="right",t.style.textAlign="right";break;case"center":t.style.display="inline-block",t.parentNode.style.textAlign="center";break;case"middle":t.style.marginTop=Math.round((this._content_height-this._input_height)/2)+"px";break;case"bottom":t.style.marginTop=this._content_height-this._input_height+"px";break;case"left":t.style.cssFloat="left";break;default:_(!1,"Unknown align mode: "+this._settings.align)}}this.$render&&this.$render(this.data),this._settings.disabled&&this.disable(),this._init_once&&(this._init_once(this.data),this._init_once=0)}},refresh:function(){this.render()},on_click:{_handle_tab_click:function(t){var e=lt(t,"button_id");e&&this.callEvent("onBeforeTabClick",[e,t])&&(this.setValue(e),this.callEvent("onAfterTabClick",[e,t]))},webix_all_segments:function(t,e){this.on_click._handle_tab_click.call(this,t,e)},webix_all_tabs:function(t,e){this.on_click._handle_tab_click.call(this,t,e)},webix_inp_counter_next:function(){this._settings.readonly||this.next()},webix_inp_counter_prev:function(){this._settings.readonly||this.prev()},webix_input_icon:function(){this.getInputNode().focus()},webix_inp_checkbox_border:function(t){this._settings.disabled||"DIV"==(t.target||t.srcElement).tagName||this._settings.readonly||this.toggle()},webix_inp_checkbox_label:function(){this._settings.readonly||this.toggle()},webix_inp_radio_border:function(t){var e=lt(t,"radio_id");this.setValue(e),this.focus()},webix_inp_radio_label:function(t,e,i){return i=i.parentNode.getElementsByTagName("input")[0],this.on_click.webix_inp_radio_border.call(this,i,e,i)},webix_tab_more_icon:function(t,e,i){this.getPopup().resize(),this.getPopup().show(i,null,!0)},webix_tab_close:function(t){var e=lt(t,"button_id");e&&this.callEvent("onBeforeTabClose",[e,t])&&this.removeOption(e)}},_check_options:function(t){_(t,this.name+": options not defined");for(var e=0;e<t.length;e++)_(!t[e].text,"Please replace .text with .value in control config"),_(!t[e].label,"Please replace .label with .value in control config"),"string"==typeof t[e]?t[e]={id:t[e],value:t[e]}:(P(t[e].id)&&(t[e].id=t[e].value),P(t[e].value)&&(t[e].value=t[e].id));return t},_get_div_placeholder:function(t){var e=t?t.placeholder:this._settings.placeholder;return e?"<span class='webix_placeholder'>"+e+"</span>":""}}),Ma=t.protoUI(Ta,si.view,li,Ie,Ye,B),Pa={api:Ta,view:Ma},La={name:"label",defaults:{template:"<div class='webix_el_box' style='width:#awidth#px;height:#aheight#px;line-height:#cheight#px'>#label#</div>"},$skin:function(){this.defaults.height=ni.inputHeight},focus:function(){return!1},_getBox:function(){return this._dataobj.firstChild},setHTML:function(t){this._settings.label=t,this.refresh()},setValue:function(t){this._settings.label=t,Pa.api.setValue.apply(this,arguments)},$setValue:function(t){this._dataobj.firstChild.innerHTML=t},_set_inner_size:!1,_set_default_css:function(){},_calc_size:function(t){var e="webix_el_box webixlabel"+(this.queryView("toolbar","parent")?" webixtoolbarlabel":"");(t=t||this._settings).autowidth&&(t.width=vt(t.label,e).width)}},za=(t.protoUI(La,Pa.view),{});for(var Na in Ve._controls)za[Ve._controls[Na]]=Na;var $a={9:"tab",38:"up",40:"down",37:"left",39:"right"},Da={$init:function(t){var e=this.defaults.pattern||t.pattern,i=this.defaults.format||t.format;t.value=P(t.value)?"":t.value,(e||i&&!this.format_setter)&&(this.attachEvent("onKeyPress",function(t,e){e.ctrlKey||e.altKey||this._settings.readonly||this._custom_format||(t>105&&t<112&&(t-=64),za[t]&&8!==t&&46!==t?$a[t]||ut(e):(ut(e),this._on_key_pressed(e,t)))}),this.attachEvent("onAfterRender",this._after_render),this.getText=function(){return this.getInputNode().value},this._pattern=function(t,e){return!1===e?this._getRawValue(t):this._matchPattern(t)},i&&("object"===u(i)?this._custom_format=i:(i=bn.getConfig(i),this._custom_format={parse:function(t){return bn.parse(t,i)},edit:function(t){return bn.format(t,i)}})))},pattern_setter:function(t){var e=Tn[t]||t;return"string"==typeof e&&(e={mask:e}),e.allow=e.allow||/[A-Za-z0-9]/g,this._patternScheme(e),e},_init_validation:function(){this.config.validate=this.config.validate||T(function(){var t=this.getText(),e=t.replace(this._pattern_chars,""),i=(t.toString().match(this._pattern_allows)||[]).join("");return i.length==e.length&&t.length==this._settings.pattern.mask.length},this)},_after_render:function(){var t=i.isIE8?"propertychange":"input";this._custom_format||ee(this.getInputNode(),t,function(){var t=(new Date).valueOf();this.$view.offsetWidth,(!this._property_stamp||t-this._property_stamp>100)&&(this._property_stamp=t,this.$setValue(this.getText()))},{bind:this}),ee(this.getInputNode(),"blur",function(){this._applyChanges()},{bind:this})},_patternScheme:function(t){for(var e=t.mask,i={},s="",n=0,a=0;a<e.length;a++)"#"===e[a]?(i[a]=n,n++):(i[a]=!1,-1===s.indexOf(e[a])&&(s+="\\"+e[a]));this._pattern_allows=t.allow,this._pattern_chars=new RegExp("["+s+"]","g"),this._pattern_scheme=i,this._init_validation()},_on_key_pressed:function(t,e){var i=this.getInputNode(),s=i.value,n=yt(i),a="";8==e||46==e?n.start==n.end&&(8==e?n.start--:n.end++):(a=String.fromCharCode(e),t.shiftKey||(a=a.toLowerCase())),s=s.substr(0,n.start)+a+s.substr(n.end),n=this._getCaretPos(a,s.length,n.start,e),this._input_code=e,this.$setValue(s),xt(i,n)},_getCaretPos:function(t,e,i,s){if(t&&t.match(this._pattern_allows)||8==s||46==s)i=t?i+1:i,i=this._fixCaretPos(i,s);else if(e-1==i&&8!==s&&46!==s){var n=this._settings.pattern.mask.indexOf("#",i);n>0&&(i+=n)}return i},_fixCaretPos:function(t,e){var i=t-1*(46!==e);return!1===this._pattern_scheme[i]?(t+=8==e?-1:1,this._fixCaretPos(t,e)):!1===this._pattern_scheme[t]&&8!==e?this._fixCaretPos(t+1,e)-1:t},_getRawValue:function(t){if(this._custom_format)return this._custom_format.parse(t);var e=(t=t||0===t?t:"").toString().match(this._pattern_allows)||[];return e.join("").replace(this._pattern_chars,"")},_matchPattern:function(t){if(this._custom_format)return this._custom_format.edit(this._custom_format.parse(t));var e=this._getRawValue(t),i=this._settings.pattern.mask,s=this._settings.pattern.mask,n=this._pattern_scheme,a=!1,r=0,o=0,l=0;for(var h in n)if(!1!==n[h]){if(!a){r=1*h,o=n[h];var c=e[o]||"",d=e[o+1];i=(c?i.substr(0,r):"")+c+(c&&d?i.substr(r+1):""),d||(a=!0)}l++}var u=this._input_code;if(u&&8!==u||!u&&l-1===o&&i.length<s.length)if(e){var f=r+1;if("#"!==s.charAt(f)&&i.length<s.length){var g=s.indexOf("#",f);g<0&&(g=s.length),i+=s.substr(f,g-f)}}else 46!==u&&(i+=s.substr(0,s.indexOf("#")));return this._input_code=null,i}},Ha={name:"text",$allowsClear:!0,_init_onchange:function(){this.$allowsClear&&(this._onBlur||ee(this.getInputNode(),"change",this._applyChanges,{bind:this}),this._settings.suggest&&Zt(this._settings.suggest).linkInput(this))},_applyChanges:function(){var t=this.getValue(),e=this.setValue(t,!0);this._custom_format&&!1===e&&this.$setValue(t)},$skin:function(){this.defaults.height=ni.inputHeight,this.defaults.inputPadding=ni.inputPadding,this._inputSpacing=ni.inputSpacing},$init:function(t){"top"==t.labelPosition&&P(t.height)&&this.defaults.height&&(t.height=this.defaults.height+(t.label?this._labelTopHeight:0)),this._destroy_with_me=[],this.attachEvent("onAfterRender",this._init_onchange),this.attachEvent("onBlur",function(){this._onBlur&&this._onBlur()})},$renderIcon:function(){var t=this._settings;if(t.icon){var e=t.aheight-2*t.inputPadding,i=(e-18)/2-1,s=this.addSection?"role='button' tabindex='0' aria-label='"+St.aria["multitext"+(t.mode||"")+"Section"]+"'":"";return"<span style='height:"+(e-i)+"px;padding-top:"+i+"px;' class='webix_input_icon "+t.icon+"' "+s+"></span>"}return""},relatedView_setter:function(t){return this.attachEvent("onChange",function(){var t=this.getValue(),e=this._settings.relatedAction,i=this._settings.relatedView,s=Zt(i);if(!s){var n=this.getTopParentView();n&&n.$$&&(s=n.$$(i))}_(s,"Invalid relatedView: "+i),"enable"==e?t?s.enable():s.disable():t?s.show():s.hide()}),t},validateEvent_setter:function(t){return"blur"==t&&this.attachEvent("onBlur",this.validate),"key"==t&&this.attachEvent("onTimedKeyPress",this.validate),t},validate:function(){var t=this._settings.validate;!t&&this._settings.required&&(t=Ti.isNotEmpty);var e=this.getFormView(),i=this._settings.name,s=this.getValue(),n={};return n[i]=s,_(e,"Validation works only for fields in the form"),_(i,"Validation works only for fields with name"),!(t&&!e._validate(t,s,n,i))},bottomLabel_setter:function(t){return this._settings.bottomPadding||(this._settings.bottomPadding=18),t},_getInvalidText:function(){var t=this._settings.invalidMessage;return"function"==typeof t&&t.call(this),t},setBottomText:function(t,e){var i=this._settings;if(void 0!==t){if(i.bottomLabel==t)return;i.bottomLabel=t}var s=(i.invalid?i.invalidMessage:"")||i.bottomLabel;s||i.bottomPadding||(i.inputHeight=0),s&&!i.bottomPadding?(this._restorePadding=1,i.bottomPadding=i.bottomPadding||e||18,this.render(),this.adjust(),this.resize()):!s&&this._restorePadding?(i.bottomPadding=this._restorePadding=0,i.height||this.render(),this.adjust(),this.resize()):this.render()},$getSize:function(){var t=si.api.$getSize.apply(this,arguments),e=this.config.bottomPadding;return e&&(t[2]+=e,t[3]+=e),t},$setSize:function(t,e){var i=this._settings;if(si.api.$setSize.call(this,t,e)){if(!t||!e)return;"top"==i.labelPosition?(i.inputHeight||(this._inputHeight=this._content_height-(i.label?this._labelTopHeight:0)-(this.config.bottomPadding||0)),i.labelWidth=0):i.bottomPadding&&(i.inputHeight=this._content_height-this.config.bottomPadding),this.render()}},_get_input_width:function(t){var e=(this._input_width||0)-(t.label?this._settings.labelWidth:0)-this._inputSpacing-(t.iconWidth||0);return e<0?0:e},_render_div_block:function(t,e){var i="x"+$(),s=e._get_input_width(t),n=t.inputAlign||"left",a=this._settings.aheight-2*ni.inputPadding-2*this._borderWidth,r=t.text||t.value||this._get_div_placeholder(t),o="<div class='webix_inp_static' role='combobox' aria-label='"+Vt.escape(t.label)+"' tabindex='0'"+(t.readonly?" aria-readonly='true'":"")+(t.invalid?"aria-invalid='true'":"")+" onclick='' style='line-height:"+a+"px;width: "+s+"px; text-align: "+n+";' >"+r+"</div>";return e.$renderInput(t,o,i)},_baseInputHTML:function(t){var e="<"+t+(this._settings.placeholder?" placeholder='"+this._settings.placeholder+"' ":" ");this._settings.readonly&&(e+="readonly='true' aria-readonly=''"),this._settings.required&&(e+="aria-required='true'"),this._settings.invalid&&(e+="aria-invalid='true'");var i=this._settings.attributes;if(i)for(var s in i)e+=s+"='"+i[s]+"' ";return e},$renderLabel:function(t,e){var i="";if(t.label){var s=t.labelAlign||"left",n="top"==this._settings.labelPosition,a=n?"display:block;":"width: "+this._settings.labelWidth+"px;",r=this._getLabelHeight(n);i="<label style='"+a+"text-align: "+s+";line-height:"+r+"px;' onclick='' for='"+e+"' class='webix_inp_"+(n?"top_":"")+"label "+(t.required?"webix_required":"")+"'>"+(t.label||"")+"</label>"}return i},_getLabelHeight:function(t){return t?this._labelTopHeight-this._settings.inputPadding:this._settings.aheight-2*this._settings.inputPadding},$renderInput:function(t,e,i){var s=t.inputAlign||"left",n="top"==t.labelPosition,a=this._get_input_width(t);i=i||$();var r=this.$renderLabel(t,i),o="";if(e)o+=e;else{var l=Vt.escape(t.text||this._pattern(t.value));o+=this._baseInputHTML("input")+"id='"+i+"' type='"+(t.type||this.name)+"'"+(t.editable?" role='combobox'":"")+" value='"+l+"' style='width: "+a+"px; text-align: "+s+";'";var h=t.attributes;if(h)for(var c in h)o+=" "+c+"='"+h[c]+"'";o+=" />"}var d=this.$renderIcon?this.$renderIcon(t):"";o+=d;var u="";u=n?r+"<div class='webix_el_box' style='width:"+t.awidth+"px; height:"+t.aheight+"px'>"+o+"</div>":"<div class='webix_el_box' style='width:"+t.awidth+"px; height:"+t.aheight+"px'>"+r+o+"</div>";var f=t.awidth-a-2*ni.inputPadding,g=(t.invalid?t.invalidMessage:"")||t.bottomLabel;return g&&(u+="<div class='webix_inp_bottom_label'"+(t.invalid?"role='alert' aria-relevant='all'":"")+" style='width:"+(a||t.awidth)+"px;margin-left:"+Math.max(f,ni.inputPadding)+"px;'>"+g+"</div>"),u},defaults:{template:function(t,e){return e.$renderInput(t)},label:"",labelWidth:80},type_setter:function(t){return t},_set_inner_size:!1,_set_default_css:function(){},$setValue:function(t){this.getInputNode().value=this._pattern(t)},$getValue:function(){return this._pattern(this.getInputNode().value,!1)},suggest_setter:function(e){if(e){if(_(!0!==e,"suggest options can't be set as true, data need to be provided instead"),"string"==typeof e){var i=Zt(e);if(i)return Zt(e)._settings.id;e={body:{url:e,dataFeed:e}}}else e.getItem?e={body:{data:e}}:R(e)?e={body:{data:this._check_options(e)}}:e.body||(e.body={});t.extend(e,{view:"suggest"});var s=Xt(e);return this._destroy_with_me.push(s),s._settings.id}return!1}},Fa=t.protoUI(Ha,Da,Pa.view),Ra={api:Ha,view:Fa},ja=t.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data._filter_order||this._settings.dataFeed)},$init:function(t){this.data.provideApi(this,!0);var e=t&&t.id?t.id:$();this._settings.id=e,Xt.views[e]=this,this.data.attachEvent("onStoreLoad",T(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},Ei,Xe,qe,$s,$i,Ji,B,Ke,We,Ye);g("DataCollection",ja);var Oa={name:"select",defaults:{template:function(t,e){var i=e._check_options(t.options),s="x"+$(),n=e._baseInputHTML("select")+"id='"+s+"' style='width:"+e._get_input_width(t)+"px;'>",a=Zt(i);if(a&&a.data&&a.data.each)a.data.each(function(e){n+="<option"+(e.id==t.value?" selected='true'":"")+" value='"+e.id+"'>"+e.value+"</option>"});else for(var r=0;r<i.length;r++)n+="<option"+(i[r].id==t.value?" selected='true'":"")+" value='"+i[r].id+"'>"+i[r].value+"</option>";return n+="</select>",e.$renderInput(t,n,s)}},options_setter:function(t){if(t){if("string"==typeof t){var e=new ja({url:t});return e.data.attachEvent("onStoreLoad",T(this.refresh,this)),e}return t}},getInputNode:function(){return this._dataobj.getElementsByTagName("select")[0]}},Ba=(t.protoUI(Oa,Ra.view),{name:"checkbox",defaults:{checkValue:1,uncheckValue:0,template:function(t,e){var i="x"+$(),s="";t.labelRight&&(s="<label class='webix_label_right'>"+t.labelRight+"</label>",t.labelWidth&&(t.label=t.label||"&nbsp;"));var n=t.checkValue==t.value,a=Math.floor((e._settings.aheight-16)/2),r=e._baseInputHTML("input")+"style='margin-top:"+a+"px;"+(t.customCheckbox?"display:none":"")+"' id='"+i+"' type='checkbox' "+(n?"checked='1'":"")+(t.labelRight?" aria-label='"+Vt.escape(t.labelRight)+"'":"")+"/>",o="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(n?"1":"0"),l=t.customCheckbox||"";l&&(l=(l=(l=l.replace(/(aria-checked=')\w*(?=')/,"$1"+(t.value==t.checkValue?"true":"false"))).replace(/(aria-label=')\w*(?=')/,"$1"+Vt.escape(t.labelRight||t.label))).replace(/(aria-invalid=')\w*(?=')/,"$1"+(t.invalid?"true":"false")));var h="<div style='line-height:"+e._settings.cheight+"px' class='"+o+"'>"+r+l+s+"</div>";return e.$renderInput(t,h,i)}},customCheckbox_setter:function(t){return!0===t&&ni.customCheckbox&&(t="<a role='presentation' onclick='javascript:void(0)'><button role='checkbox' aria-checked='false' aria-label='' type='button' aria-invalid='' class='webix_custom_checkbox'></button></a>"),t},blur:function(){var t=this.getInputNode();t&&t.blur()},_pattern:function(t){return t},_init_onchange:function(){},$setValue:function(t){var e=t==this._settings.checkValue,i=this.$view.getElementsByTagName("input")[0],s=i?i.parentNode:null;if(s&&this._settings.customCheckbox){var n=s.getElementsByTagName("BUTTON");n[0]&&n[0].setAttribute("aria-checked",e?"true":"false")}s&&(s.className=s.className.replace(/(webix_checkbox_)\d/,"$1"+(e?1:0))),i.checked=e},toggle:function(){var t=this.getValue()!=this._settings.checkValue?this._settings.checkValue:this._settings.uncheckValue;this.setValue(t)},getValue:function(){var t=this._settings.value;return t==this._settings.checkValue?this._settings.checkValue:this._settings.uncheckValue},getInputNode:function(){return this.$view.getElementsByTagName(this._settings.customCheckbox?"button":"input")[0]},$skin:function(){this.defaults.customCheckbox=!!ni.customCheckbox}}),Va=t.protoUI(Ba,Ra.view),Ya={api:Ba,view:Va},Wa={name:"radio",defaults:{template:function(t,e){for(var i,s=e._check_options(t.options),n=[],a=0;a<s.length;a++){var r="x"+$();i=i||r,a&&(s[a].newline||t.vertical)&&n.push("<div class='webix_line_break'></div>");var o=s[a].id==t.value,l=s[a].value||"",h=t.tooltip?" webix_t_id='"+s[a].id+"'":"",c=t.customRadio||"";if(c){var d=(0===a?t.label+" ":"")+l;c=(c=(c=(c=(c=c.replace(/(aria-label=')\w*(?=')/,"$1"+Vt.escape(d))).replace(/(aria-checked=')\w*(?=')/,"$1"+(o?"true":"false"))).replace(/(tabindex=')\w*(?=')/,"$1"+(o||0===a&&!t.value?"0":"-1"))).replace(/(aria-invalid=')\w*(?=')/,"$1"+(t.invalid?"true":"false"))).replace(/(button_id=')\w*(?=')/,"$1"+s[a].id)}var u=e._baseInputHTML("input")+" name='"+(t.name||t.id)+"' type='radio' "+(o?"checked='1'":"")+"tabindex="+(o||0===a&&!t.value?"0":"-1")+" value='"+s[a].id+"' id='"+r+"' style='"+(c?"display:none":"")+"' />",f="<div radio_id='"+s[a].id+"' class='webix_inp_radio_border webix_radio_"+(o?"1":"0")+"' role='presentation'>"+u+c+"</div>";l&&(l="<label for='"+r+"' class='webix_label_right'>"+l+"</label>"),n.push("<div class='webix_radio_option' role='presentation'"+h+">"+f+l+"</div>")}return n="<div class='webix_el_group' role='radiogroup' style='margin-left:"+(t.label?t.labelWidth:0)+"px;'>"+n.join("")+"</div>",e.$renderInput(t,n,i)}},refresh:function(){this.render(),this._last_size&&this.$getSize(0,0)[2]!=this._last_size[1]&&this.resize()},$getSize:function(t,e){var i=Pa.api.$getSize.call(this,t,e);if(this._settings.options){for(var s=this._settings.vertical?0:1,n=0;n<this._settings.options.length;n++)(this._settings.vertical||this._settings.options[n].newline)&&s++;i[3]=i[2]=Math.max(i[2],(this._settings.optionHeight||25)*s+2*this._settings.inputPadding+("top"==this._settings.labelPosition?this._labelTopHeight:0))}var a=this.config.bottomPadding;return a&&(i[2]+=a,i[3]+=a),i},_getInputNode:function(){return this._dataobj.getElementsByTagName(this._settings.customRadio?"button":"input")},$setValue:function(t){for(var e=this._dataobj.getElementsByTagName("input"),i=0;i<e.length;i++){e[i].parentNode.getAttribute("radio_id")==t?(e[i].checked=!0,e[i].setAttribute("tabindex","0")):(e[i].checked=!1,e[i].setAttribute("tabindex","-1"));var s=e[i]?e[i].parentNode:null;if(s&&(s.className=s.className.replace(/(webix_radio_)\d/,"$1"+(e[i].checked?1:0)),this._settings.customRadio)){var n=s.getElementsByTagName("BUTTON");n[0]&&(n[0].setAttribute("aria-checked",e[i].checked?"true":"false"),n[0].setAttribute("tabindex",e[i].checked?"0":"-1"))}}},getValue:function(){return this._settings.value},focus:function(){return this._focus()},blur:function(){this._blur()},customRadio_setter:function(t){return!0===t&&ni.customRadio&&(t="<a role='presentation' onclick='javascript:void(0)'><button type='button' class='webix_custom_radio' button_id='' role='radio' aria-checked='false' aria-label='' aria-invalid='' tabindex=''></button></a>"),t},$skin:function(){this.defaults.customRadio=!!ni.customRadio,ni.optionHeight&&(this.defaults.optionHeight=ni.optionHeight)}},Xa=(t.protoUI(Wa,Ra.view,Gi),{name:"datepicker",$init:function(){this.$ready.push(this._init_popup)},defaults:{template:function(t,e){"time"==e._settings.type&&(e._settings.icon=e._settings.timeIcon);var i=t.type;t.type="";var s=t.editable?e.$renderInput(t):e._render_div_block(t,e);return t.type=i,s},stringResult:!1,timepicker:!1,icon:"wxi-calendar",icons:!0,timeIcon:"wxi-clock",separator:", "},_onBlur:function(){if(this._settings.text!=this.getText()&&(!P(this._settings.text)||this.getText())){var t=this.getPopup().getValue();t&&this.setValue(t)}},$skin:function(){this.defaults.inputPadding=ni.inputPadding,this.defaults.point=!ni.popupNoPoint},getPopup:function(){return Zt(this._settings.popup)},_init_popup:function(){var t=this._settings;if(t.suggest)t.popup=t.suggest;else if(!t.popup){var e=this._settings.timepicker;t.popup=t.suggest=this.suggest_setter({type:"calendar",point:!1!==this._settings.point,padding:0,body:{height:240+(e||this._settings.icons?30:0),width:250,multiselect:this._settings.multiselect,timepicker:e,type:this._settings.type,icons:this._settings.icons,timeIcon:this._settings.timeIcon}})}this._init_once=function(){}},$render:function(t){P(t.value)||(t.value=this.$prepareValue(t.value),this.$setValue(t.value))},$prepareValue:function(t){if(this._settings.multiselect){"string"==typeof t?t=t.split(this._settings.separator):t instanceof Date?t=[t]:t||(t=[]);for(var e=0;e<t.length;e++)t[e]=this._prepareSingleValue(t[e]);return t}return this._prepareSingleValue(t)},_prepareSingleValue:function(t){var e=this._settings.type,i="time"==e;if(isNaN(parseFloat(t))||(t=""+t),"string"==typeof t&&t){var s=null;s="month"!=e&&"year"!=e||!this._formatDate?i?St.parseTimeFormatDate:St.parseFormatDate:this._formatDate,t=s(t)}if(t){if(i&&R(t)){var n=new Date;n.setHours(t[0]),n.setMinutes(t[1]),t=n}isNaN(t.getTime())&&(t="")}return t},_get_visible_text:function(t){return this._settings.multiselect?[].concat(t).map(function(t){return this._get_visible_text_single(t)}.bind(this)).join(this.config.separator):this._get_visible_text_single(t)},_get_visible_text_single:function(t){var e="time"==this._settings.type,i=this.config.timepicker,s=this._formatStr||(e?St.timeFormatStr:i?St.fullDateFormatStr:St.dateFormatStr);return s(t)},_set_visible_text:function(){var t=this.getInputNode();void 0==t.value?t.innerHTML=this._settings.text||this._get_div_placeholder():t.value=this._settings.text||""},$compareValue:function(t,e){return!t&&!e||mn.equal(t,e)},$setValue:function(t){this._settings.text=t?this._get_visible_text(t):"",this._set_visible_text()},format_setter:function(t){return t?"function"==typeof t?this._formatStr=t:(this._formatStr=mn.dateToStr(t),this._formatDate=mn.strToDate(t)):this._formatStr=this._formatDate=null,t},getInputNode:function(){return this._settings.editable?this._dataobj.getElementsByTagName("input")[0]:this._dataobj.getElementsByTagName("DIV")[1]},getValue:function(){if(this._settings.multiselect){var t=this._settings.value;if(!t)return[];var e=[].concat(t).map(function(t){return this._get_value_single(t)}.bind(this));return this._settings.stringResult?e.join(this._settings.separator):e}return this._get_value_single(this._settings.value)},_get_value_single:function(t){var e=this._settings.type,i="time"==e,s=this.config.timepicker;if(this._rendered_input){if(this._settings.editable){var n=this._formatDate||(i?St.timeFormatDate:s?St.fullDateFormatDate:St.dateFormatDate);t=n(this.getInputNode().value)}}else t=this.$prepareValue(t)||null;if(this._settings.stringResult){var a=St.parseFormatStr;return i&&(a=St.parseTimeFormatStr),!this._formatStr||"month"!=e&&"year"!=e||(a=this._formatStr),this._settings.multiselect?[].concat(t).map(function(t){return t?a(t):""}):t?a(t):""}return t||null},getText:function(){var t=this.getInputNode();return t?void 0===t.value?this.getValue()?t.innerHTML:"":t.value:""}}),Ua=t.protoUI(Xa,Ra.view),Ga={api:Xa,view:Ua},qa={name:"colorpicker",$init:function(){this.$ready.push(this._init_popup)},defaults:{icon:!0},_init_popup:function(){var t=this._settings;t.suggest?t.popup=t.suggest:t.popup||(t.popup=t.suggest=this.suggest_setter({type:"colorboard",height:200})),this._init_once=function(){}},$render:function(t){P(t.value)||(t.value=this.$prepareValue(t.value),this.$setValue(t.value))},getValue:function(){return this._rendered_input&&this._settings.editable?this.getInputNode().value:this._settings.value},$prepareValue:function(t){return t&&t.charAt&&"#"!=t.charAt(0)&&(t="#"+t),t||""},_getColorNode:function(){return this.$view.getElementsByTagName("DIV")[this._settings.editable?1:2]},_get_visible_text:function(t){return t},$setValue:function(t){this._getColorNode().style.backgroundColor=t,this._settings.text=t;var e=this.getInputNode();void 0==e.value?e.innerHTML=t:e.value=t},$renderIcon:function(){var t=this.config;return'<div class="webix_input_icon" style="background-color:'+t.value+';"> </div>'}},Ka=(t.protoUI(qa,Ga.view),{name:"richselect",defaults:{template:function(t,e){return e._render_div_block(t,e)},popupWidth:200,icon:"wxi-menu-down"},_onBlur:function(){if(this._settings.text!=this.getText()&&(!P(this._settings.text)||this.getText())){var t=this.getPopup(),e=this.getInputNode().value,i=t.getSuggestion(e),s=this.getValue();!i||i==s||""===e&&""!==t.getItemText(i)?""===e?this.setValue(""):this._revertValue&&this._revertValue():this.setValue(i)}},suggest_setter:function(t){return this.options_setter(t)},options_setter:function(t){t=this._suggest_config?this._suggest_config(t):t;var e=this._settings.popup=this._settings.suggest=Ra.api.suggest_setter.call(this,t),i=Zt(e).getList();return i&&i.attachEvent("onAfterLoad",T(this._reset_value,this)),e},getList:function(){var t=Zt(this._settings.suggest);return _(t,"Input doesn't have a list"),t.getList()},_pattern:function(t){return t},_reset_value:function(){var t=this._settings.value;P(t)||this.getPopup().isVisible()||this._settings.text||!this._dataobj.firstChild||this.$setValue(t)},$skin:function(){this.defaults.inputPadding=ni.inputPadding},$render:function(t){P(t.value)||this.$setValue(t.value)},getInputNode:function(){return this._dataobj.getElementsByTagName("DIV")[1]},getPopup:function(){return Zt(this._settings.popup)},getText:function(){var t=this._settings.value,e=this.getInputNode();return e?void 0===e.value?e.firstChild&&"webix_placeholder"===e.firstChild.className?"":e.innerHTML:e.value:t?this.getPopup().getItemText(t):""},$setValue:function(t){if(this._rendered_input){var e=t,i=this.getPopup();if(i&&(e=this.getPopup().getItemText(t)),!e&&t&&t.id){var s=this.getPopup(),n=s.getList(),a=n.exists(t.id);a||n.add(t),e=s.getItemText(t.id),n._settings.dynamic&&!a&&n.remove(t.id),this._settings.value=t.id}var r=this.getInputNode();P(r.value)?r.innerHTML=e||this._get_div_placeholder():r.value=e=e.replace(/<[^>]*>/g,""),this._settings.text=e}},getValue:function(){return this._settings.value||""},_ignoreLabelClick:function(t){this.focus(),ut(t)}}),Za=t.protoUI(Ka,Ra.view),Ja={api:Ka,view:Za},Qa={name:"combo",getInputNode:function(){return this._dataobj.getElementsByTagName("input")[0]},$render:function(t){P(t.value)||this.$setValue(t.value)},_revertValue:function(){if(!this._settings.editable){var t=this.getValue();this.$setValue(P(t)?"":t)}},_applyChanges:function(){var t=this.getInputNode(),e="",i=this.getPopup();t.value&&(e=this._settings.value,i.getItemText(e)!=this.getText()&&(e=i.getSuggestion()||e)),e!=this._settings.value?this.setValue(e,!0):this.$setValue(e)},$compareValue:function(t){var e=Ja.api.$compareValue.apply(this,arguments);return e&&t!=this.getText()&&this._revertValue(),e},defaults:{template:function(t,e){return e.$renderInput(t).replace(/(<input)\s*(?=\w)/,"$1 role='combobox'")},icon:"wxi-menu-down"},on_click:{webix_inp_label:function(t){this._ignoreLabelClick(t)},webix_inp_top_label:function(t){this._ignoreLabelClick(t)}}},tr=(t.protoUI(Qa,Ja.view),{name:"counter",defaults:{template:function(t,e){var i=t.value,s="x"+$(),n="<div role='spinbutton' aria-label='"+Vt.escape(t.label)+"' aria-valuemin='"+t.min+"' aria-valuemax='"+t.max+"' aria-valuenow='"+t.value+"' class='webix_el_group' style='width:"+e._get_input_width(t)+"px'>";return n+="<button type='button' class='webix_inp_counter_prev' tabindex='-1' aria-label='"+St.aria.decreaseValue+"'>-</button>",n+=e._baseInputHTML("input")+" id='"+s+"' type='text' class='webix_inp_counter_value' aria-live='assertive' value='"+i+"'></input>",n+="<button type='button' class='webix_inp_counter_next' tabindex='-1' aria-label='"+St.aria.increaseValue+"'>+</button></div>",e.$renderInput(t,n,s)},min:0,max:1/0,value:0,step:1},$init:function(){ee(this.$view,"keydown",this._keyshift,{bind:this})},_keyshift:function(t){var e=t.which||t.keyCode,i=this._settings,s=this.getValue();e>32&&e<41&&(36===e?s=i.min:35===e?s=i.max===1/0?1e6:i.max:33===e?this.next():34===e?this.prev():s+=37===e||40===e?-1:1,e>34&&s>=i.min&&s<=i.max&&this.setValue(s))},$setValue:function(t){this.getInputNode().value=t},$prepareValue:function(t){return t=parseFloat(t),isNaN(t)?0:t},value_setter:function(t){return this.$prepareValue(t)},getInputNode:function(){return this._dataobj.getElementsByTagName("input")[0]},getValue:function(){return 1*Pa.api.getValue.apply(this,arguments)},next:function(t){t=1*(t||this._settings.step),this.shift(t)},prev:function(t){t=-1*(t||this._settings.step),this.shift(t)},shift:function(t){var e=this._settings.min,i=this._settings.max,s=this.getValue()+t;s>=e&&s<=i&&this.setValue(s)}}),er=(t.protoUI(tr,Ra.view),{name:"icon",$skin:function(){this.defaults.height=ni.inputHeight,this.defaults.width=ni.inputHeight},defaults:{template:function(t,e){var i=Math.min(t.awidth,t.aheight),s=Math.round((e._content_height-t.aheight)/2),n="<button type='button' style='height:"+i+"px;width:"+i+"px;' class='webix_icon_button'><span class='webix_icon "+t.icon+"'></span></button>";return"<div class='webix_el_box' style='width:"+t.awidth+"px;height:"+t.aheight+"px;line-height:"+t.aheight+"px;margin-top:"+s+"px'>"+n+(t.badge?"<span class='webix_badge'>"+t.badge+"</span>":"")+"</div>"}},_set_inner_size:!1,_set_default_css:function(){},$setValue:function(){}}),ir=(t.protoUI(er,Pa.view),{name:"search",on_click:{webix_input_icon:function(t){this.getInputNode().focus(),this.callEvent("onSearchIconClick",[t])}},$skin:function(){this.defaults.inputPadding=ni.inputPadding},defaults:{type:"text",icon:"wxi-search"}}),sr=(t.protoUI(ir,Ra.view),{name:"segmented",$allowsClear:!1,$init:function(){this.attachEvent("onChange",function(t){this._settings.multiview&&this._show_view(t)}),this.attachEvent("onAfterRender",z(function(){this._settings.multiview&&this._settings.value&&this._show_view(this._settings.value)}))},_show_view:function(t){var e=this.getTopParentView(),i=null;e&&e.$$&&(i=e.$$(t)),i||(i=Zt(t)),i&&i.show&&i.show()},defaults:{template:function(t,e){t.options||_(!1,"segmented: options undefined");var i=t.options;e._check_options(i),i=e._filterOptions(i);var s,n=e._get_input_width(t),a=$(),r="<div style='width:"+n+"px' class='webix_all_segments' role='tablist' aria-label='"+Vt.escape(t.label)+"'>",o=t.optionWidth||Math.floor(n/i.length);t.value||(t.value=i[0].id);for(var l=0;l<i.length;l++)s=t.tooltip?" webix_t_id='"+i[l].id+"'":"",r+="<button type='button' style='width:"+(i[l].width||o)+"px' role='tab' aria-selected='"+(t.value==i[l].id?"true":"false")+"' tabindex='"+(t.value==i[l].id?"0":"-1")+"'",r+="class='webix_segment_"+(l==i.length-1?"N":l>0?1:0)+(t.value==i[l].id?" webix_selected ":"")+"' button_id='"+i[l].id+"'"+s+">",r+=i[l].value+"</button>";return e.$renderInput(t,r+"</div>",a)}},_getInputNode:function(){return this.$view.getElementsByTagName("BUTTON")},focus:function(){return this._focus()},blur:function(){this._blur()},$setValue:function(t){for(var e=this._getInputNode(),i=0;i<e.length;i++){var s=e[i].getAttribute("button_id");e[i].setAttribute("aria-selected",t==s?"true":"false"),e[i].setAttribute("tabindex",t==s?"0":"-1"),t==s?pt(e[i],"webix_selected"):_t(e[i],"webix_selected")}var n=this.config.tabbarPopup;n&&Zt(n)&&Zt(n).getBody().exists(t)&&this.refresh()},getValue:function(){return this._settings.value},getInputNode:function(){return null},optionIndex:function(t){for(var e=this._settings.options,i=0;i<e.length;i++)if(e[i].id==t)return i;return-1},addOption:function(t,e,i,s){var n=t;"object"!=u(t)?n={id:t,value:e=e||t}:(t=n.id,s=i,i=e),this.optionIndex(t)<0&&O.insertAt.call(this._settings.options,n,s),this.refresh(),i&&this.setValue(t)},removeOption:function(t){var e=this.optionIndex(t),i=this._settings.options;e>=0&&O.removeAt.call(i,e),this._settings.value==t&&this._setNextVisible(i,e),this.refresh(),this.callEvent("onOptionRemove",[t,this._settings.value])},_setNextVisible:function(t,e){var i=t.length;if(i){for(var s=e=Math.min(e,i-1);s<i;s++)if(!t[s].hidden)return this.setValue(t[s].id);for(var n=e;n>=0;n--)if(!t[n].hidden)return this.setValue(t[n].id)}this.setValue("")},_filterOptions:function(t){for(var e=[],i=0;i<t.length;i++)t[i].hidden||e.push(t[i]);return e},_setOptionVisibility:function(t,e){var i=this._settings.options,s=this.optionIndex(t),n=i[s];n&&e==!!n.hidden&&(n.hidden=!e,e||this._settings.value!=t?this.refresh():this._setNextVisible(i,s))},hideOption:function(t){this._setOptionVisibility(t,!1)},showOption:function(t){this._setOptionVisibility(t,!0)},_set_inner_size:!1}),nr=t.protoUI(sr,Ra.view,Gi),ar={api:sr,view:nr},rr={name:"textarea",defaults:{template:function(t,e){var i=t.name||t.id,s="x"+$(),n=e._baseInputHTML("textarea")+"style='width:"+e._get_input_width(t)+"px;'";return n+=" id='"+s+"' name='"+i+"' class='webix_inp_textarea'>"+e._pattern(t.value)+"</textarea>",e.$renderInput(t,n,s)},height:0,minHeight:60},$skin:function(){this.defaults.inputPadding=ni.inputPadding,this._inputSpacing=ni.inputSpacing},_skipSubmit:!0,_getLabelHeight:function(t){return t?this._labelTopHeight-this._settings.inputPadding:""},getInputNode:function(){return this._dataobj.getElementsByTagName("textarea")[0]}},or=(t.protoUI(rr,Ra.view),{name:"toggle",$allowsClear:!0,$init:function(){this.attachEvent("onItemClick",function(){this.toggle()})},$setValue:function(t){var e=this.getInputNode(),i=this._settings,s=t&&"0"!=t,n=(s?i.onLabel:i.offLabel)||i.label,a=e.lastChild;e.setAttribute("aria-pressed",!!s&&"true"),e.value=n,a&&((a.firstChild||a).nodeValue=n),e.firstChild&&"SPAN"===e.firstChild.nodeName&&i.onIcon&&i.offIcon&&i.onIcon!==i.offIcon&&(e.firstChild.className=e.firstChild.className.replace(s?i.offIcon:i.onIcon,s?i.onIcon:i.offIcon));var r=e.parentNode;s?pt(r,"webix_pressed"):_t(r,"webix_pressed")},toggle:function(){this.setValue(!this.getValue())},getValue:function(){var t=this._settings.value;return t&&"0"!=t?1:0},defaults:{template:function(t,e){var i=t.value&&"0"!=t.value,s=i?" webix_pressed":"";t.label=(i?t.onLabel:t.offLabel)||t.label,t.icon=(i?t.onIcon:t.offIcon)||t.icon;var n="<div class='webix_el_box"+s+"' style='width:"+t.awidth+"px; height:"+t.aheight+"px'>"+e.$renderInput(t,e)+"</div>";return n=n.replace(/(button)\s*(?=\w)/,"$1 aria-pressed='"+(i?"true":"false")+"' "),t.badge&&(n=n.replace(/<\/div>$/,"<span class='webix_badge'>"+t.badge+"</span></div>")),n}},_set_inner_size:!1}),lr=(t.protoUI(or,Pa.view),{name:"multitext",$cssName:"text",defaults:{icon:"wxi-plus-circle",iconWidth:25,separator:", "},getValueHere:function(){return Ra.api.getValue.call(this)},setValueHere:function(t){return Ra.api.$setValue.call(this,t)},getValue:function(){if("extra"==this.config.mode)return this.getValueHere();if(this._full_value)return this._full_value;for(var t=[this.getValueHere(this)],e=0;e<this._subs.length;e++){var i=Zt(this._subs[e]).getValueHere();i&&t.push(i)}return t.join(this.config.separator)},$setValue:function(t){if(t=t||"","extra"==this.config.mode)return this.setValueHere(t);this._full_value=t;var e=t.split(this.config.separator);if(e.length!=this._subs.length+1){this.removeSection(),this.setValueHere.call(this,e[0]);for(var i=1;i<e.length;i++)this.addSection(e[i]);this._full_value=""}else{this.setValueHere(e[0]);for(var s=0;s<this._subs.length;s++)Zt(this._subs[s]).setValueHere(e[s+1]);this._full_value=""}},_subOnChange:function(){var t=this.config.master?Zt(this.config.master):this,e=t.getValue(),i=t._settings.value;e!==i&&(t._settings.value=e,t.callEvent("onChange",[e,i]))},addSection:function(e){var i=this.config,s={labelWidth:i.labelWidth,inputWidth:i.inputWidth,width:i.width,label:i.label?"&nbsp;":"",view:this.name,mode:"extra",value:e||"",icon:"wxi-minus-circle",tooltip:i.tooltip,suggest:i.suggest||null,master:i.id};t.extend(s,i.subConfig||{},!0);var n=this.getParentView().addView(s);return Zt(n).attachEvent("onChange",this._subOnChange),this._subs.push(n),this.callEvent("onSectionAdd",[n,this._subs.length]),n},removeSection:function(t){for(var e=this.config.master?Zt(this.config.master):this,i=e._subs.length-1;i>=0;i--){var s=e._subs[i];t&&s!=t||(e._subs.removeAt(i),this.getParentView().removeView(s),e.callEvent("onSectionRemove",[s,i+1]))}},on_click:{webix_input_icon:function(){if("extra"==this.config.mode){this.removeSection(this.config.id);var t=this.getParentView().getChildViews();t[t.length-1].focus(),this._subOnChange()}else Zt(this.addSection()).focus();return!1}},$init:function(){this._subs=H([]),this.attachEvent("onKeyPress",this._onKeyPress)},$render:function(t){this.$setValue(t.value)}});t.protoUI(lr,Ra.view),t.protoUI({name:"multiselect",defaults:{template:"GPL version doesn't support multiselect <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"multicombo",defaults:{template:"GPL version doesn't support multicombo <br> You need Webix PRO"}},Wn.view);var hr={name:"slider",$touchCapture:!0,defaults:{min:0,max:100,value:50,step:1,title:!1,moveTitle:!0,template:function(t,e){var i=e._handle_id="x"+$(),s="",n="<div class='webix_slider_title"+(t.moveTitle?" webix_slider_move":"")+"'"+(!t.moveTitle&&t.vertical?" style='line-height:"+(t.aheight-2*t.inputPadding)+"px;'":"")+">&nbsp;</div>",a="<div class='webix_slider_left'>&nbsp;</div>",r="<div class='webix_slider_right'></div>",o="<div class='webix_slider_handle' webix_disable_drag='true' role='slider' aria-label='"+t.label+(t.title?" "+t.title(t):"")+"' aria-valuemax='"+t.max+"' aria-valuemin='"+t.min+"' aria-valuenow='"+t.value+"' tabindex='0' id='"+i+"'>&nbsp;</div>";return s=t.vertical?"<div class='webix_slider_box'>"+r+a+o+"</div>"+n:n+"<div class='webix_slider_box'>"+a+r+o+"</div>",e.$renderInput(t,s,i)}},type_setter:function(t){this._viewobj.className+=" webix_slider_"+t},title_setter:function(t){return"string"==typeof t?Vt(t):t},_get_slider_handle:function(){return this.$view.querySelector(".webix_slider_handle")},_set_inner_size:function(){var t=this._get_slider_handle(),e=this._settings;if(t){var i=e.vertical?this._content_height:this._get_input_width(e),s=e.value%e.step?Math.round(e.value/e.step)*e.step:e.value,n=e.max-e.min;s=Math.max(Math.min(s,e.max),e.min),s=e.vertical?n-(s-e.min):s-e.min;var a=Math.ceil((i-2*this._sliderPadding)*s/n),r=i-2*this._sliderPadding-a,o=e.vertical?"top":"left",l=e.vertical?"height":"width";t.style[o]=this._sliderPadding+a-this._sliderHandleWidth/2+"px",t.parentNode.style[l]=i+"px",r=Math.min(Math.max(r,2*this._sliderBorder),i-2*this._sliderPadding-2*this._sliderBorder),a=Math.min(Math.max(a,2*this._sliderBorder),i-2*this._sliderPadding-2*this._sliderBorder);var h=t.previousSibling;h.style[l]=r+"px";var c=h.previousSibling;c.style[l]=a+"px",this._set_title(t,a,r,o)}},_set_title:function(t,e,i,s){var n=this._settings;if(this._settings.title){var a=t.parentNode[n.vertical?"nextSibling":"previousSibling"];if(a.innerHTML=this._settings.title(this._settings,this),this._settings.moveTitle){var r=0;if(n.vertical)r=e+2*this._sliderBorder-this._sliderHandleWidth/2;else{var o=a.clientWidth/2,l=o>e?o-e-2*this._sliderBorder:0,h=o>i?o-i-2*this._sliderBorder-this._sliderHandleWidth/2:0;r=this._sliderPadding+e-o+l-h}a.style[s]=r+"px"}}},_set_value_now:function(){this._get_slider_handle().setAttribute("aria-valuenow",this._settings.value)},refresh:function(){var t=this._get_slider_handle();t&&(this._set_value_now(),this._settings.title&&t.setAttribute("aria-label",this._settings.label+" "+this._settings.title(this._settings,this)),this._set_inner_size())},value_setter:function(t){return this.$prepareValue(t)},$setValue:function(){this.refresh()},$getValue:function(){return this._settings.value},$prepareValue:function(t){return t=parseFloat(t),isNaN(t)?0:t},$init:function(t){i.touch?this.attachEvent("onTouchStart",T(this._on_mouse_down_start,this)):ee(this._viewobj,"mousedown",T(this._on_mouse_down_start,this)),ee(this.$view,"keydown",T(this._handle_move_keyboard,this)),t.vertical&&(t.height=t.height||ni.vSliderHeight,this._viewobj.className+=" webix_slider_vertical",this._sliderPadding=ni.vSliderPadding)},$skin:function(){this._sliderHandleWidth=ni.sliderHandleWidth,this._sliderPadding=ni.sliderPadding,this._sliderBorder=ni.sliderBorder},_handle_move_keyboard:function(t){var e=t.keyCode,i=this._settings,s=i.value;if(e>32&&e<41){ut(t);var n=t.target||t.srcElement,a=/webix_slider_handle_(\d)/.exec(n.className);if(this._activeIndex=a?parseInt(a[1],10):-1,a&&(s=i.value[this._activeIndex]),s=s<i.min?i.min:s>i.max?i.max:s,36===e)s=i.min;else if(35===e)s=i.max;else{var r=37===e||40===e||34===e?-1:1;(33===e||34===e||i.step>1)&&(r*=i.step),s=1*s+r}if(a){var o=i.value[this._activeIndex?0:1];s=this._activeIndex&&s<=o||!this._activeIndex&&s>=o?o:s}if(s>=i.min&&s<=i.max){if(a){for(var l=[],h=0;h<i.value.length;h++)l[h]=h===this._activeIndex?s:i.value[h];s=l}this.setValue(s),this._activeIndex=-1}}},_on_mouse_down_start:function(t){if(!this._handle_drag_events){var e=t.target||t.srcElement;this._mouse_down_process&&this._mouse_down_process(t);var i=this._settings.value;if(R(i)&&(i=E(i)),-1!=e.className.indexOf("webix_slider_handle"))return this._start_value=i,this._start_handle_dnd.apply(this,arguments);-1!=e.className.indexOf("webix_slider")&&(this._start_value=i,this._settings.value=this._get_value_from_event.apply(this,arguments),this._start_handle_dnd(t))}},_start_handle_dnd:function(){i.touch?this._handle_drag_events=[this.attachEvent("onTouchMove",T(this._handle_move_process,this)),this.attachEvent("onTouchEnd",T(this._handle_move_stop,this))]:this._handle_drag_events=[ie(document.body,"mousemove",T(this._handle_move_process,this)),ie(window,"mouseup",T(this._handle_move_stop,this))],pt(document.body,"webix_noselect")},_handle_move_stop:function(){this._handle_drag_events&&(i.touch?(this.detachEvent(this._handle_drag_events[0]),this.detachEvent(this._handle_drag_events[1])):(se(this._handle_drag_events[0]),se(this._handle_drag_events[1])),this._handle_drag_events=null),_t(document.body,"webix_noselect");var t=this._settings.value;R(t)&&(t=E(t)),this._settings.value=this._start_value,this.setValue(t),this._get_slider_handle(this._activeIndex).focus(),this._activeIndex=-1},_handle_move_process:function(){this._settings.value=this._get_value_from_event.apply(this,arguments),this.refresh(),this.callEvent("onSliderDrag",[])},_get_value_from_event:function(t,e){var s=0,n=this._settings.vertical?"y":"x";return s=i.touch?e?e[n]:t[n]:dt(t)[n],this._get_value_from_pos(s)},_get_value_from_pos:function(t){var e=this._settings,i=e.max-e.min,s=e.vertical?"y":"x",n=ht(this._get_slider_handle().parentNode)[s]+this._sliderPadding,a=(e.vertical?this._content_height:this._get_input_width(e))-2*this._sliderPadding,r=a?(t-n)*i/a:0;return e.vertical&&(r=i-r),r=Math.round((r+1*e.min)/e.step)*e.step,Math.max(Math.min(r,e.max),e.min)},_init_onchange:function(){}};t.protoUI(hr,Ra.view),t.protoUI({name:"rangeslider",defaults:{template:"GPL version doesn't support rangeslider <br> You need Webix PRO"}},Wn.view);var cr={name:"switch",defaults:{template:function(t,e){e._calck_switch_size();var i=t.name||"x"+$(),s="";t.labelRight&&(s="<label class='webix_label_right'>"+t.labelRight+"</label>",t.labelWidth&&(t.label=t.label||"&nbsp;"));var n=t.checkValue==t.value,a='aria-label="'+(t.label||t.labelRight||"")+'" role="checkbox" tabindex="0" aria-checked="'+(n?"true":"false")+'" '+(t.readonly?"aria-readonly='true'":"")+'"',r='<div class="webix_switch_box '+(n?" webix_switch_on":"")+'" style="width:'+e._switchWidth+'px"><span class="webix_switch_text">'+((n?t.onLabel:t.offLabel)||"")+'</span><button class="webix_switch_handle" '+a+' style="left:'+(n?e._switchWidth-e._switchHeight:0)+'px;"><input  id="'+i+'" class="webix_switch_toggle" type="checkbox" '+(n?"checked":"")+"></button></div>"+s;return e.$renderInput(t,r,i)}},$skin:function(){this._switchHeight=ni.switchHeight,this._switchWidth=ni.switchWidth},$setValue:function(t){var e=this._settings,i=t==e.checkValue,s=this.$view.querySelector(".webix_switch_box");if(s){var n=s.childNodes[1],a=(i?e.onLabel:e.offLabel)||"";i?pt(s,"webix_switch_on"):_t(s,"webix_switch_on"),n.style.left=(i?this._switchWidth-this._switchHeight:0)+"px",n.firstChild.checked=i,n.setAttribute("aria-checked",i?"true":"false"),a&&(s.childNodes[0].innerHTML=a)}},_calck_switch_size:function(){var t=this._settings;if(t.onLabel||t.offLabel){var e=t.onLabel?vt(t.onLabel,"webix_switch_text").width:0,i=t.onLabel?vt(t.offLabel,"webix_switch_text").width:0;this._switchWidth=Math.max(e,i)+this._switchHeight}},on_click:{webix_switch_box:function(){this._settings.readonly||this.toggle()},webix_label_right:function(){this._settings.readonly||this.toggle()}}},dr=(t.protoUI(cr,Ya.view),{name:"tabbar",$init:function(){this.attachEvent("onKeyPress",this._onKeyPress)},$skin:function(){var t=ni,e=this.defaults;e.topOffset=t.tabTopOffset||0,e.tabOffset=void 0!==t.tabOffset?t.tabOffset:10,e.bottomOffset=t.tabBottomOffset||0,e.height=t.tabbarHeight,e.tabMargin=t.tabMargin,e.inputPadding=t.inputPadding,e.tabMinWidth=t.tabMinWidth||100,e.tabMoreWidth=t.tabMoreWidth||40,e.borderless=!t.tabBorder},_getTabbarSizes:function(){var t,e,i=this._settings,s=this._tabs||i.options,n=this._input_width-2*i.tabOffset,a=i.optionWidth||i.tabMinWidth;if(e=s.length,i.tabMinWidth&&n/e<a)return{max:parseInt(n/a,10)||1};if(!i.optionWidth)for(t=0;t<e;t++)s[t].width&&(n-=s[t].width+(t||i.type?0:i.tabMargin),e--);return{width:e?n/e:i.tabMinWidth}},_init_popup:function(){var t=this._settings;if(!t.tabbarPopup){var e={view:"popup",width:t.popupWidth||200,body:{view:"list",borderless:!0,select:!0,css:"webix_tab_list",autoheight:!0,yCount:t.yCount,type:{template:t.popupTemplate}}},i=Xt(e);i.getBody().attachEvent("onBeforeSelect",T(function(t){if(t&&this.callEvent("onBeforeTabClick",[t]))return this.setValue(t),Zt(this._settings.tabbarPopup).hide(),this.callEvent("onAfterTabClick",[t]),!0},this)),i.getBody().attachEvent("onAfterSelect",T(function(){this.refresh()},this)),t.tabbarPopup=i._settings.id,this._destroy_with_me.push(i)}this._init_popup=function(){}},getPopup:function(){return this._init_popup(),Zt(this._settings.tabbarPopup)},moreTemplate_setter:Vt,popupTemplate_setter:Vt,defaults:{popupWidth:200,popupTemplate:"#value#",yCount:7,moreTemplate:'<span class="webix_icon wxi-dots"></span>',template:function(t,e){var i,s,n,a,r,o,l,h,c,d;if(e._tabs=h=e._filterOptions(t.options),h.length){e._check_options(h),!t.value&&h.length&&(t.value=h[0].id),s="",t.tabOffset&&(s+="<div class='webix_tab_filler' style='width:"+t.tabOffset+"px;'>&nbsp;</div>"),i=e._input_width-2*t.tabOffset-(t.type?0:t.tabMargin*(h.length-1)),c=t.topOffset+t.bottomOffset;var u=e._getTabbarSizes();if(u.max&&u.max<h.length){var f=e.getPopup();f.hide();var g=f.getBody()||null;if(g)if(u.max){var p=!1;for(n=0;n<h.length&&!p;n++)if(h[n].id==t.value&&(p=!0,n+1>u.max)){var _=h.splice(n,1),v=h.splice(0,u.max-1).concat(_);h=v.concat(h)}g.clearAll(),g.parse(h.slice(u.max))}else g.clearAll()}else e._settings.tabbarPopup&&Zt(e._settings.tabbarPopup).hide();l=t.tabOffset;var m=!1;for(n=0;n<h.length&&!m;n++)u&&u.max?(u.max==n+1&&(m=!0),i=e._input_width-2*t.tabOffset-(!t.type&&u.max>1?t.tabMargin*(u.max-1):0),d=(i-t.tabMoreWidth)/u.max):d=u.width,d=h[n].width||t.optionWidth||d,l+=d+(n&&!t.type?t.tabMargin:0),t.tabMargin>0&&n&&!t.type&&(s+="<div class='webix_tab_filler' style='width:"+t.tabMargin+"px;'></div>"),s+=e._getTabHTML(h[n],d),m&&(s+='<div role="button" tabindex="0" aria-label="'+St.aria.showTabs+'" class="webix_tab_more_icon" style="width:'+t.tabMoreWidth+'px;">'+t.moreTemplate(t,e)+"</div>",l+=t.tabMoreWidth);(a=e._content_width-l)>0&&!t.type&&(s+="<div class='webix_tab_filler' style='width:"+a+"px;'>&nbsp;</div>")}else s="<div class='webix_tab_filler' style='width:"+e._input_width+"px; border-right:0px;'></div>";return r="",o=c&&!t.type?"height:"+(e._content_height-c)+"px":"",t.topOffset&&!t.type&&(r+="<div class='webix_before_all_tabs' style='width:100%;height:"+t.topOffset+"px'></div>"),r+="<div style='"+o+"' role='tablist' class='webix_all_tabs "+(t.type?"webixtype_"+t.type:"")+"'>"+s+"</div>",t.bottomOffset&&!t.type&&(r+="<div class='webix_after_all_tabs' style='width:100%;height:"+t.bottomOffset+"px'></div>"),r}},_getInputNode:function(){return this.$view.querySelectorAll(".webix_item_tab")},_getTabHTML:function(e,i){var s,n="",a="",r=this.config;if(e.id==r.value&&(n=" webix_selected"),e.css&&(n+=" "+e.css),r.tooltip&&(a=" webix_t_id='"+e.id+"'"),i=e.width||i,s='<div class="webix_item_tab'+n+'" button_id="'+e.id+'" role="tab" aria-selected="'+(e.id==r.value?"true":"false")+'" tabindex="'+(e.id==r.value?"0":"-1")+'" style="width:'+i+'px;"'+a+">",this._tabTemplate){var o=this._content_height-2*r.inputPadding-2,l=this._content_height-2,h=t.extend({cheight:o,aheight:l},e);s+=this._tabTemplate(h)}else{var c=e.icon?"<span class='webix_icon "+e.icon+"'></span> ":"";s+=c+e.value}return(e.close||r.close)&&(s+="<span role='button' tabindex='0' aria-label='"+St.aria.closeTab+"' class='webix_tab_close webix_icon wxi-close'></span>"),s+="</div>"},_getBox:function(){return this._dataobj.firstChild},_types:{image:"<div class='webix_img_btn_top' style='height:#cheight#px;background-image:url(#image#);'><div class='webix_img_btn_text'>#value#</div></div>",icon:"<div class='webix_img_btn' style='line-height:#cheight#px;height:#cheight#px;'><span class='webix_icon_btn #icon#' style='max-width:#cheight#px;max-height:#cheight#px;'></span>#value#</div>",iconTop:"<div class='webix_img_btn_top' style='height:#cheight#px;width:100%;top:0px;text-align:center;'><span class='webix_icon #icon#'></span><div class='webix_img_btn_text'>#value#</div></div>"},type_setter:function(t){return this._settings.tabOffset=0,this._types[t]&&(this._tabTemplate=Vt(this._types[t])),t}}),ur=(t.protoUI(dr,ar.view),{name:"richtext",defaults:{label:"",labelWidth:80,labelPosition:"left"},$init:function(){this._viewobj.className+=" webix_richtext",this.$ready.unshift(this._setLayout)},getInputNode:function(){return this.$view.querySelector(".webix_richtext_editor")},_button:function(t){return{view:"toggle",type:"iconButton",icon:"wxi-"+t,name:t,id:t,label:St.richtext[t],autowidth:!0,action:t,click:this._add_data}},_setLayout:function(){var t=this,e={view:"template",css:"webix_richtext_container",borderless:!0,template:"<div class='webix_richtext_editor' contenteditable='true'>"+this.getValue()+"</div>",on:{onAfterRender:function(){t._rendered_input=!0,t.refresh(),ee(t.getInputNode(),"blur",function(){t._updateValue(this.innerHTML)}),ee(t.getInputNode(),"keyup",function(){t._getselection()})}},onClick:{webix_richtext_editor:function(){t._getselection()}}},i={view:"toolbar",id:"toolbar",elements:[this._button("underline"),this._button("bold"),this._button("italic"),{}]},s=[i,e];"top"!==this.config.labelPosition&&this.config.labelWidth?(this.config.borderless=!0,this.cols_setter([{template:this.config.label||" ",css:"webix_richtext_inp_label"+(this.config.required?" webix_required":""),borderless:!0,width:this.config.labelWidth},{rows:s}])):(i.elements.concat([{view:"label",label:this.config.label,align:"right"},{width:4}]),this.rows_setter(s))},_getselection:function(){var t,e=this.$$("toolbar");e.setValues({italic:!1,underline:!1,bold:!1}),t=window.getSelection?window.getSelection():document.selection.createRange();for(var i=0;i<t.rangeCount;++i)this.$view.contains(this.getInputNode())&&(document.queryCommandState("bold")&&this.$$("bold").setValue(!0),document.queryCommandState("underline")&&this.$$("underline").setValue(!0),document.queryCommandState("italic")&&this.$$("italic").setValue(!0))},refresh:function(){this._rendered_input&&(this.getInputNode().innerHTML=this.config.value||"")},_execCommandOnElement:function(t){var e,i;if(window.getSelection){e=window.getSelection(),i=e.toString().length;var s=this.getInputNode();if(s.contains(e.anchorNode)&&s.contains(e.focusNode)&&i>0)for(var n=0;n<e.rangeCount;++n){var a=e.getRangeAt(n);if(e.isCollapsed){var r=e.focusNode.textContent,o=e.focusNode,l=e.anchorOffset,h=r.substring(0,l).match(/[A-Za-z]*$/)[0],c=r.substring(l).match(/^[A-Za-z]*/)[0],d=l-h.length,u=l+c.length;a.setStart(o,d),a.setEnd(o,u),e.removeAllRanges(),e.addRange(a),document.execCommand(t,!1,"")}else document.execCommand(t,!1,"")}}},_add_data:function(){var t=this.getTopParentView();t._execCommandOnElement(this.config.action)},focus:function(){if(!Ve.canFocus(this))return!1;var t=this.getInputNode();t.focus()},_updateValue:function(t){var e=this.config.value;this.config.value=t||"",e!==t&&this.callEvent("onChange",[t,e])},setValue:function(t){this._updateValue(t),this.refresh()},getValue:function(){var t=this.getInputNode();t&&(this.config.value=this.getInputNode().innerHTML);var e=this.config.value;return e||(0===e?"0":"")}}),fr=(t.protoUI(ur,Ki,qn.view),{name:"proto",$init:function(){this.data.provideApi(this,!0),this._dataobj=this._dataobj||this._contentobj,this.data.attachEvent("onStoreUpdated",T(function(){this.render.apply(this,arguments)},this))},$setSize:function(){si.api.$setSize.apply(this,arguments)&&this.render()},_id:"webix_item",on_mouse_move:{},type:{}}),gr=t.protoUI(fr,is,Ii,li,$s,ns,$i,si.view,B,Ye),pr={api:fr,view:gr},_r={name:"list",_listClassName:"webix_list",_itemClassName:"webix_list_item",$init:function(t){pt(this._viewobj,this._listClassName+("x"==(t.layout||this.defaults.layout)?"-x":"")),this.data.provideApi(this,!0),this._auto_resize=T(this._auto_resize,this),this.data.attachEvent("onStoreUpdated",this._auto_resize),this.data.attachEvent("onSyncApply",this._auto_resize),this.attachEvent("onAfterRender",this._correct_width_scroll),this._viewobj.setAttribute("role","listbox")},dynamic_setter:function(e){return e&&t.extend(this,Fs,!0),e},$dragHTML:function(t,e,i){var s;return"y"==this._settings.layout&&"auto"==this.type.width?(this.type.width=this._content_width,s=this._toHTML(t),this.type.width="auto"):s=this._toHTML(t),R(i.source)&&i.source.length>1&&(s=this._toMultipleHTML(s,i.source.length)),s},defaults:{select:!1,scroll:!0,layout:"y",navigation:!0,datafetch:50},_id:"webix_l_id",on_click:{webix_list_item:function(t,e){this._settings.select&&(this._no_animation=!0,"multiselect"==this._settings.select||this._settings.multiselect?this.select(e,!1,t.ctrlKey||t.metaKey||"touch"==this._settings.multiselect,t.shiftKey):this.select(e),this._no_animation=!1)}},on_dblclick:{},getVisibleCount:function(){return Math.floor(this._content_height/this._one_height())},_auto_resize:function(){(this._settings.autoheight||this._settings.autowidth)&&this.resize()},_auto_height_calc:function(t){var e=this.data.$pagesize||this.count();this._onoff_scroll(t&&t<e,"y"),this._settings.autoheight&&e<(t||1/0)&&(t=e);var i=this._one_height()*t+(this.type.margin||0);return this.getUnits&&(i+=this.getUnits().length*this.type.headerHeight),Math.max(i,this._settings.minHeight||0)},_one_height:function(){return this.type.height+(this.type.margin||0)},_auto_width_calc:function(t){var e=this.data.$pagesize||this.count();return this._onoff_scroll(t&&t<e,"x"),this._settings.autowidth&&e<(t||1/0)&&(t=e),this.type.width*t},_correct_width_scroll:function(){"x"==this._settings.layout&&(this._dataobj.style.width="auto"!=this.type.width?this.type.width*this.count()+"px":"auto")},$getSize:function(t,e){return"y"==this._settings.layout?("auto"!=this.type.width&&(this._settings.width=this.type.width+(this._scroll_y?i.scrollSize:0)),(this._settings.yCount||this._settings.autoheight)&&(this._settings.height=this._auto_height_calc(this._settings.yCount)||1)):("auto"!=this.type.height&&(this._settings.height=this._one_height()+(this._scroll_x?i.scrollSize:0)),(this._settings.xCount||this._settings.autowidth)&&(this._settings.width=this._auto_width_calc(this._settings.xCount)||1)),si.api.$getSize.call(this,t,e)},$setSize:function(){si.api.$setSize.apply(this,arguments)},type:{css:"",widthSize:function(t,e){return e.width+(e.width>-1?"px":"")},heightSize:function(t,e){return e.height+(e.height>-1?"px":"")},classname:function(t,e,i){var s="webix_list_item";return e.css&&(s+=" "+e.css),t.$css&&("object"==u(t.$css)&&(t.$css=et(t.$css)),s+=" "+t.$css),i&&i.$css&&(s+=" "+i.$css),s},aria:function(t,e,i){return'role="option"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(t.$count&&t.$template?'aria-expanded="true"':"")},template:function(t){return(t.icon?"<span class='webix_list_icon webix_icon "+t.icon+"'></span>":"")+t.value+(t.badge?"<div class='webix_badge'>"+t.badge+"</div>":"")},width:"auto",templateStart:Vt('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;" {common.aria()}>'),templateEnd:Vt("</div>")},$skin:function(){this.type.height=ni.listItemHeight}},vr=t.protoUI(_r,Ai,Zi,Ei,Hi,Qi,rs,as,pr.view,Ci),mr={api:_r,view:vr};Yt(mr.view,{name:"uploader",template:"{common.removeIcon()}{common.percent()}<div style='float:right'>#sizetext#</div>{common.fileName()}",percent:function(t){return"transfer"==t.status?"<div style='width:60px; text-align:center; float:right'>"+t.percent+"%</div>":"<div class='webix_upload_"+t.status+"'><span class='"+("error"==t.status?"error_icon":"webix_icon wxi-check")+"'></span></div>"},removeIcon:function(){return"<div class='webix_remove_upload'><span class='cancel_icon'></span></div>"},fileName:function(t){return"<div style='text-overflow:ellipsis; white-space:nowrap; overflow:hidden; padding-right:8px;'>"+t.name+"</div>"},on_click:{webix_remove_upload:function(t,e){Zt(this.config.uploader).files.remove(e)}}});var br={name:"uploader",defaults:{autosend:!0,multiple:!0,inputName:"upload"},$cssName:"button webix_uploader",$allowsClear:!0,on_click:{webix_hidden_upload:function(){return!1}},send:function(){},fileDialog:function(){},stopUpload:function(){},$skin:function(){"material"!=ai&&"mini"!=ai||(this.defaults.css="webix_primary")},$init:function(){var e=Ns.html5;this.files=new ja,this._destroy_with_me=[this.files],(P(XMLHttpRequest)||P((new XMLHttpRequest).upload))&&(e=Ns.flash),_(e,"incorrect driver"),t.extend(this,e,!0)},$setSize:function(t,e){si.api.$setSize.call(this,t,e)&&this.render()},apiOnly_setter:function(t){return L(this.render,this),this.$apiOnly=t},_add_files:function(t){for(var e=0;e<t.length;e++)this.addFile(t[e])},link_setter:function(t){return t&&L(function(){var t=Zt(this._settings.link);if(!t){var e=this.getTopParentView();e.$$&&(t=e.$$(this._settings.link))}t.sync&&t.filter?t.sync(this.files):t.setValues&&this.files.data.attachEvent("onStoreUpdated",function(){t.setValues(this)}),t._settings.uploader=this._settings.id},this),t},addFile:function(e,i,s,n){var a=null;"object"==u(e)&&(e=(a=e).name,i=a.size);var r=this._format_size(i);s=s||e.split(".").pop();var o={file:a,name:e,id:$(),size:i,sizetext:r,type:s,context:this._last_file_context,status:"client"};if(a&&a.webkitRelativePath&&(o.name=a.webkitRelativePath),n&&t.extend(o,n,!0),this.callEvent("onBeforeFileAdd",[o])){this._settings.multiple||this.files.clearAll();var l=this.files.add(o);this.callEvent("onAfterFileAdd",[o]),l&&this._settings.autosend&&this.send(l)}return o},_get_active_url:function(e){var i=this._settings.upload,s=t.extend(e.urlData||{},this._settings.urlData||{});if(i&&s){var n=[];for(var a in s)n.push(encodeURIComponent(a)+"="+encodeURIComponent(s[a]));n.length&&(i+=(-1==i.indexOf("?")?"?":"&")+n.join("&"))}return i},addDropZone:function(t,e){var i=D(t),s="";e&&(s=" "+et({content:'"'+e+'"'},":before"));var n="webix_drop_file"+s,a=null;ee(i,"dragover",ut),ee(i,"dragover",function(){pt(i,n,!0),a&&(clearTimeout(a),a=null)}),ee(i,"dragleave",function(){a=setTimeout(function(){_t(i,n)},150)}),ee(i,"drop",T(function(t){return _t(i,n),this._drop(t),ut(t)},this))},_format_size:function(t){for(var e=0;t>1024;)e++,t/=1024;return Math.round(100*t)/100+" "+St.fileSize[e]},_complete:function(e,i){var s=this.files.getItem(e);t.extend(s,i,!0),s.status="server",s.progress=100,this.callEvent("onFileUpload",[s,i]),this.callEvent("onChange",[]),this.files.updateItem(e),this.isUploaded()&&this._upload_complete(i)},_upload_complete:function(t){this.callEvent("onUploadComplete",[t]),this._last_assigned_upload_callback&&(this._last_assigned_upload_callback.call(this,t),this._last_assigned_upload_callback=0)},isUploaded:function(){for(var t=this.files.data.order,e=0;e<t.length;e++)if("server"!=this.files.getItem(t[e]).status)return!1;return!0},$onUploadComplete:function(){},$updateProgress:function(t,e){var i=this.files.getItem(t);i.percent=Math.round(e),this.files.updateItem(t)},setValue:function(t){"string"==typeof t&&t&&(t={value:t,status:"server"}),this.files.clearAll(),t&&this.files.parse(t),this.callEvent("onChange",[])},getValue:function(){var t=[];return this.files.data.each(function(e){"server"==e.status&&t.push(e.value||e.name)}),t.join(",")}},xr=(t.protoUI(br,Pa.view),{name:"suggest",defaults:{autofocus:!1,type:"list",keyPressTimeout:1,body:{yCount:10,autoheight:!0,body:!0,select:!0,borderless:!0,navigation:!0},filter:function(t,e){return 0===t.value.toString().toLowerCase().indexOf(e.toLowerCase())}},template_setter:Vt,filter_setter:function(t){return F(t,this.$scope)},_show_on_key_press:!0,$init:function(e){var i={};t.extend(i,E(this.defaults.body)),i.view=e.type||this.defaults.type;var s=this._get_extendable_cell(i);e.body&&t.extend(s,e.body,!0),e.data&&(s.data=e.data),e.url&&(s.url=e.url),e.datatype&&(s.datatype=e.datatype),e.id&&(i.id=i.id||e.id+"_"+i.view),e.body=i,this.$ready.push(this._set_on_popup_click),this.attachEvent("onShow",function(){if(this._settings.master){var t=Zt(this._settings.master);if(t){var e=t._getInputDiv?t._getInputDiv():t.getInputNode();e.setAttribute("aria-expanded","true")}}this._show_selection()}),this.attachEvent("onHide",function(){if(this._settings.master){var t=Zt(this._settings.master);if(t){var e=t._getInputDiv?t._getInputDiv():t.getInputNode();e.setAttribute("aria-expanded","false")}}}),this._old_text={}},_get_extendable_cell:function(t){return t},_preselectMasterOption:function(t){var e,i,s=t.id?this.getItemText(t.id):t.text||t.value;this._settings.master&&(e=Zt(this._settings.master),(i=e.getInputNode())&&e.$setValueHere?e.$setValueHere(s):i&&(e.options_setter?s=this.getItemText(t.id):t.value&&(s=e._get_visible_text?e._get_visible_text(t.value):t.value.toString()),P(i.value)?i.innerHTML=s:i.value=s.replace(/<[^>]*>/g,""))),(i=i||this._last_input_target)&&i.focus()},setMasterValue:function(t,e){var i=t.id?this.getItemText(t.id):t.text||t.value;if(this._settings.master){var s=Zt(this._settings.master);e&&t.id?s.refresh():s.options_setter?s.setValue(t.$empty?"":t.id):s.setValueHere?s.setValueHere(i):s.setValue(i)}else this._last_input_target&&(this._last_input_target.value=i);e||(this.hide(),this._last_input_target&&this._last_input_target.focus()),this.callEvent("onValueSuggest",[t,i]),L(function(){Y("onEditEnd",[])})},getMasterValue:function(){return this._settings.master?Zt(this._settings.master).getValue():null},getItemId:function(t){var e=this.getList();for(var i in e.data.pull){var s=e.getItem(i);if(this._settings.filter.call(this,s,t))return s.id}},getItemText:function(t){var e=this.getList().getItem(t);if(!e)return this._old_text[t]||"";if(this._settings.template)return this._settings.template.call(this,e,this.type);if(this._settings.textValue)return""+e[this._settings.textValue];var i=this.getList().type,s=i.template.call(i,e,i);return this._old_text[t]=s},getSuggestion:function(t){var e,i=this.getList(),s=i.data.order;return i.getSelectedId&&(e=i.getSelectedId()),t&&s.length&&(!e||s.find(e)<0)&&(e=s[0],!i.config.dataFeed&&!this.config.filter.call(this,i.data.pull[e],t))?null:(e&&"object"==u(e)&&(e+=""),e)},getList:function(){return this._body_cell},_set_on_popup_click:function(){var t=this.getList(),e=this._settings.type;t.count?(t.attachEvent("onItemClick",T(function(e){this.setMasterValue(t.getItem(e))},this)),t.data.attachEvent("onstoreupdated",T(function(t,e,i){"delete"==i&&t==this.getMasterValue()?this.setMasterValue({id:"",text:""},1):"update"==i&&t==this.getMasterValue()&&this.setMasterValue(e,1)},this)),t.data.attachEvent("onAfterFilter",T(this._suggest_after_filter,this)),t.data.attachEvent("onStoreLoad",T(this._suggest_after_filter,this)),P(this._settings.fitMaster)&&(this._settings.fitMaster=!0)):"calendar"==e?(t.attachEvent("onDateSelect",function(){this.getParentView().setMasterValue({value:t.getSelectedDate()},t.config.multiselect)}),t.attachEvent("onTodaySet",function(t){this.getParentView().setMasterValue({value:t})}),t.attachEvent("onDateClear",function(t){this.getParentView().setMasterValue({value:t})})):"colorboard"==e&&t.attachEvent("onItemClick",function(t){this.getParentView().setMasterValue({value:t})})},input_setter:function(t){return this.linkInput(t),0},linkInput:function(t){var e;t.getInputNode?(e=t.getInputNode()).webix_master_id=t._settings.id:e=D(t),ee(e,"keydown",function(i){e==document.body&&!this.isVisible()||(t.config?t.config.readonly:e.getAttribute("readonly"))||this._suggestions(i)},{bind:this}),t._getInputDiv&&(e=t._getInputDiv()),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-expanded","false"),"DIV"===e.tagName&&(e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true")),this._non_ui_mode=!0},_suggestions:function(t){t=t||event;var e=this.getList(),i=t.target||t.srcElement;if((i!=document.body||this.isVisible())&&"webix_clipbuffer"!=i.className){this._last_input_target=i,this._settings.master=i.webix_master_id,window.clearTimeout(this._key_timer);var s=t.keyCode;if(16!=s&&17!=s)return 9==s?this._tab_key(this,e):27==s?this._escape_key(this,e):13==s?(this.isVisible()&&ut(t),this.$enterKey(this,e)):this._navigate(t)&&this.isVisible()?(ut(t),!1):void(P(i.value)||(clearTimeout(this._last_delay),this._last_delay=L(function(){if(this._non_ui_mode||Ve.getFocus()==Zt(this._settings.master)){this._resolve_popup=!0;var t=i.value;e.config.dataFeed?e.filter("value",t):e.filter&&e.filter(T(function(e){return this._settings.filter.call(this,e,t)},this))}},this,[],this._settings.keyPressTimeout)))}},_suggest_after_filter:function(){if(!this._resolve_popup)return!0;this._resolve_popup=!1;var t=this.getList();t.count()>0?(this.adjust(),this.isVisible()||(this._dont_unfilter=!0),this.show(this._last_input_target,null,!0),this._dont_unfilter=!1):(this.hide(),this._last_input_target=null)},show:function(t){if(!this.isVisible()){var e=this.getList();e.filter&&!this._dont_unfilter&&e.filter(""),this.$customWidth?this.$customWidth(t):t.tagName&&this._settings.fitMaster&&(this._settings.width=t.offsetWidth-2),e._zoom_level&&e.render(),this.adjust(),"INPUT"==t.tagName&&(this._last_input_target=t)}ca.api.show.apply(this,arguments)},_show_selection:function(t){t=t||this.getList();var e=this.getMasterValue();t.select&&t.showItem?e&&t.exists&&t.exists(e)?(t.select(e),t.showItem(e)):(t.unselect(),t.showItem(t.getFirstId())):t.setValue&&(this._settings.master&&(e=Zt(this._settings.master).$prepareValue(e)),t.setValue(e))},$enterKey:function(t,e){var i;t.isVisible()?(e.count&&e.count()?(i=e.getSelectedId(!1,!0),1==e.count()&&e.getFirstId()!=i&&(i=e.getFirstId()),i&&(i=e.getItem(i))):e.getSelectedDate&&e.getSelectedDate()?i={value:e.getSelectedDate()}:e.getValue&&e.getValue()&&(i={value:e.getValue()}),i&&this.setMasterValue(i),t.hide()):this._show_on_key_press&&t.show(this._last_input_target)},_escape_key:function(t){return t.hide()},_tab_key:function(t){return t.hide()},
/*! suggestions navigation: up/down buttons move selection
	   *	@param e
	   *		event object
	   **/
_navigate:function(t){var e,i=this.getList(),s=t.keyCode;if(i.moveSelection&&s<41&&s>32&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey){if(40===s||38===s){this._show_on_key_press&&!this.isVisible()&&this.show(this._last_input_target);var n=38===s?"up":"down";i.moveSelection(n,!1,!1)}else{if(i.count||!i.count&&!i.isVisible())return!1;var a;33==s&&(a="pgup"),34==s&&(a="pgdown"),35==s&&(a="bottom"),36==s&&(a="top"),37==s&&(a="left"),39==s&&(a="right"),i.moveSelection(a,!1,!1)}return i.count?e=i.getSelectedItem():i.getSelectedDate?e={value:i.getVisibleDate()}:i.getValue&&(e={value:i.getValue()}),this.isVisible()&&this._preselectMasterOption(e),!0}return!1},getValue:function(){var t=this.getList(),e=(t.getValue?t.getValue():t.getSelectedId())||"";if(e=e.id||e,t.getItem){var i=t.getItem(e);if(i&&i.$empty)return""}return e},setValue:function(t){var e=this.getList();t?e.exists(t)&&(e.select(t),e.showItem(t)):(e.unselect(),e.showItem(e.getFirstId()))}}),yr=t.protoUI(xr,ca.view),wr={api:xr,view:yr};t.protoUI({name:"multisuggest",defaults:{template:"GPL version doesn't support multisuggest <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"checksuggest",defaults:{template:"GPL version doesn't support checksuggest <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"datasuggest",defaults:{template:"GPL version doesn't support datasuggest <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"gridsuggest",defaults:{template:"GPL version doesn't support gridsuggest <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"daterange",defaults:{template:"GPL version doesn't support daterange <br> You need Webix PRO"}},Wn.view);var Sr={name:"daterangesuggest",defaults:{type:"daterange",body:{view:"daterange",icons:!0,button:!0,borderless:!0}},getValue:function(){return this.getRange().getValue()},setValue:function(t){this.getRange().setValue(E(t))},getRange:function(){return this.getBody()},getButton:function(){return this.getBody().getChildViews()[1].getChildViews()[1]},_setValue:function(t,e){var i=Zt(this._settings.master);i?(i.setValue(t),e&&this.hide()):this.setValue(t)},_set_on_popup_click:function(){var t=this.getRange();t.attachEvent("onAfterDateSelect",T(function(t){this._setValue(t)},this)),t.attachEvent("onDateClear",T(function(t){this._setValue(t)},this)),t.attachEvent("onTodaySet",T(function(t){this._setValue(t)},this))}},kr=(t.protoUI(Sr,wr.view),{$cssName:"datepicker",name:"daterangepicker",$init:function(t){this._settings.value={},delete t.type},_init_popup:function(){var t=this._settings;t.suggest?t.popup=t.suggest:t.popup||(t.popup=t.suggest=this.suggest_setter({view:"daterangesuggest",body:{timepicker:t.timepicker,calendarCount:t.calendarCount,height:250+(t.button||t.icons?30:0)}})),this._init_once=function(){}},$prepareValue:function(t){(t=t||{}).start=Ga.api.$prepareValue.call(this,t.start?t.start:null),t.end=Ga.api.$prepareValue.call(this,t.end?t.end:null);var e=Zt(this._settings.popup).getRange();return E(e._correct_value(t))},$compareValue:function(t,e){var i=Ga.api.$compareValue,s=i.call(this,t.start,e.start),n=i.call(this,t.end,e.end);return s&&n},$setValue:function(t){t=t||{},this._settings.text=(t.start?this._get_visible_text(t.start):"")+(t.end?" - "+this._get_visible_text(t.end):""),this._set_visible_text()},$render:function(t){t.value=this.$prepareValue(t.value),this.$setValue(t.value)},getValue:function(){var t=this._settings.value;if(this._settings.stringResult){var e=St.parseFormatStr;return this._formatValue(e,t)}return t||null},_formatValue:function(t,e){return e.start&&(e.start=t(e.start)),e.end&&(e.end=t(e.end)),e}});t.protoUI(kr,Ga.view),t.protoUI({name:"excelbar",defaults:{template:"GPL version doesn't support excelbar <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"excelviewer",defaults:{template:"GPL version doesn't support excelviewer <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"pdfbar",defaults:{template:"GPL version doesn't support pdfbar <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"pdfviewer",defaults:{template:"GPL version doesn't support pdfviewer <br> You need Webix PRO"}},Wn.view);var Cr,Ar,Ir={name:"video",$init:function(t){t.id||(t.id=$()),this.$ready.push(this._init_video)},_init_video:function(){var t=this._settings;if(this._contentobj=nt("video",{class:"webix_view_video",style:"width:100%;height:100%;",autobuffer:"autobuffer"},""),t.poster&&(this._contentobj.poster=t.poster),t.src){"object"!=u(t.src)&&(t.src=[t.src]);for(var e=0;e<t.src.length;e++)this._contentobj.innerHTML+=' <source src="'+t.src[e]+'">'}t.controls&&(this._contentobj.controls=!0),t.autoplay&&(this._contentobj.autoplay=!0),this._viewobj.appendChild(this._contentobj)},getVideo:function(){return this._contentobj},defaults:{src:"",controls:!0}};t.protoUI(Ir,si.view),t.protoUI({name:"gage",defaults:{template:"GPL version doesn't support gage <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"barcode",defaults:{template:"GPL version doesn't support barcode <br> You need Webix PRO"}},Wn.view),t.protoUI({name:"bulletgraph",defaults:{template:"GPL version doesn't support bulletgraph <br> You need Webix PRO"}},Wn.view);var Er,Tr,Mr={name:"geochart",defaults:{chart:{displayMode:"auto",region:"world",resolution:"countries"}},$init:function(e){this.$view.innerHTML="<div class='webix_map_content' style='width:100%;height:100%'></div>",this._contentobj=this.$view.firstChild,this._waitMap=Mt.defer(),e.chart=t.extend(e.chart||{},this.defaults.chart),this.data.provideApi(this,!0),this.$ready.push(this.render),this.data.attachEvent("onClearAll",T(this._refreshColumns,this)),this.data.attachEvent("onStoreUpdated",T(this._drawData,this))},getMap:function(t){return t?this._waitMap:this._map},_getCallBack:function(t){return T(function(){"function"==typeof t&&t(),Cr=Cr||window.google,this._initMap()},this)},render:function(){void 0===window.google||void 0===window.google.charts?(Ar||((Ar=document.createElement("script")).type="text/javascript",Ar.src="//www.gstatic.com/charts/loader.js",document.getElementsByTagName("head")[0].appendChild(Ar)),Ar.onload=this._getCallBack(Ar.onload)):this._getCallBack()()},_initMap:function(){Cr.visualization&&Cr.visualization.GeoChart?(this._map=new Cr.visualization.GeoChart(this._contentobj),this._mapEvents(),this._waitMap.resolve(this._map)):(Cr.charts.load("current",{packages:["geochart"],mapsApiKey:this._settings.key}),Cr.charts.setOnLoadCallback(T(function(){this._initMap()},this)))},$onLoad:function(t){return!this._map&&(this._waitMap.then(T(function(){this.parse(t,this._settings.datatype)},this)),!0)},_drawData:function(){if(this._map){var t=this._columns&&this._columns.length?this._columns:this._defineColumns(),e=[];if(this.data.each(function(i){for(var s=[],n=0;n<t.length;n++){var a=i[t[n].label];"number"==t[n].type?a*=1:"tooltip"==t[n].role&&(a=this._settings.tooltip(i)),s.push(a)}e.push(s)},this),t.length){for(var i=new Cr.visualization.DataTable,s=0;s<t.length;s++)i.addColumn(t[s]);i.addRows(e);var n=new Cr.visualization.DataView(i);this._map.draw(n,this._settings.chart)}else this._map.draw(Cr.visualization.arrayToDataTable([["",""]]),{})}else this._map||this._waitMap.then(T(this._drawData,this))},setDisplayMode:function(t){this._settings.chart.displayMode=t,this.refresh()},setRegion:function(t){this._settings.chart.region=t,this.refresh()},refresh:function(){this._map.clearChart(),this._drawData()},tooltip_setter:function(e){var i=this._settings.chart.tooltip;return this._settings.chart.tooltip=t.extend(i||{},{isHtml:!0}),Vt(e)},$setSize:function(e,i){si.api.$setSize.apply(this,arguments)&&this._map&&(t.extend(this._settings,{width:e,height:i}),this.refresh())},_refreshColumns:function(){this._columns=null,this._drawData()},_getColumnType:function(t,e){if(!t||P(t[e]))return"string";var i=u(t[e]);return"string"!=i||isNaN(1*t[e])||(i="number"),i},_defineColumns:function(){var t=this._settings.columns||[],e=this.data.pull[this.data.order[0]];if(!t.length&&e)for(var i in e)"id"!==i&&t.push(i);for(var s=0;s<t.length;s++)"object"!==u(t[s])&&(t[s]={type:this._getColumnType(e,t[s]),label:t[s]});return this._settings.tooltip&&t.push({type:"string",role:"tooltip",p:{html:!0}}),this._columns=t,t},_mapEvents:function(){Cr.visualization.events.addListener(this._map,"error",T(function(){this.callEvent("onMapError",arguments)},this)),Cr.visualization.events.addListener(this._map,"ready",T(function(){this.callEvent("onMapReady",arguments)},this)),Cr.visualization.events.addListener(this._map,"regionClick",T(function(){this.callEvent("onRegionClick",arguments)},this)),Cr.visualization.events.addListener(this._map,"select",T(function(){var t=this._map.getSelection()[0],e=t||this._selprev;if(e){var i=this.data.order[e.row];this._selprev=e,this.callEvent("onItemClick",[i,!!t])}},this))}},Pr=(t.protoUI(Mr,$i,B,si.view),{name:"google-map",$init:function(){this.$view.innerHTML="<div class='webix_map_content' style='width:100%;height:100%'></div>",this._contentobj=this.$view.firstChild,this._waitMap=Mt.defer(),this.data.provideApi(this,!0),this.$ready.push(this.render)},getMap:function(t){return t?this._waitMap:this._map},_getCallBack:function(t){return T(function(){"function"==typeof t&&t(),Er=Er||window.google,this._initMap.call(this)},this)},render:function(){if(void 0===window.google||void 0===window.google.maps){if(!Tr){(Tr=document.createElement("script")).type="text/javascript";var t=this._settings,e=t.src||"//maps.google.com/maps/api/js";e+=-1===e.indexOf("?")?"?":"&",t.key&&(e+="&key="+t.key),t.libraries&&(e+="&libraries="+t.libraries),Tr.src=e,document.getElementsByTagName("head")[0].appendChild(Tr)}Tr.onload=this._getCallBack(Tr.onload)}else this._getCallBack()()},_initMap:function(){var t=this.config;this.isVisible(t.id)&&(this._map=new Er.maps.Map(this._contentobj,{zoom:t.zoom,center:new Er.maps.LatLng(t.center[0],t.center[1]),mapTypeId:Er.maps.MapTypeId[t.mapType]}),this._waitMap.resolve(this._map),this._contentobj.firstChild.setAttribute("webix_disable_drag","true"))},center_setter:function(t){return this._map&&this._map.setCenter(new Er.maps.LatLng(t[0],t[1])),t},mapType_setter:function(t){return this._map&&this._map.setMapTypeId(Er.maps.MapTypeId[t]),t},zoom_setter:function(t){return this._map&&this._map.setZoom(t),t},layerType_setter:function(e){return"heatmap"==e&&(this.config.libraries="visualization"),this._layerApi[e]&&(t.extend(this,this._layerApi[e],!0),this.data.attachEvent("onStoreUpdated",T(function(){this._waitMap.then(T(function(){this.drawData.call(this,arguments)},this))},this))),e},defaults:{zoom:5,center:[39.5,-98.5],mapType:"ROADMAP",layerType:"marker"},$setSize:function(){si.api.$setSize.apply(this,arguments),this._map&&Er.maps.event.trigger(this._map,"resize")},$onLoad:function(t){return!this._map&&(this._waitMap.then(T(function(){this.parse(t)},this)),!0)},_layerApi:{marker:{drawData:function(t,e,i){switch(i){case"add":case"update":e.$marker=this._getItemConfig(e);break;case"delete":e.$marker.setMap(null);break;default:this.data.each(function(t){t.$marker=this._getItemConfig(t)},this)}},clearAll:function(t){this.data.each(function(t){t.$marker.setMap(null)}),this.data.clearAll(t)},showItem:function(t){var e=this.getItem(t);this._map.setCenter(new Er.maps.LatLng(e.lat,e.lng))},_getItemConfig:function(t){var e={};for(var i in t)e[i]=t[i];e.position=new Er.maps.LatLng(t.lat,t.lng),e.map=t.hidden?null:this._map;var s=t.$marker;return s?t.$marker.setMap(e.map):(s=new Er.maps.Marker(e),this._events(s)),this.callEvent("onItemRender",[t]),s},_events:function(t){var e=this;t.addListener("click",function(){e.callEvent("onItemClick",[this.id,this])}),t.getDraggable()&&(t.addListener("dragend",function(){e._onDrag(this,!0)}),t.addListener("drag",function(){e._onDrag(this)}))},_onDrag:function(t,e){var i=this.getItem(t.id),s=t.getPosition(),n=e?"onAfterDrop":"onDrag";i.lat=s.lat(),i.lng=s.lng(),this.callEvent(n,[i.id,i])}},heatmap:{heatmapConfig_setter:function(t){return t=t||{}},drawData:function(){this._heatmap&&(this._heatmap.setMap(null),this._heatmap=null);var e=[];if(this.data.each(function(t){e.push(this._getConfig(t))},this),e.length){var i=t.extend(this.config.heatmapConfig,{data:e,map:this._map},!0);this._heatmap=new Er.maps.visualization.HeatmapLayer(i),this.callEvent("onHeatMapRender",[this._heatmap])}},getHeatmap:function(){return this._heatmap},_getConfig:function(t){var e={};for(var i in t)e[i]=t[i];return e.location=new Er.maps.LatLng(t.lat,t.lng),e}}}});t.protoUI(Pr,$i,B,si.view),t.protoUI({name:"organogram",defaults:{template:"GPL version doesn't support organogram <br> You need Webix PRO"}},Wn.view);var Lr={$render_pie:function(t,e,i,s,n,a){this._renderPie(t,e,i,s,1,a,n)},_renderPie:function(t,e,i,s,n,a,r){if(e.length){var o=this._getPieParameters(i,s),l=this._settings.radius?this._settings.radius:o.radius;if(!(l<0)){var h=this._getValues(e),c=this._getTotalValue(h),d=this._getRatios(h,c),u=this._settings.x?this._settings.x:o.x,f=this._settings.y?this._settings.y:o.y;1==n&&this._settings.shadow&&this._addShadow(t,u,f,l),f/=n;var g,p=-Math.PI/2,_=[];if(t.scale(1,n),this._settings.gradient){var v=1!=n?u+l/3:u,m=1!=n?f+l/3:f;this._showRadialGradient(t,u,f,l,v,m)}for(var b=0;b<e.length;b++)if(h[b]){t.strokeStyle=this._settings.lineColor.call(this,e[b]),t.beginPath(),t.moveTo(u,f),_.push(p);var x=-Math.PI/2+d[b]-1e-4;t.arc(u,f,l,p,x,!1),t.lineTo(u,f);var y=this._settings.color.call(this,e[b]);t.fillStyle=y,t.fill(),this._settings.pieInnerText&&this._drawSectorLabel(u,f,5*l/6,p,x,n,this._settings.pieInnerText(e[b],c),!0),this._settings.label&&this._drawSectorLabel(u,f,l+this._settings.labelOffset,p,x,n,this._settings.label(e[b])),1!=n&&(this._createLowerSector(t,u,f,p,x,l,!0),t.fillStyle="#000000",t.globalAlpha=.2,this._createLowerSector(t,u,f,p,x,l,!1),t.globalAlpha=1,t.fillStyle=y),a.addSector(e[b].id,p,x,u-i.x,f-i.y/n,l,n,r),p=x}for(t.globalAlpha=.8,b=0;b<_.length;b++)g=this._getPositionByAngle(_[b],u,f,l),this._drawLine(t,u,f,g.x,g.y,this._settings.lineColor.call(this,e[b]),2);t.globalAlpha=1,1==n&&this._settings.border&&(t.lineWidth=this._settings.borderWidth||2,t.strokeStyle=this._settings.borderColor?this._settings.borderColor.call(this):"#ffffff",t.beginPath(),t.arc(u,f,l+1,0,2*Math.PI,!1),t.stroke()),t.scale(1,1/n)}}},_getValues:function(t){for(var e=[],i=0;i<t.length;i++)e.push(Math.abs(parseFloat(this._settings.value(t[i])||0)));return e},_getTotalValue:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e},_getRatios:function(t,e){var i,s=[],n=0;e=e||this._getTotalValue(t);for(var a=0;a<t.length;a++)i=t[a],s[a]=2*Math.PI*(e?(i+n)/e:1/t.length),n+=i;return s},_getPieParameters:function(t,e){var i=e.x-t.x,s=e.y-t.y,n=t.x+i/2,a=t.y+s/2,r=Math.min(i/2,s/2);return{x:n,y:a,radius:r}},_createLowerSector:function(t,e,i,s,n,a,r){if(t.lineWidth=1,s<=0&&n>=0||s>=0&&n<=Math.PI||Math.abs(s-Math.PI)>.003&&s<=Math.PI&&n>=Math.PI){s<=0&&n>=0&&(s=0,r=!1,this._drawSectorLine(t,e,i,a,s,n)),s<=Math.PI&&n>=Math.PI&&(n=Math.PI,r=!1,this._drawSectorLine(t,e,i,a,s,n));var o=(this._settings.pieHeight||Math.floor(a/4))/this._settings.cant;t.beginPath(),t.arc(e,i,a,s,n,!1),t.lineTo(e+a*Math.cos(n),i+a*Math.sin(n)+o),t.arc(e,i+o,a,n,s,!0),t.lineTo(e+a*Math.cos(s),i+a*Math.sin(s)),t.fill(),r&&t.stroke()}},_drawSectorLine:function(t,e,i,s,n,a){t.beginPath(),t.arc(e,i,s,n,a,!1),t.stroke()},_addShadow:function(t,e,i,s){t.globalAlpha=.5;for(var n=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],a=n.length-1;a>-1;a--)t.beginPath(),t.fillStyle=n[a],t.arc(e+1,i+1,s+a,0,2*Math.PI,!0),t.fill();t.globalAlpha=1},_getGrayGradient:function(t){return t.addColorStop(0,"#ffffff"),t.addColorStop(.7,"#7a7a7a"),t.addColorStop(1,"#000000"),t},_showRadialGradient:function(t,e,i,s,n,a){var r;t.beginPath(),"function"!=typeof this._settings.gradient?(r=t.createRadialGradient(n,a,s/4,e,i,s),r=this._getGrayGradient(r)):r=this._settings.gradient(r),t.fillStyle=r,t.arc(e,i,s,0,2*Math.PI,!0),t.fill(),t.globalAlpha=.7},_drawSectorLabel:function(t,e,i,s,n,a,r,o){var l=this.canvases[0].renderText(0,0,r,0,1);if(l){var h=l.scrollWidth;l.style.width=h+"px",h>t&&(h=t);var c=n-s<.2?4:8;o&&(c=h/1.8);var d=s+(n-s)/2;i-=(c-8)/2;var u=-c,f="right";(d>=Math.PI/2&&d<Math.PI||d<=3*Math.PI/2&&d>=Math.PI)&&(u=-h-u+1,f="left");var g=0;!o&&a<1&&d>0&&d<Math.PI&&(g=(this._settings.height||Math.floor(i/4))/a);var p=(e+Math.floor((i+g)*Math.sin(d)))*a-8,_=t+Math.floor((i+c/2)*Math.cos(d))+u,v=n<Math.PI/2+.01,m=s<Math.PI/2;m&&v?_=Math.max(_,t+3):m||v?!o&&(d>=Math.PI/2&&d<Math.PI||d<=3*Math.PI/2&&d>=Math.PI)&&(_+=h/3):_=Math.min(_,t-h),l.style.top=p+"px",l.style.left=_+"px",l.style.width=h+"px",l.style.textAlign=f,l.style.whiteSpace="nowrap"}},$render_pie3D:function(t,e,i,s,n,a){this._renderPie(t,e,i,s,this._settings.cant,a)},$render_donut:function(t,e,i,s,n,a){if(e.length){this._renderPie(t,e,i,s,1,a,n);var r=this._settings,o=this._getPieParameters(i,s),l=r.radius?r.radius:o.radius;if(!(l<=0)){var h=r.innerRadius&&r.innerRadius<l?r.innerRadius:l/3,c=r.x?r.x:o.x,d=r.y?r.y:o.y;t.fillStyle="#ffffff",t.beginPath(),t.arc(c,d,h,0,2*Math.PI,!0),t.fill()}}}},zr={$render_bar:function(t,e,i,s,n,a){var r,o,l,h,c,d,u,f,g,p,_,v,m,b=s.y-i.y;m=!!this._settings.yAxis,v=!!this._settings.xAxis,h=this._getLimits(),c=h.max,d=h.min,o=(s.x-i.x)/e.length,n||"auto"!=this._settings.origin&&!m||this._drawScales(e,i,s,d,c,o),m&&(c=parseFloat(this._settings.yAxis.end),d=parseFloat(this._settings.yAxis.start)),g=this._getRelativeValue(d,c),u=g[0],f=g[1],_=u?b/u:u,m||"auto"!=this._settings.origin&&v||(p=10,_=u?(b-p)/u:p),!n&&"auto"!=this._settings.origin&&!m&&this._settings.origin>d&&this._drawXAxis(t,e,i,s,o,s.y-_*(this._settings.origin-d)),r=parseInt(this._settings.barWidth,10);var x=0,y=0;for(l=0;l<this._series.length;l++)l==n&&(y=x),"bar"==this._series[l].type&&x++;this._series&&r*x+4>o&&(r=parseInt(o/x-4,10));var w=(o-r*x)/2,S=void 0!==this._settings.radius?parseInt(this._settings.radius,10):Math.round(r/5),k=!1,C=this._settings.gradient;for(C&&"function"!=typeof C?(k=C,C=!1):C&&(C=t.createLinearGradient(0,s.y,0,i.y),this._settings.gradient(C)),v||this._drawLine(t,i.x,s.y+.5,s.x,s.y+.5,"#edeff0",1),l=0;l<e.length;l++){var A=parseFloat(this._settings.value(e[l])||0);this._logScaleCalc&&(A=this._log10(A)),A>c&&(A=c),A-=d,A*=f;var I=i.x+w+l*o+(r+1)*y,E=s.y,T=C||this._settings.color.call(this,e[l]),M=this._settings.border?1:0,P=this._settings.label(e[l]);A==this._settings.origin||"auto"==this._settings.origin&&this._settings.value(e[l])==d?(M=0,P=""):A<0||this._settings.yAxis&&0===A&&!("auto"!=this._settings.origin&&this._settings.origin>d)?(A=M=0,P=""):m||"auto"!=this._settings.origin&&v||(A+=p/_),t.globalAlpha=this._settings.alpha.call(this,e[l]);var L=this._drawBar(t,i,I,E,r,d,S,_,A,T,C,k,M);k&&this._drawBarGradient(t,I,E,r,d,S,_,A,T,k,M),M&&this._drawBarBorder(t,I,E,r,d,S,_,A,T),t.globalAlpha=1,L[0]!=I?this.canvases[n].renderTextAt(!1,!0,I+Math.floor(r/2),L[1],P):this.canvases[n].renderTextAt(!0,!0,I+Math.floor(r/2),L[3],P),a.addRect(e[l].id,[I-i.x,L[3]-i.y,L[2]-i.x,L[1]-i.y],n)}},_correctBarParams:function(t,e,i,s,n,a,r){var o=this._settings.xAxis,l=i;return o&&"auto"!=this._settings.origin&&this._settings.origin>r&&(i-=(this._settings.origin-r)*n,l=i,(s-=this._settings.origin-r)<0&&(s*=-1,t.translate(e+a,i),t.rotate(Math.PI),e=0,i=0),i-=.5),{value:s,x0:e,y0:i,start:l}},_drawBar:function(t,e,i,s,n,a,r,o,l,h,c,d,u){t.save(),t.fillStyle=h;var f=this._correctBarParams(t,i,s,l,o,n,a),g=this._setBarPoints(t,f.x0,f.y0,n,r,o,f.value,u);c&&!d&&t.lineTo(f.x0+u,e.y),t.fill(),t.restore();var p=f.x0,_=f.x0!=i?i+g[0]:g[0],v=f.x0!=i?f.start-g[1]-f.y0:f.y0,m=f.x0!=i?f.start-f.y0:g[1];return[p,v,_,m]},_setBorderStyles:function(t,e){var i,s;s=os.toRgb(e),(i=os.rgbToHsv(s[0],s[1],s[2]))[2]/=1.4;var n="rgb("+os.hsvToRgb(i[0],i[1],i[2])+")";t.strokeStyle=n,1==t.globalAlpha&&(t.globalAlpha=.9)},_drawBarBorder:function(t,e,i,s,n,a,r,o,l){var h;t.save(),h=this._correctBarParams(t,e,i,o,r,s,n),this._setBorderStyles(t,l),this._setBarPoints(t,h.x0,h.y0,s,a,r,h.value,t.lineWidth/2,1),t.stroke(),t.restore()},_drawBarGradient:function(t,e,i,s,n,a,r,o,l,h,c){t.save();var d=this._correctBarParams(t,e,i,o,r,s,n),u=this._setBarGradient(t,d.x0,d.y0,d.x0+s,d.y0-r*d.value+2,h,l,"y");t.fillStyle=u.gradient,this._setBarPoints(t,d.x0+u.offset,d.y0,s-2*u.offset,a,r,d.value,u.offset+c),t.fill(),t.restore()},_setBarPoints:function(t,e,i,s,n,a,r,o,l){t.beginPath();var h=0;if(n>a*r){var c=(n-a*r)/n;c<=1&&c>=-1&&(h=-Math.acos(c)+Math.PI/2)}t.moveTo(e+o,i);var d=i-Math.floor(a*r)+n+(n?0:o);n<a*r&&t.lineTo(e+o,d);var u=e+n;n&&n>0&&t.arc(u,d,Math.max(n-o,0),-Math.PI+h,-Math.PI/2,!1);var f=e+s-n-o,g=d-n+(n?o:0);t.lineTo(f,g),n&&n>0&&t.arc(f+o,d,Math.max(n-o,0),-Math.PI/2,0-h,!1);var p=e+s-o;return t.lineTo(p,i),l||t.lineTo(e+o,i),[p,g]}},Nr={$render_line:function(t,e,i,s,n,a){var r,o,l,h,c,d,f,g,p,_,v,m;if(h=this._calculateLineParams(t,e,i,s,n),r=this._settings,e.length){for(c=r.offset?i.x+.5*h.cellWidth:i.x,l=[],o=0;o<e.length;o++)if((m=this._getPointY(e[o],i,s,h))||"0"==m){if(f=o?h.cellWidth*o-.5+c:c,p="object"==u(m)?m.y0:m,o&&this._settings.fixOverflow){if((v=this._getPointY(e[o-1],i,s,h)).out&&v.out==m.out)continue;d=h.cellWidth*(o-1)-.5+c,g="object"==u(v)?v.y0:v,v.out&&(_="min"==v.out?s.y:i.y,l.push({x:this._calcOverflowX(d,f,g,p,_),y:_})),m.out&&(_="min"==m.out?s.y:i.y,l.push({x:this._calcOverflowX(d,f,g,p,_),y:_}))}m.out||l.push({x:f,y:m,index:o})}for(this._mapStart=i,o=1;o<=l.length;o++)d=l[o-1].x,g=l[o-1].y,o<l.length&&(f=l[o].x,p=l[o].y,this._drawLine(t,d,g,f,p,r.line.color.call(this,e[o-1]),r.line.width),r.line&&r.line.shadow&&(t.globalAlpha=.3,this._drawLine(t,d+2,g+r.line.width+8,f+2,p+r.line.width+8,"#eeeeee",r.line.width+3),t.globalAlpha=1)),void 0!==l[o-1].index&&this._drawItem(t,d,g,e[l[o-1].index],r.label(e[l[o-1].index]),n,a,i)}},_calcOverflowX:function(t,e,i,s,n){return t+(n-i)*(e-t)/(s-i)},_drawItem:function(t,e,i,s,n,a,r){var o=this._settings.item,l=parseInt(o.radius.call(this,s),10)||0,h=this._mapStart,c=o.type.call(this,s);if(l){if(t.save(),o.shadow){t.lineWidth=1,t.strokeStyle="#bdbdbd",t.fillStyle="#bdbdbd";for(var d=[.1,.2,.3],u=d.length-1;u>=0;u--)t.globalAlpha=d[u],t.strokeStyle="#d0d0d0",t.beginPath(),this._strokeChartItem(t,e,i+2*l/3,l+u+1,c),t.stroke();t.beginPath(),t.globalAlpha=.3,t.fillStyle="#bdbdbd",this._strokeChartItem(t,e,i+2*l/3,l+1,c),t.fill()}t.restore(),t.lineWidth=o.borderWidth,t.fillStyle=o.color.call(this,s),t.strokeStyle=o.borderColor.call(this,s),t.globalAlpha=o.alpha.call(this,s),t.beginPath(),this._strokeChartItem(t,e,i,l+1,c),t.fill(),t.stroke(),t.globalAlpha=1}if(n&&this.canvases[a].renderTextAt(!1,!0,e,i-l-this._settings.labelOffset,this._settings.label.call(this,s)),r){var f=this._settings.eventRadius||l+1;r.addRect(s.id,[e-f-h.x,i-f-h.y,e+f-h.x,i+f-h.y],a)}},_strokeChartItem:function(t,e,i,s,n){var a=[];if(!n||"square"!=n&&"s"!=n)if(!n||"diamond"!=n&&"d"!=n)a=!n||"triangle"!=n&&"t"!=n?[[e,i,s,0,2*Math.PI,!0]]:[[e,i-s],[e+Math.sqrt(3)*s/2,i+s/2],[e-Math.sqrt(3)*s/2,i+s/2],[e,i-s]];else{var r=t.lineWidth>1?t.lineWidth*Math.sqrt(2)/4:0;a=[[e,i-s],[e+s,i],[e,i+s],[e-s,i],[e+r,i-s-r]]}else s*=Math.sqrt(2)/2,a=[[e-s-t.lineWidth/2,i-s],[e+s,i-s],[e+s,i+s],[e-s,i+s],[e-s,i-s]];this._path(t,a)},_getPointY:function(t,e,i,s){var n=s.minValue,a=s.maxValue,r=s.unit,o=s.valueFactor,l=this._settings.value(t);this._logScaleCalc&&(l=this._log10(l));var h=(parseFloat(l||0)-n)*o;this._settings.yAxis||(h+=s.startValue/r);var c=i.y-r*h;return!this._settings.fixOverflow||"line"!=this._settings.type&&"area"!=this._settings.type?(l>a&&(c=e.y),(h<0||l<n)&&(c=i.y)):l>a?c={y:e.y,y0:c,out:"max"}:(h<0||l<n)&&(c={y:i.y,y0:c,out:"min"}),c},_calculateLineParams:function(t,e,i,s,n){var a,r={};r.totalHeight=s.y-i.y,this._settings.cellWidth?r.cellWidth=Math.min(s.x-i.x,this._settings.cellWidth):r.cellWidth=(s.x-i.x)/(this._settings.offset?e.length:e.length-1);var o=!!this._settings.yAxis,l=-1!=this._settings.type.indexOf("stacked")?this._getStackedLimits(e):this._getLimits();r.maxValue=l.max,r.minValue=l.min,n||this._drawScales(e,i,s,r.minValue,r.maxValue,r.cellWidth),o&&(r.maxValue=parseFloat(this._settings.yAxis.end),r.minValue=parseFloat(this._settings.yAxis.start));var h=this._getRelativeValue(r.minValue,r.maxValue);return a=h[0],r.valueFactor=h[1],r.unit=a?r.totalHeight/a:10,r.startValue=0,o||(r.startValue=10,r.unit!=r.totalHeight&&(r.unit=a?(r.totalHeight-r.startValue)/a:10)),r}},$r={$render_barH:function(t,e,i,s,n,a){var r,o,l,h,c,d,u,f,g,p,_,v,m,b,x,y,w,S,k,C,A;for(l=(s.y-i.y)/e.length,u=this._getLimits("h"),f=u.max,g=u.min,y=s.x-i.x,A=!!this._settings.xAxis,n||this._drawHScales(t,e,i,s,g,f,l),A&&(f=parseFloat(this._settings.xAxis.end),g=parseFloat(this._settings.xAxis.start)),b=this._getRelativeValue(g,f),v=b[0],_=b[1],S=v?y/v:10,A||(x=10,S=v?(y-x)/v:10),(o=parseInt(this._settings.barWidth,10))*this._series.length+4>l&&(o=l/this._series.length-4),r=Math.floor((l-o*this._series.length)/2),m=void 0!==this._settings.radius?parseInt(this._settings.radius,10):Math.round(o/5),p=!1,(c=this._settings.gradient)&&"function"!=typeof c?(p=c,c=!1):c&&(c=t.createLinearGradient(i.x,i.y,s.x,i.y),this._settings.gradient(c)),A||this._drawLine(t,i.x-.5,i.y,i.x-.5,s.y,"#edeff0",1),d=0;d<e.length;d++)if(w=parseFloat(this._settings.value(e[d]||0)),this._logScaleCalc&&(w=this._log10(w)),w&&!isNaN(w))if(w>f&&(w=f),w-=g,w*=_,k=i.x,C=i.y+r+d*l+(o+1)*n,w<0&&"auto"==this._settings.origin||this._settings.xAxis&&0===w&&!("auto"!=this._settings.origin&&this._settings.origin>g))this.canvases[n].renderTextAt("middle","right",k+10,C+o/2+r,this._settings.label(e[d]));else{w<0&&"auto"!=this._settings.origin&&this._settings.origin>g&&(w=0),A||(w+=x/S),h=c||this._settings.color.call(this,e[d]),this._settings.border&&this._drawBarHBorder(t,k,C,o,g,m,S,w,h),t.globalAlpha=this._settings.alpha.call(this,e[d]);var I=this._drawBarH(t,s,k,C,o,g,m,S,w,h,c,p);p&&this._drawBarHGradient(t,k,C,o,g,m,S,w,h,p),t.globalAlpha=1,I[3]==C?(this.canvases[n].renderTextAt("middle","left",I[0]-5,I[3]+Math.floor(o/2),this._settings.label(e[d])),a.addRect(e[d].id,[I[0]-i.x,I[3]-i.y,I[2]-i.x,I[3]+o-i.y],n)):(this.canvases[n].renderTextAt("middle",!1,I[2]+5,I[1]+Math.floor(o/2),this._settings.label(e[d])),a.addRect(e[d].id,[I[0]-i.x,C-i.y,I[2]-i.x,I[3]-i.y],n))}},_setBarHPoints:function(t,e,i,s,n,a,r,o,l){var h=0;if(n>a*r){var c=(n-a*r)/n;h=-Math.asin(c)+Math.PI/2}t.moveTo(e,i+o);var d=e+a*r-n-(n?0:o);d=Math.max(e,d),n<a*r&&t.lineTo(d,i+o);var u=i+n;n&&n>0&&t.arc(d,u,n-o,-Math.PI/2+h,0,!1);var f=i+s-n-(n?0:o),g=d+n-(n?o:0);t.lineTo(g,f),n&&n>0&&t.arc(d,f,n-o,0,Math.PI/2-h,!1);var p=i+s-o;return t.lineTo(e,p),l||t.lineTo(e,i+o),[g,p]},_drawHScales:function(t,e,i,s,n,a,r){var o=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=this._createCanvas("axis_x")),o=this._drawHXAxis(this.canvases.x.getCanvas(),e,i,s,n,a)),this._settings.yAxis&&(this.canvases.y||(this.canvases.y=this._createCanvas("axis_y")),this._drawHYAxis(this.canvases.y.getCanvas(),e,i,s,r,o))},_drawHYAxis:function(t,e,i,s,n,a){if(this._settings.yAxis){var r,o=parseInt(a||i.x,10)-.5,l=s.y+.5,h=i.y;this._drawLine(t,o,l,o,h,this._settings.yAxis.color,1);for(var c=0;c<e.length;c++){var d="auto"!=this._settings.origin&&"barH"==this._settings.type&&parseFloat(this._settings.value(e[c]))<this._settings.origin;r=h+n/2+c*n,this.canvases.y.renderTextAt("middle",!d&&"left",d?o+5:o-5,r,this._settings.yAxis.template(e[c]),"webix_axis_item_y",d?0:o-10),this._settings.yAxis.lines.call(this,e[c])&&this._drawLine(t,i.x,r,s.x,r,this._settings.yAxis.lineColor.call(this,e[c]),1)}this._settings.yAxis.lines.call(this,{})&&this._drawLine(t,i.x+.5,h+.5,s.x,h+.5,this._settings.yAxis.lineColor.call(this,{}),1),this._setYAxisTitle(i,s)}},_drawHXAxis:function(t,e,i,s,n,a){var r,o={},l=this._settings.xAxis;if(l){var h=s.y+.5,c=i.x-.5,d=s.x-.5,u=i.x;if(this._drawLine(t,c,h,d,h,l.color,1),l.step&&(r=parseFloat(l.step)),void 0!==this._configXAxis.step&&void 0!==this._configXAxis.start&&void 0!==this._configXAxis.end||(o=this._calculateScale(n,a),n=o.start,a=o.end,r=o.step,this._settings.xAxis.end=a,this._settings.xAxis.start=n,this._settings.xAxis.step=r),0!==r){for(var f=(d-c)*r/(a-n),g=0,p=n;p<=a;p+=r){var _=this._logScaleCalc?Math.pow(10,p):p;o.fixNum&&(_=parseFloat(_).toFixed(o.fixNum));var v=Math.floor(c+g*f)+.5;if(p==n&&"auto"==this._settings.origin||!l.lines.call(this,p)||this._drawLine(t,v,h,v,i.y,this._settings.xAxis.lineColor.call(this,p),1),p==this._settings.origin&&(u=v+1),r<1&&!this._logScaleCalc){var m=Math.min(Math.floor(this._log10(r)),n<=0?0:Math.floor(this._log10(n))),b=Math.pow(10,-m);_=Math.round(_*b)/b,p=_}this.canvases.x.renderTextAt(!1,!0,v,h+2,l.template(_.toString()),"webix_axis_item_x"),g++}return this.canvases.x.renderTextAt(!0,!1,c,s.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"webix_axis_title_x",s.x-i.x),u}}},_correctBarHParams:function(t,e,i,s,n,a,r){var o=this._settings.yAxis,l=e;return o&&"auto"!=this._settings.origin&&this._settings.origin>r&&(e+=(this._settings.origin-r)*n,l=e,(s-=this._settings.origin-r)<0&&(s*=-1,t.translate(e,i+a),t.rotate(Math.PI),e=.5,i=0),e+=.5),{value:s,x0:e,y0:i,start:l}},_drawBarH:function(t,e,i,s,n,a,r,o,l,h,c,d){t.save();var u=this._correctBarHParams(t,i,s,l,o,n,a);t.fillStyle=h,t.beginPath();var f=this._setBarHPoints(t,u.x0,u.y0,n,r,o,u.value,this._settings.border?1:0);c&&!d&&t.lineTo(e.x,u.y0+(this._settings.border?1:0)),t.fill(),t.restore();var g=u.y0,p=u.y0!=s?s:f[1],_=u.y0!=s?u.start-f[0]:u.start,v=u.y0!=s?u.start:f[0];return[_,g,v,p]},_drawBarHBorder:function(t,e,i,s,n,a,r,o,l){t.save();var h=this._correctBarHParams(t,e,i,o,r,s,n);t.beginPath(),this._setBorderStyles(t,l),t.globalAlpha=.9,this._setBarHPoints(t,h.x0,h.y0,s,a,r,h.value,t.lineWidth/2,1),t.stroke(),t.restore()},_drawBarHGradient:function(t,e,i,s,n,a,r,o,l,h){t.save();var c=this._correctBarHParams(t,e,i,o,r,s,n),d=this._setBarGradient(t,c.x0,c.y0+s,c.x0+r*c.value,c.y0,h,l,"x");t.fillStyle=d.gradient,t.beginPath(),this._setBarHPoints(t,c.x0,c.y0+d.offset,s-2*d.offset,a,r,c.value,d.offset),t.fill(),t.globalAlpha=1,t.restore()}},Dr={$render_stackedBar:function(t,e,i,s,n,a){var r,o,l,h,c,d,u,f=this._settings,g=s.y-i.y,p=!!f.yAxis,_=!!f.xAxis,v=this._getStackedLimits(e),m=0===f.origin;r=v.max,o=v.min;var b=Math.floor((s.x-i.x)/e.length);n||(l=this._drawScales(e,i,s,o,r,b)),p&&(r=parseFloat(f.yAxis.end),o=parseFloat(f.yAxis.start));var x=this._getRelativeValue(o,r);u=x[0],d=x[1];var y=u?g/u:10,w=parseInt(f.barWidth,10);w+4>b&&(w=b-4);var S=Math.floor((b-w)/2),k=!!f.gradient&&f.gradient;_||this._drawLine(t,i.x,s.y+.5,s.x,s.y+.5,"#edeff0",1);for(var C=0;C<e.length;C++){var A=Math.abs(parseFloat(f.value(e[C]||0)));this._logScaleCalc&&(A=this._log10(A)),h=i.x+S+C*b;var I=m&&A<0;if(n?c=I?e[C].$startYN:e[C].$startY:(c=l-1,e[C].$startY=c,m&&(I&&(c=l+1),e[C].$startYN=l+1)),A&&!isNaN(A)&&(n||m||(A-=o),A*=d,!(c<i.y+1))){var E=this._settings.color.call(this,e[C]),T=Math.abs(c-(m?s.y+o*y:s.y))<3;t.globalAlpha=f.alpha.call(this,e[C]),t.fillStyle=t.strokeStyle=f.color.call(this,e[C]),t.beginPath();var M=c-y*A+(T?I?-1:1:0),P=this._setStakedBarPoints(t,h-(f.border?.5:0),c,w+(f.border?.5:0),M,0,i.y);if(t.fill(),t.stroke(),k){t.save();var L=this._setBarGradient(t,h,c,h+w,P[1],k,E,"y");t.fillStyle=L.gradient,t.beginPath(),P=this._setStakedBarPoints(t,h+L.offset,c,w-2*L.offset,M,f.border?1:0,i.y),t.fill(),t.restore()}f.border&&(t.save(),"string"==typeof f.border?t.strokeStyle=f.border:this._setBorderStyles(t,E),t.beginPath(),this._setStakedBarPoints(t,h-.5,parseInt(c,10)+.5,w+1,parseInt(M,10)+.5,0,i.y,T),t.stroke(),t.restore()),t.globalAlpha=1,this.canvases[n].renderTextAt(!1,!0,h+Math.floor(w/2),P[1]+(c-P[1])/2-7,this._settings.label(e[C])),a.addRect(e[C].id,[h-i.x,P[1]-i.y,P[0]-i.x,e[C][I?"$startYN":"$startY"]-i.y],n),e[C][I?"$startYN":"$startY"]=P[1]}}},_setStakedBarPoints:function(t,e,i,s,n,a,r,o){t.moveTo(e,i),n<r&&(n=r),t.lineTo(e,n);var l=e+s,h=n;t.lineTo(l,h);var c=e+s;return t.lineTo(c,i),o||t.lineTo(e,i),[c,h]}},Hr={$render_stackedBarH:function(t,e,i,s,n,a){var r,o,l,h,c=s.x-i.x,d=!!this._settings.yAxis,u=this._getStackedLimits(e);r=u.max,o=u.min;var f=Math.floor((s.y-i.y)/e.length);n||this._drawHScales(t,e,i,s,o,r,f),d&&(r=parseFloat(this._settings.xAxis.end),o=parseFloat(this._settings.xAxis.start));var g=this._getRelativeValue(o,r);h=g[0],l=g[1];var p=h?c/h:10,_=0;d||(_=10,p=h?(c-_)/h:10);var v=parseInt(this._settings.barWidth,10);v+4>f&&(v=f-4);var m=(f-v)/2,b=!1,x=this._settings.gradient;x&&(b=!0),d||this._drawLine(t,i.x-.5,i.y,i.x-.5,s.y,"#edeff0",1);var y=0,w=0;for(S=0;S<this._series.length;S++)S==n&&(w=y),"stackedBarH"==this._series[S].type&&y++;for(var S=0;S<e.length;S++){w||(e[S].$startX=i.x);var k=Math.abs(parseFloat(this._settings.value(e[S]||0)));k>r&&(k=r),k-=o,k*=l;var C=i.x,A=i.y+m+S*f;if(w?C=e[S].$startX:e[S].$startX=C,k&&!isNaN(k)){d||(k+=_/p);var I=this._settings.color.call(this,e[S]);t.globalAlpha=this._settings.alpha.call(this,e[S]),t.fillStyle=this._settings.color.call(this,e[S]),t.beginPath();var E=this._setBarHPoints(t,C,A,v,0,p,k,0);if(x&&!b&&t.lineTo(i.x+c,A+(this._settings.border?1:0)),t.fill(),b){var T=this._setBarGradient(t,C,A+v,C,A,b,I,"x");t.fillStyle=T.gradient,t.beginPath(),E=this._setBarHPoints(t,C,A,v,0,p,k,0),t.fill()}this._settings.border&&this._drawBarHBorder(t,C,A,v,o,0,p,k,I),t.globalAlpha=1,this.canvases[n].renderTextAt("middle",!0,e[S].$startX+(E[0]-e[S].$startX)/2-1,A+(E[1]-A)/2,this._settings.label(e[S])),a.addRect(e[S].id,[e[S].$startX-i.x,A-i.y,E[0]-i.x,E[1]-i.y],n),e[S].$startX=E[0]}}}},Fr={$render_area:function(t,e,i,s,n,a){var r,o,l,h,c,d,f,g,p,_,v,m,b,x,y;if(d=this._calculateLineParams(t,e,i,s,n),o=this._settings,h=o.eventRadius||Math.floor(d.cellWidth/2),e.length){for(f=[],_=o.offset?i.x+.5*d.cellWidth:i.x,l=0;l<e.length;l++)if(c=e[l],p=this._getPointY(c,i,s,d),b=_+d.cellWidth*l,p){if(x="object"==u(p)?p.y0:p,l&&this._settings.fixOverflow){if((g=this._getPointY(e[l-1],i,s,d)).out&&g.out==p.out)continue;v=d.cellWidth*(l-1)-.5+_,m="object"==u(g)?g.y0:g,g.out&&(y="min"==g.out?s.y:i.y,f.push([this._calcOverflowX(v,b,m,x,y),y])),p.out&&(y="min"==p.out?s.y:i.y,f.push([this._calcOverflowX(v,b,m,x,y),y]),l==e.length-1&&y==i.y&&f.push([b,i.y]))}p.out||(f.push([b,x]),a.addRect(c.id,[b-h-i.x,x-h-i.y,b+h-i.x,x+h-i.y],n)),o.yAxis||(r=o.offset||l!=e.length-1?"center":"left",this.canvases[n].renderTextAt(!1,r,b,x-o.labelOffset,o.label(c)))}f.length&&(f.push([b,s.y]),f.push([f[0][0],s.y])),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=this._settings.color.call(this,e[0]),t.beginPath(),this._path(t,f),t.fill(),t.lineWidth=1,t.globalAlpha=1,o.border&&(t.lineWidth=o.borderWidth||1,o.borderColor?t.strokeStyle=o.borderColor.call(this,e[0]):this._setBorderStyles(t,t.fillStyle),t.beginPath(),this._path(t,f),t.stroke())}},$render_stackedArea:function(t,e,i,s,n,a){var r,o,l,h,c,d,u,f,g,p,_,v,m;if(g=this._calculateLineParams(t,e,i,s,n),h=this._settings,u=h.eventRadius||Math.floor(g.cellWidth/2),e.length){p=[],m=[],_=h.offset?i.x+.5*g.cellWidth:i.x;var b=function(t,i){return n?e[t].$startY?i-s.y+e[t].$startY:0:i},x=function(t,e,i){var s=(i.y-e.y)/(i.x-e.x);return s*t+e.y-s*e.x};for(c=0;c<e.length;c++)f=e[c],c?_+=g.cellWidth:(v=b(c,s.y),p.push([_,v])),v=b(c,this._getPointY(f,i,s,g)),m.push(isNaN(v)&&!c?e[c].$startY||s.y:v),v&&(p.push([_,v]),a.addRect(f.id,[_-u-i.x,v-u-i.y,_+u-i.x,v+u-i.y],n),h.yAxis||(h.offset,l="center",this.canvases[n].renderTextAt(!1,l,_,v-h.labelOffset,h.label(f))));if(p.push([_,b(c-1,s.y)]),n)for(c=e.length-2;c>0;c--)_-=g.cellWidth,(v=e[c].$startY)&&p.push([_,v]);for(p.push([p[0][0],p[0][1]]),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=this._settings.color.call(this,e[0]),t.beginPath(),this._path(t,p),t.fill(),c=0;c<e.length;c++){if(!(v=m[c]))for(c==e.length-1&&(v=e[c].$startY),d=c+1;d<e.length;d++)if(m[d]){r={x:i.x,y:m[0]},o={x:i.x+g.cellWidth*d,y:m[d]},v=x(i.x+g.cellWidth*c,r,o);break}e[c].$startY=v}}}},Rr={$render_radar:function(t,e,i,s,n,a){this._renderRadarChart(t,e,i,s,n,a)},_renderRadarChart:function(t,e,i,s,n,a){if(e.length){for(var r=this._getPieParameters(i,s),o=this._settings.radius?this._settings.radius:r.radius,l=this._settings.x?this._settings.x:r.x,h=this._settings.y?this._settings.y:r.y,c=[],d=0;d<e.length;d++)c.push(1);var u=this._getRatios(c,e.length);this._mapStart=i,n||this._drawRadarAxises(u,l,h,o,e),this._drawRadarData(t,u,l,h,o,e,n,a)}},_drawRadarData:function(t,e,i,s,n,a,r,o){var l,h,c,d,u,f,g,p,_,v,m,b,x,y,w,S,k,C,A;for(c=this._settings,u=c.yAxis.start,f=c.yAxis.end,A=this._getRelativeValue(u,f),b=A[0],C=b?n/b:n/2,k=A[1],x=-Math.PI/2,l=h=x,_=[],p=0,d=0;d<a.length;d++)S?w=S:(y=c.value(a[d]),this._logScaleCalc&&(y=this._log10(y)),w=(parseFloat(y||0)-u)*k),v=Math.floor(C*w),y=c.value(d!=a.length-1?a[d+1]:a[0]),this._logScaleCalc&&(y=this._log10(y)),S=(parseFloat(y||0)-u)*k,m=Math.floor(C*S),l=h,h=d!=a.length-1?x+e[d]-1e-4:x,g=p||this._getPositionByAngle(l,i,s,v),p=this._getPositionByAngle(h,i,s,m),_.push(g);c.fill&&this._fillRadarChart(t,_,a),!c.disableLines&&a.length>2&&this._strokeRadarChart(t,_,a),(!c.disableItems||a.length<3)&&this._drawRadarItemMarkers(t,_,a,r,o),_=null},_drawRadarItemMarkers:function(t,e,i,s,n){for(var a=0;a<e.length;a++)this._drawItem(t,e[a].x,e[a].y,i[a],this._settings.label.call(this,i),s,n)},_fillRadarChart:function(t,e,i){var s,n;t.globalAlpha=this._settings.alpha.call(this,{}),t.beginPath();for(var a=0;a<e.length;a++)t.fillStyle=this._settings.fill.call(this,i[a]),s=e[a],n=e[a+1]||e[0],a||t.moveTo(s.x,s.y),t.lineTo(n.x,n.y);t.fill(),t.globalAlpha=1},_strokeRadarChart:function(t,e,i){for(var s,n,a=0;a<e.length;a++)s=e[a],n=e[a+1]||e[0],this._drawLine(t,s.x,s.y,n.x,n.y,this._settings.line.color.call(this,i[a]),this._settings.line.width)},_drawRadarAxises:function(t,e,i,s,n){var a=this._settings.yAxis,r=this._settings.xAxis,o=a.start,l=a.end,h=a.step,c={},d=this._configYAxis;if(void 0===d.step||void 0===d.start||void 0===d.end){var u=this._getLimits();c=this._calculateScale(u.min,u.max),o=c.start,l=c.end,h=c.step,a.end=l,a.start=o}var f,g,p,_,v,m=[],b=0,x=s*h/(l-o);h<1&&(_=Math.min(this._log10(h),o<=0?0:this._log10(o)),v=Math.pow(10,-_));var y=[];this.canvases.scale||(this.canvases.scale=this._createCanvas("radar_scale"));var w=this.canvases.scale.getCanvas();for(f=l;f>=o;f-=h){var S=this._logScaleCalc?Math.pow(10,f):f;c.fixNum&&(S=parseFloat(f).toFixed(c.fixNum)),m.push(Math.floor(b*x)+.5),v&&!this._logScaleCalc&&(S=Math.round(S*v)/v,f=S);var k=i-s+m[m.length-1];if(this.canvases.scale.renderTextAt("middle","left",e,k,a.template(S.toString()),"webix_axis_item_y webix_radar"),t.length<2)return void this._drawScaleSector(w,"arc",e,i,s-m[m.length-1],-Math.PI/2,3*Math.PI/2,f);var C,A=-Math.PI/2,I=A;for(g=0;g<t.length;g++)b||y.push(I),C=A+t[g]-1e-4,this._drawScaleSector(w,t.length>2?d.lineShape||"line":"arc",e,i,s-m[m.length-1],I,C,f,g,n[f]),I=C;b++}for(f=0;f<y.length;f++)p=this._getPositionByAngle(y[f],e,i,s),r.lines.call(this,n[f],f)&&this._drawLine(w,e,i,p.x,p.y,r?r.lineColor.call(this,n[f]):"#cfcfcf",1),this._drawRadarScaleLabel(w,e,i,s,y[f],r?r.template.call(this,n[f]):"&nbsp;")},_drawScaleSector:function(t,e,i,s,n,a,r,o,l){var h,c;if(n<0)return!1;h=this._getPositionByAngle(a,i,s,n),c=this._getPositionByAngle(r,i,s,n);var d=this._settings.yAxis;d.bg&&(t.beginPath(),t.moveTo(i,s),"arc"==e?t.arc(i,s,n,a,r,!1):(t.lineTo(h.x,h.y),t.lineTo(c.x,c.y)),t.fillStyle=d.bg(o,l),t.moveTo(i,s),t.fill(),t.closePath()),d.lines.call(this,o)&&(t.lineWidth=1,t.beginPath(),"arc"==e?t.arc(i,s,n,a,r,!1):(t.moveTo(h.x,h.y),t.lineTo(c.x,c.y)),t.strokeStyle=d.lineColor.call(this,o),t.stroke())},_drawRadarScaleLabel:function(t,e,i,s,n,a){if(!a)return!1;var r=this.canvases.scale.renderText(0,0,a,"webix_axis_radar_title",1),o=r.scrollWidth,l=r.offsetHeight,h=this._getPositionByAngle(n,e,i,s+5),c=0,d=0;(n<0||n>Math.PI)&&(d=-l),n>Math.PI/2&&(c=-o),Math.abs(n+Math.PI/2)<.001||Math.abs(n-Math.PI/2)<.001?c=-o/2:(Math.abs(n)<.001||Math.abs(n-Math.PI)<.001)&&(d=-l/2),r.style.top=h.y+d+"px",r.style.left=h.x+c+"px",r.style.width=o+"px",r.style.whiteSpace="nowrap"}},jr={$render_scatter:function(t,e,i,s,n,a){if(this._settings.xValue){var r=this._settings,o=!(r.disableLines||void 0===r.disableLines),l=this._getLimits(),h=this._getLimits("h","xValue");n||(this.canvases.x||(this.canvases.x=this._createCanvas("axis_x")),this.canvases.y||(this.canvases.y=this._createCanvas("axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),e,i,s,l.min,l.max),this._drawHXAxis(this.canvases.x.getCanvas(),e,i,s,h.min,h.max)),l={min:r.yAxis.start,max:r.yAxis.end},h={min:r.xAxis.start,max:r.xAxis.end};var c=this._getScatterParams(t,e,i,s,h,l);this._mapStart=i;for(var d,u,f,g,p,_=[],v=0;v<e.length;v++){var m=this._calculateScatterItemPosition(c,s,i,h,e[v],"X"),b=this._calculateScatterItemPosition(c,i,s,l,e[v],"Y");isNaN(m)||isNaN(b)||_.push({x:m,y:b,index:v})}for(var x=0;x<_.length;x++){if(p=_[x].index,o){var y=r.line.color.call(this,e[p]);d=_[x].x,u=_[x].y,x==_.length-1?r.shape&&_.length>2&&(this._drawLine(t,f,g,_[0].x,_[0].y,y,r.line.width),r.disableItems||this._drawScatterItem(t,a,_[0],e[0],n),r.fill&&this._fillScatterChart(t,_,e)):(f=_[x+1].x,g=_[x+1].y,this._drawLine(t,d,u,f,g,y,r.line.width))}!r.disableItems&&_[x]&&this._drawScatterItem(t,a,_[x],e[p],n)}}},_fillScatterChart:function(t,e,i){var s,n;t.globalAlpha=this._settings.alpha.call(this,{}),t.beginPath();for(var a=0;a<e.length;a++)t.fillStyle=this._settings.fill.call(this,i[a]),s=e[a],n=e[a+1]||e[0],a||t.moveTo(s.x,s.y),t.lineTo(n.x,n.y);t.fill(),t.globalAlpha=1},_getScatterParams:function(t,e,i,s,n,a){var r={};return r.totalHeight=s.y-i.y,r.totalWidth=s.x-i.x,this._calcScatterUnit(r,n.min,n.max,r.totalWidth,"X"),this._calcScatterUnit(r,a.min,a.max,r.totalHeight,"Y"),r},_drawScatterItem:function(t,e,i,s,n){this._drawItem(t,i.x,i.y,s,this._settings.label.call(this,s),n,e)},_calculateScatterItemPosition:function(t,e,i,s,n,a){var r=this._settings["X"==a?"xValue":"value"].call(this,n),o=t["valueFactor"+a],l=(parseFloat(r||0)-s.min)*o,h=t["unit"+a],c=i[a.toLowerCase()]-("X"==a?-1:1)*Math.floor(h*l);return l<0&&(c=i[a.toLowerCase()]),r>s.max&&(c=e[a.toLowerCase()]),r<s.min&&(c=i[a.toLowerCase()]),c},_calcScatterUnit:function(t,e,i,s,n){var a=this._getRelativeValue(e,i);t["relValue"+(n=n||"")]=a[0],t["valueFactor"+n]=a[1],t["unit"+n]=t["relValue"+n]?s/t["relValue"+n]:10}},Or={$render_splineArea:function(t,e,i,s,n,a){var r,o,l,h,c,d,u,f,g,p,_,v,m,b=this._settings,x=[];if(d=this._calculateLineParams(t,e,i,s,n),c=b.eventRadius||Math.floor(d.cellWidth/2),l=[],e.length){for(g=i.x,o=0;o<e.length;o++)((v=this._getPointY(e[o],i,s,d))||"0"==v)&&(f=o?d.cellWidth*o-.5+g:g,l.push({x:f,y:v,index:o}),a.addRect(e[o].id,[f-c-i.x,v-c-i.y,f+c-i.x,v+c-i.y],n));for(u=this._getSplineParameters(l),o=0;o<l.length;o++)if(p=l[o].x,o<l.length-1){for(_=l[o+1].x,m=l[o+1].y,h=p;h<_;h++){var y=this._getSplineYPoint(h,p,o,u.a,u.b,u.c,u.d);y<i.y&&(y=i.y),y>s.y&&(y=s.y);var w=this._getSplineYPoint(h+1,p,o,u.a,u.b,u.c,u.d);w<i.y&&(w=i.y),w>s.y&&(w=s.y),x.push([h,y]),x.push([h+1,w])}x.push([_,m])}r=this._settings.color.call(this,e[0]),x.length&&(x.push([_,s.y]),x.push([x[0][0],s.y])),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=r,t.beginPath(),this._path(t,x),t.fill(),t.lineWidth=1,t.globalAlpha=1,b.border&&(t.lineWidth=b.borderWidth||1,b.borderColor?t.strokeStyle=b.borderColor.call(this,e[0]):this._setBorderStyles(t,r),t.beginPath(),x.splice(x.length-3),this._path(t,x),t.stroke())}}},Br=400,Vr=30,Yr={dynamic_setter:function(t){return t&&function(t){if(!t._stockRenderHandler){var e=t._settings;e.cellWidth||(e.cellWidth=Vr),e.animateDuration||(e.animateDuration=Br),e.offset=!1,t._stockRenderHandler=t.attachEvent("onBeforeRender",function(i,s){var n=t._getChartBounds(t._content_width,t._content_height);!function(t){Xr(t,function(e,i){i._resizeCanvas(t._content_width+2*t._settings.cellWidth,t._content_height)})}(t),function(t,e,i,s){if(s&&t.length){var n=Math.ceil((i.x-e.x)/s);t.length>n+1&&t.splice(0,t.length-n-1)}}(i,n.start,n.end,e.cellWidth),"add"==s&&function(t){var e=t._settings.cellWidth;t._stockAnimationOffset!=e&&(t._stockAnimationOffset=e,t.render()),t._stockAnimationOffset=0,t._stockAnimationStart=null,window.requestAnimationFrame&&!document.hidden&&window.requestAnimationFrame(function(e){!function t(e,i){var s,n=e._settings.animateDuration,a=e._settings.cellWidth;a&&e.count()>1&&(e._stockAnimationStart||(e._stockAnimationStart=i),s=i-e._stockAnimationStart,e._stockAnimationOffset=Math.min(Math.max(s/n*a,1),a),e.render(),s<n&&window.requestAnimationFrame(function(i){t(e,i)}))}(t,e)}),t._stockAnimateHandler||(t._stockAnimateHandler=t.attachEvent("onAfterRender",function(e){!function(t,e){var i=t.count(),s=t._getChartBounds(t._content_width,t._content_height),n=t._settings.cellWidth,a=t._stockAnimationOffset||0,r=e.length<i||(e.length-1)*n>s.end.x-s.start.x;function o(t,s,r,o){var l=t.getCanvas(),h=t._canvas,c=t._canvas_labels,d=t._canvas_series;if(a&&(e.length<i||(e.length-1)*n>r-s)?(h.style.left=-a+"px",e.length>1&&(function(t,e,i){if(t.length){rt(t[0]);for(var s=1;s<t.length;s++)Wr(i,t[s])||(t[s].style.left=t[s].offsetLeft-e+"px")}}(c,a,d),l.clearRect(0,0,s+a,h.offsetHeight),l.clearRect(r+a,0,h.offsetWidth,h.offsetHeight))):(h.style.left="0px",o||a==n||l.clearRect(s+(e.length-1)*n-n+a,0,h.offsetWidth,h.offsetHeight)),c.length>1&&a&&a!=n){var u=c.length-1;Wr(d,c[u])&&(u-=1),c[u].style.display="none"}}Xr(t,function(t,e){o(e,s.start.x,s.end.x,"x"==t)}),function(t,e,i){t._contentobj._htmlmap.style.left=e.start.x-i+"px",t._contentobj._htmlmap.style.width=e.end.x-e.start.x+i+"px"}(t,s,r?a:0)}(t,e)}))}(t)}),t._stockXAxisHandler=t.attachEvent("onBeforeXAxis",function(e,i,s,n,a,r){return function(t,e,i,s,n,a,r){var o,l,h,c,d=t._settings,u=s.x-.5,f=parseInt(r||n.y,10)+.5,g=n.x;if(!d.dynamic)return!1;for(h=(i.length-1)*a>g-u||i.length<t.count(),l=0;l<i.length;l++)c=u+l*a,o=h?l>1:!!l,c=Math.ceil(c)-.5,t._drawXAxisLabel(c,f,i[l],o),l&&d.xAxis.lines.call(t,i[l])&&t._drawXAxisLine(e,c,n.y,s.y,i[l]);t.canvases.x.renderTextAt(!0,!1,u,n.y+d.padding.bottom-3,d.xAxis.title,"webix_axis_title_x",n.x-s.x),t._drawLine(e,u,f,g+(h?t._stockAnimationOffset:0),f,d.xAxis.color,1)}(t,e,i,s,n,a,r),!1})}}(this),t}};function Wr(t,e){return"axis_x"===t&&-1!==e.className.indexOf("webix_axis_title_x")}function Xr(t,e){if(t.canvases){for(var i=0;i<t._series.length;i++)t.canvases[i]&&e(i,t.canvases[i]);t.canvases.x&&e("x",t.canvases.x)}}var Ur={name:"chart",$init:function(t){if(this._series=[this._settings],this._legend_labels=[],this._contentobj.className+=" webix_chart",this.$ready.push(this._after_init_call),t.preset&&this._definePreset(t),t.series){var e=t.series;delete t.series,t.series=e}this.data.provideApi(this,!0)},_after_init_call:function(){this.data.attachEvent("onStoreUpdated",T(function(){this.render.apply(this,arguments)},this))},defaults:{ariaLabel:"chart",color:"default",alpha:"1",radius:0,label:!1,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",cant:.5,barWidth:30,line:{width:2,color:"#1ca1c1"},item:{radius:3,borderColor:"#1ca1c1",borderWidth:2,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!1,gradient:!1,border:!1,labelOffset:20,origin:"auto",scale:"linear"},_id:"webix_area_id",on_click:{webix_chart_legend_item:function(t,e,i){var s=i.getAttribute("series_id");if(this.callEvent("onLegendClick",[t,s,i])&&void 0!==s&&this._series.length>1){var n=this._settings,a=n.legend.values,r=a&&a[s].toggle||n.legend.toggle;r&&(-1!=i.className.indexOf("hidden")?this.showSeries(s):this.hideSeries(s))}}},on_dblclick:{},on_mouse_move:{},locate:function(t){return lt(t,this._id)},$setSize:function(t,e){var i=si.api.$setSize.call(this,t,e);if(i){for(var s in this.canvases)this.canvases[s]._resizeCanvas(this._content_width,this._content_height);this.render()}return i},type_setter:function(t){return _(this["$render_"+t],"Chart type is not supported, or extension is not loaded: "+t),void 0===this._settings.offset&&(this._settings.offset=!(-1!=t.toLowerCase().indexOf("area"))),"radar"!=t||this._settings.yAxis||this.define("yAxis",{}),"scatter"==t&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),t},destructor:function(){this.removeAllSeries(),We.destructor.apply(this,arguments)},removeAllSeries:function(){this.clearCanvas(),this._legendObj&&(this._legendObj.innerHTML="",this._legendObj.parentNode.removeChild(this._legendObj),this._legendObj=null),this.canvases&&(this.canvases={}),this._contentobj.innerHTML="",this._series=[]},clearCanvas:function(){if(this.canvases&&"object"==u(this.canvases))for(var t in this.canvases)this.canvases[t].clearCanvas()},render:function(t,e,i){var s,n,a,r;if(this.isVisible(this._settings.id)&&(n=this._getChartData(),this.callEvent("onBeforeRender",[n,i]))){if(this.canvases&&"object"==u(this.canvases))for(var o in this.canvases)this.canvases[o].clearCanvas();else this.canvases={};if(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=this._createCanvas("legend")),this._drawLegend(this.data.getRange(),this._content_width,this._content_height)),this._map=a=new qi(this._id),r=this._settings,s=this._getChartBounds(this._content_width,this._content_height),this._series)for(var l=0;l<this._series.length;l++)this._settings=this._series[l],this.canvases[l]||(this.canvases[l]=this._createCanvas(this.name+" "+l,"z-index:"+(2+l),null,l,this._settings.ariaLabel)),this["$render_"+this._settings.type](this.canvases[l].getCanvas(),n,s.start,s.end,l,a);if(a.render(this._contentobj),this._contentobj.lastChild.style.zIndex=100,this._applyBounds(this._contentobj.lastChild,s),this.callEvent("onAfterRender",[n]),this._settings=r,this._settings.legend&&this._settings.legend.values)for(var h=this._settings.legend.values,c=0;c<h.length;c++)h[c].$hidden&&this.hideSeries(c)}},_applyBounds:function(t,e){var i={};for(var s in i.left=e.start.x,i.top=e.start.y,i.width=e.end.x-e.start.x,i.height=e.end.y-e.start.y,i)t.style[s]=i[s]+"px"},_getChartData:function(){var t,e,i,s,n,a,r,o,l,h;if(s=this.data.getRange(),t=-1!=this._settings.type.toLowerCase().indexOf("barh")?"yAxis":"xAxis",(e=this._settings[t])&&e.units&&"object"==u(e.units)){if(i=e.units,o=[],void 0!==i.start&&void 0!==i.end&&void 0!==i.next)for(r=i.start;r<=i.end;)o.push(r),r=i.next.call(this,r);else"[object Array]"===Object.prototype.toString.call(i)&&(o=i);if(a=[],o.length){for(l=e.value,h={},n=0;n<s.length;n++)h[l(s[n])]=n;for(n=0;n<o.length;n++)void 0!==h[o[n]]?(s[h[o[n]]].$unit=o[n],a.push(s[h[o[n]]])):a.push({$unit:o[n]})}return a}return s},series_setter:function(t){if(t&&"object"==u(t)){this._parseSettings(t.length?t[0]:t),this._series=[this._settings];for(var e=1;e<t.length;e++)this.addSeries(t[e])}else _(t,"Chart :: Series must be an array or object");return t},value_setter:Vt,xValue_setter:Vt,yValue_setter:function(t){this.define("value",t)},alpha_setter:Vt,label_setter:Vt,lineColor_setter:Vt,borderColor_setter:Vt,pieInnerText_setter:Vt,gradient_setter:function(t){return"function"!=typeof t&&t&&!0===t&&(t="light"),t},colormap:{RAINBOW:function(t){var e=Math.floor(this.getIndexById(t.id)/this.count()*1536);return 1536==e&&(e-=1),this._rainbow[Math.floor(e/256)](e%256)},default:function(t){var e=this.count(),i=this._defColors.length,s=this.getIndexById(t.id);return i>e?(s&&(s=s<i-e?this._defColorsCursor+2:this._defColorsCursor+1),this._defColorsCursor=s):s%=i,this._defColors[s]}},color_setter:function(t){return this.colormap[t]||Vt(t)},fill_setter:function(t){return!(!t||"0"==t)&&Vt(t)},_definePreset:function(t){this.define("preset",t.preset),delete t.preset},preset_setter:function(e){var i,s,n;if(this.defaults=t.extend({},this.defaults),"object"==u(n=this.presets[e])){for(i in n)if("object"==u(n[i]))if(this.defaults[i]&&"object"==u(this.defaults[i]))for(s in this.defaults[i]=t.extend({},this.defaults[i]),n[i])this.defaults[i][s]=n[i][s];else this.defaults[i]=t.extend({},n[i]);else this.defaults[i]=n[i];return e}return!1},legend_setter:function(t){return t?("object"!=u(t)&&(t={template:t}),this._mergeSettings(t,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.type.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),t.template=Vt(t.template),t):(this._legendObj&&(this._legendObj.innerHTML="",this._legendObj=null),!1)},item_setter:function(e){return"object"!=u(e)&&(e={color:e,borderColor:e}),this._mergeSettings(e,t.extend({},this.defaults.item)),this._converToTemplate(["alpha","borderColor","color","radius","type"],e),e},line_setter:function(e){return"object"!=u(e)&&(e={color:e}),(e=t.extend(e,this.defaults.line)).color=Vt(e.color),e},padding_setter:function(t){return"object"!=u(t)&&(t={left:t,right:t,top:t,bottom:t}),this._mergeSettings(t,{left:50,right:20,top:35,bottom:40}),t},xAxis_setter:function(e){return!!e&&("object"!=u(e)&&(e={template:e}),this._mergeSettings(e,{title:"",color:"#edeff0",lineColor:"#edeff0",template:"{obj}",lines:!0}),this._converToTemplate(["lineColor","template","lines"],e),this._configXAxis=t.extend({},e),e)},yAxis_setter:function(e){return this._mergeSettings(e,{title:"",color:"#edeff0",lineColor:"#edeff0",template:"{obj}",lines:!0,bg:"#ffffff"}),this._converToTemplate(["lineColor","template","lines","bg"],e),this._configYAxis=t.extend({},e),e},_converToTemplate:function(t,e){for(var i=0;i<t.length;i++)e[t[i]]=Vt(e[t[i]])},_createCanvas:function(t,e,i,s,n){var a={container:i||this._contentobj,name:t,title:P(n)?t:n||"",series:s,style:e||"",width:this._content_width,height:this._content_height};return new hi(a)},_drawScales:function(t,e,i,s,n,a){var r,o=0;return this._settings.yAxis&&(this.canvases.y||(this.canvases.y=this._createCanvas("axis_y")),o=this._drawYAxis(this.canvases.y.getCanvas(),t,e,i,s,n)),this._settings.xAxis&&(this.canvases.x||(this.canvases.x=this._createCanvas("axis_x")),r=this.canvases.x.getCanvas(),this.callEvent("onBeforeXAxis",[r,t,e,i,a,o])&&this._drawXAxis(r,t,e,i,a,o)),o},_drawXAxis:function(t,e,i,s,n,a){var r,o,l=this._settings,h=i.x-.5,c=parseInt(a||s.y,10)+.5,d=s.x,u=!0,f="stackedBar"==l.type?s.y+.5:c;for(r=0;r<e.length;r++){!0===l.offset?o=h+n/2+r*n:(o=r!=e.length-1||l.cellWidth?h+r*n:s.x,u=!!r),o=Math.ceil(o)-.5;var g="auto"!=l.origin&&"bar"==l.type&&parseFloat(l.value(e[r]))<l.origin;this._drawXAxisLabel(o,f,e[r],u,g),(l.offset||r||l.cellWidth)&&l.xAxis.lines.call(this,e[r])&&this._drawXAxisLine(t,o,s.y,i.y,e[r])}this.canvases.x.renderTextAt(!0,!1,h,s.y+l.padding.bottom-3,l.xAxis.title,"webix_axis_title_x",s.x-i.x),this._drawLine(t,h,c,d,c,l.xAxis.color,1),l.xAxis.lines.call(this,{})&&l.offset&&this._drawLine(t,d+.5,s.y,d+.5,i.y+.5,l.xAxis.lineColor.call(this,{}),1)},_drawYAxis:function(t,e,i,s,n,a){var r,o={};if(this._settings.yAxis){var l=i.x-.5,h=s.y,c=i.y,d=s.y+.5;if(this._settings.yAxis.step&&(r=parseFloat(this._settings.yAxis.step)),void 0===this._configYAxis.step||void 0===this._configYAxis.start||void 0===this._configYAxis.end?(o=this._calculateScale(n,a),n=o.start,a=o.end,r=o.step,this._settings.yAxis.end=a,this._settings.yAxis.start=n):"logarithmic"==this.config.scale&&(this._logScaleCalc=!0),this._setYAxisTitle(i,s),0!==r){if(a==n)return h;for(var u=(h-c)*r/(a-n),f=0,g=n;g<=a;g+=r){var p=this._logScaleCalc?Math.pow(10,g):g;o.fixNum&&(p=parseFloat(p).toFixed(o.fixNum));var _=Math.floor(h-f*u)+.5;if(g==n&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,g)||this._drawLine(t,l,_,s.x,_,this._settings.yAxis.lineColor.call(this,g),1),g==this._settings.origin&&(d=_),r<1&&!this._logScaleCalc){var v=Math.min(Math.floor(this._log10(r)),n<=0?0:Math.floor(this._log10(n))),m=Math.pow(10,-v);p=Math.round(p*m)/m,g=p}this.canvases.y.renderText(0,_-5,this._settings.yAxis.template(p.toString()),"webix_axis_item_y",i.x-5),f++}return this._drawLine(t,l,h+1,l,c,this._settings.yAxis.color,1),d}}},_setYAxisTitle:function(t,e){var s=this.canvases.y.renderTextAt("middle",!1,0,parseInt((e.y-t.y)/2+t.y,10),this._settings.yAxis.title,"webix_axis_title_y");s&&(s.style.left=(i.transform?(s.offsetHeight-s.offsetWidth)/2:0)+"px")},_calculateLogScale:function(t,e){var i=Math.floor(this._log10(t)),s=Math.ceil(this._log10(e));return{start:i,step:1,end:s}},_normStep:function(t){var e=Math.floor(this._log10(t)),i=Math.pow(10,e),s=t/i;return s=s>5?10:5,parseInt(s,10)*i},_calculateScale:function(t,e){if(this._logScaleCalc=!1,"logarithmic"==this._settings.scale){var i=Math.floor(this._log10(t)),s=Math.ceil(this._log10(e));if(t>0&&e>0&&s-i>1)return this._logScaleCalc=!0,this._calculateLogScale(t,e)}var n,a;"auto"!=this._settings.origin&&this._settings.origin<t&&(t=this._settings.origin);var r=this._normStep((e-t)/8||1),o=Math.floor(this._log10(r));if(r>Math.abs(t))n=t<0?-r:0;else{var l=Math.abs(t),h=Math.floor(this._log10(l)),c=l/Math.pow(10,h);for(n=Math.ceil(10*c)/10*Math.pow(10,h)-r,l>1&&r>.1&&(n=Math.ceil(n));t<0?n<=t:n>=t;)n-=r;t<0&&(n=-n-2*r),n-=n%r,n=parseFloat((1*n).toFixed(Math.abs(o)))}for(e-n>10&&(r=this._normStep((e-n)/8||1)),a=n;a<e;)a+=r,a=parseFloat((1*a).toFixed(Math.abs(o)));return{start:n,end:a,step:r,fixNum:o<0?Math.abs(o):0}},_getLimits:function(t,e){var i,s,n=this.data._obj_array(),a=arguments.length&&"h"==t?this._configXAxis:this._configYAxis;if(e=e||"value",a&&void 0!==a.end&&void 0!==a.start&&a.step)i=parseFloat(a.end),s=parseFloat(a.start);else if(i=Wi.max(this._series[0][e],n),s=a&&void 0!==a.start?parseFloat(a.start):Wi.min(this._series[0][e],n),this._series.length>1)for(var r=1;r<this._series.length;r++){var o=Wi.max(this._series[r][e],n),l=Wi.min(this._series[r][e],n);o>i&&(i=o),l<s&&(s=l)}return{max:i,min:s}},_log10:function(t){return Math.log(t)/Math.LN10},_drawXAxisLabel:function(t,e,i,s,n){if(this._settings.xAxis){var a=this.canvases.x.renderTextAt(n,s,t,e-(n?2:0),this._settings.xAxis.template(i));a&&(a.className+=" webix_axis_item_x")}},_drawXAxisLine:function(t,e,i,s,n){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(t,e,i,e,s,this._settings.xAxis.lineColor.call(this,n),1)},_drawLine:function(t,e,i,s,n,a,r){t.strokeStyle=a,t.lineWidth=r,t.beginPath(),t.moveTo(e,i),t.lineTo(s,n),t.stroke(),t.lineWidth=1},_getRelativeValue:function(t,e){return[e!=t?e-t:t,1]},_rainbow:[function(t){return"#FF"+os.toHex(t/2,2)+"00"},function(t){return"#FF"+os.toHex(t/2+128,2)+"00"},function(t){return"#"+os.toHex(255-t,2)+"FF00"},function(t){return"#00FF"+os.toHex(t,2)},function(t){return"#00"+os.toHex(255-t,2)+"FF"},function(t){return"#"+os.toHex(t,2)+"00FF"}],_defColors:["#f55b50","#ff6d3f","#ffa521","#ffc927","#ffee54","#d3e153","#9acb61","#63b967","#21a497","#21c5da","#3ea4f5","#5868bf","#7b53c0","#a943ba","#ec3b77","#9eb0b8"],_defColorsCursor:0,addSeries:function(e){var i=t.extend({},this._settings);this._settings=t.extend({},i),this._parseSettings(e),this._series.push(this._settings),this._settings=i},$tooltipIn:function(t){return t},_get_tooltip_data:function(e,i){var s=this.locate(i);if(!s)return null;var n=this._getActiveSeries(i),a=t.extend({dx:20,dy:0,template:"{obj.value}",css:""},this._series[n].tooltip||{template:""},!0);return Te._tooltip.define(a),this.getItem(s)},_getActiveSeries:function(t){var e,i,s,n,a,r,o,l;for(i=this._map._areas,n=ht(this._contentobj._htmlmap),a=dt(t),o=a.x-n.x,l=a.y-n.y,s=0;s<i.length;s++)e=i[s].points,o<=e[2]&&o>=e[0]&&l<=e[3]&&l>=e[1]&&(r?i[s].index>r.index&&(r=i[s]):r=i[s]);return r?r.index:0},hideSeries:function(t){this.canvases[t].hideCanvas();var e=this._settings.legend;e&&e.values&&e.values[t]&&(e.values[t].$hidden=!0,this._drawLegend()),this._map.hide(this._contentobj,t,!0)},showSeries:function(t){this.canvases[t].showCanvas();var e=this._settings.legend;e&&e.values&&e.values[t]&&(delete e.values[t].$hidden,this._drawLegend()),this._map.hide(this._contentobj,t,!1)},_drawLegend:function(t,e){var i,s,n,a,r,o,l,h,c,d,f,g=0,p=0;if(t=t||[],e=e||this._content_width,h=this.canvases.legend.getCanvas(),s=this._settings.legend,l="x"!=this._settings.legend.layout?"width:"+s.width+"px":"",this._legendObj&&(this._legendObj.innerHTML="",this._legendObj.parentNode.removeChild(this._legendObj)),this.canvases.legend.clearCanvas(!0),n=nt("DIV",{class:"webix_chart_legend",style:"left:"+g+"px; top:"+p+"px;"+l},""),s.padding&&(n.style.padding=s.padding+"px"),this._legendObj=n,this._contentobj.appendChild(n),r=[],s.values)for(i=0;i<s.values.length;i++)r.push(this._drawLegendText(n,s.values[i].text,void 0!==s.values[i].id?u(s.values[i].id):i,s.values[i].$hidden));else for(i=0;i<t.length;i++)r.push(this._drawLegendText(n,s.template(t[i]),t[i].id));for(0===n.offsetWidth&&(n.style.width="auto"),o=n.offsetWidth,a=n.offsetHeight,o<e&&("x"==s.layout&&"center"==s.align&&(g=(e-o)/2),"right"==s.align&&(g=e-o),s.margin&&"center"!=s.align&&(g+=("left"==s.align?1:-1)*s.margin)),a<this._content_height&&("middle"==s.valign&&"center"!=s.align&&"x"!=s.layout?p=(this._content_height-a)/2:"bottom"==s.valign&&(p=this._content_height-a),s.margin&&"middle"!=s.valign&&(p+=("top"==s.valign?1:-1)*s.margin)),n.style.left=g+"px",n.style.top=p+"px",h.save(),i=0;i<r.length;i++)f=r[i],s.values&&s.values[i].$hidden?(d=!0,c=s.values[i].disableColor?s.values[i].disableColor:"#edeff0"):(d=!1,c=s.values?s.values[i].color:this._settings.color.call(this,t[i])),this._drawLegendMarker(h,f.offsetLeft+g,f.offsetTop+p,c,f.offsetHeight,d,i);h.restore(),r=null},_drawLegendText:function(t,e,i,s){var n="";"x"==this._settings.legend.layout&&(n="float:left;");var a=nt("DIV",{style:n+"padding-left:"+(10+this._settings.legend.marker.width)+"px",class:"webix_chart_legend_item"+(s?" hidden":""),role:"button",tabindex:"0","aria-label":St.aria[(s?"show":"hide")+"Chart"]+" "+e},e);return arguments.length>2&&a.setAttribute("series_id",i),t.appendChild(a),a},_drawLegendMarker:function(t,e,i,s,n,a,r){var o=[],l=this._settings.legend.marker,h=this._settings.legend.values,c=h&&h[r].markerType?h[r].markerType:l.type;if(s&&(t.strokeStyle=t.fillStyle=s),"round"!=c&&l.radius)if("item"==c){if(this._settings.line&&"scatter"!=this._settings.type&&!this._settings.disableLines){t.beginPath(),t.lineWidth=this._series[r].line.width,t.strokeStyle=a?s:this._series[r].line.color.call(this,{});var d=e+5,u=i+n/2;t.moveTo(d,u);var f=d+l.width;t.lineTo(f,u),t.stroke()}var g=this._series[r].item,p=parseInt(g.radius.call(this,{}),10)||0,_=g.type.call(this,{});p&&(t.beginPath(),a?(t.lineWidth=g.borderWidth,t.strokeStyle=s,t.fillStyle=s):(t.lineWidth=g.borderWidth,t.fillStyle=g.color.call(this,{}),t.strokeStyle=g.borderColor.call(this,{}),t.globalAlpha=g.alpha.call(this,{})),t.beginPath(),e+=l.width/2+5,i+=n/2,this._strokeChartItem(t,e,i,p+1,_),t.fill(),t.stroke()),t.globalAlpha=1}else t.beginPath(),t.lineWidth=1,e+=5,i+=n/2-l.height/2,o=[[e+l.radius,i+l.radius,l.radius,Math.PI,3*Math.PI/2,!1],[e+l.width-l.radius,i],[e+l.width-l.radius,i+l.radius,l.radius,-Math.PI/2,0,!1],[e+l.width,i+l.height-l.radius],[e+l.width-l.radius,i+l.height-l.radius,l.radius,0,Math.PI/2,!1],[e+l.radius,i+l.height],[e+l.radius,i+l.height-l.radius,l.radius,Math.PI/2,Math.PI,!1],[e,i+l.radius]],this._path(t,o),t.stroke(),t.fill();else{t.beginPath(),t.lineWidth=l.height,t.lineCap=l.type,e+=t.lineWidth/2+5,i+=n/2,t.moveTo(e,i);var v=e+l.width-l.height+1;t.lineTo(v,i),t.stroke(),t.fill()}},_getChartBounds:function(t,e){var i,s,n,a;if(i=this._settings.padding.left,s=this._settings.padding.top,n=t-this._settings.padding.right,a=e-this._settings.padding.bottom,this._settings.legend){var r=this._settings.legend,o=this._settings.legend.width,l=this._settings.legend.height;"x"==r.layout?"center"==r.valign?"right"==r.align?n-=o:"left"==r.align&&(i+=o):"bottom"==r.valign?a-=l:s+=l:"right"==r.align?n-=o:"left"==r.align&&(i+=o)}return{start:{x:i,y:s},end:{x:n,y:a}}},_getStackedLimits:function(t){var e,i,s,n,a;if(this._settings.yAxis&&void 0!==this._settings.yAxis.end&&void 0!==this._settings.yAxis.start&&this._settings.yAxis.step)s=parseFloat(this._settings.yAxis.end),n=parseFloat(this._settings.yAxis.start);else{for(e=0;e<t.length;e++)for(t[e].$sum=0,t[e].$min=1/0,i=0;i<this._series.length;i++)a=Math.abs(parseFloat(this._series[i].value(t[e])||0)),isNaN(a)||(-1!=this._series[i].type.toLowerCase().indexOf("stacked")&&(t[e].$sum+=a),a<t[e].$min&&(t[e].$min=a));for(s=-1/0,n=1/0,e=0;e<t.length;e++)t[e].$sum>s&&(s=t[e].$sum),t[e].$min<n&&(n=t[e].$min);n>0&&(n=0)}return{max:s,min:n}},_setBarGradient:function(t,e,i,s,n,a,r,o){var l,h,c,d,u,f;return"light"==a?(l="x"==o?t.createLinearGradient(e,i,s,i):t.createLinearGradient(e,i,e,n),f=[[0,"#FFFFFF"],[.9,r],[1,r]],h=2):"falling"==a||"rising"==a?(l="x"==o?t.createLinearGradient(e,i,s,i):t.createLinearGradient(e,i,e,n),c=os.toRgb(r),(d=os.rgbToHsv(c[0],c[1],c[2]))[1]*=.5,u="rgb("+os.hsvToRgb(d[0],d[1],d[2])+")","falling"==a?f=[[0,u],[.7,r],[1,r]]:"rising"==a&&(f=[[0,r],[.3,r],[1,u]]),h=0):(t.globalAlpha=.37,h=0,l="x"==o?t.createLinearGradient(e,n,e,i):t.createLinearGradient(e,i,s,i),f=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(l,f),{gradient:l,offset:h}},_getPositionByAngle:function(t,e,i,s){return t*=-1,e+=Math.cos(t)*s,i-=Math.sin(t)*s,{x:e,y:i}},_gradient:function(t,e){for(var i=0;i<e.length;i++)t.addColorStop(e[i][0],e[i][1])},_path:function(t,e){var i,s;for(i=0;i<e.length;i++)s=i?"lineTo":"moveTo",e[i].length>2&&(s="arc"),t[s].apply(t,e[i])},_addMapRect:function(t,e,i,s,n){t.addRect(e,[i[0].x-s.x,i[0].y-s.y,i[1].x-s.x,i[1].y-s.y],n)}};t.protoUI(Ur,Lr,zr,Nr,$r,Dr,Hr,{$render_spline:function(t,e,i,s,n,a){var r,o,l,h,c,d,u,f,g,p,_,v,m;if(c=this._calculateLineParams(t,e,i,s,n),r=this._settings,this._mapStart=i,l=[],e.length){for(f=r.offset?i.x+.5*c.cellWidth:i.x,o=0;o<e.length;o++)((_=this._getPointY(e[o],i,s,c))||"0"==_)&&(u=o?c.cellWidth*o-.5+f:f,l.push({x:u,y:_,v:this._settings.value(e[o]),index:o}));for(d=this._getSplineParameters(l),o=0;o<l.length;o++){if(g=l[o].x,v=l[o].y,o<l.length-1){for(p=l[o+1].x,m=l[o+1].y,h=g;h<p;h++){var b=this._getSplineYPoint(h,g,o,d.a,d.b,d.c,d.d);b<i.y&&(b=i.y),b>s.y&&(b=s.y);var x=this._getSplineYPoint(h+1,g,o,d.a,d.b,d.c,d.d);x<i.y&&(x=i.y),x>s.y&&(x=s.y),this._drawLine(t,h,b,h+1,x,r.line.color(e[o]),r.line.width)}this._drawLine(t,p-1,this._getSplineYPoint(h,g,o,d.a,d.b,d.c,d.d),p,m,r.line.color(e[o]),r.line.width)}this._drawItem(t,g,v,e[l[o].index],r.label(e[l[o].index]),n,a)}}},_getSplineParameters:function(t){var e,i,s,n,a,r,o,l,h=[],c=[],d=t.length;for(a=0;a<d-1;a++)h[a]=t[a+1].x-t[a].x,c[a]=(t[a+1].y-t[a].y)/h[a];for(l=[],(o=[])[0]=0,o[1]=2*(h[0]+h[1]),l[0]=0,l[1]=6*(c[1]-c[0]),a=2;a<d-1;a++)o[a]=2*(h[a-1]+h[a])-h[a-1]*h[a-1]/o[a-1],l[a]=6*(c[a]-c[a-1])-h[a-1]*l[a-1]/o[a-1];for((r=[])[d-1]=r[0]=0,a=d-2;a>=1;a--)r[a]=(l[a]-h[a]*r[a+1])/o[a];for(e=[],i=[],s=[],n=[],a=0;a<d-1;a++)e[a]=t[a].y,i[a]=-h[a]*r[a+1]/6-h[a]*r[a]/3+(t[a+1].y-t[a].y)/h[a],s[a]=r[a]/2,n[a]=(r[a+1]-r[a])/(6*h[a]);for(a=0;a<t.length-1;a++)0===t[a].v&&0===t[a+1].v&&(e[a]=t[a].y,n[a]=s[a]=i[a]=0);return{a:e,b:i,c:s,d:n}},_getSplineYPoint:function(t,e,i,s,n,a,r){return s[i]+(t-e)*(n[i]+(t-e)*(a[i]+(t-e)*r[i]))}},Fr,Rr,jr,{presets:{simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#8664C6",item:{borderColor:"#8664C6",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#8664C6",width:2}},diamond:{color:"#FF5C4C",item:{borderColor:"#FF5C4C",color:"#FF5C4C",type:"d",radius:3,shadow:!0},line:{color:"#FF5C4C",width:2}},point:{color:"#1ca1c1",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#1ca1c1",borderColor:"#1ca1c1",radius:2,borderWidth:2,type:"r"},alpha:1},line:{line:{color:"#1ca1c1",width:2},item:{color:"#ffffff",borderColor:"#1ca1c1",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#1ca1c1",line:{color:"#1ca1c1",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#1ca1c1",borderWidth:1,color:"#1ca1c1",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#00a497",borderWidth:2,color:"#ffffff",type:"s",shadow:!1,alpha:1},line:{color:"#00a497"}},column:{color:"RAINBOW",gradient:!1,barWidth:45,radius:0,alpha:1,border:!0},stick:{barWidth:5,gradient:!1,color:"#1ca1c1",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",barWidth:70,gradient:"falling",radius:0,alpha:.5,border:!0}}},Or,Yr,Ui,li,$i,Qi,B,si.view),t.protoUI({name:"rangechart",defaults:{template:"GPL version doesn't support rangechart <br> You need Webix PRO"}},Wn.view);var Gr={name:"grouplist",defaults:{animate:{}},_listClassName:"webix_grouplist",$init:function(){t.extend(this.data,Ps,!0),this.data.count=function(){return this.order.length},this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",T(this._onClear,this)),this._onClear()},_onClear:function(){this._nested_cursor=[],this._nested_chain=[]},$setSize:function(){si.api.$setSize.apply(this,arguments)&&(this._dataobj.style.width=this._content_width)},on_click:{webix_list_item:function(t,e){if(this._in_animation)return!1;for(var i=0;i<this._nested_chain.length;i++)if(this._nested_chain[i]==e){for(var s=i;s<this._nested_chain.length;s++)this.data.getItem(this._nested_chain[s]).$template="";return i?(this._nested_cursor=this.data.branch[this._nested_chain[i-1]],this._nested_chain.splice(i)):(this._nested_cursor=this.data.branch[0],this._nested_chain=[]),this._is_level_down=!1,this.render()}var n=this.getItem(e);if(n.$count)return this._is_level_down=!0,this._nested_chain.push(e),n.$template="Back",this._nested_cursor=this.data.branch[n.id],this.render();this._settings.select&&(this._no_animation=!0,"multiselect"==this._settings.select||this._settings.multiselect?this.select(e,!1,"touch"==this._settings.multiselect||t.ctrlKey||t.metaKey,t.shiftKey):this.select(e),this._no_animation=!1)}},getOpenState:function(){return{parents:this._nested_chain,branch:this._nested_cursor}},render:function(){var e,i;if(this._nested_chain=E(this._nested_chain),this._nested_cursor=E(this._nested_cursor),this._nested_chain.length)for(e=0;e<this._nested_chain.length;e++)this.data.branch[this._nested_chain[e]]||(this._nested_chain.splice(e,1),e--);if(i=this._nested_chain.length?this._nested_chain[this._nested_chain.length-1]:0,this._nested_cursor=E(this.data.branch[i]),!this._nested_cursor.length&&this._nested_chain.length&&(this._nested_cursor=[i],this._nested_chain.pop()),this._in_animation)return L(this.render,this,arguments,100);for(e=0;e<this._nested_cursor.length;e++)this.data.getItem(this._nested_cursor[e]).$template="";if(this._nested_cursor.length||(this._nested_cursor=this.data.branch[0]),this.data.order=H([].concat(this._nested_chain).concat(this._nested_cursor)),this.callEvent("onBeforeRender",[this.data])){if(!this._no_animation&&this._dataobj.innerHTML&&ci.isSupported()&&this._settings.animate&&this._prev_nested_chain_length!=this._nested_chain.length){if(this.callEvent("onBeforeRender",[this.data])){this._back_scroll_states||(this._back_scroll_states=[]);var s=this._dataobj.cloneNode(!1);s.innerHTML=this.data.getRange().map(this._toHTML,this).join("");var n=t.extend({},this._settings.animate);n.direction=this._is_level_down?"left":"right";var a=[I(n),I(n)];if(this._is_level_down)this._back_scroll_states.push(this.getScrollState()),fi&&fi.$active&&(a[0].y=0,a[1].y=-this.getScrollState().y);else{var r=this._back_scroll_states.pop();fi&&fi.$active&&(a[0].y=-r.y,a[1].y=-this.getScrollState().y)}var o=ci.formLine(s,this._dataobj,n);fi&&fi.$active&&fi._set_matrix(s,0,this._is_level_down?0:a[0].y,"0ms"),n.master=this,n.callback=function(){this._dataobj=s,this._is_level_down?fi&&fi.$active||this.scrollTo(0,0):fi&&fi.$active?L(function(){fi._set_matrix(s,0,a[0].y,"0ms")},this):r&&this.scrollTo(0,r.y),ci.breakLine(o),n.master=n.callback=null,this._htmlmap=null,this._in_animation=!1,this.callEvent("onAfterRender",[])},this._in_animation=!0,ci(o,a)}}else ns.render.apply(this,arguments);this._prev_nested_chain_length=this._nested_chain.length}},templateBack_setter:function(t){this.type.templateBack=Vt(t)},templateItem_setter:function(t){this.type.templateItem=Vt(t)},templateGroup_setter:function(t){this.type.templateGroup=Vt(t)},type:{template:function(t,e){return t.$count?e.templateGroup(t,e):e.templateItem(t,e)},css:"group",classname:function(t,e,i){return"webix_list_item webix_"+(t.$count?"group":"item")+(t.$template?"_back":"")+(i&&i.webix_selected?" webix_selected":"")+(e.css?" "+e.css:"")+(t.$css?" "+t.$css:"")},templateStart:Vt('<div webix_l_id="#id#" class="{common.classname()}" style="width:{common.widthSize()}; height:{common.heightSize()};  overflow:hidden;" {common.aria()}>'),templateBack:Vt("#value#"),templateItem:Vt("#value#"),templateGroup:Vt("#value#"),templateEnd:function(t){var e="";return t.$count&&(e+="<div class='webix_arrow_icon'></div>"),e+="</div>"}},showItem:function(t){var e,i;for(t&&(e=this.getItem(t),i=e.$parent,e.$count&&(i=e.id)),this._nested_cursor=this.data.branch[i||0],this._nested_chain=[];i;)this.getItem(i).$template="Back",this._nested_chain.unshift(i),i=this.getItem(i).$parent;this._no_animation=!0,this.render(),this._no_animation=!1,ns.showItem.call(this,t)}};Yt(t.protoUI(Gr,Ui,mr.view),{});var qr={name:"unitlist",_id:"webix_item_id",uniteBy_setter:Vt,render:function(t,e,i){var s=this._settings;if(this.isVisible(s.id)&&s.uniteBy){if(t){var n=this.getItemNode(t);if(n&&"update"==i&&this._settings.uniteBy.call(this,e)==this.getItem(t).$unitValue){var a=this._htmlmap[t]=this._toHTMLObject(e);return ot(a,n),void rt(n)}}this.callEvent("onBeforeRender",[this.data])&&(this.units=null,this._setUnits(),this.units&&(this._dataobj.innerHTML=this._getUnitRange().map(this._toHTML,this).join(""),this._htmlmap=null),this.callEvent("onAfterRender",[]))}},getUnits:function(){var t=[];if(this.units)for(var e in this.units)t.push(e);return t},getUnitList:function(t){return this.units?this.units[t]:null},_toHTML:function(t){var e=this.data._marks[t.id];return _(!t.$template||this.type["template"+t.$template],"RenderStack :: Unknown template: "+t.$template),this.callEvent("onItemRender",[t]),t.$unit?this.type.templateStartHeader(t,this.type)+this.type.templateHeader.call(this,t.$unit)+this.type.templateEnd(t,this.type):this.type.templateStart(t,this.type,e)+(t.$template?this.type["template"+t.$template]:this.type.template)(t,this.type)+this.type.templateEnd(t,this.type)},_getUnitRange:function(){var t,e,i,s;t=[];var n=this.data.$min||0,a=this.data.$max||1/0,r=0;for(i in this.units)for(t.push({$unit:i}),s=this.units[i],e=0;e<s.length;e++){if(r==n&&(t=[{$unit:i}]),t.push(this.getItem(s[e])),r==a)return H(t);r++}return H(t)},_setUnits:function(){var t=this;this.units={},this.data.each(function(e){var i=t._settings.uniteBy.call(this,e);e.$unitValue=i,t.units[i]||(t.units[i]=[]),t.units[i].push(e.id)})},type:{headerHeight:20,templateHeader:function(t){return"<span class='webix_unit_header_inner'>"+t+"</span>"},templateStart:function(t,e,i){if(t.$unit)return e.templateStartHeader.apply(this,arguments);var s="webix_list_item webix_list_"+e.css+"_item"+(i&&i.webix_selected?" webix_selected":"")+(t.$css?t.$css:""),n="width:"+e.widthSize(t,e,i)+"; height:"+e.heightSize(t,e,i)+"; overflow:hidden;"+(e.layout&&"x"==e.layout?"float:left;":"");return'<div webix_item_id="'+t.id+'" class="'+s+'" style="'+n+'" '+e.aria(t,e,i)+">"},templateStartHeader:function(t,e,i){var s="webix_unit_header webix_unit_"+e.css+"_header"+(t.$selected?"_selected":""),n="width:"+e.widthSize(t,e,i)+"; height:"+e.headerHeight+"px; overflow:hidden;";return'<div webix_unit_id="'+t.$unit+'" class="'+s+'" style="'+n+'">'}},$skin:function(){this.type.headerHeight=ni.unitHeaderHeight}};t.protoUI(qr,mr.view),St.dbllist={selectAll:"<span class='webix_icon wxi-angle-double-right'></span>",selectOne:"<span class='webix_icon wxi-angle-right'></span>",deselectAll:"<span class='webix_icon wxi-angle-double-left'></span>",deselectOne:"<span class='webix_icon wxi-angle-left'></span>"};var Kr={name:"dbllist",defaults:{borderless:!0},$init:function(){this._moved={},this._inRight=T(function(t){return this._moved[t.id]},this),this._inLeft=T(function(t){return!this._moved[t.id]},this),this.$view.className+=" webix_dbllist",this.$ready.unshift(this._setLayout)},$onLoad:function(t,e){var i=this.$$("left"),s=this.$$("right");return this._updateAndResize(function(){i.data.driver=e,i.parse(t),s.data.driver=e,s.parse(t)}),this._data_ready=!0,this._refresh(),!0},_getButtons:function(){if(!1===this._settings.buttons)return{width:10};var t=St.dbllist,e=[this._getButton("deselect_all",t.deselectAll),this._getButton("select_all",t.selectAll),this._getButton("deselect_one",t.deselectOne),this._getButton("select_one",t.selectOne)];return e={width:120,template:e.join(""),onClick:{dbllist_button:function(t,e,i){this.getTopParentView()._update_list(i.getAttribute("action"))}}},this._settings.buttons&&(e.template=this._settings.buttons),e},_getButton:function(t,e){return"<button class='dbllist_button' action='"+t+"'>"+e+"</button>"},_getList:function(e,i,s,n){var a={view:"list",select:"multiselect",multiselect:"touch",id:e,action:i,drag:!0,type:{margin:3,id:e},on:{onBeforeDrop:function(t){var e=t.from,i=t.to,s=e.getTopParentView();if(s===this.getTopParentView()){var n="select_one"!=i._settings.action;s.select(t.source,n)}return!1},onItemDblClick:function(){return this.getTopParentView()._update_list(this.config.action)}}};return this._settings.list&&t.extend(a,this._settings.list,!0),s&&(a={rows:[{view:"label",label:s,css:"webix_inp_top_label"},a]}),n?{rows:[a,{view:"label",height:20,label:n,css:"bottom_label"}]}:a},_setLayout:function(){var t=[{margin:10,type:"clean",cols:[this._getList("left","select_one",this._settings.labelLeft,this._settings.labelBottomLeft),this._getButtons(),this._getList("right","deselect_one",this._settings.labelRight,this._settings.labelBottomRight)]}];this.cols_setter(t)},_update_list:function(t){var e=null,i=!1;"select_all"===t?(e=this.$$("left").data.order,i=!0):"select_one"===t?(e=this.$$("left").getSelectedId(!0),i=!0):"deselect_all"===t?(e=this.$$("right").data.order,i=!1):"deselect_one"===t&&(e=this.$$("right").getSelectedId(!0),i=!1),this.select(e,i)},select:function(t,e){var i;if("object"!==u(t)&&(t=[t]),e)for(i=0;i<t.length;i++)this._moved[t[i]]=!0;else for(i=0;i<t.length;i++)delete this._moved[t[i]];this._refresh(),this.callEvent("onChange",[])},_updateAndResize:function(t,e){ze(T(t,this),!1),e&&(this.$$("left")._settings.autoheight||this.$$("right")._settings.autoheight)&&this.resize()},_refresh:function(){var t=this.$$("left"),e=this.$$("right");t&&this._updateAndResize(function(){t.filter(this._inLeft),e.filter(this._inRight)},!0)},focus:function(){if(!Ve.canFocus(this))return!1;Ve.setFocus(this)},value_setter:function(t){this.setValue(t)},setValue:function(t){if(this._moved={},t){"object"!==u(t)&&(t=t.toString().split(","));for(var e=0;e<t.length;e++)this._moved[t[e]]=!0}this._refresh()},getValue:function(){var t=[],e=this.$$("left");for(var i in this._moved)this._data_ready&&!e.data.pull[i]||t.push(i);return t.join(",")}},Zr=(t.protoUI(Kr,Ae,Ki,qn.view),{name:"tree",defaults:{scroll:"auto",navigation:!0},$init:function(){this._viewobj.className+=" webix_tree",t.extend(this.data,Ps,!0),t.extend(this.on_click,As),this.attachEvent("onAfterRender",this._refresh_scroll),this.attachEvent("onPartialRender",this._refresh_scroll),this.data.provideApi(this,!0),this._viewobj.setAttribute("role","tree")},_id:"webix_tm_id",on_context:{},on_dblclick:{webix_tree_checkbox:function(){if(this.on_click.webix_tree_checkbox)return this.on_click.webix_tree_checkbox.apply(this,arguments)}},$fixEditor:function(t){var e=this.getItemNode(t.id).querySelector("span");if(e){""===e.innerHTML&&(e.innerHTML="&nbsp;");var i=e.offsetLeft;t.node.style.width=this.$view.scrollWidth-i-10+"px",t.node.style.marginLeft=i+"px",t.node.style.left="0px"}},on_click:{webix_tree_item:function(t,e){if(this._settings.activeTitle){var i=this.getItem(e);i.open?this.close(e):this.open(e)}if(this._settings.select)if("multiselect"==this._settings.select||this._settings.multiselect){var s=t.ctrlKey||t.metaKey||"touch"==this._settings.multiselect;if("level"==this._settings.multiselect&&(s||t.shiftKey)){var n=this.getSelectedId(!0)[0];if(n&&this.getParentId(e)!=this.getParentId(n))return}this.select(e,!1,s,t.shiftKey)}else this.select(e)}},_paste:{insert:function(t){var e=this.getSelectedId()||"0";this.add({value:t},null,e)},modify:function(t){for(var e=this.getSelectedId(!0),i=0;i<e.length;i++)this.getItem(e[i]).value=t,this.refresh(e[i])},custom:function(){}},_drag_order_complex:!0,$dragHTML:function(t,e,i){var s="<div class='webix_tree_item'>"+this.type.template(t,this.type)+"</div>";return R(i.source)&&i.source.length>1&&(s=this._toMultipleHTML(s,i.source.length)),s},_close_branches:function(t){for(var e=t.source,i=0;i<e.length;i++)this.close(e[i])},_set_drop_area:function(t,e){var i=this.getItemNode(t);i?i.parentNode.insertBefore(_i._dropHTML[0],i):e.children[0].children[0].appendChild(_i._dropHTML[0])},type:t.extend({template:function(t,e){var i=e["template"+t.level]||e.templateCommon;return i.apply(this,arguments)},classname:function(t,e,i){var s="webix_tree_item";return t.$css&&("object"==u(t.$css)&&(t.$css=et(t.$css)),s+=" "+t.$css),i&&i.$css&&(s+=" "+i.$css),e.css&&(s+=" "+e.css),s},aria:function(t,e,i){return'role="treeitem"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')+(t.$count?'aria-expanded="'+(t.open?"true":"false")+'"':"")+'aria-level="'+t.$level+'"'},templateCommon:Vt("{common.icon()} {common.folder()} <span>#value#</span>"),templateStart:Vt('<div webix_tm_id="#id#" class="{common.classname()}" {common.aria()}>'),templateEnd:Vt("</div>"),templateCopy:Vt("#value#")},zs)}),Jr=t.protoUI(Zr,Ms,Ui,Cs,Hi,Es,rs,Zi,Qi,as,Is,pr.view,Ts,Ci,B),Qr={api:Zr,view:Jr};Yt(Jr,{name:"lineTree",css:"webixLineTree",icon:function(t,e){for(var i="",s="",n=1;n<=t.$level;n++){n==t.$level&&(s=t.$count?t.open?"webix_tree_open ":"webix_tree_close ":"webix_tree_none ");var a=e._icon_src(t,e,n);a&&(i+="<div class='"+s+"webix_tree_img webix_tree_"+a+"'></div>")}return i},_icon_src:function(t,e,i){var s=e._tree_branch_render_state,n=Ts._obj;if(0===s&&n){var a=t.$level,r=t.id;for(s=[];a;){var o=n.getParentId(r),l=n.data.branch[o];l[l.length-1]==r&&(s[a]=!0),r=o,a--}e._tree_branch_render_state=s}if(!s)return 0;if(i==t.$level){var h=3;return t.$parent||0===t.$index&&(h=4),s[t.$level]&&(h=2),t.$count?t.open?"minus"+h:"plus"+h:"line"+h}return s[i]?"blank":"line1"}});var to={name:"treemap",defaults:{activeItem:!1,subRender:!0,header:!0,headerHeight:35,value:Vt("#value#"),headerTemplate:"",navigation:!0},value_setter:Vt,headerTemplate_setter:Vt,header_setter:function(t){return t&&!0!==t&&(this.type.header=t),t},$init:function(){this.$view.className+=" webix_treemap",this._viewobj.setAttribute("role","tree"),this._htmlElement=document.createElement("DIV"),t.extend(this.data,Ps,!0),this.data.provideApi(this,!0),this.data.attachEvent("onClearAll",T(function(){this._html="",this.$values={},this.$xy={}},this)),this.attachEvent("onKeyPress",this._onKeyPress)},_toHTMLItem:function(t){var e=this.data._marks[t.id];this.callEvent("onItemRender",[t]);var i=t.$template?this.type["template"+t.$template].call(this,t,this.type,e):this.type.template.call(this,t,this.type,e);return this.type.templateStart.call(this,t,this.type,e)+i+this.type.templateEnd.call(this)},_renderHeader:function(t){var e=this.getItem(t),i=this._settings.headerHeight,s="<div class='webix_treemap_header' style='height:"+i+"px;line-height:"+i+"px;'>";return s+=this.type.header.call(this,e,this.type),s+="</div>"},_renderBranch:function(t){var e,i,s,n,a=[];if(!this.$width||!this.count())return this._html="",!1;if(t||(t=this.config.branch||0,this._html="",this.$values={},this.$xy={},this.$xy[t]={width:this.$width,height:this.$height,top:0,left:0},t&&this._settings.header&&(this.$xy[t].height-=this._settings.headerHeight,this.$xy[t].top=this._settings.headerHeight,this._html+=this._renderHeader(t)),n=0,this.data.each(function(t){var e=this.getParentId(t.id);if(!this.data.branch[t.id]&&(s=1*this.config.value.call(this,t),!isNaN(s)&&s))for(this.$values[t.id]=s,n+=s;e;)this.$values[e]||(this.$values[e]=0),this.$values[e]+=s,e=this.getParentId(e)},this,!1,t)),this.data.eachChild(t,function(t){this.$values[t.id]&&a.push(E(t))},this),n=n||this.$values[t],a.length&&n){e=this.$xy[t],(i={top:e.top,left:e.left,dx:e.width,dy:e.height,set:[],sum:0}).dim=Math.min(i.dx,i.dy);for(var r=i.dx*i.dy/n,o=0;o<a.length;o++)a[o].$value=this.$values[a[o].id]*r;a.sort(function(t,e){return t.$value>e.$value?-1:1});for(var l=1/0,h=0;a[h];){var c=this._worst(i,a[h]);if(c<l)i.sum+=a[h].$value,i.set.push(a[h]),l=c,h++;else{this._renderRow(i);var d={top:i.top,left:i.left,dx:i.dx,dy:i.dy,set:[],sum:0},u=i.sum/i.dim;i.dx>i.dy?(d.left+=u,d.dx-=u):(d.top+=u,d.dy-=u),(i=d).dim=Math.min(i.dx,i.dy),l=1/0}}}i&&this._renderRow(i)},_renderRow:function(t){var e,i,s,n,a=t.top,r=t.left;for(t.mode=t.dy<t.dx,t.contra=t.sum/t.dim,e=0;e<t.set.length;e++)i=t.set[e].id,t.mode?(s=t.contra,n=t.set[e].$value/t.contra):(s=t.set[e].$value/t.contra,n=t.contra),this.$xy[i]={},this.$xy[i].top=a,this.$xy[i].left=r,t.mode?a+=n:r+=s,this.$xy[i].width=s,this.$xy[i].height=n,this._html+=this._toHTMLItem(this.getItem(i)),this._settings.subRender&&this.data.branch[i]&&this._renderBranch(i)},_worst:function(t,e){var i=t.sum+e.$value,s=i*i/(t.dim*t.dim*e.$value);return t.set.length&&(s=Math.max(t.dim*t.dim*t.set[0].$value/(i*i),s)),s>1?s:1/s},_toHTMLObject:function(t){return this._htmlElement.innerHTML=this._toHTMLItem(t),this._htmlElement.firstChild},showBranch:function(t){this._settings.branch=t,this.refresh()},render:function(t,e,i){if(this.isVisible(this._settings.id)&&!this.$blockRender){if("update"==i){var s=this.getItemNode(t);if(s){var n=this._htmlmap[t]=this._toHTMLObject(e);ot(n,s),rt(s)}}else!this.data.branch||this._settings.branch&&!this.data.branch[this._settings.branch]||(this._htmlmap=null,this.callEvent("onBeforeRender",[]),this._renderBranch(),this._dataobj.innerHTML=this._html,this.callEvent("onAfterRender",[]));return!0}},_id:"webix_dm_id",on_click:{webix_treemap_item:function(t,e){this._settings.select&&("multiselect"==this._settings.select||this._settings.multiselect?this.select(e,!1,t.ctrlKey||t.metaKey||"touch"==this._settings.multiselect,t.shiftKey):this.select(e)),this._settings.activeItem&&this.isBranch(e)&&this.showBranch(e)},webix_treemap_header_item:function(t){var e=lt(t,"webix_dm_header_id");this.define("branch",e),this.refresh()},webix_treemap_reset:function(){this.define("branch",0),this.refresh()}},on_dblclick:{},on_mouse_move:{},_getCssText:function(t){var e="";for(var i in t)e+=i+":"+t[i]+";";return e},type:{template:Vt("#value#"),header:function(t,e){for(var i=t.id,s="<div role='button' tabindex='0' aria-label='"+St.aria.resetTreeMap+"' class='webix_treemap_reset'></div>",n=[];i;)t=this.getItem(i),n.push(e.headerItem.call(this,t,e)),i=this.getParentId(i);return n.reverse(),s+n.join("<span class='webix_icon wxi-angle-right webix_treemap_path_icon'></span>")},headerItem:function(t){var e=this.config.headerTemplate(t),i='<a role="button" tabindex="0" aria-label="'+e+'" webix_dm_header_id="'+t.id+'" class="webix_treemap_header_item">';return i+=e,i+="</a>"},classname:function(t,e,i){var s="webix_treemap_item";e.css&&(s+=" "+e.css),t.$css&&("object"==u(t.$css)&&(t.$css=et(t.$css)),s+=" "+t.$css);var n=this.$xy[t.id];i&&i.$css&&(s+=" "+i.$css),s+=" webix_treemap_level_"+this.getItem(t.id).$level;var a=this.getParentId(t.id);if(a&&a!=this._settings.branch||(s+=" webix_treemap_level_top"),this.$height-n.top-n.height<1&&(s+=" webix_treemap_item_bottom"),this.$width-n.left-n.width<1&&(s+=" webix_treemap_item_right"),e.cssClass){var r=e.cssClass.call(this,t,e,i);r&&("object"==u(r)?s+=" "+et(r):s+=" "+r)}return s},templateStart:function(t,e,i){var s="";if(this.$xy){var n=this.$xy[t.id];s+="width: "+n.width+"px; height: "+n.height+"px;",s+="top: "+n.top+"px; left: "+n.left+"px;"}return'<div role="treeitem" aria-level="'+t.$level+'" '+(i&&i.webix_selected?'aria-selected="true" tabindex="0"':"")+' webix_dm_id="'+t.id+'" class="'+e.classname.call(this,t,e,i)+'" style="'+s+'">'},templateEnd:Vt("</div>")}},eo=(t.protoUI(to,Ui,Cs,rs,Zi,Qi,as,Is,pr.view,Ts,Ci,B),{name:"dataview",$init:function(e){e.sizeToContent&&this.$ready.unshift(this._after_init_call);var i=e.type||e.item,s=e.prerender||this.defaults.prerender||i&&"auto"==i.width||"move"==e.drag||"order"==e.drag;s||e.autoheight||t.extend(this,Hs,!0),e.autoheight&&(e.scroll=!1),i&&"tiles"==i.type&&(this._viewobj.firstChild.style.padding="8px",this._tilesPadding=8),this._contentobj.className+=" webix_dataview",this._viewobj.setAttribute("role","listbox")},_after_init_call:function(){var t=nt("DIV",0,this.type.template({}));t.style.position="absolute",document.body.appendChild(t),this.type.width=t.offsetWidth,this.type.height=t.offsetHeight,rt(t)},defaults:{scroll:!0,datafetch:50,navigation:!0},_id:"webix_l_id",_itemClassName:"webix_dataview_item",_tilesPadding:0,_drag_direction:"x",on_click:{webix_dataview_item:function(t,e){this._settings.select&&("multiselect"==this._settings.select||this._settings.multiselect?this.select(e,!1,"touch"==this._settings.multiselect||t.ctrlKey||t.metaKey,t.shiftKey):this.select(e))}},on_dblclick:{},on_mouse_move:{},type:{template:Vt("#value#"),templateLoading:Vt("Loading..."),width:160,height:50,classname:function(t,e,i){var s="webix_dataview_item";return e.css&&(s+=" "+e.css),e.type&&"tiles"==e.type.toString()&&(s+=" tiles "),t.$css&&("object"==u(t.$css)&&(t.$css=et(t.$css)),s+=" "+t.$css),i&&i.$css&&(s+=" "+i.$css),s},tilesStart:function(t,e){return"tiles"==e.type?'<div class="webix_dataview_inner_item" style="box-sizing:border-box; overflow:hidden;">':""},tilesEnd:function(t,e){return"tiles"==e.type?"</div>":""},aria:function(t,e,i){return'role="option"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':' tabindex="-1"')},templateStart:Vt('<div webix_l_id="#id#" class="{common.classname()}" {common.aria()} style="width:{common.width}px; height:{common.height}px; float:left; overflow:hidden;">{common.tilesStart()}'),templateEnd:Vt("{common.tilesEnd()}</div>")},_calck_autoheight:function(t){return this._settings.height=this.type.height*Math.ceil(this.data.count()/Math.floor(t/this.type.width))},autoheight_setter:function(t){return t&&(this.data.attachEvent("onStoreLoad",T(this.resize,this)),this._contentobj.style.overflowY="hidden"),t},$getSize:function(t,e){this._settings.xCount>0&&"auto"!=this.type.width&&!this._autowidth&&(this._settings.width=this.type.width*this._settings.xCount+(this._scroll_y?i.scrollSize:0)),this._settings.yCount&&"auto"!=this.type.height&&(this._settings.height=this.type.height*this._settings.yCount);var s=this._settings.width||this._content_width;return this._settings.autoheight&&s&&(this._calck_autoheight(s),this.scroll_setter(!1)),si.api.$getSize.call(this,t,e)},_recalk_counts:function(){var t=!1;return this._settings.yCount&&"auto"==this.type.height&&(this.type.height=Math.floor((this._content_height-this._tilesPadding)/this._settings.yCount),t=!0),this._settings.xCount&&("auto"==this.type.width||this._autowidth)?(this._autowidth=!0,this.type.width=Math.floor((this._content_width-2*this._tilesPadding)/this._settings.xCount),t=!0):this._autowidth=!1,t},$setSize:function(t,e){if(si.api.$setSize.call(this,t,e)){if(this._settings.autoheight&&this._calck_autoheight()!=this._content_height)return L(this.resize,this);(this._recalk_counts()||this._render_visible_rows)&&this.render()}}});t.protoUI(eo,Ei,Hi,Qi,Zi,rs,as,Ai,pr.view),St.pager={first:"<span class='webix_icon wxi-angle-double-left'></span>",last:"<span class='webix_icon wxi-angle-double-right'></span>",next:"<span class='webix_icon wxi-angle-right'></span>",prev:"<span class='webix_icon wxi-angle-left'></span>"};var io={defaults:{size:10,page:0,group:5,template:"{common.pages()}",maxWidth:1e5,height:30,borderless:!0},name:"pager",on_click:{webix_pager_item:function(t,e){this.select(e)}},$init:function(t){this.data=this._settings,this._dataobj=this._viewobj,this._viewobj.className+=" webix_pager"+(t.autowidth?" webix_pager_auto":""),!1!==t.master&&0!==t.master||this.$ready.push(this._remove_master)},_remove_master:function(){this.refresh(),this.$master={refresh:function(){},select:function(){}}},select:function(t){if(this.$master&&"pager"==this.$master.name)return this.$master.select(t);switch(t){case"next":t=this._settings.page+1;break;case"prev":t=this._settings.page-1;break;case"first":t=0;break;case"last":t=this._settings.limit-1}t<0&&(t=0),t>=this.data.limit&&(t=this.data.limit-1);var e=this.data.page;this.callEvent("onBeforePageChange",[t,e])&&(this.data.page=1*t,this.refresh()&&(this._settings.animate&&this._animate(e,1*t,this._settings.animate)||this.$master.refresh()),this.callEvent("onAfterPageChange",[t]))},_id:"webix_p_id",template_setter:Vt,type:{template:function(t,e){return t.template.call(this,t,e)},pages:function(t){var e="";if(-1==t.page)return"";t.$min=t.page-Math.round((t.group-1)/2),t.$max=t.$min+1*t.group-1,t.$min<0&&(t.$max+=-1*t.$min,t.$min=0),t.$max>=t.limit&&(t.$min-=Math.min(t.$min,t.$max-t.limit+1),t.$max=t.limit-1);for(var i=t.$min||0;i<=t.$max;i++)e+=this.button({id:i,index:i+1,selected:i==t.page?"_selected":"",label:St.aria.page+" "+(i+1)});return e},page:function(t){return t.page+1},first:function(){return this.button({id:"first",index:St.pager.first,selected:"",label:St.aria.pages[0]})},last:function(){return this.button({id:"last",index:St.pager.last,selected:"",label:St.aria.pages[3]})},prev:function(){return this.button({id:"prev",index:St.pager.prev,selected:"",label:St.aria.pages[1]})},next:function(){return this.button({id:"next",index:St.pager.next,selected:"",label:St.aria.pages[2]})},button:Vt("<button type='button' webix_p_id='{obj.id}' class='webix_pager_item{obj.selected}' aria-label='{obj.label}'>{obj.index}</button>")},clone:function(t){t.$view||(t.view="pager",t=Xt(t)),this._clone=t,t.$master=this,this._refresh_clone()},refresh:function(){var t=this._settings;t.limit=Math.ceil(t.count/t.size)||1;var e=Math.min(t.limit-1,t.page);return e!=t.page?this.$master.setPage(e):(t.page=e,e>=0&&e!=t.old_page||t.limit!=t.old_limit||t.old_count!=t.count?(this.render(),this._refresh_clone(),t.old_limit=t.limit,t.old_page=t.page,t.old_count=t.count,!0):void 0)},apiOnly_setter:function(t){return this.$apiOnly=t},_refresh_clone:function(){this._clone&&(this._clone._settings.count=this._settings.count,this._clone._settings.page=this._settings.page,this._clone.refresh())},_animate:function(e,i,s){if(e==i)return!1;if(this._pgInAnimation)return this._pgAnimateTimeout&&window.clearTimeout(this._pgAnimateTimeout),this._pgAnimateTimeout=L(this._animate,this,[e,i,s],100);var n=i>e?"left":"right";"top"!=s.direction&&"bottom"!=s.direction||(n=i>e?"top":"bottom"),s.flip&&(n="");var a=0,r=this.$master._dataobj,o=!!this.$master._body;o&&(r=this.$master._body,a=r.offsetTop,pt(this.$master.$view,"webix_animation"));var l,h=r.cloneNode(!0);h.style.width=r.style.width="100%",this.$master.refresh(),ot(h,r.nextSibling,r.parentNode),o&&(h.childNodes[1].scrollLeft=r.childNodes[1].scrollLeft);var c=!0!==s?s:{},d=t.extend({direction:n,callback:T(function(){d.callback=null,ci.breakLine(l),this._pgInAnimation=!1,this.$master._body&&_t(this.$master.$view,"webix_animation")},this),top:a,keepViews:o},c);l=ci.formLine(r,h,d),ci([r,h],d),this._pgInAnimation=!0}},so=(t.protoUI(io,Qi,ri,si.view,B),{name:"comments",defaults:{sendAction:"click",mode:"comments"},$init:function(t){this.$view.className+=" webix_comments",t.rows=[this._configList(t)],t.readonly||t.rows.push(this._configForm()),t.moreButton||(t.moreButton=Vt(St.comments.moreComments)),this._destroy_with_me=[],this._initUsers(t.users),this._initMenu(),this.$ready.push(this._afterInit)},$exportView:function(){return this._list},_afterInit:function(){var t=this;this._list=this.queryView({view:"list"}),this._form=this.queryView({view:"form"}),this._sendButton=this.queryView({view:"button"}),this._input=this.queryView({view:"textarea"}),this.config.mentions&&this._initMentions(this.config.mentions),this._list.data.provideApi(this,!0),this.serialize=function(){var e=t._list.serialize(),i=t.getIndexById("$more");return i>=0&&e.splice(i,1),e},this._clickHandler=W("onClick",function(e){var i=Zt(e);i==t._input?(t._changeTextarea(!0),L(function(){t._input.focus()})):i===t._sendButton||i===t._listMenu||t._userList&&i===t._userList.getList()||e&&-1!==(e.target.className||"").toString().indexOf("webix_comments_menu")||t._changeTextarea()}),this.attachEvent("onDestruct",function(){X(this._clickHandler)})},$onLoad:function(t,e){this._fillList(t,e)},_fillList:function(t,e){var i=this,s=this._list||this.queryView({view:"list"});s.data.driver=e;var n=t.more;if(t=e.getRecords(t),this._moreCall){if(this._moreCall=!1,t.length){var a=s.data.order,r=1;if("chat"==this._settings.mode)s.data.order=H([a[0]].concat(new Array(t.length),a.slice(1)));else{var o=s.getIndexById("$more");s.data.order=H(a.slice(0,o).concat(new Array(t.length),a.slice(o))),r=o}s.parse({data:t,pos:r}),n&&Li(this._list).ignore(function(){i._list.updateItem("$more",{value:n})}),"chat"==this._settings.mode&&s.showItem(s.getIdByIndex(t.length))}t.length&&n||Li(this._list).ignore(function(){i._list.remove("$more")})}else n&&!s.exists("$more")&&(n={id:"$more",value:n,$css:"webix_comments_more_item"},"chat"==this._settings.mode?t.unshift(n):t.push(n)),s.parse(t),"chat"==this._settings.mode&&s.showItem(s.getLastId())},$skin:function(){this._inputHeight=ni.inputHeight+6},getUsers:function(){return this._users},getMenu:function(){return this._listMenu},setCurrentUser:function(t){this.config.currentUser=t,this._form.clear(),this._list.refresh()},edit:function(t){if(this.callEvent("onBeforeEditStart",[t])){this._changeTextarea(!0);var e=this._list.getItem(t);this._form.setValues(e),this._form.focus();var i=this._form.elements.text.getInputNode();i.scrollTop=i.scrollHeight,xt(i,e.text.length),this.callEvent("onAfterEditStart",[t])}},_saveComment:function(t){var e=this._form.getValues();e.text&&(e.id?this.updateItem(e.id,e):(this.config.currentUser&&(e.user_id=this.config.currentUser),e.date=new Date,this.add(e),this._list.scrollTo(0,this._list.getLastId())),this._form.clear(),t&&(this._input.getInputNode().value=""))},_removeComment:function(t){this._form.getValues().id==t&&this._form.clear(),this.remove(t)},_changeTextarea:function(t){if(!i.touch){var e=this._input;t?(this._sendButton.getParentView().show(),e.define({height:84})):(Ve.hasFocus(this._sendButton)&&Ve.setFocus(this._list),this._sendButton.getParentView().hide(),e.define({height:this._inputHeight})),e.resize()}},_toggleButton:function(t){t||(t=this._input.getValue()),t&&!this._sendButton.isEnabled()?this._sendButton.enable():!t&&this._sendButton.isEnabled()&&this._sendButton.disable()},_initMenu:function(){var t=this;this._listMenu=Xt({view:"contextmenu",autowidth:!0,point:!1,data:[{id:"edit",icon:"wxi-pencil",value:St.comments.edit},{id:"remove",icon:"wxi-trash",value:St.comments.remove}],on:{onShow:function(){var e=t._listMenu.getContext();t._list.addCss(e.id,"active_menu")},onHide:function(){var e=t._listMenu.getContext();t._list.removeCss(e.id,"active_menu")},onItemClick:function(e){var i=t._listMenu.getContext();t.callEvent("onBeforeMenuAction",[e,i.id])&&("edit"==e?t.edit(i.id):"remove"==e&&(St.comments.confirmMessage?gn({text:St.comments.confirmMessage,callback:function(e){e&&t._removeComment(i.id)}}):t._removeComment(i.id)))}}}),this._destroy_with_me.push(this._listMenu)},_configForm:function(){var t=this,e=St.comments;return{view:"form",minHeight:50,paddingX:10,elements:[{view:"textarea",css:"webix_comments_textarea",height:this._inputHeight,name:"text",placeholder:e.placeholder,keyPressTimeout:100,on:{onTimedKeyPress:function(){t._toggleButton()},onChange:function(e){t._toggleButton(e)},onKeyPress:function(e,i){if(13==e){var s=t._settings.sendAction,n=i.shiftKey;("enter"==s&&!n||"enter"!==s&&n)&&(ut(i),t._saveComment(!0))}}}},{hidden:!i.touch,cols:[{},{view:"button",disabled:!0,css:"webix_comments_send",type:"form",value:e.send,autowidth:!0,click:function(){t._saveComment()}}]}]}},_configList:function(e){var i=this,s="webix_comments_",n={height:"auto",templateStatus:function(t){return"<span class = '"+s+"status "+t.status+"'></span>"},templateUser:function(t){var e=i.getUsers(),n=e&&e.exists(t.user_id)?e.getItem(t.user_id):{},a="<span class = '"+s+"name'>"+(n.value||"")+"</span>";return a},templateMenu:function(){return"<span class='webix_icon wxi-dots "+s+"menu'></span>"},templateDate:function(t){var e=mn.dateToStr("%d %M, %H:%i");return t.date?"<span class='"+s+"date'>"+e(t.date)+"</span>":""},templateLinks:function(t){var e=t.text.replace(/(https?:\/\/[^\s]+)/g,function(t){var e="<a target='_blank' href='"+(t=Vt.escape(t))+"'>";return t.match(/.(jpg|jpeg|png|gif)$/)?e+="<img class='webix_comments_image' src='"+t+"'/>":e+=t,e+"</a>"});return e},templateMentioned:function(t){if(!i._mentioned[t.id])return t.text;for(var e=i._userList._settings.textValue||"value",s=i._mentioned[t.id],n=0;n<s.length;n++){var a=i._users.getItem(s[n])[e];t.text=t.text.replace(new RegExp("@"+a,"g"),"<span class='webix_comments_mention'>@"+a+"</span>")}return t.text},templateText:function(t,e){return i._settings.mentions&&i._mentioned&&((t=E(t)).text=e.templateMentioned(t,e)),"<div class = '"+s+"message'>"+e.templateLinks(t)+"</div>"},templateAvatar:function(t,e){var n="<div class='"+s+"avatar'>",a=i.getUsers(),r=a&&a.exists(t.user_id)?a.getItem(t.user_id):{};if(r.status&&(n+=e.templateStatus(r)),n+="<div class='"+s+"avatar_image ",r.image)n+="'><img src = '"+r.image+"' class='"+s+"photo'>";else{var o=r.value?r.value[0].toUpperCase():"<span class='webix_icon wxi-user'></span>";n+=s+"avatar_text'>"+o}return n+="</div></div>"},template:function(t,e){var s;if("$more"==t.id)s="<div class='webix_comments_more'>"+i._settings.moreButton(t)+"</div>";else{var n=e.templateAvatar(t,e),a=e.templateUser(t,e),r=e.templateDate(t,e),o=e.templateMenu(t,e),l=e.templateText(t,e);s=n+a+o+r+l}return s},classname:function(t,e,s){var n=mr.api.type.classname(t,e,s);return(t.user_id&&t.user_id==i._settings.currentUser||!i._users.count())&&(n+=" webix_comments_current"),n}};n=t.extend(n,e.listItem||{},!0);var a={$init:function(t){t.date&&(t.date=St.parseFormatDate(t.date))}};a=t.extend(a,e.scheme||{},!0);var r={view:"list",navigation:!1,type:n,scheme:a,onClick:{webix_comments_menu:function(t,e){i._listMenu.isVisible()?i._listMenu.hide():(i._listMenu.setContext({obj:i,id:e}),i._listMenu.show(t.target,n.menuPosition||{pos:"left",y:30,x:10}))},webix_comments_more:function(){if(i.config.url&&i.callEvent("onDataRequest",[])){i._moreCall=!0;var t=i._list.getItem("$more").value,e="chat"==i._settings.mode?t:i._list.getIndexById("$more"),s=Ce.$parse(i.config.url),n={error:function(){i._moreCall=!1}};"string"==typeof s&&(s=s+(s.indexOf("?")<0?"?":"&")+"pos="+e+"&more="+t),i.load(s,n,{pos:e,more:t})}}},on:{onAfterScroll:T(function(){this._listMenu.hide()},this)}};return e.save&&(r.save=e.save),r},_initUsers:function(t){var e=this;t&&t.getItem?this._users=t:(this._users=new ja,this._destroy_with_me.push(this._users),t&&"string"==typeof t?this._users.load(t):this._users.parse(t||[])),this._users.data.attachEvent("onStoreUpdated",function(t,i,s){e._settings.mentions&&s&&"paint"!==s&&e._list.data.each(function(t){e._findMentioned(t,!0)}),e._list.refresh()})},_initMentions:function(t){var e=this;this._mentioned={},this._initUserList(t),Mt.all([this._list.waitData,this._users.waitData]).then(function(){e._list.data.each(function(t){return e._findMentioned(t)}),e._list.refresh()}),this._list.data.attachEvent("onStoreUpdated",function(t,i,s){!t||"add"!==s&&"update"!==s||(e._findMentioned(i,!0),e._list.refresh(t))})},_initUserList:function(e){var i=this,s="object"!=u(e)?{}:e;"object"!==u((s=t.extend({view:"suggest",filter:function(t,e){if(-1===(e=e.substring(0,i._last_cursor_pos)).indexOf("@"))return!1;if((e=e.substring(e.lastIndexOf("@")+1)).length){var s=i._userList.getList().type,n=s.template(t,s);return-1!==n.toString().toLowerCase().indexOf(e.toLowerCase())}return!1}},s)).body)?s.body={data:this._users}:s.body.data=this._users,this._userList=Xt(s),this._userList._show_on_key_press=!1,this._input.$setValueHere=function(){},this._input.setValueHere=function(t){if(t){var e=i._input.getValue(),s=e.substring(i._last_cursor_pos);e=(e=e.substring(0,i._last_cursor_pos)).substring(0,e.lastIndexOf("@")+1)+t,i._input.setValue(e+s),xt(i._input.getInputNode(),e.length),i._last_cursor_pos=e.length}},this._destroy_with_me.push(this._userList),this._input.attachEvent("onAfterRender",function(){i._userList.linkInput(i._input),i._userList.getList().data.attachEvent("onBeforeFilter",function(){i._last_cursor_pos=yt(i._input.getInputNode()).start})})},_findMentioned:function(t,e){var i=this,s=t.id,n={},a=this._userList._settings.textValue||"value";this._users.data.each(function(e){for(var s="@"+e[a],r=t.text,o=r.indexOf(s),l=0;-1!==o;){var h=l+o;if(n[h]){var c=i._users.getItem(n[h])[a];s.length>c.length+1&&(n[h]=e.id)}else n[h]=e.id;l+=o+s.length,r=r.substring(o+s.length),o=r.indexOf(s)}});var r=this._mentioned[s],o=[];for(var l in n)-1===o.indexOf(n[l])&&(o.push(n[l]),!e||r&&-1!==r.indexOf(n[l])||this.callEvent("onUserMentioned",[n[l],s]));o.length?(this._mentioned[s]=o,o.sort(function(t,e){return t=i._users.getItem(t)[a],e=i._users.getItem(e)[a],t.length===e.length?0:t.length>e.length?-1:1})):delete this._mentioned[s]}}),no=(t.protoUI(so,Ae,qn.view),{name:"menu",_listClassName:"webix_menu",$init:function(t){this.data._scheme_init=T(function(t){t.disabled&&this.data.addMark(t.id,"webix_disabled",!0,1,!0)},this),t.autowidth&&(this._autowidth_submenu=!0,delete t.autowidth),this.data.attachEvent("onStoreUpdated",T(function(){this._hide_sub_menu()},this)),this.attachEvent("onMouseMove",this._mouse_move_menu),this.attachEvent("onMouseOut",function(t){this._menu_was_activated()&&"click"==this._settings.openAction||!this._child_menu_active&&t.relatedTarget&&this._hide_sub_menu()}),this.attachEvent("onItemClick",function(t,e,s){var n=this.getItem(t);if(n){if(n.$template)return;var a=this.getTopMenu();if(!this.data.getMark(t,"webix_disabled")){if(!a.callEvent("onMenuItemClick",[t,e,s]))return void(e.showpopup=!0);this!=a&&a._call_onclick(t,e,s),n.submenu||a._show_child_on_click?(this!==a&&!i.touch||"click"!=a._settings.openAction||this._mouse_move_activation(t,s),e.showpopup=!0):(a._hide_sub_menu(!0),a._hide_on_item_click&&a.hide())}}}),this.attachEvent("onKeyPress",function(t){if(9===t)this.getTopMenu()._hide_sub_menu();else if(13===t||32===t){var e,i=this.getSelectedId();i&&(e=this.getItemNode(i)),e&&gt(e,"MouseEvents","click")}}),this.data.attachEvent("onClearAll",function(){this._hidden_items=[]}),this.data._hidden_items=[],this._viewobj.setAttribute("role","menubar"),this._destroy_with_me=[]},sizeToContent:function(){if("y"==this._settings.layout){var t=[],e=!1;this.data.each(function(i){t.push(this._toHTML(i)),i.submenu&&(e=!0)},this),this.config.width=vt(t,this.$view.className).width+16+2+(e?15:0),this.resize()}else _(!1,"sizeToContent will work for vertical menu only")},getTopMenu:function(){for(var t=this;t._parent_menu;)t=Zt(t._parent_menu);return t},_auto_height_calc:function(t){this._settings.autoheight&&(t=this.count());for(var e=this.count(),i=0,s=0;s<t;s++){var n=this.data.pull[this.data.order[s]];n&&"Separator"==n.$template?(i+=4,this._settings.autoheight||t++):i+=this.type.height}return this._onoff_scroll(t&&t<e,"y"),i},on_mouse_move:{},type:{_submenu:function(t){return t.submenu||t.data||t.item},css:"menu",width:"auto",aria:function(t,e,i){return'role="menuitem"'+(i&&i.webix_selected?' aria-selected="true" tabindex="0"':'tabindex="-1"')+(e._submenu(t)?'aria-haspopup="true"':"")+(i&&i.webix_disabled?' aria-disabled="true"':"")},templateStart:function(t,e,i){if("Separator"===t.$template||"Spacer"===t.$template)return'<div webix_l_id="#id#" role="separator" tabindex="-1" class="webix_context_'+t.$template.toLowerCase()+'">';var s=(t.href?" href='"+t.href+"' ":"")+(t.target?" target='"+t.target+"' ":"");return mr.api.type.templateStart(t,e,i).replace(/^<div/,"<a "+s)+(e._submenu(t)&&e.subsign?"<div class='webix_submenu_icon'></div>":"")},templateEnd:function(t){return"Separator"===t.$template||"Spacer"===t.$template?"</div>":"</a>"},templateSeparator:Vt("<div class='sep_line'></div>"),templateSpacer:Vt("<div></div>")},getMenu:function(t){if(this.data.pull[t])return this;for(var e in this.data.pull){var i=this.getItem(e);if(i.submenu){var s=this._get_submenu(i).getMenu(t);if(s)return s}}},getSubMenu:function(t){var e=this.getMenu(t),i=e.getItem(t);return i.submenu?e._get_submenu(i):null},getMenuItem:function(t){return this.getMenu(t).getItem(t)},_get_submenu:function(t){var e=Zt(t.submenu);return e||(t.submenu=this._create_sub_menu(t),e=Zt(t.submenu)),e},_mouse_move_menu:function(t,e,i){this._menu_was_activated()&&this._mouse_move_activation(t,i)},_menu_was_activated:function(){var t=this.getTopMenu();if("click"==t._settings.openAction){if(i.touch)return!1;var e=t._open_sub_menu;return!(!e||!Zt(e).isVisible())}return!0},_mouse_move_activation:function(t,e){var i=this.getItem(t);if(i&&(this._child_menu_active=null,this._open_sub_menu&&i.submenu!=this._open_sub_menu&&this._hide_sub_menu(!0),this.type._submenu(i)&&!this.config.hidden)){var s=this._get_submenu(i);if(this.data.getMark(t,"webix_disabled"))return;s.show(e,{pos:this._settings.subMenuPos}),s._parent_menu=this._settings.id,this._open_sub_menu=i.submenu}},disableItem:function(t){this.getMenu(t).addCss(t,"webix_disabled")},enableItem:function(t){this.getMenu(t).removeCss(t,"webix_disabled")},_set_item_hidden:function(t,e){var i=this.data;i._hidden_items[t]!=e&&(i._hidden_items[t]=e,i.filter(function(t){return!i._hidden_items[t.id]}),this.resize())},hideItem:function(t){var e=this.getMenu(t);e&&e._set_item_hidden(t,!0)},showItem:function(t){var e=this.getMenu(t);if(e)return e._set_item_hidden(t,!1),mr.api.showItem.call(e,t)},_hide_sub_menu:function(t){if(this._open_sub_menu){var e=Zt(this._open_sub_menu);e._hide_sub_menu&&e._hide_sub_menu(t),!t&&e._show_on_mouse_out||(e.hide(),this._open_sub_menu=null)}},_create_sub_menu:function(e){var i={view:"submenu",data:this.type._submenu(e)},s=this.getTopMenu()._settings.submenuConfig;s&&t.extend(i,s,!0);var n=this.getMenuItem(e.id);n&&n.config&&t.extend(i,n.config,!0);var a=Xt(i);return this._destroy_with_me.push(a),a._parent_menu=this,a._settings.id},_skip_item:function(t,e,i){var s=this.getItem(t);if("Separator"==s.$template||"Spacer"==s.$template||this.data.getMark(t,"webix_disabled")){var n=this.getIndexById(t)+("up"==i?-1:1);return(t=n>=0?this.getIdByIndex(n):null)?this._skip_item(t,e,i):e}return t},$skin:function(){mr.api.$skin.call(this),this.type.height=ni.menuHeight},defaults:{scroll:"",layout:"x",mouseEventDelay:100,subMenuPos:"bottom"}}),ao=t.protoUI(no,mr.view),ro={api:no,view:ao},oo={name:"submenu",$init:function(){this._body_cell=I(this._dummy_cell_interface),this._body_cell._view=this,this.attachEvent("onMouseOut",function(t){"click"!=this.getTopMenu()._settings.openAction&&(this._child_menu_active||this._show_on_mouse_out||!t.relatedTarget||this.hide())}),this.attachEvent("onMouseMoving",function(){this._parent_menu&&(Zt(this._parent_menu)._child_menu_active=!0)}),this.attachEvent("onBeforeShow",function(){this.getTopMenu()._autowidth_submenu&&this.sizeToContent&&!this.isVisible()&&this.sizeToContent()}),this._dataobj.setAttribute("role","menu")},$skin:function(){ro.api.$skin.call(this),ca.api.$skin.call(this),this.type.height=ni.menuHeight},_dummy_cell_interface:{$getSize:function(t,e){var i=1*this._view._settings.height,s=1*this._view._settings.width,n=ro.api.$getSize.call(this._view,t,e);return this._view._settings.height=i,this._view._settings.width=s,n},$setSize:function(t,e){this._view._settings.scroll&&(this._view._bodyobj.style.height=e+"px")},destructor:function(){this._view=null}},body_setter:function(){},getChildViews:function(){return[]},defaults:{width:150,subMenuPos:"right",layout:"y",autoheight:!0},type:{height:ni.menuHeight,subsign:!0}},lo=t.protoUI(oo,ro.view,ca.view),ho={api:oo,view:lo},co={name:"sidemenu",defaults:{animate:!0,position:"left",width:200,borderless:!0},$init:function(){this.$view.className+=" webix_sidemenu"},$skin:function(){this.defaults.padding=0},position_setter:function(t){var e=this._settings.position;return e&&_t(this.$view," webix_sidemenu_"+e),pt(this.$view," webix_sidemenu_"+t),t},$getSize:function(){var t=wi.api.$getSize.apply(this,arguments);return this._desired_sizes=t,t},$setSize:function(t,e){si.api.$setSize.call(this,t,e),t=this._content_width-2*this._settings.padding,e=this._content_height-2*this._settings.padding,this._contentobj.style.padding=this._settings.padding+"px",this._headobj.style.display="none",this._bodyobj.style.height=e+"px",this._body_cell.$setSize(t,e)},show:function(){if(!this.callEvent("onBeforeShow",arguments))return!1;this._settings.hidden=!1,this._viewobj.style.zIndex=this._settings.zIndex||De(),(this._settings.modal||this._modal)&&(this._modal_set(!0),this._modal=null),this._viewobj.style.display="block",this._render_hidden_views(),this._settings.position&&this._setPosition(),this._hide_timer=1,L(function(){this._hide_timer=0},this,[],i.touch?400:100),this.config.autofocus&&(this._prev_focus=Ve.getFocus(),Ve.setFocus(this)),-1==e._popups.find(this)&&e._popups.push(this),this.callEvent("onShow",[])},_setPosition:function(t){var e,i,s,n,a,r=0,o=0,l={};this.$view.style.position="fixed",s=document.documentElement.offsetWidth,n=document.documentElement.offsetHeight,e=this._desired_sizes[0]||s,i=this._desired_sizes[2]||n,_(e&&i,"Attempt to show not rendered window"),"top"==(a=this._settings.position)?e=s:"right"==a?(i=n,r=s-e):"bottom"==a?(e=s,o=n-i):i=n,l={left:r,top:o,width:e,height:i,maxWidth:s,maxHeight:n},"function"==typeof this._settings.state&&this._settings.state.call(this,l),this._state=l,this.$setSize(l.width,l.height),void 0===t&&this._isAnimationSupported()?(_t(this.$view,"webix_animate"),this._animate[this._settings.position].beforeShow.call(this,l),L(function(){pt(this.$view,"webix_animate",!0)},this,null,1),L(function(){this._animate[this._settings.position].show.call(this,l)},this,null,10)):("right"===this._settings.position&&(l.left=l.right?s-l.width-l.right:s-l.width),this.setPosition(l.left,l.top))},_state:{},_isAnimationSupported:function(){return ci.isSupported()&&this._settings.animate&&!(i.isIE&&-1!=navigator.appVersion.indexOf("MSIE 9"))},hidden_setter:function(t){return t?this.hide():this.show(),!!t},_animate:{left:{beforeShow:function(t){this.$view.style.left=-t.width+"px",this.$view.style.top=t.top+"px"},show:function(t){this.$view.style.left=t.left?t.left+"px":"0px"},hide:function(t){this.$view.style.left=-t.width+"px"}},right:{beforeShow:function(t){this.$view.style.left="auto",this.$view.style.right=-t.width+"px",this.$view.style.top=t.top+"px"},show:function(t){this.$view.style.right=t.right?t.right+"px":"0px"},hide:function(t){this.$view.style.right=-t.width+"px"}},top:{beforeShow:function(t){this.setPosition(t.left,t.top),this.$view.style.height="0px",this._bodyobj.style.height="0px"},show:function(t){this.$view.style.height=t.height+"px",this._bodyobj.style.height=t.height+"px"},hide:function(){this.$view.style.height="0px",this._bodyobj.style.height="0px"}},bottom:{beforeShow:function(t){this.$view.style.left=t.left+"px",this.$view.style.top="auto";var e=void 0!=t.bottom?t.bottom:t.maxHeight-t.top-t.height;this.$view.style.bottom=e+"px",this.$view.style.height="0px"},show:function(t){this.$view.style.height=t.height+"px"},hide:function(){this.$view.style.height="0px"}}},_hiding_process:function(){var t=document.documentElement.offsetWidth,e=document.documentElement.offsetHeight;if(this._isAnimationSupported()&&t==this._state.maxWidth&&e==this._state.maxHeight){this._animate[this._settings.position].hide.call(this,this._state);var s=ie(this.$view,i.transitionEnd,T(function(){this._hide_callback(),se(s)},this))}else this._hide_callback()}},uo=(t.protoUI(co,ca.view),{name:"sidebar",defaults:{type:"sideBar",activeTitle:!0,select:!0,scroll:!1,collapsed:!1,collapsedWidth:44,position:"left",width:250,mouseEventDelay:10},$skin:function(){this.defaults.titleHeight=ni.sidebarTitleHeight},$init:function(){this.$view.className+=" webix_sidebar",this.$ready.push(this._initSidebar),this.$ready.push(this._initContextMenu),this.data._scheme_init=function(t){t.data?t.menu=E(t.data):t.item&&(t.menu=E(t.item.length?t.item:[t.item]))}},on_context:{},on_mouse_move:{},_initSidebar:function(){this._fullWidth=this.config.width,this.attachEvent("onBeforeOpen",function(t){if(!this.config.multipleOpen)for(var e=this.getOpenItems(),i=0;i<e.length;i++)this.getParentId(t)==this.getParentId(e[i])&&this.close(e[i]);return!this.config.collapsed}),this.attachEvent("onItemClick",function(t,e,s){this.getPopup()&&!this.getPopup().config.hidden&&(e.showpopup=!0),i.touch&&this._showPopup(t,s)}),this.attachEvent("onBeforeSelect",function(t){return!this.getItem(t).$count&&(this.clearCss("webix_sidebar_selected"),!0)}),this.attachEvent("onAfterSelect",function(t){this._markMenu(this,t,!ni.sidebarMarkAll),this.getPopup()._onMasterSelect(t)}),this.attachEvent("onMouseMove",function(t,e,i){this._showPopup(t,i)}),this.config.collapsed&&this.collapse()},_showPopup:function(t,e){if(this.config.collapsed){var i=this.getPopup();i&&(this._updateTitle(t),this._updateList(t),i.show(e,{x:"left"==this.config.position?this.config.collapsedWidth:-i.config.width,y:-1}))}},_updateTitle:function(t){var e=this.getPopup(),i=e.getBody().getChildViews()[0];if(i&&i.masterId!=t){var s=this.getSelectedId();i.masterId=t,i.parse(this.getItem(t)),s&&this.getParentId(s)==t?pt(i.$view,"webix_sidebar_selected",!0):_t(i.$view,"webix_sidebar_selected"),s==t?pt(i.$view,"webix_selected",!0):_t(i.$view,"webix_selected")}},_updateList:function(t){var e=this.getPopup(),i=e.getBody().getChildViews()[1];if(i&&i.masterId!=t){this.exists(i.masterId)&&this.getItem(i.masterId).menu&&this.updateItem(i.masterId,{menu:i.data.serialize()}),i.clearCss("webix_sidebar_selected"),i.masterId=t;var s=this.getSelectedId(),n=E(this.getItem(t).menu||[]);i.unselect(),n.length?(i.show(),i.data.importData(n),i.exists(s)?i.select(s):s&&this._markMenu(i,s)):(i.hide(),i.data.clearAll())}},_initContextMenu:function(){var e,i=this,s=i.config;if(s.popup&&(e=Zt(s.popup)),!e){var n="left"==s.position?"webix_sidebar_popup_left":"webix_sidebar_popup_right",a="left"==s.position?"right":"left",r=function(t){var e="wxi-angle-"+("left"==s.position?"right":"left"),i=t.submenu||t.data||t.item?'<div class="webix_icon '+e+'"></div>':"";return i+t.value},o=s.css?" "+s.css:"",l={view:"popup",css:"webix_sidebar_popup "+n+o,autofit:!1,width:this._fullWidth-this.config.collapsedWidth,borderless:!0,padding:0,body:{rows:[{view:"template",borderless:!0,css:"webix_sidebar_popup_title",template:"#value#",height:this.config.titleHeight+2,onClick:{webix_template:function(){var t=this.masterId;i.getItem(t).$count||i.select(t)}}},{view:"menu",submenu:"data",layout:"y",subMenuPos:a,select:!0,borderless:!0,autoheight:!0,css:"webix_sidebar_popup_list "+n+o,template:r,type:{subsign:!1},submenuConfig:{padding:0,subMenuPos:a,template:r,select:!0,type:{subsign:!1},css:"webix_sidebar_popup_list "+n+o,on:{onShow:function(){this.clearCss("webix_sidebar_selected"),this.unselectAll();var t=i.getSelectedId();t&&this.exists(t)?this.select(t):t&&i._markMenu(this,t)},onBeforeSelect:function(t){if(this.getSubMenu(t))return!1},onAfterSelect:function(t){for(var e=i.getPopup().queryView({view:"menu"}),s=i.getParentId(t);s;){var n=e.getMenu(s);n&&(n.unselectAll(),i._markMenu(n,t)),s=i.getParentId(s)}i._markMenu(this,t)}}},on:{onBeforeSelect:function(t){if(this.getSubMenu(t))return!1},onMenuItemClick:function(t){this.getSubMenu(t)||i.select(t)}}}]}};t.extend(l,s.popup||{},!0),(e=Xt(l))._onMasterSelect=function(t){if(i&&i.getParentId(t)==this.masterId&&pt(this.$view,"webix_sidebar_selected",!0),i.config.collapsed&&1==i.getItem(t).$level){var s=e.getBody().getChildViews()[0];s&&pt(s.$view,"webix_selected",!0)}},e.queryView({view:"menu"})._show_child_on_click=!0}e.attachEvent("onBeforeShow",function(){return s.collapsed}),this._destroy_with_me=[e],s.popupId=e.config.id,ee(document.body,"mousemove",function(t){var i=t.target||t.srcElement;e.config.hidden||e.$view.contains(i)||this.$view.firstChild.contains(i)||e.queryView({view:"menu"})._open_sub_menu||e.hide()},{bind:this})},_markMenu:function(t,e,i){var s="webix_sidebar_selected";t.data.each(function(n){!this._isChild(e,n.id)||i&&"0"!=this.getParentId(n.id)?t.hasCss(n.id,s)&&t.removeCss(n.id,s):t.addCss(n.id,s)},this)},_isChild:function(t,e){var i=this.getParentId(t);return e==i||!!i&&this._isChild(i,e)},getPopup:function(){return Zt(this.config.popupId)},position_setter:function(t){var e=t,i="left"==t?"right":"left";_t(this.$view,"webix_sidebar_"+i),pt(this.$view,"webix_sidebar_"+e,!0);var s=this.getPopup();if(s){var n=s.$view;_t(n,"webix_sidebar_popup_"+i),pt(n,"webix_sidebar_popup_"+e,!0)}return t},collapse:function(){this.define("collapsed",!0)},expand:function(){this.define("collapsed",!1)},toggle:function(){var t=!this.config.collapsed;this.define("collapsed",t)},collapsed_setter:function(t){var e;return t?(e=this.config.collapsedWidth,this.closeAll(),this.type.collapsed=!0,_t(this.$view,"webix_sidebar_expanded")):(e=this._fullWidth,this.type.collapsed=!1,pt(this.$view,"webix_sidebar_expanded",!0)),this.define("width",e),this.resize(),t},getState:function(){var e={collapsed:this.config.collapsed};return t.extend(e,Cs.getState.call(this)),e},setState:function(t){Cs.setState.call(this,t),this.define("collapsed",t.collapsed)}});Yt(Qr.view,{name:"sideBar",height:"auto",template:function(t,e){return e.collapsed?e.icon(t,e):e.arrow(t,e)+e.icon(t,e)+"<span>"+t.value+"</span>"},arrow:function(t){for(var e="",i=1;i<=t.$level;i++)if(i==t.$level&&t.$count){var s="wxi-angle-"+(t.open?"down":"left"),n="webix_sidebar_dir_icon webix_icon "+s;e+="<span class='"+n+"'></span>"}return e},icon:function(t){var e="";return t.$level>2&&(e='style="padding-left:'+40*(t.$level-2)+'px"'),t.icon?"<span class='webix_icon webix_sidebar_icon "+t.icon+"' "+e+"></span>":"<span "+e+"></span>"}}),t.protoUI(uo,Qr.view),t.protoUI({name:"context"},Si,ca.view);var fo={name:"contextmenu",_hide_on_item_click:!0,$init:function(e){e.submenuConfig&&t.extend(e,e.submenuConfig)}},go=(t.protoUI(fo,Si,ho.view),{name:"vscroll",$apiOnly:!0,defaults:{scroll:"x",scrollStep:40,scrollPos:0,scrollSize:18,scrollVisible:1,zoom:1},$init:function(t){var e=t.scroll||"x",i=this._viewobj=D(t.container);i.className+=" webix_vscroll_"+e,i.innerHTML="<div class='webix_vscroll_body'></div>",ee(i,"scroll",this._onscroll,{bind:this}),this._last_set_size=0},reset:function(){this.config.scrollPos=0,this._viewobj["x"==this.config.scroll?"scrollLeft":"scrollTop"]=0},_check_quantum:function(t){return t>15e5?(this._settings.zoom=t/1e6,t=1e6):this._settings.zoom=1,t},scrollWidth_setter:function(t){return t=this._check_quantum(t),this._viewobj.firstChild.style.width=t+"px",t},scrollHeight_setter:function(t){return t=this._check_quantum(t),this._viewobj.firstChild.style.height=t+"px",t},sizeTo:function(t,e,s){t=t-(e||0)-(s||0);var n=this._settings.scrollSize;i.isIE&&n&&(n+=1),n||!this._settings.scrollVisible||i.$customScroll||(this._viewobj.style.pointerEvents="none",n=14),n?(this._viewobj.style.display="block",e&&(this._viewobj.style.marginTop=e+"px"),this._viewobj.style["x"==this._settings.scroll?"width":"height"]=Math.max(0,t)+"px",this._viewobj.style["x"==this._settings.scroll?"height":"width"]=n+"px"):this._viewobj.style.display="none",this._last_set_size=t},getScroll:function(){return Math.round(this._settings.scrollPos*this._settings.zoom)},getSize:function(){return Math.round((this._settings.scrollWidth||this._settings.scrollHeight)*this._settings.zoom)},scrollTo:function(t){t<0&&(t=0);var e=this._settings;if((t/=e.zoom)<0&&(t=0),t!=this._settings.scrollPos)return this._viewobj["x"==e.scroll?"scrollLeft":"scrollTop"]=t,this._onscroll_inner(t,!0),!0},_onscroll:function(){var t=this._viewobj["x"==this._settings.scroll?"scrollLeft":"scrollTop"];Math.floor(t)!=Math.floor(this._settings.scrollPos)&&this._onscroll_inner(t,!1)},_onscroll_inner:function(t,e){var i=this._settings.scrollWidth||this._settings.scrollHeight;t>=i-this._last_set_size/(e?this._settings.zoom:1)&&(t=Math.max(0,i-this._last_set_size/this._settings.zoom)),this._settings.scrollPos=t||0,this.callEvent("onScroll",[this.getScroll()])},activeArea:function(t,e){this._x_scroll_mode=e,ee(t,i.isIE8?"mousewheel":"wheel",this._on_wheel,{bind:this,passive:!1}),this._add_touch_events(t)},_add_touch_events:function(t){!i.touch&&window.navigator.pointerEnabled&&(pt(t,"webix_scroll_touch_ie",!0),ee(t,"pointerdown",function(t){"touch"!=t.pointerType&&"pen"!=t.pointerType||(this._start_context=fi._get_context_m(t),this._start_scroll_pos=this.getScroll())},{bind:this}),ie(document.body,"pointermove",function(t){var e;this._start_context&&(this._current_context=fi._get_context_m(t),"x"==this._settings.scroll?e=this._current_context.x-this._start_context.x:"y"==this._settings.scroll&&(e=this._current_context.y-this._start_context.y),e&&Math.abs(e)>5&&this.scrollTo(this._start_scroll_pos-e))},{bind:this}),ie(window,"pointerup",function(){this._start_context&&(this._start_context=this._current_context=null)},{bind:this}))},_on_wheel:function(t){var e=0,s=0===t.deltaMode?30:1;if(i.isIE8&&(e=t.detail=-t.wheelDelta/30),t.deltaX&&Math.abs(t.deltaX)>Math.abs(t.deltaY)?this._x_scroll_mode&&this._settings.scrollVisible&&(e=t.deltaX/s):!this._x_scroll_mode&&this._settings.scrollVisible&&(e=P(t.deltaY)?t.detail:t.deltaY/s),i.isSafari&&(this._scroll_trg=t.target||t.srcElement),e&&this.scrollTo(this.getScroll()+e*this._settings.scrollStep))return ut(t)}}),po=(t.protoUI(go,B,Ye),{filterByAll:function(){var t=!1;this.data.silent(function(){this.filter();var e=!1;for(var i in this._filter_elements)if(_(i,"empty column id for column with filtering"),this.isColumnVisible(i)){var s=this._filter_elements[i],n=s[2].getValue(s[0]),a=n;s[1].prepare&&(a=s[1].prepare.call(s[2],a,s[1],this)),s[1].value=n;var r=s[1].compare;if(this.callEvent("onBeforeFilter",[i,a,s[1]]))if(s[2].$server||t)t=!0;else{if(""===a)continue;r?(r=this._multi_compare(i,r),this.filter(T(function(t,e){return!!t&&r(t[i],e,t)},this),a,e)):this.filter(i,a,e),e=!0}}t&&this._runServerFilter()},this),t||(this.refresh(),this.callEvent("onAfterFilter",[]))},_multi_compare:function(t,e){var i=this.getColumnConfig(t),s=i?i.optionslist:null;return s?("string"!=typeof s&&(s=","),function(t,i,n){if(!t)return!0;for(var a=t.split(s),r=0;r<a.length;r++)if(e(a[r],i,n))return!0}):e},filterMode_setter:function(e){return t.extend(this.data._filterMode,e,!0)},getFilter:function(t){var e=this._filter_elements[t];return e&&e[2].getInputNode?e[2].getInputNode(e[0]):null},registerFilter:function(t,e,i){this._filter_elements[e.columnId]=[t,e,i]},collectValues:function(t,e){var i=this.getColumnConfig(t),s=e&&e.visible?null:i.collection,n={values:s?this._collectValues.call(s,"id","value"):this._collectValues(i.id,i.id)};return this.callEvent("onCollectValues",[t,n]),n.values},_collectValues:function(t,e){var i={"":!0},s=[];if(this.data.each(function(n){var a=n?n[t]:"";if(void 0!==a&&!i[a]){i[a]=!0;var r=n[t];0===r&&(r="0"),s.push({id:r,value:n[e]})}},this,!0),s.length){var n="string"==typeof s[0].value?"string":"raw";s.sort(this.data.sorting.create({as:n,by:"value",dir:"asc"}))}return s},_runServerFilter:function(){var t=this;this.loadNext(0,0,0,0,1).then(function(e){t.editStop&&t.editStop(),t.clearAll(!0),t.parse(e),t.callEvent("onAfterFilter",[])})}}),_o={hover_setter:function(t){return t&&!this._hover_initialized&&(this._enable_mouse_move(),this.config.experimental=!0,this.attachEvent("onMouseMoving",function(){var t=this.locate(arguments[0]);t=t?t.row:null,this._last_hover!=t&&(this._last_hover&&this.removeRowCss(this._last_hover,this._settings.hover),this._last_hover=t,this._last_hover&&this.addRowCss(this._last_hover,this._settings.hover))}),ie(this.$view,"mouseout",T(function(t){this._last_hover&&document.body.contains(t.target)&&(this.removeRowCss(this._last_hover,this._settings.hover),this._last_hover=null)},this)),this._hover_initialized=1),t},select_setter:function(e){return!this.select&&e&&(t.extend(this,this._selections._commonselect,!0),!0===e?e="row":"multiselect"==e&&(e="row",this._settings.multiselect=!0),_(this._selections[e],"Unknown selection mode: "+e),t.extend(this,this._selections[e],!0)),e},getSelectedId:function(t){return t?[]:""},getSelectedItem:function(t){return rs.getSelectedItem.call(this,t)},_selections:{_commonselect:{_select_css:" webix_cell_select",$init:function(){this._reinit_selection(),this.on_click.webix_cell=T(this._click_before_select,this),this._data_cleared=this._data_filtered=function(){this.unselect()},this.data.attachEvent("onStoreUpdated",T(this._data_updated,this)),this.data.attachEvent("onSyncApply",T(this._data_synced,this)),this.data.attachEvent("onClearAll",T(this._data_cleared,this)),this.data.attachEvent("onAfterFilter",T(this._data_filtered,this)),this.data.attachEvent("onIdChange",T(this._id_changed,this)),this.$ready.push(rs._set_noselect)},_id_changed:function(t,e){for(var i=0;i<this._selected_rows.length;i++)this._selected_rows[i]==t&&(this._selected_rows[i]=e);for(var s=0;s<this._selected_areas.length;s++){var n=this._selected_areas[s];n.row==t&&(t=this._select_key(n),n.row=e,e=this._select_key(n),n.id=e,delete this._selected_pull[t],this._selected_pull[e]=!0)}},_data_updated:function(t,e,i){"delete"==i&&this.unselect(t)},_data_synced:function(){for(var t=this._selected_areas.length-1;t>=0;t--){var e=this._selected_areas[t].row;this.exists(e)||(this._selected_areas.splice(t,1),delete this._selected_pull[e])}},_reinit_selection:function(){this._selected_areas=[],this._selected_pull={},this._selected_rows=[]},isSelected:function(t,e){var i;return i=P(e)?"object"===u(t)?this._select_key(t):t:this._select_key({row:t,column:e}),this._selected_pull[i]},getSelectedId:function(t,e){var i;if(this._selected_areas.length>1||t){if(i=[].concat(this._selected_areas),e)for(var s=0;s<i.length;s++)i[s]=i[s].id}else if(i=this._selected_areas[0],e&&i)return i.id;return i},_id_to_string:function(){return this.row},_select:function(t,e){var i=this._select_key(t);if(null!==i){if(-1===e)return this._unselect(t);if(t.id=i,t.toString=this._id_to_string,!this.callEvent("onBeforeSelect",[t,e]))return!1;if(!this._selected_pull[i]||!e&&1!=this._selected_areas.length)return e||this._clear_selection(),this._selected_areas.push(t),this._selected_pull[i]=!0,this.callEvent("onAfterSelect",[t,e]),this._finalize_select(this._post_select(t)),!0}},_clear_selection:function(){if(!this._selected_areas.length)return!1;for(var t=0;t<this._selected_areas.length;t++)if(!this.callEvent("onBeforeUnSelect",[this._selected_areas[t]]))return!1;for(var e=0;e<this._selected_rows.length;e++)this.data.removeMark(this._selected_rows[e],"webix_selected");var i=this._settings.columns;if(i)for(var s=0;s<i.length;s++)i[s].$selected=null;var n=this._selected_areas;this._reinit_selection();for(var a=0;a<n.length;a++)this.callEvent("onAfterUnSelect",[n[a]]);return!0},unselectAll:function(){this.clearSelection()},selectAll:function(){this.selectRange()},clearSelection:function(){this._clear_selection()&&(this.callEvent("onSelectChange",[]),this.render())},_unselect:function(t){var e=this._select_key(t);if(!e&&this._selected_areas.length&&(this.clearSelection(),this.callEvent("onSelectChange",[])),this._selected_pull[e]){if(!this.callEvent("onBeforeUnSelect",[t]))return!1;for(var i=0;i<this._selected_areas.length;i++)if(this._selected_areas[i].id==e){this._selected_areas.splice(i,1);break}delete this._selected_pull[e],this.callEvent("onAfterUnSelect",[t]),this._finalize_select(0,this._post_unselect(t))}},_add_item_select:function(t){var e=this.getItem(t);return this.data.addMark(e.id,"webix_selected",0,{$count:0},!0)},_finalize_select:function(t){t&&this._selected_rows.push(t),this._silent_selection||(this.render(),this.callEvent("onSelectChange",[]))},_click_before_select:function(t,e){var i=t.ctrlKey||t.metaKey||"touch"==this._settings.multiselect,s=t.shiftKey;if(this._settings.multiselect||"multiselect"==this._settings.select||"area"==this._settings.select||(i=s=!1),s&&this._selected_areas.length){var n=this._selected_areas[this._selected_areas.length-1];this._selectRange(e,n)}else i&&this._selected_pull[this._select_key(e)]?this._unselect(e):this._select({row:e.row,column:e.column},i)},_mapSelection:function(t,e,i){var s=this._settings.columns;if(e){for(var n=[],a=0;a<s.length;a++)s[a].$selected&&n.push(s[a]);s=n}for(var r=this.data.order,o=0,l=0;l<r.length;l++){var h=this.getItem(r[l]);if(h){var c=this.data.getMark(h.id,"webix_selected");if(c||e){for(var d=0,u=0;u<s.length;u++){var f=s[u].id;if(i||e||c[f]){if(!t)return{row:r[l],column:f};h[f]=t(h[f],r[l],f,o,d),d++}}o++}}}}},row:{_select_css:" webix_row_select",_select_key:function(t){return t.row},select:function(t,e){t&&(t=t.toString()),_(this.data.exists(t),"Incorrect id in select command: "+t),this._select({row:t},e)},_post_select:function(t){return this._add_item_select(t.row).$row=!0,t.row},unselect:function(t){this._unselect({row:t})},_post_unselect:function(t){return this.data.removeMark(t.row,"webix_selected",0,1),t.row},mapSelection:function(t){return this._mapSelection(t,!1,!0)},_selectRange:function(t,e){return this.selectRange(t.row,e.row)},selectRange:function(t,e,i){P(i)&&(i=!0);var s=t?this.getIndexById(t):0,n=e?this.getIndexById(e):this.data.order.length-1;if(s>n){var a=s;s=n,n=a}this._silent_selection=!0;for(var r=s;r<=n;r++){var o=this.getIdByIndex(r);if(!o){t&&this.select(t);break}this.select(o,i)}this._silent_selection=!1,this._finalize_select()}},cell:{_select_key:function(t){return t.column?t.row+"_"+t.column:null},select:function(t,e,i){_(this.data.exists(t),"Incorrect id in select command: "+t),this._select({row:t,column:e},i)},_post_select:function(t){var e=this._add_item_select(t.row);return e.$count++,e[t.column]=!0,t.row},unselect:function(t,e){this._unselect({row:t,column:e})},_post_unselect:function(t){var e=this._add_item_select(t.row);return e.$count--,e[t.column]=!1,e.$count<=0&&this.data.removeMark(t.row,"webix_selected"),t.row},mapSelection:function(t){return this._mapSelection(t,!1,!1)},_selectRange:function(t,e){return this.selectRange(t.row,t.column,e.row,e.column)},selectRange:function(t,e,i,s,n){P(n)&&(n=!0);var a=t?this.getIndexById(t):0,r=i?this.getIndexById(i):this.data.order.length-1,o=e?this.getColumnIndex(e):0,l=s?this.getColumnIndex(s):this._columns.length-1;if(a>r){var h=a;a=r,r=h}if(o>l){var c=o;o=l,l=c}this._silent_selection=!0;for(var d=a;d<=r;d++)for(var u=o;u<=l;u++)this.select(this.getIdByIndex(d),this.columnId(u),n);this._silent_selection=!1,this._finalize_select()}},column:{_select_css:" webix_column_select",_select_key:function(t){return t.column},_id_to_string:function(){return this.column},select:function(t,e){this._select({column:t},e)},_post_select:function(t){this._settings.columns[this.getColumnIndex(t.column)].$selected=!0,this._silent_selection||this._render_header_and_footer()},unselect:function(t){this._unselect({column:t})},_post_unselect:function(t){this._settings.columns[this.getColumnIndex(t.column)].$selected=null,this._render_header_and_footer()},mapSelection:function(t){return this._mapSelection(t,!0,!1)},_selectRange:function(t,e){return this.selectRange(t.column,e.column)},selectRange:function(t,e,i){P(i)&&(i=!0);var s=t?this.getColumnIndex(t):0,n=e?this.getColumnIndex(e):this._columns.length-1;if(s>n){var a=s;s=n,n=a}this._silent_selection=!0;for(var r=s;r<=n;r++)this.select(this.columnId(r),i);this._silent_selection=!1,this._render_header_and_footer(),this._finalize_select()},_data_synced:function(){}},area:{_select_key:function(t){return t.row+"_"+t.column},getSelectedId:function(t){var e=this.getSelectArea(),i=[];if(e)if(!t||e.start.row==e.end.row&&e.start.column==e.end.column)i.push(e.end);else{var s=this.getIndexById(e.start.row),n=this.getIndexById(e.end.row);if(-1==s||-1==n)return i;for(var a=this.getColumnIndex(e.start.column),r=this.getColumnIndex(e.end.column),o=s;o<=n;o++)for(var l=a;l<=r;l++)i.push({row:this.getIdByIndex(o),column:this.columnId(l)})}return t?i:i[0]},unselect:function(){this._unselect()},_unselect:function(){this.removeSelectArea(),this.callEvent("onSelectChange",[])},mapSelection:function(t){var e=this.getSelectArea();if(e)for(var i=this.getColumnIndex(e.start.column),s=this.getColumnIndex(e.end.column),n=this.getIndexById(e.start.row),a=this.getIndexById(e.end.row),r=n;r<=a;r++)for(var o=this.data.order[r],l=this.getItem(o),h=i;h<=s;h++){var c=this._columns[h].id;if(!t)return{row:o,column:c};l[c]=t(l[c],o,c,r-n,h-i)}},select:function(t,e,i){_(this.data.exists(t),"Incorrect id in select command: "+t),this._select({row:t,column:e},i)},_selectRange:function(t,e){this._extendAreaRange(t,e)},_select:function(t){return this.addSelectArea(t,t,!1),!0},_data_synced:function(){this._selected_areas.length&&this.refreshSelectArea()}}}},vo={blockselect_setter:function(e){return e&&this._block_sel_flag&&(ee(this._viewobj,i.mouse.move,this._bs_move,{bind:this}),ee(this._viewobj,i.mouse.down,this._bs_down,{bind:this}),ie(document.body,i.mouse.up,this._bs_up,{bind:this}),this._block_sel_flag=this._bs_ready=this._bs_progress=!1,this.attachEvent("onAfterScroll",function(){this._update_block_selection()}),t.extend(this,Ee,!0),this.attachEvent("onBeforeAutoScroll",function(){return this._bs_progress})),e},_block_sel_flag:!0,_childOf:function(t,e){for(var i=t.target||t.srcElement;i;){if(i.getAttribute&&i.getAttribute("webixignore"))return!1;if(i==e)return!0;i=i.parentNode}return!1},_bs_down:function(t){if((!this._settings.subview||this==Zt(t.target||t.srcElement))&&this._childOf(t,this._body)){if(t.target&&"INPUT"==t.target.tagName||this._rs_process)return;this._bs_position=ht(this._body);var e=dt(t);this._bs_ready=[e.x-this._bs_position.x,e.y-this._bs_position.y],ut(t)}},_bs_up:function(t){this._block_panel&&(this._bs_select("select",!0,t),this._block_panel=rt(this._block_panel)),_t(document.body,"webix_noselect"),this._bs_ready=this._bs_progress=!1,this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay))},_update_block_selection:function(){this._bs_progress&&this._bs_select(!1,!1)},_bs_select:function(t,e,i){var s=null;this._bs_ready[2]||(this._bs_ready[2]=this._locate_cell_xy.apply(this,this._bs_ready)),s=this._bs_ready[2];var n=this._locate_cell_xy.apply(this,this._bs_progress);if(this.callEvent("onBeforeBlockSelect",[s,n,e,i])){if((!this._bs_do_select||!1!==this._bs_do_select(s,n,e,i))&&s.row&&n.row)if("select"===t)this._clear_selection(),this._selectRange(s,n);else{var a,r,o,l;if("box"===t)a=Math.min(this._bs_ready[0],this._bs_progress[0]),o=Math.max(this._bs_ready[0],this._bs_progress[0]),r=Math.min(this._bs_ready[1],this._bs_progress[1]),l=Math.max(this._bs_ready[1],this._bs_progress[1]);else{var h=this._cellPosition(s.row,s.column),c=this._cellPosition(n.row,n.column),d=this.getScrollState(),u=h.width,f=c.width;this._right_width&&this._bs_ready[0]>this._left_width+this._center_width?h.left+=this._left_width+this._center_width:this._left_width?this._bs_ready[0]>this._left_width&&(h.left<d.x?(u-=d.x-h.left,h.left=this._left_width):h.left+=this._left_width-d.x):h.left-=d.x,this._right_width&&this._bs_progress[0]>this._left_width+this._center_width?c.left+=this._left_width+this._center_width:this._left_width?this._bs_progress[0]>this._left_width&&(c.left<d.x?(f-=d.x-c.left,c.left=this._left_width):c.left+=this._left_width-d.x):c.left-=d.x,this._settings.prerender&&(h.top-=this._scrollTop,c.top-=this._scrollTop),a=Math.min(h.left,c.left),o=Math.max(h.left+u,c.left+f),r=Math.min(h.top,c.top),l=Math.max(h.top+h.height,c.top+c.height),this._settings.topSplit&&(r+=this._getTopSplitOffset(s)),this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),i&&(this._auto_scroll_delay=L(this._auto_scroll,this,[dt(i)],250))}var g=this._block_panel.style;g.left=a+"px",g.top=r+"px",g.width=o-a+"px",g.height=l-r+"px"}e&&this.callEvent("onAfterBlockSelect",[s,n])}},_bs_start:function(){this._block_panel=nt("div",{class:"webix_block_selection"},""),this._body.appendChild(this._block_panel)},_bs_move:function(t){if(!1!==this._bs_ready){this._bs_progress||pt(document.body,"webix_noselect");var e=dt(t),i=[e.x-this._bs_position.x,e.y-this._bs_position.y];if(Math.abs(this._bs_ready[0]-i[0])<5&&Math.abs(this._bs_ready[1]-i[1])<5)return;!1===this._bs_progress&&this._bs_start(t),this._bs_progress=i,this._bs_select(this.config.blockselect,!1,t)}},_locate_cell_xy:function(t,e){var i=!1,s=null,n=null;if(this._right_width&&t>this._left_width+this._center_width?t+=this._x_scroll.getSize()-this._center_width-this._left_width-this._right_width:(!this._left_width||t>this._left_width)&&(t+=this._x_scroll.getScroll()),this._settings.topSplit&&this._render_scroll_top>this._settings.topSplit){var a=this._cellPosition(this.getIdByIndex(this._settings.topSplit-1),this.columnId(0));a.top+a.height>e&&(i=!0)}i||(e+=this.getScrollState().y),t<0&&(t=0),e<0&&(e=0);for(var r=this._settings.columns,o=this.data.order,l=0,h=0;h<r.length;h++)if((l+=r[h].width)>=t){n=r[h].id;break}n||(n=r[r.length-1].id),l=0;var c=this.data.$min||0;if(this._settings.fixedRowHeight)s=o[c+Math.floor(e/this._settings.rowHeight)];else for(var d=c;d<o.length;d++)if((l+=this._getHeightByIndex(d))>=e){s=o[d];break}return s||(s=o[o.length-1]),{row:s,column:n}},_getTopSplitOffset:function(t,e){var i=0,s=this.getIndexById(t.row);if(s>=this._settings.topSplit){var n=this._cellPosition(this.getIdByIndex(s),t.column),a=this._cellPosition(this.getIdByIndex(this._settings.topSplit-1),t.column);a.top+a.height-n.top>0&&(i=a.top+a.height-(n.top>0||!e?n.top:0))}return i}},mo={resizeRow_setter:function(t){return this._settings.scrollAlignY=!1,this._settings.fixedRowHeight=!1,this.resizeColumn_setter(t)},resizeColumn_setter:function(t){return t&&this._rs_init_flag&&(ee(this._viewobj,"mousemove",this._rs_move,{bind:this}),ee(this._viewobj,"mousedown",this._rs_down,{bind:this}),ee(this._viewobj,"mouseup",this._rs_up,{bind:this}),this._rs_init_flag=!1),t},_rs_init_flag:!0,_rs_down:function(t){this._settings.subview&&this!=Zt(t.target||t.srcElement)||this._rs_ready&&(this._rs_process=[dt(t),this._rs_ready[2]],pt(document.body,"webix_noselect"),J())},_rs_up:function(){this._rs_process=!1,_t(document.body,"webix_noselect"),Q()},_rs_start:function(){if(!this._rs_progress){var t=this._rs_ready[0],e=this._rs_process[1],i=this._locate(e);if(i){var s,n=this._rs_process[0];if("x"==t?(s=ht(e).x+this._rs_ready[1]-ht(this._body).x,n=n.x,this._rs_ready[1]||(i.cind-=e.parentNode.colSpan||1)):(s=ht(e).y+this._rs_ready[1]-ht(this._body).y+this._header_height,n=n.y,this._rs_ready[1]||i.rind--),i.cind>=0&&i.rind>=0){this._rs_progress=[t,i,s];var a=new Xt.resizearea({container:this._viewobj,dir:t,eventPos:n,start:s,cursor:("x"==t?"col":"row")+"-resize"});a.attachEvent("onResizeEnd",T(this._rs_end,this))}this._rs_down=this._rs_ready=!1}}},_rs_end:function(t){if(this._rs_progress){var e=this._rs_progress[0],i=this._rs_progress[1],s=t-this._rs_progress[2];if("x"==e){this._settings.rightSplit&&i.cind+1>=this._rightSplit&&i.cind!==this._columns.length-1&&(i.cind++,s*=-1);var n=this._columns[i.cind],a=n.width;delete n.fillspace,delete n.adjust,this._setColumnWidth(i.cind,a+s,!0,!0),this._updateColsSizeSettings()}else{var r=this.getIdByIndex(i.rind),o=this._getRowHeight(this.getItem(r));this.setRowHeight(r,o+s)}this._rs_up()}this._rs_progress=null},_rs_move:function(t){var e=null,i=this._settings;if(this._rs_ready&&this._rs_process)return this._rs_start(t);var s=(t=t||event).target||t.srcElement,n=!1;if("TD"!=s.tagName&&"TABLE"!=s.tagName){var a=s.className||"",r="string"==typeof a&&-1!=a.indexOf("webix_cell");if(!r||!i.drag){var o="string"==typeof a&&-1!=a.indexOf("webix_hcell");if(this._rs_ready=!1,r||o){var l=s.offsetWidth,h=s.offsetHeight,c=ct(t),d=i.resizeRow;"object"==u(d)&&d.headerOnly&&(e=this._locate(s)).cind>0&&(d=!1),r&&d&&(d="object"==u(d)&&d.size?d.size:3,c.y<d?(e||(e=this._locate(s)),e.rind&&(this._rs_ready=["y",0,s],n="row-resize")):h-c.y<d+1&&(this._rs_ready=["y",h,s],n="row-resize"));var f=i.resizeColumn;"object"==u(f)&&f.headerOnly&&r&&(f=!1),f&&(f="object"==u(f)&&f.size?f.size:3,c.x<f?(this._rs_ready=["x",0,s],n="col-resize"):l-c.x<f+1&&(this._rs_ready=["x",l,s],n="col-resize"))}this._cursor_timer&&window.clearTimeout(this._cursor_timer),this._cursor_timer=L(this._mark_resize_ready,this,[n],n?100:0)}}},_mark_resize_ready:function(t){this._last_cursor_mode!=t&&(this._last_cursor_mode=t,this._viewobj.style.cursor=t||"default")}};W("onDataTable",function(t,e){i.touch&&(fi.$init(),e.scrollSize=0,fi._disabled&&fi.limit(),t.$ready.push(t.$touch))});var bo={$touch:function(){var e=this._settings;e.scrollAlignY=!1,t.extend(this,!0===e.prerender?this._touchNative:this._touch);var i="";e.autowidth||!1===e.scrollX||(i+="x"),e.autoheight||!1===e.scrollY||(i+="y"),this._body.setAttribute("touch_scroll",i),fi._init_scroll_node(this._body.childNodes[1].firstChild),fi._set_matrix(this._body.childNodes[1].firstChild,0,0,"0ms"),this._sync_scroll(0,0,"0ms")},_touchNative:{_scrollTo_touch:function(t,e){fi._set_matrix(this._body.childNodes[1].firstChild,-t,-e,"0ms"),this._sync_scroll(-t,-e,"0ms")},_getScrollState_touch:function(){var t=fi._get_matrix(this._body.childNodes[1].firstChild);return{x:-t.e,y:-t.f}},$init:function(){this.attachEvent("onBeforeScroll",function(){fi._scroll_node=this._body.childNodes[1].firstChild,fi._get_sizes(fi._scroll_node),fi._scroll_master=this}),this.attachEvent("onTouchEnd",function(){fi._scroll_master=null})},_sync_scroll:function(t,e,i){this._settings.leftSplit&&fi._set_matrix(this._body.childNodes[0].firstChild,0,e,i),this._settings.rightSplit&&fi._set_matrix(this._body.childNodes[2].firstChild,0,e,i),this._settings.header&&fi._set_matrix(this._header.childNodes[1].firstChild,t,0,i),this._settings.footer&&fi._set_matrix(this._footer.childNodes[1].firstChild,t,0,i),this.callEvent("onSyncScroll",[t,e,i])},_sync_pos:function(){}},_touch:{_scrollTo_touch:function(t,e){L(function(){this.callEvent("onAfterScroll",[{e:-t,f:-e}])},this)},$scroll:{gravity:0,elastic:!1},$init:function(){this.attachEvent("onAfterColumnHide",function(){this._scrollTo_touch(0,0)}),this.attachEvent("onBeforeScroll",function(){var t=fi;t._scroll_node=this._body.childNodes[1].firstChild,t._get_sizes(t._scroll_node),t._scroll_stat.left=this._scrollLeft,t._scroll_stat.hidden=this._x_scroll._settings.scrollVisible||this._y_scroll._settings.scrollVisible,t._scroll_stat.dy=this._dtable_height,t._scroll_master=this}),this.attachEvent("onAfterScroll",function(t){if(t){var e=this._scrollLeft!=-t.e,i=this._scrollTop!=-t.f;fi._scroll_master=null,fi._fix_f=null,this._scrollTop=0,this._scrollLeft=0;var s=fi.config.translate;return fi.config.translate="translate",this._sync_scroll(this._x_scroll?0:t.e,0,"0ms"),fi.config.translate=s,this._scrollLeft=-t.e,this._scrollTop=-t.f,this._correctScrollSize(),this.render(),e&&(this._x_scroll&&this._x_scroll.scrollTo(this._scrollLeft),this.callEvent("onScrollX",[])),i&&(this._y_scroll&&this._y_scroll.scrollTo(this._scrollTop),this.callEvent("onScrollY",[])),!1}})},_sync_scroll:function(t,e,i){e+=this._scrollTop,t+=this._scrollLeft,fi._set_matrix(this._body.childNodes[1].firstChild,t,e,i),this._settings.leftSplit&&fi._set_matrix(this._body.childNodes[0].firstChild,0,e,i),this._settings.rightSplit&&fi._set_matrix(this._body.childNodes[2].firstChild,0,e,i),this._settings.header&&fi._set_matrix(this._header.childNodes[1].firstChild,t,0,i),this._settings.footer&&fi._set_matrix(this._footer.childNodes[1].firstChild,t,0,i),this.callEvent("onSyncScroll",[t,e,i])},_sync_pos:function(t){t.f-=this._scrollTop,t.e-=this._scrollLeft}}},xo={$init:function(){this.data.attachEvent("onStoreUpdated",T(function(t){t||this._adjustColumns()},this)),this.attachEvent("onStructureLoad",this._adjustColumns),this.attachEvent("onStructureUpdate",this._resizeColumns),this.attachEvent("onColumnResize",function(t,e,i,s){s&&this._resizeColumns()}),this.attachEvent("onResize",this._resizeColumns)},_adjustColumns:function(){for(var t=!1,e=this._columns,i=0;i<e.length;i++)e[i].adjust&&("header"==e[i].adjust||this.count())&&(t=this._adjustColumn(i,e[i].adjust,!0)||t);t&&(this._updateColsSizeSettings(!0),this._resizeColumns())},_resizeColumns:function(){var t=this._settings.columns,e=[],i=0;if(t&&!this._settings.autowidth)for(var s=0;s<t.length;s++){var n=t[s].fillspace;n&&(e[s]=n,i+=1*n||1)}i&&this._fillColumnSize(e,i)},_fillColumnSize:function(t,e){var i=this._settings.columns;if(i){var s=this._content_width-this._scrollSizeY,n=!1;if(s>0){for(var a=0;a<i.length;a++)t[a]||(s-=i[a].width||this.config.columnWidth);for(var r=0;r<t.length;r++)if(t[r]){var o=Math.min(s,Math.round(s*t[r]/e));n=this._setColumnWidth(r,o,!0)||n,s-=i[r].width,e-=t[r]}n&&this._updateColsSizeSettings(!0)}}},_getColumnConfigSize:function(t,e){var s=this._settings.columns[t],n=s.minColumnWidth||10;if("header"!=e){var a=this.data.order.length;s.adjustBatch&&s.adjustBatch<a&&(a=s.adjustBatch);for(var r=this.data.order.slice(0,a),o=0;o<a;o++)r[o]=r[o]?this._getValue(this.getItem(r[o]),s,0):"";n=Math.max(n,vt(r,"webix_table_cell webix_cell").width)}if("data"!=e){for(var l=0;l<s.header.length;l++){var h=s.header[l];if(h){var c=0;if(h.rotate)for(var d=0;d<(h.rowspan||1);d++)c+=this._headers[d];var u="webix_table_cell webix_cell "+(h.css||"")+(h.rotate?"webix_measure_rotate":""),f=vt([h.text],u,c);n=Math.max(n,h.rotate?f.height:f.width)}}s.sort&&(n+=10)}return n+1+(i.isIE?ni.layoutPadding.space:0)},_adjustColumn:function(t,e,i){if(t>=0){var s=this._getColumnConfigSize(t,e);return this._setColumnWidth(t,s,i)}},adjustColumn:function(t,e){this._adjustColumn(this.getColumnIndex(t),e)},adjustRowHeight:function(t,e){var i=this;if(t){var s,n=this.getColumnConfig(t),a=nt("DIV",{class:"webix_table_cell webix_measure_size webix_cell"},"");a.style.cssText="width:"+n.width+"px; height:1px; visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden;",this.$view.appendChild(a),a.offsetHeight<1&&(s=this.$view.cloneNode(!0),document.body.appendChild(s),s.appendChild(a)),this.data.each(function(t){a.innerHTML=this._getValue(t,n,0),t.$height=Math.max(a.scrollHeight,this._settings.rowHeight)},this),a=rt(a),s&&rt(s)}else{var r=new Array(this.data.order.length),o=this.config.columns,l=0;for(var h in this.data.pull)r[l]=0,l++;for(var c=function(t){i.adjustRowHeight(o[t].id,!0);var e=0;i.data.each(function(t){t.$height>r[e]&&(r[e]=t.$height),t.$height=r[e],e++})},d=0;d<o.length;d++)c(d)}e||this.refresh()}},yo={math_setter:function(t){return t&&this._math_init(),t},_math_pref:"$",_math_init:function(){i.strict||(this.data.attachEvent("onStoreUpdated",T(this._parse_row_math,this)),this.data.attachEvent("onStoreLoad",T(this._parse_math,this)),this.attachEvent("onStructureLoad",this._parse_math))},_parse_row_math:function(t,e,i){if(t&&"paint"!=i)if("delete"==i)for(var s=0;s<this._columns.length;s++)this._remove_old_triggers(e,this._columns[s].id);else{"add"==i&&this._exprs_by_columns(e);for(var n=0;n<this._columns.length;n++)this._math_recalc={},this._parse_cell_math(t,this._columns[n].id);this._math_recalc={}}},_parse_cell_math:function(t,e){var i,s=this.getItem(t);if((i=s[this._math_pref+e]||s[e])&&i.length>0&&"="===i.toString().substr(0,1)?(s[this._math_pref+e]=i,s[e]=this._calculate(i,t,e)):(void 0!==s[this._math_pref+e]&&delete s[this._math_pref+e],this._remove_old_triggers(s,e)),void 0!==s.depends&&void 0!==s.depends[e])for(var n in s.depends[e]){var a=s.depends[e][n][0]+"__"+s.depends[e][n][1];void 0===this._math_recalc[a]&&(this._math_recalc[a]=!0,this._parse_cell_math(s.depends[e][n][0],s.depends[e][n][1]))}},_set_original_value:function(t,e){var i=this.getItem(t);void 0!==i[this._math_pref+e]&&(i[e]=i[this._math_pref+e])},_parse_math:function(){if(this._columns&&this.count()){this._exprs_by_columns();for(var t=0;t<this._columns.length;t++){var e=this.columnId(t);this.data.each(function(t){this._math_recalc={},this._parse_cell_math(t.id,e)},this)}this._math_recalc={}}},_exprs_by_columns:function(t){for(var e=0;e<this._columns.length;e++)if(this._columns[e].math){var i=this.columnId(e),s="="+this._columns[e].math;s=s.replace(/\$c/g,"#$c#"),t?(t[i]=this._parse_relative_expr(s,t.id,i),delete t[this._math_pref+i],this._remove_old_triggers(t,i)):this.data.each(function(t){t[i]=this._parse_relative_expr(s,t.id,i),delete t[this._math_pref+i],this._remove_old_triggers(t,i)},this)}},_parse_relative_expr:function(t,e,i){return Vt(t)({$r:e,$c:i})},_get_calc_value:function(t,e){var i;if(!this.exists(t))return"#out_of_range";var s=(i=this.getItem(t))[this._math_pref+e]||i[e]||0;return"="!==(s=s.toString()).substring(0,1)?s:(void 0===i[this._math_pref+e]&&(i[this._math_pref+e]=i[e]),i[e]=this._calculate(s,t,e,!0),i[e])},_calculate:function(t,e,i,s){if(!0===s){if(this._in_math_trace(e,i))return"#selfreference"}else this._start_math_trace();this._to_math_trace(e,i);var n=this.getItem(e);t=t.substring(1);var a=this._get_operations(t),r=this._get_refs(t,e);a?(t=this._replace_refs(t,r),t=this._parse_args(t,a)):t=this._replace_refs(t,r,!0);var o=this._math_exception(t);if(!1!==o)return o;this._from_math_trace(e,i),this._remove_old_triggers(n,i);for(var l=0;l<r.length;l++)this._add_trigger([e,i],r[l]);return!1!==(o=this._math_exception(t))?o:t?(t=this._compute(t.replace(/\$r/g,n.id)),!1!==(o=this._math_exception(t))?o:t):t},_get_operations:function(t){var e=t.replace(/\[[^)]*?\]/g,"").match(/(\+|-|\*|\/)/g);return e},
/*! gets list of referencies in formula
	   **/
_get_refs:function(t,e){var i=t.match(/\[([^\]]+),([^\]]+)\]/g);null===i&&(i=[]);for(var s=0;s<i.length;s++){var n=i[s],a=n;(n=(n=n.substr(1,n.length-2)).split(","))[0]=this._trim(n[0]),n[1]=this._trim(n[1]),":"===n[0].substr(0,1)&&(n[0]=this.getIdByIndex(n[0].substr(1))),"$r"===n[0]&&(n[0]=e),":"===n[1].substr(0,1)&&(n[1]=this.columnId(n[1].substr(1))),n[2]=a,i[s]=n}return i},_replace_refs:function(t,e,i){var s="(",n=")";i&&(s=n="");for(var a=0;a<e.length;a++){var r=e[a],o=this._get_calc_value(r[0],r[1]);isNaN(o)&&(o='"'+o+'"'),t=t.replace(r[2],s+o+n)}return t},_parse_args:function(t,e){for(var i=[],s=0;s<e.length;s++){var n=e[s],a=this._split_by(t,n);i.push(a[0]),t=a[1]}i.push(t);for(var r=0;r<i.length;r++){var o=this._trim(i[r]);i[r]=o}for(var l="",h=0;h<i.length-1;h++)l+=i[h]+e[h];return l+=i[i.length-1]},_compute:function(t){var e;try{e=window.eval(t)}catch(i){_(!1,"Math error in datatable<br>"+t),e=""}return e.toString()},_split_by:function(t,e){var i=t.indexOf(e),s=t.substr(0,i),n=t.substr(i+1);return[s,n]},_trim:function(t){return t=(t=t.replace(/^ */g,"")).replace(/ *$/g,"")},_start_math_trace:function(){this._math_trace=[]},_to_math_trace:function(t,e){this._math_trace[t+"__"+e]=!0},_from_math_trace:function(t,e){void 0!==this._math_trace[t+"__"+e]&&delete this._math_trace[t+"__"+e]},_in_math_trace:function(t,e){return void 0!==this._math_trace[t+"__"+e]},_add_trigger:function(t,e){var i=this.getItem(e[0]);void 0===i.depends&&(i.depends={}),void 0===i.depends[e[1]]&&(i.depends[e[1]]={}),i.depends[e[1]][t[0]+"__"+t[1]]=t,void 0===(i=this.getItem(t[0])).triggers&&(i.triggers={}),void 0===i.triggers[t[1]]&&(i.triggers[t[1]]={}),i.triggers[t[1]][e[0]+"__"+e[1]]=e},_remove_old_triggers:function(t,e){if(t&&void 0!==t.triggers)for(var i in t.triggers[e]){var s=t.triggers[e][i],n=this.getItem(s[0]);n&&delete n.depends[s[1]][t.id+"__"+e]}},_math_exception:function(t){var e=t.match(/#\w+/);return null!==e&&e.length>0&&e[0]}},wo={_get_editor_type:function(t){return this.getColumnConfig(t.column).editor},getEditor:function(t,e){return t?(1==arguments.length&&(e=t.column,t=t.row),(this._editors[t]||{})[e]):this._last_editor},_for_each_editor:function(t){for(var e in this._editors){var i=this._editors[e];for(var s in i)"$count"!=s&&t.call(this,i[s])}},_init_editor:function(t,e,i){var s=t.row,n=t.column,a=e.config=this.getColumnConfig(n);!1!==i&&this.showCell(s,n);var r=e.render();e.$inline&&(r=this._locateInput(t)),e.node=r;var o,l=this.getItem(s),h=a.editFormat;return this._settings.editMath&&(o=l["$"+n]),P(o=o||l[n])&&(o=""),e.setValue(h?h(o):o,l),e.value=l[n],this._addEditor(t,e),e.$inline||(e._editor_pos=this._sizeToCell(t,r,!0)),e.afterRender&&e.afterRender(),this._settings.liveValidation&&(ee(e.node,"keyup",this._bind_live_validation(t,this)),this.validateEditor(t)),r},_bind_live_validation:function(t,e){return function(){e.validateEditor(t)}},_get_new_value:function(t){var e=this.getColumnConfig(t.column).editParse,i=t.getValue();return e?e(i):i},_set_new_value:function(t,e,i){var s=i?{}:this.getItem(t.row);return s[t.column]=e,this._settings.editMath&&(s["$"+t.column]=null),s},_addEditor:function(t,e){var i=this._editors[t.row]=this._editors[t.row]||{};i.$count=(i.$count||0)+1,e.row=t.row,e.column=t.column,this._last_editor=i[t.column]=e,this._in_edit_mode++,this._last_editor_scroll=this.getScrollState()},_removeEditor:function(t){this._last_editor==t&&(this._last_editor=0),t.destroy&&t.destroy();var e=this._editors[t.row];delete e[t.column],e.$count--,e.$count||delete this._editors[t.row],this._in_edit_mode--},_changeEditorId:function(t,e){var i=this._editors[t];if(i)for(var s in this._editors[e]=i,delete this._editors[t],i)"$count"!=s&&(i[s].row=e)},_locate_cell:function(t){var e,i,s,n,a,r=this.getColumnConfig(t.column),o=0;if(r&&r.node&&r.attached){if(s=this.getIndexById(t.row),this._spans_pull&&this.getSpan(t.row,t.column))for(i=0;i<3;i++)for(e=this._spans_areas[i],n=0;!o&&n<e.childNodes.length;n++)(a=e.childNodes[n]).getAttribute("row")==s&&a.getAttribute("column")==this.getColumnIndex(t.column)&&(o=a);!o&&s>=r._yr0-this._settings.topSplit&&s<r._yr1&&(o=r.node.childNodes[s-r._yr0+this._settings.topSplit])}return o},editCell:function(t,e,i,s){return e=e||this._settings.columns[0].id,Vi.edit.call(this,{row:t,column:e},i,s)},editRow:function(t){t&&t.row&&(t=t.row);var e=!1;this.eachColumn(function(i){this.edit({row:t,column:i},e,!e),e=!0})},editColumn:function(t){t&&t.column&&(t=t.column);var e=!1;this.eachRow(function(i){this.edit({row:i,column:t},e,!e),e=!0})},eachRow:function(t,e){var i=this.data.order;e&&(i=this.data._filter_order||i);for(var s=0;s<i.length;s++)t.call(this,i[s])},eachColumn:function(t,e){for(var i in this._columns_pull){var s=this._columns_pull[i];t.call(this,s.id,s)}if(e)for(var n in this._hidden_column_hash){var a=this._hidden_column_hash[n];t.call(this,a.id,a)}},_after_edit_next:function(t){if(this.getSelectedId){var e=this.getSelectedId(!0);if(1==e.length)return this._select(t),!1}},_custom_tab_handler:function(t,e){if(this._settings.editable&&!this._in_edit_mode){if(e.target&&"INPUT"==e.target.tagName)return!0;var i=this.getSelectedId(!0);if(1==i.length){var s=i[0];return"row"==this._settings.select&&(s.column=this._settings.columns[e.shiftKey?0:this._settings.columns.length-1].id),this.editNext(t,s),!1}}return!0},_find_cell_next:function(t,e,i){var s=this.getIndexById(t.row),n=this.getColumnIndex(t.column),a=this.data.order,r=this._columns;if(i)for(var o=s;o<a.length;o++){for(var l=n+1;l<r.length;l++){var h={row:a[o],column:r[l].id};if(e.call(this,h)&&(!this._checkCellMerge||!this._checkCellMerge(t,h)))return h}n=-1}else for(var c=s;c>=0;c--){for(var d=n-1;d>=0;d--){var u={row:a[c],column:r[d].id};if(e.call(this,u))return u}n=r.length}return null},_correct_after_focus_y:function(){this._in_edit_mode&&(this._ignore_after_focus_scroll?this._ignore_after_focus_scroll=!1:(this._y_scroll.scrollTo(this.getScrollState().y+this._body.childNodes[1].firstChild.scrollTop),this._body.childNodes[1].firstChild.scrollTop=0,this._ignore_after_focus_scroll=!0))},_correct_after_focus_x:function(){this._in_edit_mode&&this._x_scroll.scrollTo(this._body.childNodes[1].scrollLeft)},_component_specific_edit_init:function(){this.attachEvent("onScrollY",this._update_editor_y_pos),this.attachEvent("onScrollX",this._update_editor_y_pos),this.attachEvent("onScrollY",this._refocus_inline_editor),this.attachEvent("onColumnResize",function(){this.editStop()}),this.attachEvent("onAfterFilter",function(){this.editStop()}),this.attachEvent("onRowResize",function(){this.editStop()}),this.attachEvent("onAfterScroll",function(){this._settings.topSplit&&this.editStop()}),this._body.childNodes[1].firstChild.onscroll=T(this._correct_after_focus_y,this),this._body.childNodes[1].onscroll=T(this._correct_after_focus_x,this)},_update_editor_y_pos:function(){if(this._in_edit_mode){var t=this._last_editor_scroll;this._last_editor_scroll=this.getScrollState();var e=this._last_editor_scroll.y-t.y;this._for_each_editor(function(t){if(t.getPopup){var i=this.getItemNode(t),s=!1;if(this._settings.prerender){var n=t._editor_pos,a=n.top-this._scrollTop,r=n.left-this._scrollLeft;s=a<0||a+n.height>this._dtable_offset_height||r<0||r+n.width>this.$width-this._scrollSizeX}!i||s?t.getPopup().show({x:-1e4,y:-1e4}):t.getPopup().show(i)}this._settings.prerender||t.linkInput||t.$inline||(t.node.top-=e,t.node.style.top=t.node.top+"px")})}}},So={$init:function(){this._clear_hidden_state(),this.attachEvent("onStructureLoad",this._hideInitialColumns)},_clear_hidden_state:function(){this._hidden_column_hash={},this._hidden_column_order=H(),this._hidden_split=[0,0]},_hideInitialColumns:function(){for(var t=this._columns,e=0;e<t.length;e++)t[e].header&&this._getInitialSpans(t,t[e].header),t[e].footer&&this._getInitialSpans(t,t[e].footer);for(var i=t.length-1;i>=0;i--)t[i].hidden?this.hideColumn(t[i].id,{},!0,!0):t[i].batch&&this.config.visibleBatch&&t[i].batch!=this.config.visibleBatch&&this.hideColumn(t[i].id,{},!0,!0)},_getInitialSpans:function(t,e){for(var i=0;i<e.length;i++){var s=e[i];s&&s.colspan&&!s.$colspan&&(s.$colspan=s.colspan)}},moveColumn:function(t,e){var i=this.getColumnIndex(t);if(i!=e){var s=this._settings.columns,n=s.splice(i,1),a=e-(e>i?1:0);O.insertAt.call(s,n[0],a);var r=this._hidden_column_order;if(r.length){var o=(r=H(r)).find(t);r.removeAt(o),0===a?r.unshift(t):r.insertAt(t,r.find(s[a-1].id)+1)}this._refresh_columns()}},_init_horder:function(){var t=this._hidden_column_order,e=this._settings.columns;if(!t.length){for(var i=0;i<e.length;i++)t[i]=e[i].id;this._hidden_split=[this._settings.leftSplit,this._rightSplit]}},isColumnVisible:function(t){return!this._hidden_column_hash[t]},hideColumn:function(t,e,i,s){var n,a=this._settings.columns,r=this._hidden_column_order,o=this._hidden_column_hash,l=1;if(e=e||{},!1!==s){var h=this.getColumnIndex(t);if(_(-1!=h,"hideColumn: invalid ID or already hidden"),-1===h||!this.callEvent("onBeforeColumnHide",[t]))return;if(-1==h)return;if(this._init_horder(),e.spans)for(var c=a[h].header,d=0;d<c.length;d++)c[d]&&(c[d].$groupSpan=c[d].colspan||1,l=Math.max(l,c[d].$groupSpan));h<this._settings.leftSplit&&(this._settings.leftSplit-=l),h>=this._rightSplit?this._settings.rightSplit-=l:this._rightSplit-=l;for(var u=h+l-1;u>=h;u--)this._hideColumn(h),n=a.splice(h,1)[0],o[n.id]=n,n._yr0=-1,delete this._columns_pull[n.id];this.callEvent("onAfterColumnHide",[t])}else{if(_(n=o[t],"showColumn: invalid ID or already visible"),!n||!this.callEvent("onBeforeColumnShow",[t]))return;for(var f=null,g=0,p=0;g<r.length;g++){if(r[g]==t){p=g;break}o[r[g]]||(f=r[g])}var v=f?this.getColumnIndex(f)+1:0;if(e.spans)for(var m=n.header,b=0;b<m.length;b++)m[b]&&(m[b].colspan=m[b].$groupSpan||m[b].colspan,delete m[b].$groupSpan,l=Math.max(l,m[b].colspan||1));for(var x=p+l-1;x>=p;x--){var y=o[r[x]];y?(O.insertAt.call(a,y,v),delete y.hidden,delete o[y.id],this._columns_pull[y.id]=y):l--}p<this._hidden_split[0]&&(this._settings.leftSplit+=l),p>=this._hidden_split[1]?this._settings.rightSplit+=l:this._rightSplit+=l,this.callEvent("onAfterColumnShow",[t])}n.header&&this._fixColspansHidden(n,!1!==s?0:1,"header"),n.footer&&this._fixColspansHidden(n,!1!==s?0:1,"footer"),i||this._refresh_columns()},_fixColspansHidden:function(t,e,i){for(var s=t[i].length-1;s>=0;s--)for(var n,a=this._hidden_column_order,r=!1,o=0,l=0;l<a.length;l++){var h=this.getColumnConfig(a[l]),c=h[i][s];this.isColumnVisible(a[l])?(r&&o>0&&n&&n.colspan>0?(c=h[i][s]=n,n=c):c&&c.$colspan&&o<=0&&(o=c.colspan=c.$colspan,n=c),r=null):(c&&c.$colspan&&o<=0&&(o=c.colspan=c.$colspan,r=n=c),n&&o>0&&n.colspan--),o--}},refreshColumns:function(t,e){this._dtable_column_refresh=!0,(t&&t!=this.config.columns||e)&&(this._clear_hidden_state(),this._filter_elements={},t&&(this._rightSplit=t.length-(this.config.rightSplit||0))),this._columns_pull={};for(var i=0;i<this._columns.length;i++){var s=this._columns[i];this._columns_pull[s.id]=s,s.attached=s.node=null}for(var n=0;n<3;n++)this._header.childNodes[n].innerHTML="",this._body.childNodes[n].firstChild.innerHTML="";this._columns=this.config.columns=t||this.config.columns,this._rightSplit=this._columns.length-this._settings.rightSplit,this._dtable_fully_ready=0,this._define_structure(),this._update_scroll(),this.callEvent("onStructureUpdate"),this.render(),this._dtable_column_refresh=0},_refresh_columns:function(){this._dtable_fully_ready=0,this.callEvent("onStructureUpdate"),this._apply_headers(),this.render()},showColumn:function(t,e,i){return this.hideColumn(t,e,i,!1)},showColumnBatch:function(t,e){var i=void 0!==e;e=!1!==e,this.eachColumn(function(s,n){if(n.batch){var a=this._hidden_column_hash[n.id];e||(a=!a),n.batch==t&&a?this.hideColumn(n.id,{spans:!0},!0,!e):i||n.batch==t||a||this.hideColumn(n.id,{spans:!0},!0,e)}},!0),this._refresh_columns()}},ko={$init:function(){this.attachEvent("onAfterScroll",this._set_focusable_item),this.attachEvent("onFocus",function(){pt(this.$view,"webix_dtable_focused")}),this.attachEvent("onBlur",function(){_t(this.$view,"webix_dtable_focused")})},_set_focusable_item:function(){var t=this._getVisibleSelection();if(!t){var e=this._dataobj.querySelector(".webix_cell");e&&e.setAttribute("tabindex","0")}},_getVisibleSelection:function(){for(var t=this.getSelectedId(!0),e=0;e<t.length;e++)if(this.isColumnVisible(t[e].column))return this.getItemNode(t[e]);return null},moveSelection:function(e,i,s){if(!this._settings.disabled){i=i||{};var n=this.getSelectedId(!0),a=n.length-1,r=!(!this._settings.multiselect&&!this._settings.areaselect)&&i.shift;if(n.length>1&&"cell"!==this._settings.select&&(n=n.sort(T(function(t,e){return this.getIndexById(t.row)>this.getIndexById(e.row)||this.getColumnIndex(t.column)>this.getColumnIndex(e.column)?1:-1},this)),"up"!=e&&"left"!=e&&"top"!=e&&"pgup"!=e||(a=0)),a<0&&this.count()){if("down"==e||"right"==e)e="top";else{if("up"!=e&&"left"!=e)return;e="bottom"}a=0,n=[{row:1,column:1}]}if(a>=0){var o=n[a].row,l=n[a].column;if("top"==e||"bottom"==e)o&&("top"==e?o=this.data.getFirstId():"bottom"==e&&(o=this.data.getLastId())),l&&(a=0,"bottom"==e&&(a=this.config.columns.length-1),l=this.columnId(a));else if("up"==e||"down"==e||"pgup"==e||"pgdown"==e){if(o){var h=this.getIndexById(o),c=1;"pgup"!=e&&"pgdown"!=e||(c=this._pager?this._pager.config.size:Math.round(this._dtable_offset_height/this._settings.rowHeight)),"up"==e||"pgup"==e?h-=c:"down"!=e&&"pgdown"!=e||(h+=c),h<0&&(h=0),h>=this.data.order.length&&(h=this.data.order.length-1),!(o=this.getIdByIndex(h))&&this._settings.pager&&this.showItemByIndex(h)}}else{if("right"!=e&&"left"!=e)return void _(!1,"Not supported selection moving mode");if(l&&"row"!=this.config.select){var d=this.getColumnIndex(l);"right"==e?d++:"left"==e&&d--,d<0&&(d=0),d>=this.config.columns.length&&(d=this.config.columns.length-1),l=this.columnId(d)}else{if((this.open||this._subViewStorage)&&"right"==e)return this.open?this.open(o):this.openSub(o);if((this.close||this._subViewStorage)&&"left"==e)return this.close?this.close(o):this.closeSub(o)}}if(o){this.showCell(o,l),this.select||(t.extend(this,this._selections._commonselect,!0),this._settings.select=this.open||this._subViewStorage?"row":"cell",t.extend(this,this._selections[this._settings.select],!0));var u={row:o,column:l};if(r&&"area"==this._settings.select){var f=this._selected_areas[this._selected_areas.length-1];this._extendAreaRange(u,f,e,i)}else this._select(u,r);if(!this._settings.clipboard&&!1!==s){var g=this.getItemNode(u);g&&g.focus()}}}return!1}}},Co={_set_drop_area:function(t){for(var e=0;e<this._columns.length;e++){var i=this._columns[e],s=this.getItemNode({row:t,cind:e});s?s.parentNode.insertBefore(_i._dropHTML[e],s):i.node.appendChild(_i._dropHTML[e])}},_init_drop_area:function(){var t=[],e=this._columns.length,i=document.createElement("div");i.className="webix_drop_area",i.style.height=this._settings.rowHeight+"px",i.innerHTML=this.$dropHTML();for(var s=0;s<e;s++)t.push(i.cloneNode(!0));return t}},Ao={drag_setter:function(e){return this.attachEvent("onBeforeDrag",function(t){return this._checkDragTopSplit(t.source)}),this.attachEvent("onBeforeDragIn",function(t){var e=this._checkDragTopSplit(t.target);return!e&&_i._dropHTML&&(rt(_i._dropHTML),this._marked_item_id=_i._dropHTML=null),e}),Hi.drag_setter.call(this,e),"order"!=e&&"move"!=e||t.extend(this,Co,!0),e},_add_css:function(t,e,i){var s=_i._drag_context;this._settings.prerender||i||(t=[s.start]);for(var n=0;n<t.length;n++){for(var a=0;a<this._columns.length;a++){var r=this.getItemNode({row:t[n],cind:a});r&&pt(r,e)}this.data.addMark(t[n],e,1,1,!0)}},_remove_css:function(t,e,i){var s=_i._drag_context;this._settings.prerender||i||(t=[s.start]);for(var n=0;n<t.length;n++){for(var a=0;a<this._columns.length;a++){var r=this.getItemNode({row:t[n],cind:a});r&&_t(r,e)}this.data.removeMark(t[n],e,1,!0)}},_checkDragTopSplit:function(t){var e,i,s=!1;if(this._settings.topSplit&&t)for(R(t)||(t=[t]),e=0;!s&&e<t.length;e++)i=this.getIndexById(t[e]),s=i>=0&&i<this._settings.topSplit;return!s},_toHTML:function(t){for(var e=this._content_width-this._scrollSizeY,i="<div class='webix_dd_drag' style='width:"+e+"px;'>",s=this._settings.columns,n=0;n<s.length;n++){var a=this._getValue(t,s[n]);i+="<div style='width:"+s[n].width+"px;'>"+a+"</div>"}return i+"</div>"},getHeaderNode:function(t,e){return this._getHeaderNode(t,e,this._header)},getFooterNode:function(t,e){return this._getHeaderNode(t,e,this._footer)},_getHeaderNode:function(t,e,i){if(this.isColumnVisible(t)){var s=this.getColumnIndex(t),n=this._settings.leftSplit>s?0:this._rightSplit<=s?2:1;e=e||0;var a=i.childNodes[n].getElementsByTagName("TR");if(a.length)for(var r=a[e+1].childNodes,o=0;o<r.length;o++)if(r[o].getAttribute("column")==s)return r[o].firstChild}return null},getItemNode:function(t){if(t&&!t.header){var e=t.row||t,i="number"==typeof t.rind?t.rind:this.getIndexById(e),s=this._get_y_range(),n=s[0]-this._settings.topSplit;if(i<n&&i>s[1])return;var a=this._get_x_range(),r=this._settings.leftSplit?0:a[0],o="number"==typeof t.cind;if((t.column||o)&&(r=o?t.cind:this.getColumnIndex(t.column))<this._rightSplit&&r>=this._settings.leftSplit&&(r<a[0]||r>a[1]))return;var l=this._settings.columns[r];if(l.attached&&l.node){if("$webix-drop"===e)return _i._dropHTML[r];for(var h=i<this._settings.topSplit||this._settings.prerender?i:i-n,c=l.node.childNodes,d=Math.min(c.length,h+1),u=0;u<d;u++)"webix_drop_area"===c[u].className&&h++;return c[h]}}},_isDraggable:function(t){var e=(t.target||t.srcElement).nodeName;return"INPUT"!=e&&"TEXTAREA"!=e},dragColumn_setter:function(e){var i;"order"==e?i={$drag:T(function(t,e){if(!this._isDraggable(e)||this._rs_process)return!1;var s=this.locate(e);if(!s||!this.callEvent("onBeforeColumnDrag",[s.column,e]))return!1;_i._drag_context={from:i,start:s,custom:"column_dnd"};var n=this.getColumnConfig(s.column);return this._relative_column_drag=ct(e),this._limit_column_drag=n.width,this._auto_scroll_force=!0,"<div class='webix_dd_drag_column' style='width:"+n.width+"px'>"+(n.header[0].text||"&nbsp;")+"</div>"},this),$dragPos:T(function(t,e,i){var s=this,n=_i.getContext(),a=ht(this.$view);i.style.display="none";var r=document.elementFromPoint(t.x,a.y+1),o=r?this.locate(r):null,l=_i.getContext().start.column;if(o&&o.column!=l&&(!this._column_dnd_temp_block||o.column!=this._last_sort_dnd_node)&&"column_dnd"==n.custom&&Zt(r)==this){if(!this.callEvent("onBeforeColumnDropOrder",[l,o.column,e]))return;var h=this.getColumnIndex(l),c=this.getColumnIndex(o.column);e.touches&&(this._dragTarget=e.target,this._dragTarget.style.display="none",this.$view.parentNode.appendChild(this._dragTarget)),this.moveColumn(l,c+(h<c?1:0)),this._last_sort_dnd_node=o.column,this._column_dnd_temp_block=!0}if(o&&o.column==l&&(this._column_dnd_temp_block=!1),i.style.display="block",t.x=t.x-this._relative_column_drag.x,t.y=a.y,t.x<a.x)t.x=a.x;else{var d=a.x+this.$view.offsetWidth-this._scrollSizeY-this._limit_column_drag;t.x>d&&(t.x=d)}_i._skip=!0,this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),!1!==this._settings.dragscroll&&(this._auto_scroll_delay=L(function(t){return s._auto_scroll_column(t)},this,[dt(e)],250))},this),$dragDestroy:T(function(t,e){this._auto_scroll_force=null,this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),rt(e),this._dragTarget&&rt(this._dragTarget);var i=_i.getContext().start;this.callEvent("onAfterColumnDropOrder",[i.column,this._last_sort_dnd_node,t])},this),$drop:function(){}}:e&&(i={_inner_drag_only:!0,$drag:T(function(t,e){if(!this._isDraggable(e)||this._rs_process)return!1;var s=this.locate(e);if(!s||!this.callEvent("onBeforeColumnDrag",[s.column,e]))return!1;_i._drag_context={from:i,start:s,custom:"column_dnd"};for(var n=this.getColumnConfig(s.column).header,a="&nbsp;",r=0;r<n.length;r++)if(n[r]){a=n[r].text;break}return this._auto_scroll_force=!0,"<div class='webix_dd_drag_column'>"+a+"</div>"},this),$drop:T(function(t,e,i){var s=i;i.touches&&this._drag_column_last&&(s=this._drag_column_last);var n=this.locate(s);if(!n)return!1;var a=_i.getContext().start.column;if(a!=n.column){if(!this.callEvent("onBeforeColumnDrop",[a,n.column,i]))return;var r=this.getColumnIndex(a),o=this.getColumnIndex(n.column);this.moveColumn(a,o+(r<o?1:0)),this.callEvent("onAfterColumnDrop",[a,n.column,i])}},this),$dragIn:T(function(t,e,s){var n=this,a=_i.getContext();if("column_dnd"!=a.custom||a.from!=i)return!1;for(var r=s.target||s.srcElement;-1==(r.className||"").indexOf("webix_hcell");)if(!(r=r.parentNode))return;return this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),!1!==this._settings.dragscroll&&(this._auto_scroll_delay=L(function(t){return n._auto_scroll_column(t)},this,[dt(s)],250)),r!=this._drag_column_last&&(this._drag_column_last&&_t(this._drag_column_last,"webix_dd_over_column"),pt(r,"webix_dd_over_column")),this._drag_column_last=r},this),$dragDestroy:T(function(t,e){this._auto_scroll_force=null,this._auto_scroll_delay&&(this._auto_scroll_delay=window.clearTimeout(this._auto_scroll_delay)),this._drag_column_last&&_t(this._drag_column_last,"webix_dd_over_column"),rt(e)},this)}),e&&(_i.addDrag(this._header,i),_i.addDrop(this._header,i,!0),this._auto_scroll||t.extend(this,Ee,!0))}},Io={_prePrint:function(t,e){if(t.scroll&&!e)return!0;t.header=P(t.header)?!!this.config.header:t.header,t.footer=P(t.footer)?!!this.config.footer:t.footer,t.xCorrection=t.xCorrection||0},_findIndex:function(t,e){for(var i=-1,s=0;i<0&&s<t.length;s++)e(t[s])&&(i=s);return i},_getTableHeader:function(t,e,i){var s={},n=0;return t.forEach(T(function(a,r){var o=a[0],l=[],h=o.length;o.forEach(T(function(t,a){for(var o=e[a+n],c=0;c<o[i].length;c++){var d=o[i][c];if(d||s[r]&&s[r][c]){if(d=E(d||{text:""}),s[r]&&s[r][c]&&0===a&&(d.colspan=s[r][c],s[r][c]=0),d.colspan){var u=Math.min(d.colspan,h-a);s[r+1]=s[r+1]||{},s[r+1][c]=d.colspan-u,d.colspan=u}d.rowspan&&1===h&&(d.height=(d.height||this.config.headerRowHeight)*d.rowspan,d.rowspan=null);var f={txt:d.rotate?this.getHeaderNode(o.id,c).innerHTML:d.text||(d.contentId?this.getHeaderContent(d.contentId).getValue():""),className:"webix_hcell webix_"+i+"_cell "+(d.css||""),style:{height:(d.height||this.config.headerRowHeight)+"px",width:d.colspan?"auto":o.width+"px"},span:d.colspan||d.rowspan?{colspan:d.colspan||1,rowspan:d.rowspan||1}:null};l[c]=l[c]||[],l[c][a]=f}}},this)),t[r]="header"==i?l.concat(a):a.concat(l),n+=h},this)),t},_getTableArray:function(t,e,i){var s=this.config.columns,n=this.getSelectedId(!0),a=this._getPageWidth(t),r=0,o=0,l=[],h=0;return i=i||0+t.xCorrection,e=e||[],this.eachRow(T(function(e){for(var c=0,d=this.getItem(e),u=this.getIndexById(e),f=[],g=!1,p=i;p<s.length;p++){var _=s[p].id,v=this.getColumnIndex(_)-i;if(s[p]){if((c+=s[p].width)>a&&p>i){h=p;break}if("selection"!==t.data||"selection"==t.data&&-1!==this._findIndex(n,function(t){return t.column==_&&t.row==e})){var m;if(this.getSpan&&(m=this.getSpan(e,_)),m&&this.getColumnIndex(_)===i){var b=this.getColumnIndex(m[1]);b<i&&(m[2]=m[2]-(i-b),m[4]=m[4]?m[4]:d[m[1]]?this.getText(e,m[1]):null,m[1]=_)}if(!m||m&&m[0]==e&&m[1]==_){var x=m&&m[4]?m[4]:this._columns_pull[_]?this.getText(e,_):"",y=this.getCss(e,_)+" "+(s[p].css||"")+(m?" webix_dtable_span "+(m[5]||""):""),w={height:m&&m[3]>1?"auto":(d.$height||this.config.rowHeight)+"px",width:m&&m[2]>1?"auto":s[p].width+"px"};f.push({txt:x,className:y,style:w,span:m?{colspan:m[2],spanStart:this.getColumnIndex(m[1]),rowspan:m[3]}:null}),x&&(r=Math.max(v+1,r),o=Math.max(u+1,o)),g=g||!!x}else m&&(f.push({$inspan:!0}),r=Math.max(v+1,r),o=Math.max(u+1,o))}}}t.skiprows&&!g||l.push(f)},this)),o&&r&&(t.trim&&(l.length=o,l=l.map(function(t){for(var e=t.length-1;e>=0;e--)if(t[e].span&&t[e].span.colspan){t[e].span.colspan=Math.min(t[e].span.colspan,t.length-e);break}return t.length=r,t})),e.push(l)),h?this._getTableArray(t,e,h):(t.footer&&(e=this._getTableHeader(e,s,"footer")),t.header&&(e=this._getTableHeader(e,s,"header"))),e},_getTableHTML:function(t,e){var i=nt("div");return t.forEach(T(function(s,n){var a=nt("table",{class:"webix_table_print "+this.$view.className+(e.borderless?" borderless":""),style:"border-collapse:collapse",id:this.$view.getAttribute("id")});if(s.forEach(function(t){var e=nt("tr");t.forEach(function(t){if(!t.$inspan){var i=nt("td");for(var s in i.innerHTML=t.txt,i.className=t.className,t.style)i.style[s]=t.style[s];t.span&&(i.colSpan=t.span.colspan,i.rowSpan=t.span.rowspan),e.appendChild(i)}}),a.appendChild(e)}),i.appendChild(a),n+1<t.length){var r=nt("DIV",{class:"webix_print_pagebreak"});i.appendChild(r)}},this)),i}},Eo={$exportView:function(e){if(this.isBranchOpen&&t.extend(e,{filterHTML:!0}),"excel"!==e.export_mode||e.dataOnly||!e.styles)return this;e.dataOnly=!0,e.heights=P(e.heights)?"all":e.heights;var i=Ks(this,e);return i[0].styles=this._getExportStyles(e),delete e.dataOnly,i},_getExportStyles:function(t){var e=this.config.columns,i=[];return this._style_hash=this._style_hash||{},t.docHeader&&(i=[{0:this._getExportDocStyle(t.docHeader.css)},{0:{}}]),!1!==t.header&&(i=this._getExportHStyles(t,"header",i)),this.data.each(function(t){for(var s={},n=0;n<e.length;n++){var a=this.getCss(t.id,e[n].id),r=e[n].node.className,o="",l=this.getIndexById(t.id)%2?"even":"odd",h=null,c=null;if(this._spans_pull&&(h=this.getSpan(t.id,e[n].id))?(c=this.getSpanNode({row:h[0],column:h[1]}),o="webix_dtable_span "+(h[5]||"")):c=this.getItemNode({row:t.id,column:e[n].id}),!c){c=nt("div",{class:a,style:"visibility:hidden"});var d=e[n].node;e[n].attached||(d=nt("div",{class:r,style:"visibility:hidden"}),this._body.appendChild(d)),d.appendChild(c)}s[n]=this._getExportCellStyle(c,[a,r,o,l].join(":"))}i[i.length]=s},this),!1!==t.footer&&this.config.footer&&(i=this._getExportHStyles(t,"footer",i)),t.docFooter&&(i=i.concat([{0:{}},{0:this._getExportDocStyle(t.docFooter.css)}])),i},_getExportHStyles:function(t,e,i){for(var s=this.config.columns,n=[],a=0;a<s[0][e].length;a++){for(var r={},o=0;o<s.length;o++){var l=s[o][e][a];if(l){var h=l.colspan?s[o+l.colspan-1].id:s[o].id,c="header"==e?this.getHeaderNode(h,a):this.getFooterNode(h,a);if(c){var d=[c.parentNode.className,l.css||"","webix_hcell",e];r[o]=this._getExportCellStyle(c,d.join(":")),(l.colspan||l.rowspan)&&n.push([a,o,{colspan:l.colspan-1||0,rowspan:l.rowspan-1||0},r[o]])}}else for(var u=0;u<n.length;u++){var f=n[u][2],g=n[u][1],p=n[u][0];g+f.colspan>=o&&p+f.rowspan>=a&&(r[o]=n[u][3])}}i[i.length]=r}return i},_getExportCellStyle:function(t,e){if(this._style_hash[e])return this._style_hash[e];var i=this._getRules(t),s={font:{},alignment:{},border:{}};s.font.name=i["font-family"].replace(/,.*$/,""),s.font.sz=.75*i["font-size"].replace("px",""),s.font.color={rgb:os.rgbToHex(i.color)},"normal"!==i["font-weight"]&&400!=i["font-weight"]&&(s.font.bold=!0),"underline"===i["text-decoration-line"]&&(s.font.underline=!0),"italic"===i["font-style"]&&(s.font.italic=!0),"line-through"===i["text-decoration-line"]&&(s.font.strike=!0),s.alignment.horizontal=i["text-align"],s.alignment.vertical=i.height==i["line-height"]?"center":"top","normal"==i["white-space"]&&(s.alignment.wrapText=!0),t.firstChild&&t.firstChild.className&&-1!==t.firstChild.className.indexOf("webix_rotate")&&(s.alignment.textRotation=90);var n=os.rgbToHex(i["background-color"])||"FFFFFF";return s.fill={fgColor:{rgb:n}},-1!==i["background-image"].indexOf("gradient")&&(s.fill={fgColor:{rgb:os.rgbToHex(i["background-image"].substring(i["background-image"].lastIndexOf("(")))}}),t.parentNode&&"TD"==t.parentNode.nodeName&&(i=this._getRules(t.parentNode)),"0px"!==i["border-right-width"]&&(s.border.right={style:"thin",color:{rgb:os.rgbToHex(i["border-right-color"])||n}}),"0px"!==i["border-bottom-width"]&&(s.border.bottom={style:"thin",color:{rgb:os.rgbToHex(i["border-bottom-color"])||n}}),"0px"!==i["border-left-width"]&&(s.border.left={style:"thin",color:{rgb:os.rgbToHex(i["border-left-color"])||n}}),"0px"!==i["border-top-width"]&&(s.border.top={style:"thin",color:{rgb:os.rgbToHex(i["border-top-color"])||n}}),this._style_hash[e]=s,s},_getExportDocStyle:function(e){e=t.extend(e||{},{visibility:"hidden","white-space":"nowrap","text-align":"left"});var i="";for(var s in e)i+=s+":"+e[s]+";";var n=nt("div",{style:i});this._body.appendChild(n);var a=this._getExportCellStyle(n,i);return rt(n),a},_getRules:function(t){return window.getComputedStyle?window.getComputedStyle(t):t.currentStyle}},To={name:"datatable",defaults:{leftSplit:0,rightSplit:0,topSplit:0,columnWidth:100,prerender:!1,autoheight:!1,autowidth:!1,header:!0,fixedRowHeight:!0,scrollAlignY:!0,scrollX:!0,scrollY:!0,datafetch:50,navigation:!0},$skin:function(){this.defaults.rowHeight=ni.rowHeight,this.defaults.minRowHeight=ni.rowHeight-6,this.defaults.headerRowHeight=ni.barHeight-2*ni.borderWidth,this.defaults.minColumnWidth=2*ni.dataPadding},on_click:{webix_richfilter:function(){return!1},webix_table_checkbox:function(t,e){e=this.locate(t);var i=this.getItem(e.row),s=this.getColumnConfig(e.column),n=t.target||t.srcElement,a="checkbox"==n.type?n.checked:i[e.column]!=s.checkValue,r=a?s.checkValue:s.uncheckValue,o={};return o[e.column]=r,this.updateItem(e.row,o,this._settings.checkboxRefresh?"update":"save"),this.callEvent("onCheck",[e.row,e.column,r]),!1},webix_table_radio:function(t){var e=this.locate(t),i=this.getItem(e.row),s=this.getColumnConfig(e.column);return this.eachRow(function(t){var i=this.data.pull[t];i&&i[e.column]==s.checkValue&&(i[e.column]=s.uncheckValue)}),i[e.column]=s.checkValue,this.callEvent("onCheck",[e.row,e.column,!0]),this.refresh(),!1}},on_dblclick:{webix_table_checkbox:function(){return this.on_click.webix_table_checkbox.apply(this,arguments)}},on_context:{},$init:function(e){this.on_click=t.extend({},this.on_click);var i="<div class='webix_ss_header'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_body'><div class='webix_ss_left'><div class='webix_ss_center_scroll'></div></div>";i+="<div class='webix_ss_center'><div class='webix_ss_center_scroll' role='rowgroup'></div></div>",i+="<div class='webix_ss_right'><div class='webix_ss_center_scroll'></div></div></div>",i+="<div class='webix_ss_hscroll' role='scrollbar' aria-orientation='horizontal'></div><div class='webix_ss_footer'><div class='webix_hs_left'></div><div class='webix_hs_center'></div><div class='webix_hs_right'></div></div><div class='webix_ss_vscroll_header'></div><div class='webix_ss_vscroll' role='scrollbar' aria-orientation='vertical'></div><div class='webix_ss_vscroll_footer'></div>",this._contentobj.innerHTML=i,this._top_id=this._contentobj.id=this.name+$(),this._contentobj.className+=" webix_dtable",this._dataobj=this._contentobj,this._header=this._contentobj.firstChild,this._body=this._header.nextSibling,this._footer=this._body.nextSibling.nextSibling,this._viewobj.setAttribute("role","grid"),e.editable||this._viewobj.setAttribute("aria-readonly","true"),this.data.provideApi(this,!0),this.data.attachEvent("onParse",T(this._call_onparse,this)),this.$ready.push(this._first_render),this._columns=[],this._hidden_column_order=[],this._headers=[],this._footers=[],this._rows_cache=[],this._active_headers={},this._filter_elements={},this._header_height=this._footer_height=0,this._destroy_with_me=[],this.data.attachEvent("onServerConfig",T(this._config_table_from_file,this)),this.data.attachEvent("onServerOptions",T(this._config_options_from_file,this)),this.attachEvent("onViewShow",function(){this._restore_scroll_state(),this._refresh_any_header_content()}),this.data.attachEvent("onClearAll",T(function(t){t||(this._scrollLeft=this._scrollTop=0,this._x_scroll&&this._x_scroll.reset(),this._y_scroll&&this._y_scroll.reset(),this._setLeftScroll(0))},this)),this.attachEvent("onDestruct",this._clean_config_struct),this.attachEvent("onKeyPress",this._onKeyPress),this.attachEvent("onScrollY",this._adjust_rows),Y("onDataTable",[this,e])},_render_initial:function(){this._scrollSizeX=this._scrollSizeY=i.scrollSize,it("#"+this._top_id+" .webix_cell { height:"+this._settings.rowHeight+"px; line-height:"+(this._settings.rowLineHeight||this._settings.rowHeight)+"px;"+(this._settings.fixedRowHeight?"":"white-space:normal;")+" }"),it("#"+this._top_id+" .webix_hcell { height:"+this._settings.headerRowHeight+"px; line-height:"+this._settings.headerRowHeight+"px;}"),this._render_initial=function(){}},_first_render:function(){this.data.attachEvent("onStoreLoad",T(this._refresh_any_header_content,this)),this.data.attachEvent("onSyncApply",T(this._refresh_any_header_content,this)),this.data.attachEvent("onStoreUpdated",T(function(){return this.render.apply(this,arguments)},this)),this.data.attachEvent("onStoreUpdated",T(this._refresh_tracking_header_content,this)),this.render()},refresh:function(){this.render()},render:function(t,e,i){if("save"!=i){if("move"==i){var s=_i.getContext();if(s&&s.fragile)return}if(!this._columns.length){var n=this._settings.columns;if(!n||!n.length){if(!this._settings.autoConfig||!this.data.order.length||this._hidden_column_order.length)return;this._dtable_fully_ready=0,this._autoDetectConfig()}this._define_structure()}if(!this.isVisible(this._settings.id)||this.$blockRender)return this._render_initial();var a=this.config.experimental&&!this._settings.subview;return!t||-1==e||"paint"!=i&&"update"!=i||a?(this._render_timer&&(clearTimeout(this._render_timer),this._render_timer=0),this.callEvent("onBeforeRender",[this.data])?(this._render_initial(),this._dtable_fully_ready||this._apply_headers(),this._content_width&&(a&&("paint"==i||"update"==i)&&t?this._repaint_single_row(t):this._check_rendered_cols(!0,!0)),t&&"update"==i||(this._dtable_height=this._get_total_height(),this._set_split_sizes_y()),this._viewobj.setAttribute("aria-colcount",Math.max(this._hidden_column_order.length,this._columns.length)),this._viewobj.setAttribute("aria-rowcount",this.data.count()),this.callEvent("onAfterRender",[this.data]),!0):void 0):(this._render_timer&&clearTimeout(this._render_timer),void(this._render_timer&&this._render_timer_id!=t?(this._render_timer_id=null,this._render_timer=L(function(){this.render()},this)):(this._render_timer_id=t,this._render_timer=L(function(){this.render(t,-1,i)},this))))}},getColumnConfig:function(t){return this._columns_pull[t]||this._hidden_column_hash[t]},_config_options_from_file:function(t){for(var e in t){var i=this.getColumnConfig(e);_(i,"Orphan collection: "+e);var s=new ja({data:t[e]});this._destroy_with_me.push(s),this._bind_collection(s,i)}},_config_table_from_file:function(t){t.columns&&this._dtable_fully_ready&&this.refreshColumns(null,!0)},_define_structure:function(){if(this._settings.columns){this._columns=this._settings.columns,this._columns_pull={};for(var t=0;t<this._columns.length;t++){var e=this._columns[t];this._columns_pull[e.id]=e;var i=e.cssFormat;if(i&&(e.cssFormat=F(i,this.$scope)),e.width=e.width||this._settings.columnWidth,"string"==typeof e.format&&(e.format=St[e.format]||window[e.format]),e.numberFormat){var s=e.numberFormat;"string"==typeof s&&(e.numberFormat=s=bn.getConfig(s)),e.format=bn.numToStr(s),e.editFormat=e.editFormat||function(t){return bn.format(t,s)},e.editParse=e.editParse||function(t){return bn.parse(t,s)}}P(e.checkValue)&&(e.checkValue=1),P(e.uncheckValue)&&(e.uncheckValue=0),e.css&&"object"==u(e.css)&&(e.css=et(e.css));var n=e.template;n&&("string"==typeof n&&(n=n.replace(/#\$value#/g,"#"+e.id+"#")),e.template=Vt(n))}this._normalize_headers("header",this._headers),this._normalize_headers("footer",this._footers),this.callEvent("onStructureLoad",[])}},_define_structure_and_render:function(){this._apply_headers()},_clean_config_struct:function(){for(var t=0;t<this._columns.length;t++)delete this._columns[t].attached,delete this._columns[t].node},_apply_headers:function(){this._rightSplit=this._columns.length-this._settings.rightSplit,this._dtable_width=0;for(var t=0;t<this._columns.length;t++){if(!this._columns[t].node){var e=nt("DIV");e.style.width=this._columns[t].width+"px",this._columns[t].node=e}t>=this._settings.leftSplit&&t<this._rightSplit&&(this._dtable_width+=this._columns[t].width)}var i=[];if(this._settings.rightSplit){var s=this._columns.length-this._settings.rightSplit;i[s]=" webix_first",i[s-1]=" webix_last"}if(this._settings.leftSplit){var n=this._settings.leftSplit;i[n]=" webix_first",i[n-1]=" webix_last"}i[0]=(i[0]||"")+" webix_first webix_select_mark";var a=this._columns.length-1;i[a]=(i[a]||"")+" webix_last";for(var r=0;r<this._columns.length;r++){var o=this._columns[r].node;o.setAttribute("column",r),o.className="webix_column "+(this._columns[r].css||"")+(i[r]||"")}this._create_scrolls(),this._set_columns_positions(),this._set_split_sizes_x(),this._render_header_and_footer(),this._dtable_fully_ready=!0},_set_columns_positions:function(){for(var t=0,e=0;e<this._columns.length;e++){var i=this._columns[e];e!=this._settings.leftSplit&&e!=this._rightSplit||(t=0),i.node&&(i.node.style.left=t+"px",(this._settings.leftSplit||this._settings.rightSplit)&&(rt(i.node),i.attached=!1)),t+=i.width}},_render_header_and_footer:function(){this._header_fix_width||(this._header_fix_width=0),this._header_height=this._footer_height=0,this._settings.header&&(this._refreshHeaderContent(this._header,0,1),this._normalize_headers("header",this._headers),this._header_height=this._headers._summ,this._render_header_section(this._header,"header",this._headers)),this._settings.footer&&(this._refreshHeaderContent(this._footer,0,1),this._normalize_headers("footer",this._footers),this._footer_height=this._footers._summ,this._render_header_section(this._footer,"footer",this._footers)),this.refreshHeaderContent(!1,!1),this._size_header_footer_fix(),this._last_sorted&&this.markSorting(this._last_sorted,this._last_order)},_getHeaderHeight:function(t,e,i){var s=0,n=t.colspan||1,a="webix_hcell "+(t.css||"");if(t.rotate)a+=" webix_measure_rotate";else for(var r=0;r<n;r++)s+=this._columns[i+r]?this._columns[i+r].width:this.config.columnWidth;var o=vt([t.text],a,s);return(t.rotate?o.width:o.height)+1},_normalize_headers:function(t,e){for(var i=0,s=0;s<this._columns.length;s++){var n=this._columns[s][t];n&&"object"==u(n)&&n.length||(P(n)&&(n="header"==t?this._columns[s].id:""),n=[n]);for(var a=0;a<n.length;a++)"object"!=u(n[a])&&(n[a]={text:n[a]}),n[a]&&n[a].height&&(e[a]=n[a].height),n[a]&&n[a].autoheight&&(e[a]=this._getHeaderHeight(n[a],this._columns[s],s));i=Math.max(i,n.length),this._columns[s][t]=n}e._summ=i;for(var r=i-1;r>=0;r--)e[r]=e[r]||this._settings.headerRowHeight,e._summ+=1*e[r];for(var o=0;o<this._columns.length;o++)for(var l=this._columns[o][t],h=0;h<l.length;h++){if(l[h]&&l[h].rowspan)for(var c=1;c<l[h].rowspan;c++)l[h+c]=null;if(l[h]&&l[h].colspan)for(var d=1;d<l[h].colspan;d++)this._columns[o+d][t][h]=null}for(var f=0;f<this._columns.length;f++){var g=this._columns[f][t];if(g.length<i){var p=g.length-1;g[p].rowspan=i-g.length+1;for(var _=p+1;_<i;_++)g[_]=null}}return i},_find_header_content:function(t,e){for(var i=t.getElementsByTagName("TD"),s=0;s<i.length;s++)if(i[s].getAttribute("active_id")==e)return i[s]},getHeaderContent:function(e){var i=this._find_header_content(this._header,e);if(i||(i=this._find_header_content(this._footer,e)),i){var s=this._active_headers[e],n=Fn[s.content],a={type:n,getValue:function(t){return n.getValue(i,t)},setValue:function(t){return n.setValue(i,t)}};return n.getHelper&&t.extend(a,n.getHelper(i,s)),a}},_summ_next:function(t,e,i){var s=i?-1:0;for(i+=e;e<i;e++)s+=t[e]+1;return s},_render_subheader:function(t,e,i,s,n){if(t==e)return"";var a="<table role='presentation' style='width:"+i+"px' cellspacing='0' cellpadding='0'>";a+="<tr class='webix_size_row'>";for(var r=t;r<e;r++)a+="<td style='width:"+this._columns[r].width+"px;'></td>";a+="</tr>";for(var o=this._columns[0][s].length,l=0;l<o;l++){a+="<tr section='"+s+"' role='row'>";for(var h=t;h<e;h++){var c=this._columns[h][s][l];if(null!==c){c.content&&(c.contentId=c.contentId||$(),c.columnId=this._columns[h].id,c.format=this._columns[h].format,_(Fn,"Filtering extension was not included"),_(Fn[c.content],"Unknown content type: "+c.content),c.text=Fn[c.content].render(this,c),this._active_headers[c.contentId]=c,this._has_active_headers=!0),a+="<td  role='presentation' column='"+(c.colspan?c.colspan-1+h:h)+"'";var d="";h==t&&(d+="webix_first");var f=h+(c.colspan?c.colspan-1:0);f>=e-1&&(d+=" webix_last"),(c.rowspan&&l+c.rowspan===o||l===o-1)&&(d+=" webix_last_row"),d&&(a+=' class="'+d+'"');var g=n[l],p="";c.contentId&&(a+=" active_id='"+c.contentId+"'"),c.colspan&&(a+=" colspan='"+c.colspan+"'"),c.rowspan&&(a+=" rowspan='"+c.rowspan+"'",g=this._summ_next(this._headers,l,c.rowspan)),g!=this._settings.headerRowHeight&&(p=" style='line-height:"+g+"px; height:"+g+"px;'");var v="webix_hcell",m=c.css;m&&("object"==u(m)&&(c.css=m=et(m)),v+=" "+m),this._columns[h].$selected&&(v+=" webix_sel_hcell"),a+="><div role='columnheader' class='"+v+"'"+p+">";var b=""===c.text?"&nbsp;":c.text;c.rotate&&(b="<div class='webix_rotate' style='width:"+(g-10)+"px; transform-origin:center "+(g-15)/2+"px;-webkit-transform-origin:center "+(g-15)/2+"px;'>"+b+"</div>"),a+=b+"</div></td>"}}a+="</tr>"}return a+="</tr></table>"},showItemByIndex:function(t,e){var i=this._settings.pager;if(i){var s=Math.floor(t/i.size);s!=i.page&&Zt(i.id).select(s)}var n=this.getScrollState();if(-1!=t){var a=this._get_y_range();if(t<a[0]+1||t>=a[1]-1){var r=this._getHeightByIndexSumm(i?this.data.$min:0,t),o=this._dtable_offset_height+1,l=this._getHeightByIndex(t);if(t<a[0]+1)r=Math.max(0,r)-this._top_split_height;else if(r+l>o){r+=l-o;for(var h=t;h>0&&o>0;h--)o-=this._getHeightByIndex(h);t>0&&o&&(r+=this._getHeightByIndex(t+1))}else r=n.y;n.y=r}}if(-1!=e){if(e<this._settings.leftSplit||e>=this._rightSplit)return this.scrollTo(n.x,n.y);var c=this._get_x_range();if(e<c[0]+1||e>=c[1]-1){for(var d=0,u=this._settings.leftSplit;u<e;u++)d+=this._columns[u].width;var f=this._columns[e].width;e<c[0]+1||(d+f>this._center_width?d+=f-this._center_width:d=n.x),n.x=d}}this.scrollTo(n.x,n.y)},showCell:function(t,e){if(!e||!t){var i=this.getSelectedId(!0);1==i.length&&(e=e||i[0].column,t=t||i[0].row)}e=e?this.getColumnIndex(e):-1,t=t?this.getIndexById(t):-1,this.showItemByIndex(t,e)},scrollTo:function(t,e){if(this._x_scroll){if(this._scrollTo_touch)return this._scrollTo_touch(t,e);null!==t&&this._x_scroll.scrollTo(t),null!==e&&this._y_scroll.scrollTo(e)}},getScrollState:function(){if(this._getScrollState_touch)return this._getScrollState_touch();var t=this._render_scroll_shift?0:this._render_scroll_diff||0;return{x:this._scrollLeft||0,y:this._scrollTop+t}},showItem:function(t){this.showItemByIndex(this.getIndexById(t),-1)},_render_header_section:function(t,e,i){var s=t.childNodes;s[0].innerHTML=this._render_subheader(0,this._settings.leftSplit,this._left_width,e,i),s[1].innerHTML=this._render_subheader(this._settings.leftSplit,this._rightSplit,this._dtable_width,e,i),s[2].innerHTML=this._render_subheader(this._rightSplit,this._columns.length,this._right_width,e,i),this._dtable_column_refresh&&(s[1].scrollLeft=this.getScrollState().x),s[1].onscroll=T(this._scroll_with_header,this)},_scroll_with_header:function(){var t=this.getScrollState().x,e=this._header.childNodes[1].scrollLeft;e!=t&&this.scrollTo(e,null)},_refresh_tracking_header_content:function(){this.refreshHeaderContent(!0,!0)},_refresh_any_header_content:function(){this.refreshHeaderContent(!1,!0)},refreshHeaderContent:function(t,e,i){this._settings.header&&(e&&this._refreshHeaderContent(this._header,t,1,i),this._refreshHeaderContent(this._header,t,0,i)),this._settings.footer&&(e&&this._refreshHeaderContent(this._footer,t,1,i),this._refreshHeaderContent(this._footer,t,0,i))},refreshFilter:function(t){this.refreshHeaderContent(!1,!0,t)},_refreshHeaderContent:function(t,e,i,s){if(this._has_active_headers&&t)for(var n=t.getElementsByTagName("TD"),a=0;a<n.length;a++)if(n[a].getAttribute("active_id")){var r=this._active_headers[n[a].getAttribute("active_id")];if(s&&s!=r.columnId)continue;var o=Fn[r.content];i?o.getValue&&(r.value=o.getValue(n[a])):e&&!o.trackCells||o.refresh(this,n[a],r)}},headerContent:[],_set_size_scroll_area:function(t,e,s){this._scrollSizeY?(t.style.height=Math.max(e,1)-1+"px",t.style.width=(this._rightSplit?0:s)+this._scrollSizeY-1+"px",i.isWebKit&&t.offsetWidth):t.style.display="none"},_size_header_footer_fix:function(){this._settings.header&&this._set_size_scroll_area(this._header_scroll,this._header_height,this._header_fix_width),this._settings.footer&&this._set_size_scroll_area(this._footer_scroll,this._footer_height,this._header_fix_width)},_update_scroll:function(){var t=!(this._settings.autowidth||!1===this._settings.scrollX);this._scrollSizeX=t?i.scrollSize:0;var e=!(this._settings.autoheight||!1===this._settings.scrollY);this._scrollSizeY=e?i.scrollSize:0,i.touch&&(t=e=!1),this._x_scroll&&(this._x_scroll._settings.scrollSize=this._scrollSizeX,this._x_scroll._settings.scrollVisible=t),this._y_scroll&&(this._y_scroll._settings.scrollSize=this._scrollSizeY,this._y_scroll._settings.scrollVisible=e)},_create_scrolls:function(){var t,e;if(this._scrollTop=0,this._scrollLeft=0,t=e=1,(this._settings.autoheight||!1===this._settings.scrollY)&&(e=this._scrollSizeY=0),(this._settings.autowidth||!1===this._settings.scrollX)&&(t=this._scrollSizeX=0),i.touch&&(t=e=0),this._x_scroll||(this._x_scroll=Xt({view:"vscroll",container:this._footer.previousSibling,scrollWidth:this._dtable_width,scrollSize:this._scrollSizeX,scrollVisible:t}),!t||this._scrollSizeX||i.$customScroll||(this._x_scroll._viewobj.style.position="absolute"),this._x_scroll.attachEvent("onScroll",T(this._onscroll_x,this))),!this._y_scroll){this._header_scroll=this._footer.nextSibling;var s=this._header_scroll.nextSibling;this._footer_scroll=s.nextSibling,this._y_scroll=Xt({view:"vscroll",container:s,scrollHeight:100,scroll:"y",scrollSize:this._scrollSizeY,scrollVisible:e}),this._y_scroll.activeArea(this._body),this._x_scroll.activeArea(this._body,!0),this._y_scroll.attachEvent("onScroll",T(this._onscroll_y,this))}this._content_width&&this.callEvent("onResize",[this._content_width,this._content_height]),i.$customScroll&&null.enable(this),this._create_scrolls=function(){}},columnId:function(t){return this._columns[t].id},getColumnIndex:function(t){for(var e=0;e<this._columns.length;e++)if(this._columns[e].id==t)return e;return-1},_getNodeBox:function(t,e){var i,s=0,n=0,a=0,r=0,o=0;for(i=0;i<this._columns.length&&(this._rightSplit!=i&&this._settings.leftSplit!=i||(s=0,o++),this._columns[i].id!=e);i++)s+=this._columns[i].width;for(n+=this._columns[i].width,i=0;i<this.data.order.length&&this.data.order[i]!=t;i++)r+=this._getHeightByIndex(i);return a+=this._getHeightByIndex(i),[s,n,r-this._scrollTop,a,this._body.childNodes[o]]},_id_to_string:function(){return this.row},locate:function(t,e){if(this._settings.subview&&this!=Zt(t))return null;for(t=t.target||t.srcElement||t;t&&t.getAttribute&&t!==this.$view;){var i=bt(t).toString(),s=null;if(-1!=i.indexOf("webix_cell")&&(s=this._locate(t))&&(s.row=this.data.order[s.rind]),-1!=i.indexOf("webix_hcell")&&(s=this._locate(t))&&(s.header=!0),-1!=i.indexOf("webix_drop_area")&&(s=this._locate(t))&&(s.row=s.rind="$webix-drop"),s)return e?s.header?null:s.row:(s.column=this._columns[s.cind].id,s.toString=this._id_to_string,s);t=t.parentNode}return null},_locate:function(t){var e=t.parentNode;if(!e)return null;var i=1*(t.getAttribute("column")||e.getAttribute("column")),s=t.getAttribute("aria-rowindex"),n=t.getAttribute("row")||(s?s-1:0),a=1*(t.getAttribute("colspan")||e.getAttribute("colspan"));return{rind:n,cind:i,span:a}},_correctScrollSize:function(){for(var t=-this._center_width,e=0;e<this._columns.length;e++)t+=this._columns[e].width;this._scrollLeft=Math.min(this._scrollLeft,Math.max(0,t))},_updateColsSizeSettings:function(t){this._dtable_fully_ready&&(this._correctScrollSize(),this._set_columns_positions(),this._set_split_sizes_x(),this._render_header_and_footer(),t||this._check_rendered_cols(!1,!1))},setColumnWidth:function(t,e,i){return this._setColumnWidth(this.getColumnIndex(t),e,i)},_setColumnWidth:function(t,e,i,s){if(!(isNaN(e)||t<0)){var n=this._columns[t];n.minWidth&&e<n.minWidth?e=n.minWidth:e<this._settings.minColumnWidth&&(e=this._settings.minColumnWidth);var a=n.width;return a!=e&&(t>=this._settings.leftSplit&&t<this._rightSplit&&(this._dtable_width+=e-a),n.width=e,!!n.node&&(n.node.style.width=e+"px",i||this._updateColsSizeSettings(),this.callEvent("onColumnResize",[n.id,e,a,!!s]),!0))}},_getRowHeight:function(t){return(t.$height||this._settings.rowHeight)+(t.$subopen?t.$subHeight:0)},_getHeightByIndex:function(t){var e=this.data.order[t];return e?this._getRowHeight(this.data.pull[e]):this._settings.rowHeight},_getHeightByIndexSumm:function(t,e){if(this._settings.fixedRowHeight)return(e-t)*this._settings.rowHeight;for(var i=0;t<e;t++)i+=this._getHeightByIndex(t);return i},_cellPosition:function(t,e){var i;1==arguments.length&&(e=t.column,t=t.row);for(var s=this.getItem(t),n=this.getColumnConfig(e),a=0,r=0,o=0;o<this._columns.length;o++){o!=this._settings.leftSplit&&o!=this._rightSplit||(a=0);var l=this._columns[o];if(l.id==e){var h=o<this._settings.leftSplit?0:o>=this._rightSplit?2:1;r=this._body.childNodes[h].firstChild;break}a+=l.width}return i=this.getIndexById(t)<this._settings.topSplit?this._getHeightByIndexSumm(0,this.getIndexById(t)):this._getHeightByIndexSumm((this._render_scroll_top||0)-this._settings.topSplit,this.getIndexById(t))+(this._render_scroll_shift||0),{parent:r,top:i,left:a,width:n.width,height:s.$height||this._settings.rowHeight}},_get_total_height:function(){var t=this._settings.pager,e=0,i=this.data.order.length;return t&&(e=t.size*t.page,i=Math.min(i,e+t.size),t.level&&(e=this.data.$min,i=this.data.$max)),this._getHeightByIndexSumm(e,i)},setRowHeight:function(t,e){if(!isNaN(e)){e<this._settings.minRowHeight&&(e=this._settings.minRowHeight);var i=this.getItem(t),s=i.$height||this._settings.rowHeight;s!=e&&(i.$height=e,this.config.fixedRowHeight=!1,this.render(),this.callEvent("onRowResize",[t,e,s]))}},_onscroll_y:function(t){var e=this._scrollTop!==t;if(this._scrollTop=t,this._settings.prerender)for(var s=this._body.childNodes,n=0;n<s.length;n++)s[n].scrollTop=t;else this._check_rendered_cols();i.$customScroll&&null._update_scroll(this._body),e&&(this.callEvent("onScrollY",[]),this.callEvent("onAfterScroll",[]))},_setLeftScroll:function(t){this._body.childNodes[1].scrollLeft=this._scrollLeft=t,this._settings.header&&(this._header.childNodes[1].scrollLeft=t),this._settings.footer&&(this._footer.childNodes[1].scrollLeft=t)},_onscroll_x:function(t){var e=this._scrollLeft!==t;this._setLeftScroll(t),!1===this._settings.prerender&&this._check_rendered_cols(!this._minimize_dom_changes),i.$customScroll&&null._update_scroll(this._body),e&&(this.callEvent("onScrollX",[]),this.callEvent("onAfterScroll",[]))},_get_x_range:function(t){if(t)return[0,this._columns.length];for(var e=this._scrollLeft,i=this._settings.leftSplit;e>0&&this._columns.length-1>i;)e-=this._columns[i].width,i++;var s=i;for(e&&i>0&&i--,e+=this._center_width;e>0&&s<this._rightSplit;)e-=this._columns[s].width,s++;return[i,s]},getVisibleCount:function(){return Math.floor(this._dtable_offset_height/this.config.rowHeight)},_get_y_range:function(t){var e=this._scrollTop,i=0,s=this.count(),n=this._settings.pager;if(n&&(i=n.page*n.size,s=Math.min(s,i+n.size),n.level&&(i=this.data.$min,s=this.data.$max)),this._settings.autoheight)return[i,s,0];if(t)return[i,s,0];var a=i,r=this._settings.topSplit||0;r&&(a+=r);var o=this._settings.fixedRowHeight?this._settings.rowHeight:0;if(o){var l=Math.ceil(e/o);e-=l*o,a+=l}else for(;e>0;)e-=this._getHeightByIndex(a),a++;var h=a>0&&e?-(this._getHeightByIndex(a-1)+e):0,c=a;if(e&&a--,e+=(this._dtable_offset_height||this._content_height)-(this._top_split_height||0),o){var d=Math.ceil(e/o);e-=d*o,c+=d}else for(;e>0&&c<s;)e-=this._getHeightByIndex(c),c++;return c>s&&(c=s),[a,c,h]},_repaint_single_row:function(t){var e=this.getItem(t),i=this.getIndexById(t),s=this._get_y_range(),n=this.config.topSplit,a="";if(i>=n){if(i<s[0]||i>=s[1])return;i-=s[0]-n}else a=i==n-1?" webix_topcell webix_last_topcell":" webix_topcell";for(var r=this._get_x_range(),o=0;o<this._columns.length;o++){var l=this._columns[o];if(o<this._rightSplit&&o>=this._settings.leftSplit&&(o<r[0]||o>r[1])&&(l._yr0=-999),l.attached&&l.node){var h=l.node.childNodes[i];if(!h)continue;var c=this._getValue(e,this._columns[o],0);h.innerHTML=c,h.className=this._getCss(this._columns[o],c,e,t)+a}}},_check_rendered_cols:function(t,e){if(this._columns.length){e&&this._clearColumnCache();var i=this._get_x_range(this._settings.prerender),s=this._get_y_range(!0===this._settings.prerender);if(t){for(var n=this._settings.leftSplit;n<i[0];n++)this._hideColumn(n,e);for(var a=i[1];a<this._rightSplit;a++)this._hideColumn(a,e)}this._render_full_rows=[];for(var r=0;r<this._settings.leftSplit;r++)this._renderColumn(r,s,e);for(var o=i[0];o<i[1];o++)this._renderColumn(o,s,e,o==i[0]);for(var l=this._rightSplit;l<this._columns.length;l++)this._renderColumn(l,s,e);this._check_and_render_full_rows(s[0],s[1],e),this._check_load_next(s)}},_delete_full_rows:function(t,e){this._rows_cache_start=t,this._rows_cache_end=e,rt(this._rows_cache),this._rows_cache=[]},_adjust_rows:function(){if(this._settings.prerender&&this._rows_body){var t=this.getScrollState();this._rows_body.style.top="-"+(t.y||0)+"px"}},_check_and_render_full_rows:function(t,e,s){if(this._rows_body&&(this._rows_body.style.top=this._render_scroll_shift+"px"),s||t!=this._rows_cache_start||e!=this._rows_cache_end){if(this._delete_full_rows(t,e),this._render_full_row_some){this._render_full_row_some=!1;for(var n=0;n<this._render_full_rows.length;n++){var a,r=this._render_full_rows[n],o=this.getItem(r.id);a="function"==typeof o.$row?o.$row.call(this,o,this.type):this._getValue(o,this.getColumnConfig(o.$row),n);var l=this._rows_cache[n]=nt("DIV",null,a);l.className="webix_cell "+(o.$sub?"webix_dtable_sub"+(this._settings.subview?"view":"row"):"webix_dtable_colrow"+(o.$row?" webix_topcell"+(this.data.getMark(o.id,"webix_selected")?" webix_selected":""):"")),l.setAttribute("column",0),l.setAttribute("row",r.index);var h=o.$height||this._settings.rowHeight;o.$subopen?l.style.height=o.$subHeight+"px":l.style.height=h+"px",l.style.paddingRight=i.scrollSize+"px";var c=this._render_full_rows[n].index<this.config.topSplit?-this._render_scroll_shift:0;l.style.top=c+r.top+(o.$subopen?h-1:0)+"px",this._rows_body||(this._rows_body=nt("DIV"),this._rows_body.style.position="relative",this._rows_body.style.top=this._render_scroll_shift+"px",this._body.appendChild(this._rows_body)),this._rows_body.appendChild(l),this.attachEvent("onSyncScroll",function(t,e,i){fi._set_matrix(this._rows_body,0,e,i)}),this._settings.subview&&this.callEvent("onSubViewRender",[o,l])}}}else if(this.config.topSplit)for(var d=0;d<this._render_full_rows.length;d++){var u=this._rows_cache[d];this._render_full_rows[d].index<this.config.topSplit&&(u.style.top=this._render_full_rows[d].top-this._render_scroll_shift+"px")}},_check_load_next:function(t){var e=this._settings.pager,i=this._settings.datafetch,s=!this._last_valid_render_pos||t[0]>=this._last_valid_render_pos;if(this._last_valid_render_pos=t[0],this._data_request_flag){if(e&&(!i||i>=e.size)&&this._check_rows([0,e.size*e.page],Math.max(i,e.size),!0))return this._data_request_flag=null;this._run_load_next(this._data_request_flag,s),this._data_request_flag=null}else this._settings.loadahead&&this._check_rows(t,this._settings.loadahead,s)},_check_rows:function(t,e,i){var s=t[1],n=s+e;i||(s=t[0]-e,n=t[0]),s<0&&(s=0),n=Math.min(n,this.data.order.length-1);for(var a=!1,r=s;r<n;r++)this.data.order[r]||(a?(a.last=r,a.count=r-s):a={start:r,count:n-s});if(a)return this._run_load_next(a,i),!0},_run_load_next:function(t,e){var i=Math.max(t.count,this._settings.datafetch||this._settings.loadahead||0),s=e?t.start:t.last-i+1;this._maybe_loading_already(t.count,t.start)||this.loadNext(i,s)},_preserveScrollTarget:function(t){if(i.isSafari){var e,s,n,a,r=[this._x_scroll,this._y_scroll];for(e=0;e<2;e++)(a=r[e])&&a._scroll_trg&&a._scroll_trg.parentNode==t&&(s=a._scroll_trg);s&&(this._scrollWheelTrg&&rt(this._scrollWheelTrg),this._scrollWheelTrg=s,n=s.cloneNode(!0),s.parentNode.insertBefore(n,s),this._scrollWheelTrg.style.display="none",this._body.appendChild(this._scrollWheelTrg))}},_hideColumn:function(t){var e=this._columns[t];this._preserveScrollTarget(e.node),rt(e.node),e.attached=!1},_clearColumnCache:function(){for(var t=0;t<this._columns.length;t++)this._columns[t]._yr0=-1;this._rows_cache.length&&(rt(this._rows_cache),this._rows_cache=[])},getText:function(t,e){return this._getValue(this.getItem(t),this.getColumnConfig(e),0)},getCss:function(t,e){var i=this.getItem(t);return this._getCss(this.getColumnConfig(e),i[e],i,t)},_getCss:function(t,e,i,s){var n="webix_cell";if(t.cssFormat){var a=t.cssFormat(e,i,s,t.id);a&&("object"==u(a)?n+=" "+et(a):n+=" "+a)}var r=i.$css;r&&("object"==u(r)&&(i.$css=r=et(r)),n+=" "+r);var o=this.data._marks[s];if(o&&(o.$css&&(n+=" "+o.$css),o.$cellCss)){var l=o.$cellCss[t.id];l&&(n+=" "+l)}if(i.$cellCss){var h=i.$cellCss[t.id];h&&("object"==u(h)&&(h=et(h)),n+=" "+h)}var c=this.data.getMark(i.id,"webix_selected");return(c&&(c.$row||c[t.id])||t.$selected)&&(n+=this._select_css),n},_getValue:function(t,e,i){return t?(void 0!==(s=t[e.id])&&null!==s||(s=""),e.format&&(s=e.format(s)),e.template&&(s=e.template(t,this.type,s,e,i)),s):"";var s},type:{checkbox:function(t,e,i,s){var n=i==s.checkValue?'checked="true"':"";return"<input class='webix_table_checkbox' type='checkbox' "+n+">"},radio:function(t,e,i,s){var n=i==s.checkValue?'checked="true"':"";return"<input class='webix_table_radio' type='radio' "+n+">"},editIcon:function(){return"<span class='webix_icon wxi-pencil'></span>"},trashIcon:function(){return"<span class='webix_icon wxi-trash'></span>"}},type_setter:function(e){return this.types&&this.types[e]?(this.type=I(this.types[e]),this.type.css&&(this._contentobj.className+=" "+this.type.css)):Yt(this,e),this.type.on_click&&t.extend(this.on_click,this.type.on_click),e},_renderColumn:function(t,e,i,s){var n=this._columns[t];if(!n.attached){var a=t<this._settings.leftSplit?0:t>=this._rightSplit?2:1;this._body.childNodes[a].firstChild.appendChild(n.node),n.attached=!0,n.split=a}if(this._render_scroll_top=e[0],this._render_scroll_shift=0,this._render_scroll_diff=e[2],this._settings.scrollAlignY?e[1]==this.data.order.length||this.data.$pagesize&&e[1]%this.data.$pagesize==0?n.node.style.top=(this._render_scroll_shift=e[2])+"px":n._yr2&&(n.node.style.top="0px"):(this._render_scroll_shift=e[2],n.node.style.top=e[2]+"px"),!(i||n._yr0!=e[0]||n._yr1!=e[1]||this._settings.topSplit&&n._render_scroll_shift!=this._render_scroll_shift))return 0;for(var r="",o=this._settings.columns[t],l={row:this._settings.rowHeight,total:0,single:s},h=0;h<this._settings.topSplit;h++)r+=this._render_single_cell(h,o,e,l,-this._render_scroll_shift,t);this._data_request_flag=null;for(var c=Math.max(e[0],this._settings.topSplit);c<e[1];c++)r+=this._render_single_cell(c,o,e,l,-1,t);return this._preserveScrollTarget(n.node),n.node.innerHTML=r,n._yr0=e[0],n._yr1=e[1],n._yr2=e[2],n._render_scroll_shift=this._render_scroll_shift,1},_render_single_cell:function(t,e,i,s,n,a){var r=this.data.order[t],o=this.data.getItem(r),l="";if(o){var h=" role='gridcell' aria-rowindex='"+(t+1)+"' aria-colindex='"+(this.getColumnIndex(e.id)+1)+"'"+(o.$count||o.$sub?" aria-expanded='"+(o.open||o.$subopen?"true":"false")+"'":"")+(o.$level?" aria-level='"+o.$level+"'":"");if(s.single&&o.$row&&(this._render_full_row_some=!0,this._render_full_rows.push({top:s.total,id:o.id,index:t}),!o.$sub)){var c=o.$height||s.row;return s.total+=c,"<div"+h+" class='webix_cell' style='height:"+c+"px;'></div>"}var d=this._getValue(o,e,t),u=this._getCss(e,d,o,r),f=" aria-selected='true' tabindex='0'";if(-1!==u.indexOf("select"))if(-1!==u.indexOf("row")){var g=this._get_x_range();g[0]===a&&(h+=f)}else-1!==u.indexOf("col")?t===i[0]&&(h+=f):h+=f;var p=!!o.$subopen,_=p?"margin-bottom:"+o.$subHeight+"px;":"";n>=0&&(n>0&&(_+="top:"+n+"px;'"),u="webix_topcell "+u,t==this._settings.topSplit-1&&(u="webix_last_topcell "+u)),o.$height?(l="<div"+h+" class='"+u+"' style='height:"+o.$height+"px;"+_+"'>"+d+"</div>",s.total+=o.$height-s.row):l="<div"+h+" class='"+u+"'"+(_?" style='"+_+"'":"")+">"+d+"</div>",p&&(s.total+=o.$subHeight)}else l="<div role='gridcell' class='webix_cell'></div>",this._data_request_flag?this._data_request_flag.last=t:this._data_request_flag={start:t,count:i[1]-t};return s.total+=s.row,l},_set_split_sizes_y:function(){if(this._columns.length&&!isNaN(1*this._content_height)){S(this,["y-sizing"],!0);var t=this._dtable_height+(this._scrollSizeX?this._scrollSizeX:0);if(!this._settings.autoheight&&!this._settings.yCount||!this.resize()){this._y_scroll.sizeTo(this._content_height,this._header_height,this._footer_height),this._y_scroll.define("scrollHeight",t),this._top_split_height=this._settings.topSplit?this._getHeightByIndexSumm(0,this._settings.topSplit):0,this._dtable_offset_height=Math.max(0,this._content_height-this._scrollSizeX-this._header_height-this._footer_height);for(var e=0;e<3;e++)this._body.childNodes[e].style.height=this._dtable_offset_height+"px",this._settings.prerender?this._body.childNodes[e].firstChild.style.height=this._dtable_height+"px":this._body.childNodes[e].firstChild.style.height=this._dtable_offset_height+"px";this._header.style.height=this._header_height+"px"}}},_set_split_sizes_x:function(){if(this._columns.length){var t=0;for(this._left_width=0,this._right_width=0,this._center_width=0;t<this._settings.leftSplit;)this._left_width+=this._columns[t].width,t++;for(t=this._columns.length-1;t>=this._rightSplit;)this._right_width+=this._columns[t].width,t--;if(this._content_width&&(!this._settings.autowidth||!this.resize())){this._center_width=this._content_width-this._right_width-this._left_width-this._scrollSizeY,this._body.childNodes[1].firstChild.style.width=this._dtable_width+"px",this._body.childNodes[0].style.width=this._left_width+"px",this._body.childNodes[1].style.width=this._center_width+"px",this._body.childNodes[2].style.width=this._right_width+"px",this._header.childNodes[0].style.width=this._left_width+"px",this._header.childNodes[1].style.width=this._center_width+"px",this._header.childNodes[2].style.width=this._right_width+"px",this._footer.childNodes[0].style.width=this._left_width+"px",this._footer.childNodes[1].style.width=this._center_width+"px",this._footer.childNodes[2].style.width=this._right_width+"px";var e=this._center_width-this._dtable_width;e<0&&(e=0),e!=this._header_fix_width&&(this._header_fix_width=e,this._size_header_footer_fix()),i.isWebKit&&(this._body.childNodes[0].offsetWidth,this._body.childNodes[1].offsetWidth,this._body.childNodes[1].firstChild.offsetWidth,this._body.childNodes[2].offsetWidth),this._x_scroll.sizeTo(this._content_width-this._scrollSizeY),this._x_scroll.define("scrollWidth",this._dtable_width+this._left_width+this._right_width)}}},$getSize:function(t,e){if((this._settings.autoheight||this._settings.yCount)&&this._settings.columns){var i=(this._settings.yCount||0)*this._settings.rowHeight;i||(i=this.isVisible()?this._dtable_height:this.count()*this._settings.rowHeight),this._settings.height=Math.max(i+(this._scrollSizeX?this._scrollSizeX:0)-1,this._settings.minHeight||0)+this._header_height+this._footer_height}this._settings.autowidth&&this._settings.columns&&(this._settings.width=Math.max(this._dtable_width+this._left_width+this._right_width+this._scrollSizeY,this._settings.minWidth||0));var s=this._left_width+this._right_width+this._scrollSizeY,n=si.api.$getSize.call(this,t,e);return n[0]=Math.max(n[0]||s),n},_restore_scroll_state:function(){if(this._x_scroll&&!i.touch){var t=this.getScrollState();this._x_scroll._last_scroll_pos=this._y_scroll._last_scroll_pos=-1,this.scrollTo(t.x,t.y)}},$setSize:function(){var t=this._content_width,e=this._content_height;si.api.$setSize.apply(this,arguments)&&(this._dtable_fully_ready&&(this.callEvent("onResize",[this._content_width,this._content_height,t,e]),this._set_split_sizes_x(),this._set_split_sizes_y()),this.render())},_on_header_click:function(t){var e=this.getColumnConfig(t);if(e.sort){var i="asc";e.id==this._last_sorted&&(i="asc"==this._last_order?"desc":"asc"),this._sort(e.id,i,e.sort)}},markSorting:function(t,e){this._sort_sign||(this._sort_sign=nt("DIV"));var i=this._sort_sign.parentNode;if(i&&(i.removeAttribute("aria-sort"),i.removeAttribute("tabindex")),rt(this._sort_sign),e){var s=this._get_header_cell(this.getColumnIndex(t));s&&(this._sort_sign.className="webix_ss_sort_"+e,s.style.position="relative",s.appendChild(this._sort_sign),s.setAttribute("aria-sort",e+"ending"),s.setAttribute("tabindex","0")),this._last_sorted=t,this._last_order=e}else this._last_sorted=this._last_order=null},scroll_setter:function(t){return"string"==typeof t?(this._settings.scrollX=-1!=t.indexOf("x"),this._settings.scrollY=-1!=t.indexOf("y"),t):this._settings.scrollX=this._settings.scrollY=t},_get_header_cell:function(t){for(var e=this._header.getElementsByTagName("TD"),i=null,s=0;s<e.length;s++)if(e[s].getAttribute("column")==t&&!e[s].getAttribute("active_id")&&(i=e[s].firstChild,(e[s].colSpan||0)<2))return i;return i},_sort:function(t,e,i){var s=this;e=e||"asc",this.markSorting(t,e),"server"==i?(this.callEvent("onBeforeSort",[t,e,i]),this.loadNext(0,0,0,0,1).then(function(n){s.clearAll(!0),s.parse(n),s.callEvent("onAfterSort",[t,e,i])})):("text"==i&&(this.data.each(function(e){e.$text=this.getText(e.id,t)},this),i="string",t="$text"),"function"==typeof i?this.data.sort(i,e):this.data.sort(t,e,i||"string"))},_mouseEventCall:function(t,e,i,s){var n;if(t.length)for(n=0;n<t.length;n++)if(!1===F(t[n],this.$scope).call(this,e,i,s))return!1},_mouseEvent:function(t,e,i,s){var n=(t=t||event).target||t.srcElement;if(!this._settings.subview||this==Zt(n)){for(var a="",r=[],o=!1,l=null;n&&n.parentNode&&n!=this._viewobj.parentNode;){var h=bt(n);if(a=h)for(var c=(a=a.toString().split(" ")).length-1;c>=0;c--)e[a[c]]&&r.push(e[a[c]]);if(n.parentNode.getAttribute&&!l){var d=n.parentNode.getAttribute("column")||n.getAttribute("column");if(d){var u="DIV"==n.parentNode.tagName;if(!this._columns[d])return;if(o=!0,u){var f=n.parentNode.getAttribute("row")||n.getAttribute("row");if(!f){if(n.getAttribute("column"))return;(f=tt(n))>=this._settings.topSplit&&!this._settings.prerender&&(f+=this._columns[d]._yr0-this._settings.topSplit)}this._item_clicked=l={row:this.data.order[f],column:this._columns[d].id},l.toString=this._id_to_string}else this._item_clicked=l={column:this._columns[d].id};if(!1===this._mouseEventCall(r,t,l,n))return;if(u)this.callEvent("on"+i,[l,t,n])&&s&&this.callEvent("on"+s,[l,t,n]);else if("ItemClick"==i){var g="header"==n.parentNode.parentNode.getAttribute("section");g&&this.callEvent("onHeaderClick",[l,t,n])&&this._on_header_click(l.column)}r=[]}}n=n.parentNode}return this._mouseEventCall(r,t,l,this.$view),o}},_get_tooltip_data:function(t,e){var i=this.locate(e);if(!i)return null;var s,n=Te._tooltip;if(i.header){for(var a,r=e.target||e.srcElement,o=i.cind-(i.span?i.span-1:0),l=-1;r&&!a;)r=r.parentNode,a=r.getAttribute("section");for(;null!==(r=r.previousSibling);)l++;var h=this._columns[o][a][l];if(!h.tooltip)return null;n.type.template=Vt(!0===h.tooltip?"#text#":h.tooltip),s=h}else{var c=n.type.column=this.getColumnConfig(i.column);if(!c.tooltip&&void 0!==c.tooltip)return null;if(!0===c.tooltip||!c.tooltip&&P(this._settings.tooltip.template))s=this.getText(i.row,i.column).toString();else if(c.tooltip){var d=(e.target||e.srcElement).getAttribute("webix_area");n.type.template=d?function(t,e){var i=t[c.id];return Vt(c.tooltip).call(this,t,e,i[d],d)}:Vt(c.tooltip)}else n.type.template=Vt(this._settings.tooltip.template)}return void 0!==s?s:this.getItem(i.row)},$tooltipOut:function(){return Te._hide_tooltip(),delete Te._tooltip.type.column,null},showOverlay:function(t){if(!this._datatable_overlay){var e=nt("DIV",{class:"webix_overlay"},"");this._body.appendChild(e),this._datatable_overlay=e}this._datatable_overlay.innerHTML=t},hideOverlay:function(){this._datatable_overlay&&(rt(this._datatable_overlay),this._datatable_overlay=null)},mapCells:function(t,e,i,s,n,a){if(null===t&&this.data.order.length>0&&(t=this.data.order[0]),null===e&&(e=this.columnId(0)),null===i&&(i=this.data.order.length),null===s&&(s=this._settings.columns.length),this.exists(t)&&(t=this.getIndexById(t),null!==(e=this.getColumnIndex(e))))for(var r=0;r<i&&t+r<this.data.order.length;r++){var o=t+r,l=this.data.order[o];if(l)for(var h=this.getItem(l),c=0;c<s&&e+c<this._settings.columns.length;c++){var d=e+c,u=this.columnId(d),f=n(h[u],l,u,r,c);a||(h[u]=f)}}},_call_onparse:function(t,e){!this._settings.columns&&t.getConfig&&this.define("columns",t.getConfig(e))},_autoDetectConfig:function(){var t=this.getItem(this.getFirstId()),e=this._settings.columns=[];for(var i in t)"id"!=i&&"$"!=i[0]&&e.push({id:i,header:i[0].toUpperCase()+i.substr(1),sort:"string",editor:"text"});e.length&&(e[0].fillspace=!0),void 0===this._settings.select&&this.define("select","row")}},Mo=t.protoUI(To,{},Di,ks,Ei,Vi,Zi,is,Ai,Io,$s,{clearValidation:function(){for(var t in this.data._marks)this._clear_invalid_css(t);this.data.clearMark("webix_invalid",!0)},_mark_invalid:function(t,e){for(var i in this._clear_invalid_css(t),e)this.addCellCss(t,i,"webix_invalid_cell");this.addCss(t,"webix_invalid")},_clear_invalid:function(t){this._clear_invalid_css(t),this.removeCss(t,"webix_invalid")},_clear_invalid_css:function(t){var e=this.data.getMark(t,"$cellCss");if(e)for(var i in e)e[i]=e[i].replace("webix_invalid_cell","").replace("  "," ")},addRowCss:function(t,e,i){this.addCss(t,e,i)},removeRowCss:function(t,e,i){this.removeCss(t,e,i)},addCellCss:function(t,e,i,s){var n=this.data.getMark(t,"$cellCss"),a=n||{},r=a[e]||"";a[e]=r.replace(i,"").replace("  "," ")+" "+i,n||this.data.addMark(t,"$cellCss",!1,a,!0),s||this.refresh(t)},removeCellCss:function(t,e,i,s){var n=this.data.getMark(t,"$cellCss");if(n){var a=n[e]||"";a&&(n[e]=a.replace(i,"").replace("  "," ")),s||this.refresh(t)}}},Eo,Hi,Ao,ko,So,wo,yo,{},xo,bo,mo,{},vo,_o,po,{},{},li,Ui,Ii,$i,Qi,Ji,si.view,B,Ye),Po={api:To,view:Mo},Lo={name:"treetable",$init:function(){for(var e in t.extend(this.data,Ps,!0),t.extend(this.type,zs),t.extend(this,Es,!0),As)this.on_click[e]||(this.on_click[e]=this._unwrap_id(As[e]));this.type.treetable=Vt("{common.space()}{common.icon()} {common.folder()}"),this.type.treecheckbox=function(t){return t.indeterminate&&!t.nocheckbox?"<div class='webix_tree_checkbox webix_indeterminate'></div>":zs.checkbox.apply(this,arguments)},this.data.provideApi(this,!0),this._viewobj.setAttribute("role","treegrid")},_drag_order_complex:!1,_unwrap_id:function(t){return function(e,i){return i=i.row,t.call(this,e,i)}},_close_branches:function(t){for(var e=this._settings.prerender?t.source:[t.start],i=0;i<e.length;i++)this.close(e[i])},getState:function(){var e=Di.getState.call(this);return t.extend(e,Cs.getState.call(this)),e},setState:function(t){Cs.setState.call(this,t)&&Di.setState.call(this,t)},clipboard_setter:function(e){return t.extend(this._paste,Ls),ks.clipboard_setter.call(this,e)},_run_load_next:function(t,e){for(var i=0;i<t.start;i++){var s=this.data.order[i];s&&1!=this.getItem(s).$level&&t.start--}return Po.api._run_load_next.call(this,t,e)}},zo=(t.protoUI(Lo,Cs,Ms,Is,Po.view),function(t,e){Zt("webix_debug_inspector_win")||Xt({id:"webix_debug_inspector_win",view:"window",top:2,left:0,width:350,height:350,head:!1,autofit:!1,body:{cols:[{width:10},{type:"clean",rows:[{view:"toolbar",elements:[{view:"label",value:"",id:"webix_debug_inspector_head"},{view:"button",width:100,value:"Hide",type:"custom",click:function(){zo()}}]},{id:"webix_debug_inspector",nameWidth:150,view:"property",scroll:"y",elements:[],on:{onaftereditstop:function(t,e){if(t.old!=t.value){var i=t.value;if("true"===i||"false"===i)i="true"===i;else{var s=parseInt(i,10);s==i&&(i=s)}var n=Zt(this.config.view);n.define(e.id,i),n.refreshColumns?n.refreshColumns():n.refresh&&n.refresh(),n.resize()}}}}]}]}});var i=Zt("webix_debug_inspector_win");if(t){var s=function(t){var e={},i=[];for(var s in(t=Zt(t)).config)Do[s]||"object"!=u(t.config[s])&&void 0!==t.config[s]&&"function"!=typeof t.config[s]&&("view"==s||"id"==s?i.push({label:s,id:s}):i.push({label:s,type:"text",id:s}),t.defaults[s]==t.config[s]&&(i[i.length-1].css={color:"#888"}),e[s]=t.config[s]);return i.sort(function(t,e){return!t.css&&e.css?-1:t.css&&!e.css?1:t.id>e.id?1:t.id==e.id?0:-1}),{elements:i,data:e,head:" ["+t.name+"] <strong>"+t._settings.id+"</strong>"}}(t),n=document.body.offsetWidth,a=document.body.offsetHeight,r=e?dt(e):{x:0,y:0};i.define("height",Math.max(350,a-4)),i.resize();var o=Zt("webix_debug_inspector");o.define("elements",s.elements),o.define("view",t),i.show({x:r.x>n/2?0:n-370,y:0}),Zt("webix_debug_inspector").setValues(s.data),Zt("webix_debug_inspector_head").setValue(s.head)}else i.hide()}),No=function(t){return t>=1e5?"Any":t},$o=function(t,e,i){if(window.console.log((t==i?">>":"  ")+e+t.name+" / "+t.config.id),e+="  ",t._cells)for(var s=0;s<t._cells.length;s++)$o(t._cells[s],e,i);t._head_cell&&$o(t._head_cell,e,i),t._body_cell&&$o(t._body_cell,e,i)};W("onLoadError",function(t,e){var i;try{i=t.responseText}catch(t){i=""}var s="Data loading error, check console for details";if(0===(i=i||"[EMPTY DATA]").indexOf("<?php")?s="PHP support missed":0===i.indexOf("WEBIX_ERROR:")&&(s=i.replace("WEBIX_ERROR:","")),_n({type:"debug",text:s,expire:-1}),window.console){var n=window.console;n.log("Data loading error"),n.log("Object:",e),n.log("Response:",i),t&&n.log("XHTTP:",t)}}),He(function(){var t=document.location.href;0===t.indexOf("file:")&&_n({type:"error",text:"Please open sample by http,<br>not as file://",expire:-1})});var Do={_inner:!0,awidth:!0,cheight:!0,bheight:!0,aheight:!0},Ho={view:"contextmenu",id:"webix:debugmenu",on:{onBeforeShow:function(t){if(!t.ctrlKey)return!1;var e=lt(t,"view_id");if(!e)return!1;this.config.lastTarget=e,U(),L(function(){G()})},onShow:function(){var t=Zt(this.config.lastTarget),e="<span style='color:#888'>"+t._settings.id+"<sup style='float:right'>["+t.name+"]</sup></span>";document.getElementById("webix_debug_cmx").innerHTML=e}},data:["<div id='webix_debug_cmx'></div>",{id:"inspect",value:"Inspect"},{id:"docs",value:"Documentation"},{value:"Log to Console",submenu:[{id:"size",value:"Sizes"},{id:"tree",value:"Tree"},{id:"dump",value:"Dump"}]}],click:function(t,e){var i=Zt(this.config.lastTarget);if("dump"==t&&(window.console.info("\n"+i.name+" / "+i.config.id),window.console.log("\nView: ",i,", Config: ",i.config,", Data: ",i.data),window.console.log(i.$view)),"tree"==t){for(var s=i;i.getParentView();)i=i.getParentView();window.console.log(""),$o(i,"",s)}if("size"==t){window.console.info(""),window.console.info("\n"+i.name+" / "+i.config.id),window.console.info("\n[min]   ",i.config.width," x ",i.config.height);var n=i.$getSize(0,0);window.console.info("[max]    ",No(n[1])," x ",No(n[3])+(i.config.autoheight?", auto height":"")),window.console.info("[gravity]   ",i.config.gravity),window.console.info("\n[content]    ",i._content_width," x ",i._content_height),window.console.info("[last set]   ",i._last_size[0]," x ",i._last_size[1]),i._settings._inner?window.console.info("\n[borders]   ","left:",!i._settings._inner.left,"\ttop:",!i._settings._inner.top,"\tright:",!i._settings._inner.right,"\tbottom:",!i._settings._inner.bottom):window.console.info("\n[borders]   none")}"docs"==t&&window.open("http://docs.webix.com/api__refs__ui."+i.name+".html","__blank"),"inspect"==t&&zo(this.config.lastTarget,e)}};He(function(){Ho.master=document.body,Xt(Ho)});var Fo=t.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(t){this.data=t||{};var e=t&&t.id?t.id:$();this._settings={id:e},Xt.views[e]=this},getValues:function(){return this.data},setValues:function(e,i){this.data=i?t.extend(this.data,e,!0):e,this.callEvent("onChange",[e])},refresh:function(){this.callEvent("onBindRequest")}},B,Ke,Ae,Ye),Ro=t.proto({name:"DataValue",isVisible:function(){return!0},$init:function(t){t&&!P(t.value)||(this.data=t||"");var e=t&&t.id?t.id:$();this._settings={id:e},Xt.views[e]=this},setValue:function(t){this.data=t,this.callEvent("onChange",[t])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},B,Ke),jo=t.proto({name:"TreeCollection",$init:function(){t.extend(this.data,Ps,!0),this.data.provideApi(this,!0),t.extend(this,Es,!0)}},Is,ja);t.Date=mn,t.Number=bn,t.promise=Mt,t.DataCollection=ja,t.DataRecord=Fo,t.DataValue=Ro,t.TreeCollection=jo,t.ActiveContent=ne,t.AtomDataLoader=Ae,t.AtomRender=Ie,t.AutoScroll=Ee,t.AutoTooltip=li,t.BaseBind=Ke,t.BindSource=qe,t.Canvas=hi,t.CodeParser=Nt,t.CollectionBind=Xe,t.ContextHelper=Si,t.CopyPaste=Ci,t.CustomPrint=Ai,t.CustomScroll=null,t.DataMarks=Ii,t.DataMove=Ei,t.DataLoader=$i,t.DataState=Di,t.DataStore=Ni,t.Destruction=We,t.DragControl=_i,t.DragItem=Hi,t.DragOrder=Fi,t.EditAbility=Vi,t.EventSystem=B,t.FlexLayout=Yi,t.Group=Ui,t.GroupMethods=Wi,t.GroupStore=Xi,t.HTMLOptions=Gi,t.HtmlMap=qi,t.IdSpace=Ki,t.KeysNavigation=Zi,t.MapCollection=Ji,t.Modality=mi,t.MouseEvents=Qi,t.Movable=vi,t.NavigationButtons=ts,t.OverlayBox=es,t.PagingAbility=is,t.ProgressBar=ss,t.RecordBind=Ge,t.RenderStack=ns,t.ResizeArea=bi,t.SingleRender=ri,t.Scrollable=as,t.SelectionModel=rs,t.Settings=Ye,t.Sparklines=ws,t.TablePaste=ks,t.TooltipControl=Te,t.Touch=fi,t.TreeAPI=Cs,t.TreeClick=As,t.TreeDataLoader=Is,t.TreeDataMove=Es,t.TreeRenderStack=Ts,t.TreeStateCheckbox=Ms,t.TreeStore=Ps,t.TreeTablePaste=Ls,t.TreeType=zs,t.UIManager=Ve,t.Undo=Ri,t.UploadDriver=Ns,t.ValidateCollection=$s,t.ValidateData=Mi,t.ValueBind=Ue,t.Values=Ds,t.VirtualRenderStack=Hs,t.VRenderStack=Fs,t.html=Pn,t.skin=ui,t.debug=function(t){if(t)if("object"!==u(t))m={events:!0};else for(var e in t)m[e]=t[e];else m={}},t.i18n=St,t.ready=He,t.env=i,t.color=os,t.csv=Ss,t.clipbuffer=ki,t.history=yn,t.storage=xe,t.template=Vt,t.type=Yt,t.markup=wn,t.editors=Bi,t.animate=ci,t.print=function(t,e){var i=Zt(t);i&&i.$printView&&(i=i.$printView()),_(i,"non-existing view for printing"),i&&(i.callEvent&&i.callEvent("onBeforePrint",[e]),function(t){pt(document.body,"webix_print"),t.docHeader&&En("Header",t),t.docFooter&&En("Footer",t),it("@media print { @page{ size:"+t.paper+" "+t.mode+";margin-top:"+t.margin.top+"px;margin-bottom:"+t.margin.bottom+"px;margin-right:"+t.margin.right+"px;margin-left:"+t.margin.left+"px;}}","print")}(e=function(t){return(t=t||{}).paper=kn[(t.paper||"").toLowerCase()]||"A4",t.mode=An[t.mode]?t.mode:"portrait",t.fit=Cn[t.fit]?t.fit:"page",t.scroll=t.scroll||!1,t.size=In[t.paper],t.margin=t.margin||0===t.margin?t.margin:{},Sn=isNaN(1*t.margin)?Sn:t.margin,t.margin={top:t.margin.top||0===t.margin.top?t.margin.top:Sn,bottom:t.margin.bottom||0===t.margin.bottom?t.margin.bottom:Sn,right:t.margin.right||0===t.margin.right?t.margin.right:Sn,left:t.margin.left||0===t.margin.left?t.margin.left:Sn},t}(e)),i.$customPrint&&!0!==i.$customPrint(e)||function(t,e){var i=t.$view.cloneNode(!0),s=t.$view.getElementsByTagName("canvas");if(s.length)for(var n=s.length-1;n>=0;n--){var a=i.getElementsByTagName("canvas")[n].getContext("2d");a.drawImage(s[n],0,0)}ot(i,e.docFooter,document.body),pt(i,"webix_ui_print"),!e.scroll&&(t._dataobj&&t.data&&t.data.pull||t.getBody)&&pt(i,"webix_print_noscroll"),window.print(),rt(i)}(i,e),function(t){_t(document.body,"webix_print"),st("print"),t.docHeader&&rt(t.docHeader),t.docFooter&&rt(t.docFooter)}(e))},t.rules=Ti,t.patterns=Tn,t.fullscreen=Mn,t.version="6.4.0",t.name="core",t.level_in=C,t.level_out=A,t.clone=I,t.copy=E,t.single=function(t){var e=null;return function(){return e||(e=new t({})),e._reinit&&e._reinit.apply(e,arguments),e}},t.bind=T,t.exec=M,t.wrap=function(t,e){return t?function(){var i=t.apply(this,arguments);return e.apply(this,arguments),i}:e},t.isUndefined=P,t.delay=L,t.once=z,t.uid=$,t.toNode=D,t.toArray=H,t.toFunctor=F,t.isArray=R,t.isDate=j,t.PowerArray=O,t._events_final_destructor=te,t._event=ee,t.event=ie,t.eventRemove=se,t.callEvent=Y,t.attachEvent=W,t.detachEvent=X,t.blockEvent=U,t.unblockEvent=G,t.mapEvent=function(t){return V.mapEvent(t)},t.hasEvent=function(t){return V.hasEvent(t)},t.stringify=kt,t.toPNG=function(t,e){var s=Mt.defer();return ve(i.cdn+"/extras/html2canvas-1.0.min.js").then(function(){"string"==typeof e&&(e={filename:e}),e=e||{};var i=Zt(t);if(i&&i.$exportView&&(i=i.$exportView(e)),_(i,Rs),!i)return s.reject(Rs);var n=i?i.$view:D(t),a=(e.filename||"Data")+".png";return window.html2canvas(n,{background:"#fff",logging:!1}).then(function(t){var i=function(i){!1!==e.download&&mt(i,a),t.remove(),s.resolve(i)};t.msToBlob?i(t.msToBlob()):t.toBlob(i,"image/png")}),s})},t.toCSV=function(t,e){e=e||{};var i=Zt(t);if(i&&i.$exportView&&(i=i.$exportView(e)),_(i,Rs),!i)return Mt.reject(Rs);e.export_mode="csv",e.filterHTML=!0;var s=Os(i,e),n=function(t){return Ss.stringify(t)}(Bs(i,e,s)),a=(e.filename||"Data")+".csv",r=new Blob(["\ufeff"+n],{type:"text/csv"});return!1!==e.download&&mt(r,a),Mt.resolve(r)},t.toPDF=function(e,s){return ve([i.cdn+"/extras/pdfjs.js",i.cdn+"/extras/html2canvas-1.0.min.js"]).then(function(){(s=s||{}).export_mode="pdf",s._export_font=Vs,s.fontName=s.fontName||"pt-sans.regular",s.display=s.display||"table",e=R(e)?e:[e];for(var n=[],a=0;a<e.length;a++){e[a].id||(e[a]={id:e[a]});var r=Zt(e[a].id),o=t.extend(e[a].options||{},s);if(r&&r.$exportView&&(r=r.$exportView(o)),r&&("table"!==o.display&&(n.push({node:r.$view,viewOptions:o}),s.autowidth&&(s.width=Math.max(s.width||0,r.$view.$width))),"image"!==o.display&&r.data&&r.data.pull)){var l=Os(r,o);n.push({scheme:l,data:Bs(r,o,l),viewOptions:o}),s.autowidth&&Gs(l,s)}_(r,Rs)}if(0==n.length)return Mt.reject(Rs);if(Vs[s.fontName])return s._export_font=Vs[s.fontName],Ws(n,s).then(function(t){return Ys(t,s)});var h=Mt.defer();return pdfjs.load(i.cdn+"/extras/"+s.fontName+".ttf",function(t,e){if(t)throw t;s._export_font=Vs[s.fontName]=new pdfjs.TTFFont(e),h.resolve(Ws(n,s).then(function(t){return Ys(t,s)}))}),h})},t.toExcel=Ks,t.alert=function(){var t=fn.apply(this,arguments);return t.type=t.type||"alert",cn(t)},t.confirm=gn,t.modalbox=pn,t.message=_n,t.editStop=function(){Y("onEditEnd",[])},t.ajax=zt,t.jsonp=zn,t.DataDriver=be,t.dp=Li,t.DataProcessor=zi,t.remote=Dn,t.require=ve,t.proxy=Ce,t.send=function(t,e,i,s){var n=nt("FORM",{target:s||"_self",action:t,method:i||"POST"},"");for(var a in e){var r=nt("INPUT",{type:"hidden",name:a,value:e[a]},"");n.appendChild(r)}n.style.display="none",document.body.appendChild(n),n.submit(),document.body.removeChild(n)},t.ui=Xt,t.$$=Zt,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,i){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.reviver=e.replacer=e.deleteCookie=e.setCookie=e.getCookie=e.Auth=void 0;var n=function(){function t(){}return t.prototype.auth=function(){var t=new Map;return t.set("main",!0),t.set("aboutMethod",!0),t.set("aboutCompany",!0),t.set("analyse",!0),t.set("contract",!0),t.set("support",!0),t.set("requirements",!0),t.set("chat",!0),t.set("contacts",!0),t.set("account",!0),a("rights",JSON.stringify(t,o),{secure:!0,"max-age":3600}),!0},t.prototype.deauth=function(){return r("rights"),!0},t}();function a(t,e,i){(i=s({path:"/"},i)).expires instanceof Date&&(i.expires=i.expires.toUTCString());var n=encodeURIComponent(t)+"="+encodeURIComponent(e);for(var a in i){n+="; "+a;var r=i[a];!0!==r&&(n+="="+r)}document.cookie=n}function r(t){a(t,"",{"max-age":-1})}function o(t,e){return e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e}e.Auth=n,e.getCookie=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},e.setCookie=a,e.deleteCookie=r,e.replacer=o,e.reviver=function(t,e){return"object"==typeof e&&null!==e&&"Map"===e.dataType?new Map(e.value):e}},function(t,e){t.exports={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}}},function(t,e,i){var s=i(10).isArray;t.exports={copyOptions:function(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i},ensureFlagExists:function(t,e){t in e&&"boolean"==typeof e[t]||(e[t]=!1)},ensureSpacesExists:function(t){"spaces"in t&&("number"==typeof t.spaces||"string"==typeof t.spaces)||(t.spaces=0)},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||s(t.alwaysArray))||(t.alwaysArray=!1)},ensureKeyExists:function(t,e){t+"Key"in e&&"string"==typeof e[t+"Key"]||(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}}},function(t,e,i){var s=i(6).Buffer,n=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var a=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!n(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=r)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};function r(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function l(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}a.prototype.write=function(t){for(var e="";this.charLength;){var i=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,i),this.charReceived+=i,this.charReceived<this.charLength)return"";if(t=t.slice(i,t.length),!((n=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var s=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,s),s-=this.charReceived);var n;s=(e+=t.toString(this.encoding,0,s)).length-1;if((n=e.charCodeAt(s))>=55296&&n<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),t.copy(this.charBuffer,0,0,a),e.substring(0,s)}return e},a.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var i=t[t.length-e];if(1==e&&i>>5==6){this.charLength=2;break}if(e<=2&&i>>4==14){this.charLength=3;break}if(e<=3&&i>>3==30){this.charLength=4;break}}this.charReceived=e},a.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var i=this.charReceived,s=this.charBuffer,n=this.encoding;e+=s.slice(0,i).toString(n)}return e}},function(t,e,i){"use strict";(function(e,s,n){var a=i(7);function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var s=t.entry;t.entry=null;for(;s;){var n=s.callback;e.pendingcb--,n(i),s=s.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=m;var o,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?s:a;m.WritableState=v;var h=i(3);h.inherits=i(2);var c={deprecate:i(45)},d=i(30),u=i(14).Buffer,f=n.Uint8Array||function(){};var g,p=i(29);function _(){}function v(t,e){o=o||i(0),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var s=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,s=i.sync,n=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,s,n){--e.pendingcb,i?(a(n,s),a(k,t,e),t._writableState.errorEmitted=!0,t.emit("error",s)):(n(s),t._writableState.errorEmitted=!0,t.emit("error",s),k(t,e))}(t,i,s,e,n);else{var r=w(i);r||i.corked||i.bufferProcessing||!i.bufferedRequest||y(t,i),s?l(x,t,i,r,n):x(t,i,r,n)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function m(t){if(o=o||i(0),!(g.call(m,this)||this instanceof o))return new m(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function b(t,e,i,s,n,a,r){e.writelen=s,e.writecb=r,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function x(t,e,i,s){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,s(),k(t,e)}function y(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var s=e.bufferedRequestCount,n=new Array(s),a=e.corkedRequestsFree;a.entry=i;for(var o=0,l=!0;i;)n[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;n.allBuffers=l,b(t,e,!0,e.length,n,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new r(e)}else{for(;i;){var h=i.chunk,c=i.encoding,d=i.callback;if(b(t,e,!1,e.objectMode?1:h.length,h,c,d),i=i.next,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=i,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),k(t,e)})}function k(t,e){var i=w(e);return i&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}h.inherits(m,d),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(t){return!!g.call(this,t)||t&&t._writableState instanceof v}})):g=function(t){return t instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(t,e,i){var s=this._writableState,n=!1,r=function(t){return u.isBuffer(t)||t instanceof f}(t)&&!s.objectMode;return r&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(i=e,e=null),r?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof i&&(i=_),s.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),a(e,i)}(this,i):(r||function(t,e,i,s){var n=!0,r=!1;return null===i?r=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r&&(t.emit("error",r),a(s,r),n=!1),n}(this,s,t,i))&&(s.pendingcb++,n=function(t,e,i,s,n,a){if(!i){var r=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,i));return e}(e,s,n);s!==r&&(i=!0,n="buffer",s=r)}var o=e.objectMode?1:s.length;e.length+=o;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:s,encoding:n,isBuf:i,callback:a,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,o,s,n,a);return l}(this,s,r,t,e,i)),n},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},m.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},m.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(t,e,i){var s=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||function(t,e,i){e.ending=!0,k(t,e),i&&(e.finished?a(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,s,i)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),m.prototype.destroy=p.destroy,m.prototype._undestroy=p.undestroy,m.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(4),i(47).setImmediate,i(5))},function(t,e,i){var s=i(6),n=s.Buffer;function a(t,e){for(var i in t)e[i]=t[i]}function r(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=s:(a(s,e),e.Buffer=r),a(n,r),r.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},r.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var s=n(t);return void 0!==e?"string"==typeof i?s.fill(e,i):s.fill(e):s.fill(0),s},r.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},r.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s.SlowBuffer(t)}},function(t,e,i){(e=t.exports=i(31)).Stream=e,e.Readable=e,e.Writable=i(13),e.Duplex=i(0),e.Transform=i(28),e.PassThrough=i(44)},function(t,e,i){(function(t,s){var n=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var s=arguments,a=s.length,r=String(t).replace(n,function(t){if("%%"===t)return"%";if(i>=a)return t;switch(t){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(t){return"[Circular]"}default:return t}}),l=s[i];i<a;l=s[++i])p(l)||!x(l)?r+=" "+l:r+=" "+o(l);return r},e.deprecate=function(i,n){if(m(t.process))return function(){return e.deprecate(i,n).apply(this,arguments)};if(!0===s.noDeprecation)return i;var a=!1;return function(){if(!a){if(s.throwDeprecation)throw new Error(n);s.traceDeprecation?console.trace(n):console.error(n),a=!0}return i.apply(this,arguments)}};var a,r={};function o(t,i){var s={seen:[],stylize:h};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),g(i)?s.showHidden=i:i&&e._extend(s,i),m(s.showHidden)&&(s.showHidden=!1),m(s.depth)&&(s.depth=2),m(s.colors)&&(s.colors=!1),m(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=l),c(s,t,s.depth)}function l(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function h(t,e){return t}function c(t,i,s){if(t.customInspect&&i&&S(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var n=i.inspect(s,t);return v(n)||(n=c(t,n,s)),n}var a=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(_(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(p(e))return t.stylize("null","null")}(t,i);if(a)return a;var r=Object.keys(i),o=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(i)),w(i)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return d(i);if(0===r.length){if(S(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(y(i))return t.stylize(Date.prototype.toString.call(i),"date");if(w(i))return d(i)}var h,x="",k=!1,C=["{","}"];(f(i)&&(k=!0,C=["[","]"]),S(i))&&(x=" [Function"+(i.name?": "+i.name:"")+"]");return b(i)&&(x=" "+RegExp.prototype.toString.call(i)),y(i)&&(x=" "+Date.prototype.toUTCString.call(i)),w(i)&&(x=" "+d(i)),0!==r.length||k&&0!=i.length?s<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),h=k?function(t,e,i,s,n){for(var a=[],r=0,o=e.length;r<o;++r)I(e,String(r))?a.push(u(t,e,i,s,String(r),!0)):a.push("");return n.forEach(function(n){n.match(/^\d+$/)||a.push(u(t,e,i,s,n,!0))}),a}(t,i,s,o,r):r.map(function(e){return u(t,i,s,o,e,k)}),t.seen.pop(),function(t,e,i){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(h,x,C)):C[0]+x+C[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,i,s,n,a){var r,o,l;if((l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),I(s,n)||(r="["+n+"]"),o||(t.seen.indexOf(l.value)<0?(o=p(i)?c(t,l.value,null):c(t,l.value,i-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+o.split("\n").map(function(t){return"   "+t}).join("\n")):o=t.stylize("[Circular]","special")),m(r)){if(a&&n.match(/^\d+$/))return o;(r=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=t.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=t.stylize(r,"string"))}return r+": "+o}function f(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function p(t){return null===t}function _(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return x(t)&&"[object RegExp]"===k(t)}function x(t){return"object"==typeof t&&null!==t}function y(t){return x(t)&&"[object Date]"===k(t)}function w(t){return x(t)&&("[object Error]"===k(t)||t instanceof Error)}function S(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(a)&&(a=s.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var i=s.pid;r[t]=function(){var s=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,s)}}else r[t]=function(){};return r[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=g,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=_,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=x,e.isDate=y,e.isError=w,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(52);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=i(51),e._extend=function(t,e){if(!e||!x(e))return t;for(var i=Object.keys(e),s=i.length;s--;)t[i[s]]=e[i[s]];return t}}).call(this,i(5),i(4))},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,r,o,l,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(a(i=this._events[t]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(n(i))for(o=Array.prototype.slice.call(arguments,1),r=(h=i.slice()).length,l=0;l<r;l++)h[l].apply(this,o);return!0},i.prototype.addListener=function(t,e){var r;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!s(e))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var i,a,r,o;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=(i=this._events[t]).length,a=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(i)){for(o=r;o-- >0;)if(i[o]===e||i[o].listener&&i[o].listener===e){a=o;break}if(a<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&s(e,t,i);return n(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(8)),o=function(){function t(){}return t.prototype.config=function(){return{view:"window",id:"renameWindow",position:"center",head:"    ",modal:!0,width:500,body:{rows:[{view:"form",id:"renameForm",elements:[{rows:[{id:"name",name:"name",view:"text",inputHeight:30,label:"",labelWidth:105,tooltip:"",required:!0}]}]},{cols:[{view:"button",id:"confirm",label:"",type:"form"},{view:"button",id:"cancel",label:"",type:"danger"}]}]}}},t.prototype.init=function(){this.view=r.ui(this.config()),this.buttons={confirm:r.$$("confirm"),cancel:r.$$("cancel")},this.attachEvents()},t.prototype.show=function(){this.view.show()},t.prototype.close=function(){this.view.destructor()},t.prototype.attachEvents=function(){var t=this;this.buttons.confirm.attachEvent("onItemClick",function(){r.message(" "),t.close()}),this.buttons.cancel.attachEvent("onItemClick",function(){t.view.destructor()})},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyseResults=void 0;var s=function(){function t(){}return t.prototype.set=function(t,e,i,s,n,a){this.id=t,this.name=e,this.status=i,this.loadDate=s,this.countUsers=n,this.countTasks=a},t.prototype.getAllBanks=function(){return new Promise(function(e){var i=new t;i.set(1,"  ","",new Date,326,40);var s=new t;s.set(2,"  ","",new Date,757,35);var n=new t;n.set(3,"  ","",new Date,922,30);var a=new t;a.set(4,"  "," ",new Date,485,35);var r=new t;r.set(5,"  ","",new Date,245,25),e([i,s,n,a,r])})},t.prototype.sendByEmail=function(t,e){return new Promise(function(){})},t.prototype.upload=function(t){return new Promise(function(){})},t.prototype.downloadAnalysed=function(t){return new Promise(function(){})},t.prototype.downloadRaw=function(t){return new Promise(function(){})},t.prototype.rename=function(t,e){return console.log("rename"),new Promise(function(t,e){t()})},t}();e.AnalyseResults=s,e.default=new s},function(t,e,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&s(e,t,i);return n(e,t),e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(i(8)),l=r(i(19)),h=function(){function t(){}return t.prototype.config=function(){return{view:"window",id:"renameWindow",position:"center",head:" ",modal:!0,width:500,body:{rows:[{view:"form",id:"renameForm",elements:[{rows:[{id:"name",name:"name",view:"text",inputHeight:30,label:"",labelWidth:105,tooltip:"",required:!0}]}]},{cols:[{view:"button",id:"confirm",label:"",type:"form"},{view:"button",id:"cancel",label:"",type:"danger"}]}]}}},t.prototype.setName=function(t){o.$$("name").setValue(t)},t.prototype.init=function(t){this.parentView=t,this.view=o.ui(this.config()),this.buttons={confirm:o.$$("confirm"),cancel:o.$$("cancel")},this.form=o.$$("renameForm"),this.attachEvents()},t.prototype.show=function(){this.setName(this.parentView.getSelectedItem().name),this.view.show()},t.prototype.close=function(){this.view.destructor()},t.prototype.attachEvents=function(){var t=this;this.buttons.confirm.attachEvent("onItemClick",function(){var e=t.form.getValues(),i=t.parentView.getSelectedItem();l.default.rename(i.id,e.name).then(function(s){t.parentView.updateItem(i.id,e)}).catch(function(t){console.log(t)}),t.close()}),this.buttons.cancel.attachEvent("onItemClick",function(){t.view.destructor()})},t}();e.default=h},function(t,e){},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=i(9),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.config=function(){return{type:"clean",paddingX:5,css:"app_layout",cols:[{paddingX:5,paddingY:10,rows:[{view:"toolbar",id:"top:menu",cols:[{localId:"main",view:"button",value:"",align:"left"},{localId:"contract",view:"button",value:" ",align:"left"},{localId:"analyse",view:"button",value:"",align:"left"},{view:"menu",id:"support",width:130,data:[{id:"2",value:". ",submenu:[{value:""},{value:""}]}]},{localId:"contacts",view:"button",value:"",align:"left"},{localId:"aboutCompany",view:"button",value:" ",align:"left"},{localId:"aboutMethod",view:"button",value:" ",align:"left"},{localId:"account",view:"button",value:"",align:"left"}]},{type:"wide",paddingY:10,paddingX:5,rows:[{$subview:!0}]}]}]}},e.prototype.init=function(){var t=this;this.toolbar={main:this.$$("main"),contract:this.$$("contract"),analyse:this.$$("analyse"),support:this.$$("support"),contacts:this.$$("contacts"),aboutCompany:this.$$("aboutCompany"),aboutMethod:this.$$("aboutMethod"),account:this.$$("account")},this.on(this.app,"onLogIn",function(){t.checkPermissions()}),this.on(this.app,"onLogOut",function(){t.checkPermissions()}),this.$$("main").attachEvent("onItemClick",function(){t.show("mainPage")}),this.toolbar.analyse.attachEvent("onItemClick",function(){t.show("analyse")}),this.$$("contract").attachEvent("onItemClick",function(){t.show("contract")}),this.toolbar.account.attachEvent("onItemClick",function(){t.show("auth")}),this.toolbar.support.attachEvent("onItemClick",function(){}),this.use(n.plugins.Menu,"top:menu")},e.prototype.checkPermissions=function(){var t=this;if(!a.getCookie("rights"))return this.toolbar.contract.hide(),this.toolbar.analyse.hide(),this.toolbar.support.hide(),this.toolbar.contacts.hide(),this.toolbar.aboutCompany.hide(),void this.toolbar.aboutMethod.hide();JSON.parse(a.getCookie("rights"),a.reviver).forEach(function(e,i,s){var n=t.$$(i);n&&n.show()})},e}(n.JetView);e.default=r},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.config=function(){var t="https://docs.webix.com/samples/30_comments/common/imgs/";return{rows:[{template:"<div></div>",height:100},{template:'<div style="text-align:center;font-size:20pt;">TESTER\n              <br>\n              <div style="font-size: 15pt">\n                      \n                    \n                </div>\n            </div>\n<br>\n           \n        ',height:200},{rows:[{cols:[{rows:[{template:'<div style="text-align: center;font-size: 15pt">    </div>'}]},{view:"comments",currentUser:1,data:[{id:1,user_id:1,date:"2018-06-10 18:45",text:" . ."},{id:2,user_id:2,date:"2018-06-12 19:40",text:"    ,        "}],users:[{id:1,value:"Corvo Attano",image:t+"corvo.jpg"},{id:2,value:"Daisy Fitzroy",image:t+"daisy.jpg"},{id:3,value:"Glenn Crake",image:t+"glenn.jpg"},{id:4,value:"Me",image:t+"tomek.jpg"},{id:5,value:"Leia Organa",image:t+"leia.jpg"}]}]}]}]}},e.prototype.init=function(t){},e}(i(1).JetView);e.default=n},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&n(e,t,i);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=r(i(8)),h=i(1),c=o(i(19)),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.config=function(){return{view:"window",id:"renameWindow",position:"center",head:" ",modal:!0,width:500,body:{rows:[{view:"form",id:"renameForm",elements:[{rows:[{id:"name",name:"name",view:"text",inputHeight:30,label:"",labelWidth:105,tooltip:"",required:!0}]}]},{cols:[{view:"button",id:"confirm",label:"",type:"form"},{view:"button",id:"cancel",label:"",type:"danger"}]}]}}},e.prototype.setName=function(t){l.$$("name").setValue(t)},e.prototype.init=function(t){console.log(t),this.buttons={confirm:l.$$("confirm"),cancel:l.$$("cancel")},this.form=l.$$("renameForm"),this.attachEvents()},e.prototype.close=function(){this.view.destructor()},e.prototype.attachEvents=function(){var t=this;this.buttons.confirm.attachEvent("onItemClick",function(){var e=t.form.getValues(),i=t.parentView.getSelectedItem();c.default.rename(i.id,e.name).then(function(s){t.parentView.updateItem(i.id,e)}).catch(function(t){console.log(t)})}),this.buttons.cancel.attachEvent("onItemClick",function(){t.show("../")})},e}(h.JetView);e.default=d},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.config=function(){return{rows:[{view:"form",localId:"contract_form",elements:[{view:"text",label:" ",labelWidth:100,name:"email",required:!0},{height:100,scroll:"Y",template:"  :\n\t\t\t\t\t\t\t"},{height:100,scroll:"Y",template:"  :"},{height:25,template:" :"},{localId:"",view:"checkbox",labelRight:"  "},{localId:"",view:"checkbox",labelRight:"   "},{localId:"",view:"checkbox",labelRight:"           "},{margin:5,cols:[{localId:"agree",view:"button",value:" ",css:"webix_primary"}]}]}]}},e.prototype.init=function(t){this.view={form:this.$$("contract_form"),buttons:{agree:this.$$("agree")}},this.attachEvents()},e.prototype.attachEvents=function(){var t=this;this.view.buttons.agree.attachEvent("onItemClick",function(e){t.view.form.validate()})},e}(i(1).JetView);e.default=n},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),a=i(9),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.config=function(){return{rows:[{view:"form",localId:"auth_form",elements:[{view:"text",label:" ",labelWidth:100,name:"login",required:!0},{view:"text",label:" ",labelWidth:100,name:"password",required:!0},{margin:5,cols:[{localId:"agree",view:"button",value:"",css:"webix_primary"},{localId:"wrongPassword",view:"button",value:" ",css:"webix_primary"}]}]}]}},e.prototype.init=function(t){this.view={form:this.$$("contract_form"),buttons:{agree:this.$$("agree"),wrongPassword:this.$$("wrongPassword")}},this.attachEvents()},e.prototype.attachEvents=function(){var t=this;this.view.buttons.agree.attachEvent("onItemClick",function(e){(new a.Auth).auth()&&t.app.callEvent("onLogIn",[])}),this.view.buttons.wrongPassword.attachEvent("onItemClick",function(e){(new a.Auth).deauth()&&t.app.callEvent("onLogOut",[])})},e}(n.JetView);e.default=r},function(t,e,i){var s,n,a=i(11),r=i(10).isArray;function o(t,e,i){return(!i&&t.spaces?"\n":"")+Array(e+1).join(t.spaces)}function l(t,e,i){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,n,s));var a,r,l,h,c=[];for(a in t)t.hasOwnProperty(a)&&null!==t[a]&&void 0!==t[a]&&(h=e.noQuotesForNativeAttributes&&"string"!=typeof t[a]?"":'"',r=(r=""+t[a]).replace(/"/g,"&quot;"),l="attributeNameFn"in e?e.attributeNameFn(a,r,n,s):a,c.push(e.spaces&&e.indentAttributes?o(e,i+1,!1):" "),c.push(l+"="+h+("attributeValueFn"in e?e.attributeValueFn(r,a,n,s):r)+h));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&c.push(o(e,i,!1)),c.join("")}function h(t,e,i){return s=t,n="xml",e.ignoreDeclaration?"":"<?xml"+l(t[e.attributesKey],e,i)+"?>"}function c(t,e,i){if(e.ignoreInstruction)return"";var a;for(a in t)if(t.hasOwnProperty(a))break;var r="instructionNameFn"in e?e.instructionNameFn(a,t[a],n,s):a;if("object"==typeof t[a])return s=t,n=r,"<?"+r+l(t[a][e.attributesKey],e,i)+"?>";var o=t[a]?t[a]:"";return"instructionFn"in e&&(o=e.instructionFn(o,a,n,s)),"<?"+r+(o?" "+o:"")+"?>"}function d(t,e){return e.ignoreComment?"":"\x3c!--"+("commentFn"in e?e.commentFn(t,n,s):t)+"--\x3e"}function u(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,n,s):t.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function f(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,n,s):t)+">"}function g(t,e){return e.ignoreText?"":(t=(t=(t=""+t).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,n,s):t)}function p(t,e,i,a){return t.reduce(function(t,r){var h=o(e,i,a&&!t);switch(r.type){case"element":return t+h+function(t,e,i){s=t,n=t.name;var a=[],r="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;a.push("<"+r),t[e.attributesKey]&&a.push(l(t[e.attributesKey],e,i));var o=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&"preserve"===t[e.attributesKey]["xml:space"];return o||(o="fullTagEmptyElementFn"in e?e.fullTagEmptyElementFn(t.name,t):e.fullTagEmptyElement),o?(a.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(a.push(p(t[e.elementsKey],e,i+1)),s=t,n=t.name),a.push(e.spaces&&function(t,e){var i;if(t.elements&&t.elements.length)for(i=0;i<t.elements.length;++i)switch(t.elements[i][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;case"doctype":case"comment":case"element":default:return!0}return!1}(t,e)?"\n"+Array(i+1).join(e.spaces):""),a.push("</"+r+">")):a.push("/>"),a.join("")}(r,e,i);case"comment":return t+h+d(r[e.commentKey],e);case"doctype":return t+h+f(r[e.doctypeKey],e);case"cdata":return t+(e.indentCdata?h:"")+u(r[e.cdataKey],e);case"text":return t+(e.indentText?h:"")+g(r[e.textKey],e);case"instruction":var _={};return _[r[e.nameKey]]=r[e.attributesKey]?r:r[e.instructionKey],t+(e.indentInstruction?h:"")+c(_,e,i)}},"")}function _(t,e,i){var s;for(s in t)if(t.hasOwnProperty(s))switch(s){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||i)return!0;break;case e.cdataKey:if(e.indentCdata||i)return!0;break;case e.instructionKey:if(e.indentInstruction||i)return!0;break;case e.doctypeKey:case e.commentKey:default:return!0}return!1}function v(t,e,i,a,r){s=t,n=e;var h="elementNameFn"in i?i.elementNameFn(e,t):e;if(void 0===t||null===t||""===t)return"fullTagEmptyElementFn"in i&&i.fullTagEmptyElementFn(e,t)||i.fullTagEmptyElement?"<"+h+"></"+h+">":"<"+h+"/>";var c=[];if(e){if(c.push("<"+h),"object"!=typeof t)return c.push(">"+g(t,i)+"</"+h+">"),c.join("");t[i.attributesKey]&&c.push(l(t[i.attributesKey],i,a));var d=_(t,i,!0)||t[i.attributesKey]&&"preserve"===t[i.attributesKey]["xml:space"];if(d||(d="fullTagEmptyElementFn"in i?i.fullTagEmptyElementFn(e,t):i.fullTagEmptyElement),!d)return c.push("/>"),c.join("");c.push(">")}return c.push(m(t,i,a+1,!1)),s=t,n=e,e&&c.push((r?o(i,a,!1):"")+"</"+h+">"),c.join("")}function m(t,e,i,s){var n,a,l,p=[];for(a in t)if(t.hasOwnProperty(a))for(l=r(t[a])?t[a]:[t[a]],n=0;n<l.length;++n){switch(a){case e.declarationKey:p.push(h(l[n],e,i));break;case e.instructionKey:p.push((e.indentInstruction?o(e,i,s):"")+c(l[n],e,i));break;case e.attributesKey:case e.parentKey:break;case e.textKey:p.push((e.indentText?o(e,i,s):"")+g(l[n],e));break;case e.cdataKey:p.push((e.indentCdata?o(e,i,s):"")+u(l[n],e));break;case e.doctypeKey:p.push(o(e,i,s)+f(l[n],e));break;case e.commentKey:p.push(o(e,i,s)+d(l[n],e));break;default:p.push(o(e,i,s)+v(l[n],a,e,i,_(l[n],e)))}s=s&&!p.length}return p.join("")}t.exports=function(t,e){e=function(t){var e=a.copyOptions(t);return a.ensureFlagExists("ignoreDeclaration",e),a.ensureFlagExists("ignoreInstruction",e),a.ensureFlagExists("ignoreAttributes",e),a.ensureFlagExists("ignoreText",e),a.ensureFlagExists("ignoreComment",e),a.ensureFlagExists("ignoreCdata",e),a.ensureFlagExists("ignoreDoctype",e),a.ensureFlagExists("compact",e),a.ensureFlagExists("indentText",e),a.ensureFlagExists("indentCdata",e),a.ensureFlagExists("indentAttributes",e),a.ensureFlagExists("indentInstruction",e),a.ensureFlagExists("fullTagEmptyElement",e),a.ensureFlagExists("noQuotesForNativeAttributes",e),a.ensureSpacesExists(e),"number"==typeof e.spaces&&(e.spaces=Array(e.spaces+1).join(" ")),a.ensureKeyExists("declaration",e),a.ensureKeyExists("instruction",e),a.ensureKeyExists("attributes",e),a.ensureKeyExists("text",e),a.ensureKeyExists("comment",e),a.ensureKeyExists("cdata",e),a.ensureKeyExists("doctype",e),a.ensureKeyExists("type",e),a.ensureKeyExists("name",e),a.ensureKeyExists("elements",e),a.checkFnExists("doctype",e),a.checkFnExists("instruction",e),a.checkFnExists("cdata",e),a.checkFnExists("comment",e),a.checkFnExists("text",e),a.checkFnExists("instructionName",e),a.checkFnExists("elementName",e),a.checkFnExists("attributeName",e),a.checkFnExists("attributeValue",e),a.checkFnExists("attributes",e),a.checkFnExists("fullTagEmptyElement",e),e}(e);var i=[];return s=t,n="_root_",e.compact?i.push(m(t,e,0,!0)):(t[e.declarationKey]&&i.push(h(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&i.push(p(t[e.elementsKey],e,0,!i.length))),i.join("")}},function(t,e,i){"use strict";t.exports=r;var s=i(0),n=i(3);function a(t){this.afterTransform=function(e,i){return function(t,e,i){var s=t._transformState;s.transforming=!1;var n=s.writecb;if(!n)return t.emit("error",new Error("write callback called multiple times"));s.writechunk=null,s.writecb=null,null!==i&&void 0!==i&&t.push(i);n(e);var a=t._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&t._read(a.highWaterMark)}(t,e,i)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(t){if(!(this instanceof r))return new r(t);s.call(this,t),this._transformState=new a(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,i){o(e,t,i)}):o(e)})}function o(t,e,i){if(e)return t.emit("error",e);null!==i&&void 0!==i&&t.push(i);var s=t._writableState,n=t._transformState;if(s.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=i(2),n.inherits(r,s),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},r.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},r.prototype._write=function(t,e,i){var s=this._transformState;if(s.writecb=i,s.writechunk=t,s.writeencoding=e,!s.transforming){var n=this._readableState;(s.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},r.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},r.prototype._destroy=function(t,e){var i=this;s.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e,i){"use strict";var s=i(7);function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,a=this._readableState&&this._readableState.destroyed,r=this._writableState&&this._writableState.destroyed;a||r?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s(n,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(s(n,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){t.exports=i(17).EventEmitter},function(t,e,i){"use strict";(function(e,s){var n=i(7);t.exports=b;var a,r=i(32);b.ReadableState=m;i(17).EventEmitter;var o=function(t,e){return t.listeners(e).length},l=i(30),h=i(14).Buffer,c=e.Uint8Array||function(){};var d=i(3);d.inherits=i(2);var u=i(49),f=void 0;f=u&&u.debuglog?u.debuglog("stream"):function(){};var g,p=i(48),_=i(29);d.inherits(b,l);var v=["error","close","destroy","pause","resume"];function m(t,e){a=a||i(0),t=t||{},this.objectMode=!!t.objectMode,e instanceof a&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=i(12).StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function b(t){if(a=a||i(0),!(this instanceof b))return new b(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function x(t,e,i,s,n){var a,r=t._readableState;null===e?(r.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,k(t)}(t,r)):(n||(a=function(t,e){var i;(function(t){return h.isBuffer(t)||t instanceof c})(e)||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));return i}(r,e)),a?t.emit("error",a):r.objectMode||e&&e.length>0?("string"==typeof e||r.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),s?r.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):y(t,r,e,!0):r.ended?t.emit("error",new Error("stream.push() after EOF")):(r.reading=!1,r.decoder&&!i?(e=r.decoder.write(e),r.objectMode||0!==e.length?y(t,r,e,!1):A(t,r)):y(t,r,e,!1))):s||(r.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(r)}function y(t,e,i,s){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,s?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&k(t)),A(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=_.destroy,b.prototype._undestroy=_.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var i,s=this._readableState;return s.objectMode?i=!0:"string"==typeof t&&((e=e||s.defaultEncoding)!==s.encoding&&(t=h.from(t,e),e=""),i=!0),x(this,t,e,!1,i)},b.prototype.unshift=function(t){return x(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return g||(g=i(12).StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var w=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=w?t=w:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n(C,t):C(t))}function C(t){f("emit readable"),t.emit("readable"),M(t)}function A(t,e){e.readingMore||(e.readingMore=!0,n(I,t,e))}function I(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function E(t){f("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var s;t<e.head.data.length?(s=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):s=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,s=1,n=i.data;t-=n.length;for(;i=i.next;){var a=i.data,r=t>a.length?a.length:t;if(r===a.length?n+=a:n+=a.slice(0,t),0===(t-=r)){r===a.length?(++s,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=a.slice(r));break}++s}return e.length-=s,n}(t,e):function(t,e){var i=h.allocUnsafe(t),s=e.head,n=1;s.data.copy(i),t-=s.data.length;for(;s=s.next;){var a=s.data,r=t>a.length?a.length:t;if(a.copy(i,i.length-t,0,r),0===(t-=r)){r===a.length?(++n,s.next?e.head=s.next:e.head=e.tail=null):(e.head=s,s.data=a.slice(r));break}++n}return e.length-=n,i}(t,e);return s}(t,e.buffer,e.decoder),i);var i}function L(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n(z,e,t))}function z(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?L(this):k(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&L(this),null;var s,n=e.needReadable;return f("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",n=!0),e.ended||e.reading?f("reading or ended",n=!1):n&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(i,e))),null===(s=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&L(this)),null!==s&&this.emit("data",s),s},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,e);var l=(!e||!1!==e.end)&&t!==s.stdout&&t!==s.stderr?c:b;function h(e,s){f("onunpipe"),e===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",m),t.removeListener("drain",d),t.removeListener("error",_),t.removeListener("unpipe",h),i.removeListener("end",c),i.removeListener("end",b),i.removeListener("data",p),u=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||d())}function c(){f("onend"),t.end()}a.endEmitted?n(l):i.once("end",l),t.on("unpipe",h);var d=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,M(t))}}(i);t.on("drain",d);var u=!1;var g=!1;function p(e){f("ondata"),g=!1,!1!==t.write(e)||g||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==N(a.pipes,t))&&!u&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,g=!0),i.pause())}function _(e){f("onerror",e),b(),t.removeListener("error",_),0===o(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",m),b()}function m(){f("onfinish"),t.removeListener("close",v),b()}function b(){f("unpipe"),i.unpipe(t)}return i.on("data",p),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",_),t.once("close",v),t.once("finish",m),t.emit("pipe",i),a.flowing||(f("pipe resume"),i.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var s=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)s[a].emit("unpipe",this,i);return this}var r=N(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},b.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var s=this._readableState;s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.emittedReadable=!1,s.reading?s.length&&k(this):n(E,this))}return i},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n(T,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this._readableState,i=!1,s=this;for(var n in t.on("end",function(){if(f("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&s.push(t)}s.push(null)}),t.on("data",function(n){(f("wrapped data"),e.decoder&&(n=e.decoder.write(n)),!e.objectMode||null!==n&&void 0!==n)&&((e.objectMode||n&&n.length)&&(s.push(n)||(i=!0,t.pause())))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var a=0;a<v.length;a++)t.on(v[a],s.emit.bind(s,v[a]));return s._read=function(e){f("wrapped _read",e),i&&(i=!1,t.resume())},s},b._fromList=P}).call(this,i(5),i(4))},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){var s,n,a=i(56),r=i(11),o=i(10).isArray;function l(t){var e=Number(t);if(!isNaN(e))return e;var i=t.toLowerCase();return"true"===i||"false"!==i&&t}function h(t,e){var i;if(s.compact){if(!n[s[t+"Key"]]&&(o(s.alwaysArray)?-1!==s.alwaysArray.indexOf(s[t+"Key"]):s.alwaysArray)&&(n[s[t+"Key"]]=[]),n[s[t+"Key"]]&&!o(n[s[t+"Key"]])&&(n[s[t+"Key"]]=[n[s[t+"Key"]]]),t+"Fn"in s&&"string"==typeof e&&(e=s[t+"Fn"](e,n)),"instruction"===t&&("instructionFn"in s||"instructionNameFn"in s))for(i in e)if(e.hasOwnProperty(i))if("instructionFn"in s)e[i]=s.instructionFn(e[i],i,n);else{var a=e[i];delete e[i],e[s.instructionNameFn(i,a,n)]=a}o(n[s[t+"Key"]])?n[s[t+"Key"]].push(e):n[s[t+"Key"]]=e}else{n[s.elementsKey]||(n[s.elementsKey]=[]);var r={};if(r[s.typeKey]=t,"instruction"===t){for(i in e)if(e.hasOwnProperty(i))break;r[s.nameKey]="instructionNameFn"in s?s.instructionNameFn(i,e,n):i,s.instructionHasAttributes?(r[s.attributesKey]=e[i][s.attributesKey],"instructionFn"in s&&(r[s.attributesKey]=s.instructionFn(r[s.attributesKey],i,n))):("instructionFn"in s&&(e[i]=s.instructionFn(e[i],i,n)),r[s.instructionKey]=e[i])}else t+"Fn"in s&&(e=s[t+"Fn"](e,n)),r[s[t+"Key"]]=e;s.addParent&&(r[s.parentKey]=n),n[s.elementsKey].push(r)}}function c(t){var e;if("attributesFn"in s&&t&&(t=s.attributesFn(t,n)),(s.trim||"attributeValueFn"in s||"attributeNameFn"in s||s.nativeTypeAttributes)&&t)for(e in t)if(t.hasOwnProperty(e)&&(s.trim&&(t[e]=t[e].trim()),s.nativeTypeAttributes&&(t[e]=l(t[e])),"attributeValueFn"in s&&(t[e]=s.attributeValueFn(t[e],e,n)),"attributeNameFn"in s)){var i=t[e];delete t[e],t[s.attributeNameFn(e,t[e],n)]=i}return t}function d(t){var e={};if(t.body&&("xml"===t.name.toLowerCase()||s.instructionHasAttributes)){for(var i,a=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(i=a.exec(t.body));)e[i[1]]=i[2]||i[3]||i[4];e=c(e)}if("xml"===t.name.toLowerCase()){if(s.ignoreDeclaration)return;n[s.declarationKey]={},Object.keys(e).length&&(n[s.declarationKey][s.attributesKey]=e),s.addParent&&(n[s.declarationKey][s.parentKey]=n)}else{if(s.ignoreInstruction)return;s.trim&&(t.body=t.body.trim());var r={};s.instructionHasAttributes&&Object.keys(e).length?(r[t.name]={},r[t.name][s.attributesKey]=e):r[t.name]=t.body,h("instruction",r)}}function u(t,e){var i;if("object"==typeof t&&(e=t.attributes,t=t.name),e=c(e),"elementNameFn"in s&&(t=s.elementNameFn(t,n)),s.compact){var a;if(i={},!s.ignoreAttributes&&e&&Object.keys(e).length)for(a in i[s.attributesKey]={},e)e.hasOwnProperty(a)&&(i[s.attributesKey][a]=e[a]);t in n||(o(s.alwaysArray)?-1===s.alwaysArray.indexOf(t):!s.alwaysArray)||(n[t]=[]),n[t]&&!o(n[t])&&(n[t]=[n[t]]),o(n[t])?n[t].push(i):n[t]=i}else n[s.elementsKey]||(n[s.elementsKey]=[]),(i={})[s.typeKey]="element",i[s.nameKey]=t,!s.ignoreAttributes&&e&&Object.keys(e).length&&(i[s.attributesKey]=e),s.alwaysChildren&&(i[s.elementsKey]=[]),n[s.elementsKey].push(i);i[s.parentKey]=n,n=i}function f(t){s.ignoreText||(t.trim()||s.captureSpacesBetweenElements)&&(s.trim&&(t=t.trim()),s.nativeType&&(t=l(t)),s.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),h("text",t))}function g(t){s.ignoreComment||(s.trim&&(t=t.trim()),h("comment",t))}function p(t){var e=n[s.parentKey];s.addParent||delete n[s.parentKey],n=e}function _(t){s.ignoreCdata||(s.trim&&(t=t.trim()),h("cdata",t))}function v(t){s.ignoreDoctype||(t=t.replace(/^ /,""),s.trim&&(t=t.trim()),h("doctype",t))}function m(t){t.note=t}t.exports=function(t,e){var i=a.parser(!0,{}),o={};if(n=o,s=function(t){return s=r.copyOptions(t),r.ensureFlagExists("ignoreDeclaration",s),r.ensureFlagExists("ignoreInstruction",s),r.ensureFlagExists("ignoreAttributes",s),r.ensureFlagExists("ignoreText",s),r.ensureFlagExists("ignoreComment",s),r.ensureFlagExists("ignoreCdata",s),r.ensureFlagExists("ignoreDoctype",s),r.ensureFlagExists("compact",s),r.ensureFlagExists("alwaysChildren",s),r.ensureFlagExists("addParent",s),r.ensureFlagExists("trim",s),r.ensureFlagExists("nativeType",s),r.ensureFlagExists("nativeTypeAttributes",s),r.ensureFlagExists("sanitize",s),r.ensureFlagExists("instructionHasAttributes",s),r.ensureFlagExists("captureSpacesBetweenElements",s),r.ensureAlwaysArrayExists(s),r.ensureKeyExists("declaration",s),r.ensureKeyExists("instruction",s),r.ensureKeyExists("attributes",s),r.ensureKeyExists("text",s),r.ensureKeyExists("comment",s),r.ensureKeyExists("cdata",s),r.ensureKeyExists("doctype",s),r.ensureKeyExists("type",s),r.ensureKeyExists("name",s),r.ensureKeyExists("elements",s),r.ensureKeyExists("parent",s),r.checkFnExists("doctype",s),r.checkFnExists("instruction",s),r.checkFnExists("cdata",s),r.checkFnExists("comment",s),r.checkFnExists("text",s),r.checkFnExists("instructionName",s),r.checkFnExists("elementName",s),r.checkFnExists("attributeName",s),r.checkFnExists("attributeValue",s),r.checkFnExists("attributes",s),s}(e),i.opt={strictEntities:!0},i.onopentag=u,i.ontext=f,i.oncomment=g,i.onclosetag=p,i.onerror=m,i.oncdata=_,i.ondoctype=v,i.onprocessinginstruction=d,i.write(t).close(),o[s.elementsKey]){var l=o[s.elementsKey];delete o[s.elementsKey],o[s.elementsKey]=l,delete o.text}return o}},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),r=n(i(59)),o=n(i(20)),l=n(i(18)),h=n(i(19)),c=n(i(58)),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.config=function(){return{rows:[{cols:[{view:"datatable",select:!0,localId:"btz",columns:[{id:"name",header:"",width:130,fillspace:!0},{id:"loadDate",header:" ",width:130,fillspace:!0,template:function(t){return t.loadDate.toGMTString()}},{id:"countUsers",header:"- ",width:190},{id:"countTasks",header:"- ",width:160},{id:"status",header:" ",width:150}]},{view:"datatable",width:210,select:!0,localId:"tasks",columns:[{id:"id",header:" ",fillspace:!0}]},{body:{template:"<div id='chart'></div>",borderless:!0,width:600}}]},{cols:[{view:"uploader",upload:"/loadFile",id:"uploader",name:"files",value:" ",inputWidth:200},{view:"button",localId:"renameBtn",value:" ",inputWidth:200,disabled:!0},{height:200,width:200,template:'\n\t\t\t\t\t\t<form method="post" action="/loadFile" enctype="multipart/form-data">\n\t\t\t\t<p>\n\t\t\t\t\t<label for="avatar"><strong>Avatar*:</strong></label>\n\t\t\t\t\t<input type="file" name="avatar" id="avatar" class="span6">\n\t\t\t\t</p>\n\t\t\t\t<hr>\n\t\t\t\t<input type="submit" value="Upload" class="btn btn-large btn-success">\n\t\t\t</form>'},{view:"button",localId:"downloadResultBtn",value:"  ",inputWidth:200,disabled:!0},{view:"button",localId:"loadRawBtn",value:"  ",inputWidth:200,disabled:!0},{view:"button",localId:"sendByEmail",value:"    ",inputWidth:200,height:55,disabled:!0}]},{$subview:!0,popup:!0}]}},e.prototype.init=function(t){var e=this;this.view={tableAnalyseResult:this.$$("btz"),tableTasks:this.$$("tasks"),chart:this.$$("chart"),buttons:{rename:this.$$("renameBtn"),downloadRaw:this.$$("loadRawBtn"),downloadAnalysed:this.$$("downloadResultBtn"),sendByEmail:this.$$("sendByEmail"),uploader:this.$$("uploader")}},h.default.getAllBanks().then(function(t){console.log(t),e.view.tableAnalyseResult.parse(t,"json")}),this.attachEvents()},e.prototype.attachEvents=function(){var t=this;this.view.tableAnalyseResult.attachEvent("onItemClick",function(e){t.view.buttons.downloadRaw.enable(),t.view.buttons.downloadAnalysed.enable(),t.view.buttons.sendByEmail.enable(),t.view.buttons.rename.enable(),c.default.getTasksByBankId(e.row).then(function(e){t.view.tableTasks.clearAll(),t.view.tableTasks.parse(e,"json")})}),this.view.buttons.rename.attachEvent("onItemClick",function(e){var i=new o.default;i.init(t.view.tableAnalyseResult),i.show()}),this.view.buttons.sendByEmail.attachEvent("onItemClick",function(t){var e=new l.default;e.init(),e.show()}),this.view.buttons.downloadAnalysed.attachEvent("onItemClick",function(){t.show("./editors")}),this.view.tableTasks.attachEvent("onItemClick",function(t){var e=document.querySelector("#chart");e.firstChild&&e.firstChild.remove(),c.default.getChart(t.row).then(function(t){var e={series:[{name:"+",data:t.birnbaumPlus},{name:"-",data:t.birnbaumMinus},{name:"",data:t.levelOfPreparadness},{name:"",data:t.executionFrequency}],chart:{height:350,type:"line",zoom:{enabled:!0},animations:{enabled:!0}},stroke:{width:[2,2,3,3],curve:"straight",dashArray:[2,2,4,0]},xaxis:{type:"numeric",categories:[],title:{text:" "}},yaxis:{title:{text:"    "}}};new r.default(document.querySelector("#chart"),e).render()})})},e}(a.JetView);e.default=d},,function(t,e,i){},function(t,e,i){var s={"./en":21,"./en.ts":21};function n(t){var e=a(t);return i(e)}function a(t){var e=s[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=37},function(t,e,i){(function(e){var s=i(27);t.exports=function(t,i){t instanceof e&&(t=t.toString());var n=null;if("string"==typeof t)try{n=JSON.parse(t)}catch(t){throw new Error("The JSON structure is invalid")}else n=t;return s(n,i)}}).call(this,i(6).Buffer)},function(t,e,i){var s=i(11),n=i(33);t.exports=function(t,e){var i,a,r;return i=function(t){var e=s.copyOptions(t);return s.ensureSpacesExists(e),e}(e),a=n(t,i),r="compact"in i&&i.compact?"_parent":"parent",("addParent"in i&&i.addParent?JSON.stringify(a,function(t,e){return t===r?"_":e},i.spaces):JSON.stringify(a,null,i.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},function(t,e,i){t.exports=i(15).PassThrough},function(t,e,i){t.exports=i(15).Transform},function(t,e,i){t.exports=i(0)},function(t,e,i){t.exports=i(13)},function(t,e,i){"use strict";t.exports=a;var s=i(28),n=i(3);function a(t){if(!(this instanceof a))return new a(t);s.call(this,t)}n.inherits=i(2),n.inherits(a,s),a.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){t.exports=i(16).deprecate},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var s,n=1,a={},r=!1,o=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick(function(){c(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&c(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),s=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},s=function(e){t.port2.postMessage(e)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var t=o.documentElement;s=function(e){var i=o.createElement("script");i.onreadystatechange=function(){c(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():s=function(t){setTimeout(c,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return a[n]=r,s(n),n++},l.clearImmediate=h}function h(t){delete a[t]}function c(t){if(r)setTimeout(c,0,t);else{var e=a[t];if(e){r=!0;try{!function(t){var e=t.callback,s=t.args;switch(s.length){case 0:e();break;case 1:e(s[0]);break;case 2:e(s[0],s[1]);break;case 3:e(s[0],s[1],s[2]);break;default:e.apply(i,s)}}(e)}finally{h(t),r=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(5),i(4))},function(t,e,i){var s=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(46),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,i){"use strict";var s=i(14).Buffer;function n(t,e,i){t.copy(e,i)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e=s.allocUnsafe(t>>>0),i=this.head,a=0;i;)n(i.data,e,a),a+=i.data.length,i=i.next;return e},t}()},function(t,e){},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){t.exports=i(16).inherits},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,i){t.exports=n;var s=i(17).EventEmitter;function n(){s.call(this)}i(2)(n,s),n.Readable=i(15),n.Writable=i(43),n.Duplex=i(42),n.Transform=i(41),n.PassThrough=i(40),n.Stream=n,n.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",a),t._isStdio||e&&!1===e.end||(i.on("end",o),i.on("close",l));var r=!1;function o(){r||(r=!0,t.end())}function l(){r||(r=!0,"function"==typeof t.destroy&&t.destroy())}function h(t){if(c(),0===s.listenerCount(this,"error"))throw t}function c(){i.removeListener("data",n),t.removeListener("drain",a),i.removeListener("end",o),i.removeListener("close",l),i.removeListener("error",h),t.removeListener("error",h),i.removeListener("end",c),i.removeListener("close",c),t.removeListener("close",c)}return i.on("error",h),t.on("error",h),i.on("end",c),i.on("close",c),t.on("close",c),t.emit("pipe",i),t}},function(t,e){e.read=function(t,e,i,s,n){var a,r,o=8*n-s-1,l=(1<<o)-1,h=l>>1,c=-7,d=i?n-1:0,u=i?-1:1,f=t[e+d];for(d+=u,a=f&(1<<-c)-1,f>>=-c,c+=o;c>0;a=256*a+t[e+d],d+=u,c-=8);for(r=a&(1<<-c)-1,a>>=-c,c+=s;c>0;r=256*r+t[e+d],d+=u,c-=8);if(0===a)a=1-h;else{if(a===l)return r?NaN:1/0*(f?-1:1);r+=Math.pow(2,s),a-=h}return(f?-1:1)*r*Math.pow(2,a-s)},e.write=function(t,e,i,s,n,a){var r,o,l,h=8*a-n-1,c=(1<<h)-1,d=c>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=s?0:a-1,g=s?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,r=c):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),(e+=r+d>=1?u/l:u*Math.pow(2,1-d))*l>=2&&(r++,l/=2),r+d>=c?(o=0,r=c):r+d>=1?(o=(e*l-1)*Math.pow(2,n),r+=d):(o=e*Math.pow(2,d-1)*Math.pow(2,n),r=0));n>=8;t[i+f]=255&o,f+=g,o/=256,n-=8);for(r=r<<n|o,h+=n;h>0;t[i+f]=255&r,f+=g,r/=256,h-=8);t[i+f-g]|=128*p}},function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-h(t)},e.toByteArray=function(t){var e,i,s,r,o,l=t.length;r=h(t),o=new a(3*l/4-r),i=r>0?l-4:l;var c=0;for(e=0;e<i;e+=4)s=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],o[c++]=s>>16&255,o[c++]=s>>8&255,o[c++]=255&s;2===r?(s=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,o[c++]=255&s):1===r&&(s=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,o[c++]=s>>8&255,o[c++]=255&s);return o},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,a="",r=[],o=0,l=i-n;o<l;o+=16383)r.push(d(t,o,o+16383>l?l:o+16383));1===n?(e=t[i-1],a+=s[e>>2],a+=s[e<<4&63],a+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],a+=s[e>>10],a+=s[e>>4&63],a+=s[e<<2&63],a+="=");return r.push(a),r.join("")};for(var s=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=r.length;o<l;++o)s[o]=r[o],n[r.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function c(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function d(t,e,i){for(var s,n=[],a=e;a<i;a+=3)s=(t[a]<<16)+(t[a+1]<<8)+t[a+2],n.push(c(s));return n.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e,i){(function(t){!function(e){e.parser=function(t,e){return new a(t,e)},e.SAXParser=a,e.SAXStream=o,e.createStream=function(t,e){return new o(t,e)},e.MAX_BUFFER_LENGTH=65536;var s,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(t,i){if(!(this instanceof a))return new a(t,i);!function(t){for(var e=0,i=n.length;e<i;e++)t[n[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=i||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=w.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(u)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),k(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),a.prototype={end:function(){T(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return E(this,"Cannot write after close. Assign an onready handler.");if(null===t)return T(this);"object"==typeof t&&(t=t.toString());var i=0,s="";for(;s=F(t,i++),this.c=s,s;)switch(this.trackPosition&&(this.position++,"\n"===s?(this.line++,this.column=0):this.column++),this.state){case w.BEGIN:if(this.state=w.BEGIN_WHITESPACE,"\ufeff"===s)continue;H(this,s);continue;case w.BEGIN_WHITESPACE:H(this,s);continue;case w.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=i-1;s&&"<"!==s&&"&"!==s;)(s=F(t,i++))&&this.trackPosition&&(this.position++,"\n"===s?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(a,i-1)}"<"!==s||this.sawRoot&&this.closedRoot&&!this.strict?(v(s)||this.sawRoot&&!this.closedRoot||M(this,"Text data outside of root node."),"&"===s?this.state=w.TEXT_ENTITY:this.textNode+=s):(this.state=w.OPEN_WAKA,this.startTagPosition=this.position);continue;case w.SCRIPT:"<"===s?this.state=w.SCRIPT_ENDING:this.script+=s;continue;case w.SCRIPT_ENDING:"/"===s?this.state=w.CLOSE_TAG:(this.script+="<"+s,this.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===s)this.state=w.SGML_DECL,this.sgmlDecl="";else if(v(s));else if(x(f,s))this.state=w.OPEN_TAG,this.tagName=s;else if("/"===s)this.state=w.CLOSE_TAG,this.tagName="";else if("?"===s)this.state=w.PROC_INST,this.procInstName=this.procInstBody="";else{if(M(this,"Unencoded <"),this.startTagPosition+1<this.position){var r=this.position-this.startTagPosition;s=new Array(r).join(" ")+s}this.textNode+="<"+s,this.state=w.TEXT}continue;case w.SGML_DECL:(this.sgmlDecl+s).toUpperCase()===l?(C(this,"onopencdata"),this.state=w.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+s==="--"?(this.state=w.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+s).toUpperCase()===h?(this.state=w.DOCTYPE,(this.doctype||this.sawRoot)&&M(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===s?(C(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=w.TEXT):m(s)?(this.state=w.SGML_DECL_QUOTED,this.sgmlDecl+=s):this.sgmlDecl+=s;continue;case w.SGML_DECL_QUOTED:s===this.q&&(this.state=w.SGML_DECL,this.q=""),this.sgmlDecl+=s;continue;case w.DOCTYPE:">"===s?(this.state=w.TEXT,C(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=s,"["===s?this.state=w.DOCTYPE_DTD:m(s)&&(this.state=w.DOCTYPE_QUOTED,this.q=s));continue;case w.DOCTYPE_QUOTED:this.doctype+=s,s===this.q&&(this.q="",this.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:this.doctype+=s,"]"===s?this.state=w.DOCTYPE:m(s)&&(this.state=w.DOCTYPE_DTD_QUOTED,this.q=s);continue;case w.DOCTYPE_DTD_QUOTED:this.doctype+=s,s===this.q&&(this.state=w.DOCTYPE_DTD,this.q="");continue;case w.COMMENT:"-"===s?this.state=w.COMMENT_ENDING:this.comment+=s;continue;case w.COMMENT_ENDING:"-"===s?(this.state=w.COMMENT_ENDED,this.comment=I(this.opt,this.comment),this.comment&&C(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+s,this.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==s?(M(this,"Malformed comment"),this.comment+="--"+s,this.state=w.COMMENT):this.state=w.TEXT;continue;case w.CDATA:"]"===s?this.state=w.CDATA_ENDING:this.cdata+=s;continue;case w.CDATA_ENDING:"]"===s?this.state=w.CDATA_ENDING_2:(this.cdata+="]"+s,this.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===s?(this.cdata&&C(this,"oncdata",this.cdata),C(this,"onclosecdata"),this.cdata="",this.state=w.TEXT):"]"===s?this.cdata+="]":(this.cdata+="]]"+s,this.state=w.CDATA);continue;case w.PROC_INST:"?"===s?this.state=w.PROC_INST_ENDING:v(s)?this.state=w.PROC_INST_BODY:this.procInstName+=s;continue;case w.PROC_INST_BODY:if(!this.procInstBody&&v(s))continue;"?"===s?this.state=w.PROC_INST_ENDING:this.procInstBody+=s;continue;case w.PROC_INST_ENDING:">"===s?(C(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=w.TEXT):(this.procInstBody+="?"+s,this.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:x(g,s)?this.tagName+=s:(P(this),">"===s?N(this):"/"===s?this.state=w.OPEN_TAG_SLASH:(v(s)||M(this,"Invalid character in tag name"),this.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===s?(N(this,!0),$(this)):(M(this,"Forward-slash in opening tag not followed by >"),this.state=w.ATTRIB);continue;case w.ATTRIB:if(v(s))continue;">"===s?N(this):"/"===s?this.state=w.OPEN_TAG_SLASH:x(f,s)?(this.attribName=s,this.attribValue="",this.state=w.ATTRIB_NAME):M(this,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===s?this.state=w.ATTRIB_VALUE:">"===s?(M(this,"Attribute without value"),this.attribValue=this.attribName,z(this),N(this)):v(s)?this.state=w.ATTRIB_NAME_SAW_WHITE:x(g,s)?this.attribName+=s:M(this,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===s)this.state=w.ATTRIB_VALUE;else{if(v(s))continue;M(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",C(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===s?N(this):x(f,s)?(this.attribName=s,this.state=w.ATTRIB_NAME):(M(this,"Invalid attribute name"),this.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(v(s))continue;m(s)?(this.q=s,this.state=w.ATTRIB_VALUE_QUOTED):(M(this,"Unquoted attribute value"),this.state=w.ATTRIB_VALUE_UNQUOTED,this.attribValue=s);continue;case w.ATTRIB_VALUE_QUOTED:if(s!==this.q){"&"===s?this.state=w.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=s;continue}z(this),this.q="",this.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:v(s)?this.state=w.ATTRIB:">"===s?N(this):"/"===s?this.state=w.OPEN_TAG_SLASH:x(f,s)?(M(this,"No whitespace between attributes"),this.attribName=s,this.attribValue="",this.state=w.ATTRIB_NAME):M(this,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!b(s)){"&"===s?this.state=w.ATTRIB_VALUE_ENTITY_U:this.attribValue+=s;continue}z(this),">"===s?N(this):this.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(this.tagName)">"===s?$(this):x(g,s)?this.tagName+=s:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=w.SCRIPT):(v(s)||M(this,"Invalid tagname in closing tag"),this.state=w.CLOSE_TAG_SAW_WHITE);else{if(v(s))continue;y(f,s)?this.script?(this.script+="</"+s,this.state=w.SCRIPT):M(this,"Invalid tagname in closing tag."):this.tagName=s}continue;case w.CLOSE_TAG_SAW_WHITE:if(v(s))continue;">"===s?$(this):M(this,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var o,c;switch(this.state){case w.TEXT_ENTITY:o=w.TEXT,c="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:o=w.ATTRIB_VALUE_QUOTED,c="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:o=w.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===s?(this[c]+=D(this),this.entity="",this.state=o):x(this.entity.length?_:p,s)?this.entity+=s:(M(this,"Invalid character in entity name"),this[c]+="&"+this.entity+s,this.entity="",this.state=o);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(t){for(var i=Math.max(e.MAX_BUFFER_LENGTH,10),s=0,a=0,r=n.length;a<r;a++){var o=t[n[a]].length;if(o>i)switch(n[a]){case"textNode":A(t);break;case"cdata":C(t,"oncdata",t.cdata),t.cdata="";break;case"script":C(t,"onscript",t.script),t.script="";break;default:E(t,"Max buffer length exceeded: "+n[a])}s=Math.max(s,o)}var l=e.MAX_BUFFER_LENGTH-s;t.bufferCheckPosition=l+t.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(t){A(t),""!==t.cdata&&(C(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(C(t,"onscript",t.script),t.script="")}(this)}};try{s=i(53).Stream}catch(t){s=function(){}}var r=e.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function o(t,e){if(!(this instanceof o))return new o(t,e);s.apply(this),this._parser=new a(t,e),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,r.forEach(function(t){Object.defineProperty(i,"on"+t,{get:function(){return i._parser["on"+t]},set:function(e){if(!e)return i.removeAllListeners(t),i._parser["on"+t]=e,e;i.on(t,e)},enumerable:!0,configurable:!1})})}o.prototype=Object.create(s.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var s=i(12).StringDecoder;this._decoder=new s("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},o.prototype.on=function(t,e){var i=this;return i._parser["on"+t]||-1===r.indexOf(t)||(i._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),i.emit.apply(i,e)}),s.prototype.on.call(i,t,e)};var l="[CDATA[",h="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",u={xml:c,xmlns:d},f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function m(t){return'"'===t||"'"===t}function b(t){return">"===t||v(t)}function x(t,e){return t.test(e)}function y(t,e){return!x(t,e)}var w=0;for(var S in e.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var i=e.ENTITIES[t],s="number"==typeof i?String.fromCharCode(i):i;e.ENTITIES[t]=s}),e.STATE)e.STATE[e.STATE[S]]=S;function k(t,e,i){t[e]&&t[e](i)}function C(t,e,i){t.textNode&&A(t),k(t,e,i)}function A(t){t.textNode=I(t.opt,t.textNode),t.textNode&&k(t,"ontext",t.textNode),t.textNode=""}function I(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function E(t,e){return A(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,k(t,"onerror",e),t}function T(t){return t.sawRoot&&!t.closedRoot&&M(t,"Unclosed root tag"),t.state!==w.BEGIN&&t.state!==w.BEGIN_WHITESPACE&&t.state!==w.TEXT&&E(t,"Unexpected end"),A(t),t.c="",t.closed=!0,k(t,"onend"),a.call(t,t.strict,t.opt),t}function M(t,e){if("object"!=typeof t||!(t instanceof a))throw new Error("bad call to strictFail");t.strict&&E(t,e)}function P(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,C(t,"onopentagstart",i)}function L(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),s=i[0],n=i[1];return e&&"xmlns"===t&&(s="xmlns",n=""),{prefix:s,local:n}}function z(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=L(t.attribName,!0),i=e.prefix,s=e.local;if("xmlns"===i)if("xml"===s&&t.attribValue!==c)M(t,"xml: prefix must be bound to "+c+"\nActual: "+t.attribValue);else if("xmlns"===s&&t.attribValue!==d)M(t,"xmlns: prefix must be bound to "+d+"\nActual: "+t.attribValue);else{var n=t.tag,a=t.tags[t.tags.length-1]||t;n.ns===a.ns&&(n.ns=Object.create(a.ns)),n.ns[s]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,C(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function N(t,e){if(t.opt.xmlns){var i=t.tag,s=L(t.tagName);i.prefix=s.prefix,i.local=s.local,i.uri=i.ns[s.prefix]||"",i.prefix&&!i.uri&&(M(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),i.uri=s.prefix);var n=t.tags[t.tags.length-1]||t;i.ns&&n.ns!==i.ns&&Object.keys(i.ns).forEach(function(e){C(t,"onopennamespace",{prefix:e,uri:i.ns[e]})});for(var a=0,r=t.attribList.length;a<r;a++){var o=t.attribList[a],l=o[0],h=o[1],c=L(l,!0),d=c.prefix,u=c.local,f=""===d?"":i.ns[d]||"",g={name:l,value:h,prefix:d,local:u,uri:f};d&&"xmlns"!==d&&!f&&(M(t,"Unbound namespace prefix: "+JSON.stringify(d)),g.uri=d),t.tag.attributes[l]=g,C(t,"onattribute",g)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),C(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=w.TEXT:t.state=w.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function $(t){if(!t.tagName)return M(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=w.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=w.SCRIPT);C(t,"onscript",t.script),t.script=""}var e=t.tags.length,i=t.tagName;t.strict||(i=i[t.looseCase]());for(var s=i;e--;){if(t.tags[e].name===s)break;M(t,"Unexpected close tag")}if(e<0)return M(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=w.TEXT);t.tagName=i;for(var n=t.tags.length;n-- >e;){var a=t.tag=t.tags.pop();t.tagName=t.tag.name,C(t,"onclosetag",t.tagName);var r={};for(var o in a.ns)r[o]=a.ns[o];var l=t.tags[t.tags.length-1]||t;t.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(e){var i=a.ns[e];C(t,"onclosenamespace",{prefix:e,uri:i})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=w.TEXT}function D(t){var e,i=t.entity,s=i.toLowerCase(),n="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[s]?t.ENTITIES[s]:("#"===(i=s).charAt(0)&&("x"===i.charAt(1)?(i=i.slice(2),n=(e=parseInt(i,16)).toString(16)):(i=i.slice(1),n=(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),isNaN(e)||n.toLowerCase()!==i?(M(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function H(t,e){"<"===e?(t.state=w.OPEN_WAKA,t.startTagPosition=t.position):v(e)||(M(t,"Non-whitespace before first tag."),t.textNode=e,t.state=w.TEXT)}function F(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}w=e.STATE,String.fromCodePoint||function(){var t=String.fromCharCode,e=Math.floor,i=function(){var i,s,n=[],a=-1,r=arguments.length;if(!r)return"";for(var o="";++a<r;){var l=Number(arguments[a]);if(!isFinite(l)||l<0||l>1114111||e(l)!==l)throw RangeError("Invalid code point: "+l);l<=65535?n.push(l):(i=55296+((l-=65536)>>10),s=l%1024+56320,n.push(i,s)),(a+1===r||n.length>16384)&&(o+=t.apply(null,n),n.length=0)}return o};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:i,configurable:!0,writable:!0}):String.fromCodePoint=i}()}(e)}).call(this,i(6).Buffer)},function(t,e,i){var s=i(33),n=i(39),a=i(27),r=i(38);t.exports={xml2js:s,xml2json:n,js2xml:a,json2xml:r}},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Task=void 0;var n=s(i(57)),a=function(){function t(){}return t.prototype.set=function(t,e,i,s,n){this.id=t,this.levelOfPreparadness=e,this.executionFrequency=i,this.birnbaumPlus=s,this.birnbaumMinus=n},t.prototype.getTasksByBankId=function(e){return new Promise(function(i){var s=new t,n=[];1===e&&(s.set(9944482,[],[],[],[]),n.push(s),(s=new t).set(1232,[],[],[],[]),n.push(s),(s=new t).set(54222,[],[],[],[]),n.push(s),(s=new t).set(3213,[],[],[],[]),n.push(s),(s=new t).set(23242131,[],[],[],[]),n.push(s),(s=new t).set(34213422,[],[],[],[]),n.push(s),(s=new t).set(99444823,[],[],[],[]),n.push(s),(s=new t).set(23242134,[],[],[],[]),n.push(s),(s=new t).set(34213425,[],[],[],[]),n.push(s),(s=new t).set(99444826,[],[],[],[]),n.push(s),(s=new t).set(27324213,[],[],[],[]),n.push(s),(s=new t).set(34218342,[],[],[],[]),n.push(s),(s=new t).set(99444982,[],[],[],[]),n.push(s),(s=new t).set(232410213,[],[],[],[]),n.push(s),(s=new t).set(342111342,[],[],[],[]),n.push(s),(s=new t).set(991244482,[],[],[],[]),n.push(s),(s=new t).set(2324213,[],[],[],[]),n.push(s),(s=new t).set(342113342,[],[],[],[]),n.push(s),(s=new t).set(994448214,[],[],[],[]),n.push(s),(s=new t).set(232154213,[],[],[],[]),n.push(s),(s=new t).set(342161342,[],[],[],[]),n.push(s),(s=new t).set(994417482,[],[],[],[]),n.push(s),(s=new t).set(231824213,[],[],[],[]),n.push(s),(s=new t).set(341921342,[],[],[],[]),n.push(s),(s=new t).set(994204482,[],[],[],[]),n.push(s),(s=new t).set(232422113,[],[],[],[]),n.push(s),(s=new t).set(342221342,[],[],[],[]),n.push(s),(s=new t).set(994234482,[],[],[],[]),n.push(s),(s=new t).set(232244213,[],[],[],[]),n.push(s),(s=new t).set(342251342,[],[],[],[]),n.push(s),(s=new t).set(926944482,[],[],[],[]),n.push(s),(s=new t).set(232427213,[],[],[],[]),n.push(s),(s=new t).set(328421342,[],[],[],[]),n.push(s),(s=new t).set(994294482,[],[],[],[]),n.push(s),(s=new t).set(232304213,[],[],[],[]),n.push(s),(s=new t).set(342131342,[],[],[],[]),n.push(s),(s=new t).set(994443282,[],[],[],[]),n.push(s),(s=new t).set(232421333,[],[],[],[]),n.push(s),(s=new t).set(342134342,[],[],[],[]),n.push(s),(s=new t).set(994443582,[],[],[],[]),n.push(s),(s=new t).set(99442,[],[],[],[]),n.push(s)),i(n)})},t.prototype.getChart=function(e){var i=this;return new Promise(function(e){var s=n.default.xml2json('\n<ArrayOfPocket \nxmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" \nxmlns="http://tempuri.org/">\n\t<Pocket>\n\t\t<Qualification>0.69</Qualification>\n\t\t<Qualification>0.61</Qualification>\n\t\t<Qualification>0.56</Qualification>\n\t\t<Frequency>0.61</Frequency>\n\t\t<Frequency>0.49</Frequency>\n\t\t<Frequency>0.56</Frequency>\n\t\t<BirnbaumFrequency>0.1</BirnbaumFrequency>\n\t\t<BirnbaumFrequency>0.1</BirnbaumFrequency>\n\t\t<BirnbaumFrequency>0.1</BirnbaumFrequency>\n\t\t<Sigma>0.485</Sigma>\n\t\t<Sigma>0.499</Sigma>\n\t\t<Sigma>0.496</Sigma>\n\t</Pocket>\t\n</ArrayOfPocket>',{compact:!0}),a=JSON.parse(s).ArrayOfPocket.Pocket,r=function(t){var e=[];return t.forEach(function(t){e.push(Number(t._text))}),e};i.executionFrequency=r(a.Frequency),i.levelOfPreparadness=r(a.Qualification),i.birnbaumPlus=[],i.birnbaumMinus=[];var o=r(a.Sigma),l=r(a.BirnbaumFrequency);for(var h in o)i.birnbaumPlus.push(l[h]+o[h]),i.birnbaumMinus.push(l[h]-o[h]);var c=new t;c.executionFrequency=i.executionFrequency,c.levelOfPreparadness=i.levelOfPreparadness,c.birnbaumPlus=i.birnbaumPlus,c.birnbaumMinus=i.birnbaumMinus,console.log(i.executionFrequency),c.set(0,[.09,.2,.27,.33,.38,.43,.46,.53,.6,.63,.69,.75,.9,1.05,null,null,null],[null,null,null,null,.6,.5,.4,.25,.3,.3,0,null,null,null,null,null,null],[.25,.3,.37,.43,.48,.53,.56,.63,.7,.73,.79,.85,1,1.25,null,null,null],[.05,.1,.17,.23,.28,.33,.36,.43,.5,.53,.59,.65,.75,.9,null,null,null]),e(c)})},t}();e.Task=a,e.default=new a},function(t,e,i){"use strict";var s;
/*!
 * ApexCharts v3.26.1
 * (c) 2018-2021 Juned Chhipa
 * Released under the MIT License.
 */function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,s)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach(function(e){l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var i,s=u(t);if(e){var n=u(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,i)}}function g(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var _=function(){function t(){a(this,t)}return o(t,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),s=t<0?0:255,n=t<0?-1*t:t,a=parseInt(i[0].slice(4),10),r=parseInt(i[1],10),o=parseInt(i[2],10);return"rgb("+(Math.round((s-a)*n)+a)+","+(Math.round((s-r)*n)+r)+","+(Math.round((s-o)*n)+o)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),s=t<0?0:255,n=t<0?-1*t:t,a=i>>16,r=i>>8&255,o=255&i;return"#"+(16777216+65536*(Math.round((s-a)*n)+a)+256*(Math.round((s-r)*n)+r)+(Math.round((s-o)*n)+o)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,i){return t.isColorHex(i)?this.shadeHexColor(e,i):this.shadeRGBColor(e,i)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===n(t)&&!Array.isArray(t)&&null!=t}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var n in s)s.hasOwnProperty(n)&&(e[n]=s[n])}return e});var s=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach(function(n){i.isObject(e[n])&&n in t?s[n]=i.extend(t[n],e[n]):Object.assign(s,l({},n,e[n]))}),s}},{key:"extendArray",value:function(e,i){var s=[];return e.map(function(e){s.push(t.extend(i,e))}),s}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(t){if("[object Array]"===Object.prototype.toString.call(t)){for(var e=[],i=0;i<t.length;i++)e[i]=this.clone(t[i]);return e}if("[object Null]"===Object.prototype.toString.call(t))return null;if("[object Date]"===Object.prototype.toString.call(t))return t;if("object"===n(t)){var s={};for(var a in t)t.hasOwnProperty(a)&&(s[a]=this.clone(t[a]));return s}return t}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var i="",s=t<0?"-":"",n=e[0].replace(".",""),a=Number(e[1])+1;if(a<0){for(i=s+"0.";a++;)i+="0";return i+n.replace(/^-/,"")}for(a-=n.length;a--;)i+="0";return n+i}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,s=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[s-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(t,e){return Array.isArray(e)&&(e=e.reduce(function(t,e){return t.length>e.length?t:e})),t.length>e.length?t:e},0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var s=0;s<i.length;s++)i[s]=parseInt(1===i[s].length?i[s]+i[s]:i[s],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],s=2*Math.PI/e,n=0;n<e;n++){var a={};a.x=t*Math.sin(n*s),a.y=-t*Math.cos(n*s),i.push(a)}return i}},{key:"polarToCartesian",value:function(t,e,i,s){var n=(s-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=t.toString().slice();return i.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var s=i-t.length+1;s--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}var s=t.indexOf("Edge/");return s>0&&parseInt(t.substring(s+5,t.indexOf(".",s)),10)}}]),t}(),v=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return o(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":t="<>";break;case"swing":t=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1};break;default:t="<>"}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,i,s){t.attr(e).animate(s).attr(i)}},{key:"animateMarker",value:function(t,e,i,s,n,a){e||(e=0),t.attr({r:e,width:e,height:e}).animate(s,n).attr({r:i,width:i.width,height:i.height}).afterAll(function(){a()})}},{key:"animateCircle",value:function(t,e,i,s,n){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(s,n).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(t,e,i,s,n){t.attr(e).animate(s).attr(i).afterAll(function(){return n()})}},{key:"animatePathsGradually",value:function(t){var e=t.el,i=t.realIndex,s=t.j,n=t.fill,a=t.pathFrom,r=t.pathTo,o=t.speed,l=t.delay,h=this.w,c=0;h.config.chart.animations.animateGradually.enabled&&(c=h.config.chart.animations.animateGradually.delay),h.config.chart.animations.dynamicAnimation.enabled&&h.globals.dataChanged&&"bar"!==h.config.chart.type&&(c=0),this.morphSVG(e,i,s,"line"!==h.config.chart.type||h.globals.comboCharts?n:"stroke",a,r,o,l*c)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){t.el.classList.remove("apexcharts-element-hidden")})}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,s,n,a,r,o){var l=this,h=this.w;n||(n=t.attr("pathFrom")),a||(a=t.attr("pathTo"));var c=function(t){return"radar"===h.config.chart.type&&(r=1),"M 0 ".concat(h.globals.gridHeight)};(!n||n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n=c()),(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=c()),h.globals.shouldAnimate||(r=1),t.plot(n).animate(1,h.globals.easing,o).plot(n).animate(r,h.globals.easing,o).plot(a).afterAll(function(){_.isNumber(i)?i===h.globals.series[h.globals.maxValsInArrayIndex].length-2&&h.globals.shouldAnimate&&l.animationCompleted(t):"none"!==s&&h.globals.shouldAnimate&&(!h.globals.comboCharts&&e===h.globals.series.length-1||h.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()})}}]),t}(),m=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(t,e,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var i=this.w;i.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,i){var s=this,n=this.w,a=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var i=n.config.chart.dropShadow;(i.enabled?s.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:a}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,e,i){var s=this,n=this.w,a=i.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter(function(t){var i=n.config.chart.dropShadow;(i.enabled?s.addShadow(t,e,i):t).componentTransfer({rgb:{type:"linear",slope:a}})}),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:s});break;case"darken":this.addDarkenFilter(t,e,{intensity:s})}}},{key:"addShadow",value:function(t,e,i){var s=i.blur,n=i.top,a=i.left,r=i.color,o=i.opacity,l=t.flood(Array.isArray(r)?r[e]:r,o).composite(t.sourceAlpha,"in").offset(a,n).gaussianBlur(s).merge(t.source);return t.blend(t.source,l)}},{key:"dropShadow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=e.top,n=e.left,a=e.blur,r=e.color,o=e.opacity,l=e.noUserSpaceOnUse,h=this.w;return t.unfilter(!0),_.isIE()&&"radialBar"===h.config.chart.type||(r=Array.isArray(r)?r[i]:r,t.filter(function(t){var e;e=_.isSafari()||_.isFirefox()||_.isIE()?t.flood(r,o).composite(t.sourceAlpha,"in").offset(n,s).gaussianBlur(a):t.flood(r,o).composite(t.sourceAlpha,"in").offset(n,s).gaussianBlur(a).merge(t.source),t.blend(t.source,e)}),l||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var s=this.w;if(void 0!==s.globals.selectedDataPoints[e]&&s.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var n=s.config.states.active.filter;"none"!==n&&this.applyFilter(t,e,n.type,n.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),b=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawLine",value:function(t,e,i,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:s,stroke:n,"stroke-dasharray":a,"stroke-width":r})}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=this.w.globals.dom.Paper.rect();return c.attr({x:t,y:e,width:i>0?i:0,height:s>0?s:0,rx:n,ry:n,opacity:r,"stroke-width":null!==o?o:0,stroke:null!==l?l:"none","stroke-dasharray":h}),c.node.setAttribute("fill",a),c}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:s,stroke:e,"stroke-width":i})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;t<0&&(t=0);var s=i.globals.dom.Paper.circle(2*t);return null!==e&&s.attr(e),s}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,s=t.stroke,n=void 0===s?"#a8a8a8":s,a=t.strokeWidth,r=void 0===a?1:a,o=t.fill,l=t.fillOpacity,h=void 0===l?1:l,c=t.strokeOpacity,d=void 0===c?1:c,u=t.classes,f=t.strokeLinecap,g=void 0===f?null:f,p=t.strokeDashArray,_=void 0===p?0:p,v=this.w;return null===g&&(g=v.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(i).attr({fill:o,"fill-opacity":h,stroke:n,"stroke-opacity":d,"stroke-linecap":g,"stroke-width":r,"stroke-dasharray":_,class:u})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=null;return null===i?s=["L",t,e].join(" "):"H"===i?s=["H",t].join(" "):"V"===i&&(s=["V",e].join(" ")),s}},{key:"curve",value:function(t,e,i,s,n,a){return["C",t,e,i,s,n,a].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,s){return["Q",t,e,i,s].join(" ")}},{key:"arc",value:function(t,e,i,s,n,a,r){var o="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(o="a"),[o,t,e,i,s,n,a,r].join(" ")}},{key:"renderPaths",value:function(t){var e,i=t.j,s=t.realIndex,n=t.pathFrom,a=t.pathTo,r=t.stroke,o=t.strokeWidth,l=t.strokeLinecap,h=t.fill,d=t.animationDelay,u=t.initialSpeed,f=t.dataChangeSpeed,g=t.className,p=t.shouldClipToGrid,_=void 0===p||p,b=t.bindEventsOnPaths,x=void 0===b||b,y=t.drawShadow,w=void 0===y||y,S=this.w,k=new m(this.ctx),C=new v(this.ctx),A=this.w.config.chart.animations.enabled,I=A&&this.w.config.chart.animations.dynamicAnimation.enabled,E=!!(A&&!S.globals.resized||I&&S.globals.dataChanged&&S.globals.shouldAnimate);E?e=n:(e=a,S.globals.animationEnded=!0);var T,M=S.config.stroke.dashArray;T=Array.isArray(M)?M[s]:S.config.stroke.dashArray;var P=this.drawPath({d:e,stroke:r,strokeWidth:o,fill:h,fillOpacity:1,classes:g,strokeLinecap:l,strokeDashArray:T});if(P.attr("index",s),_&&P.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type)k.getDefaultFilter(P,s);else if(S.config.chart.dropShadow.enabled&&w&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(s))){var L=S.config.chart.dropShadow;k.dropShadow(P,L,s)}x&&(P.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,P)),P.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,P)),P.node.addEventListener("mousedown",this.pathMouseDown.bind(this,P))),P.attr({pathTo:a,pathFrom:n});var z={el:P,j:i,realIndex:s,pathFrom:n,pathTo:a,fill:h,strokeWidth:o,delay:d};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||C.showDelayedElements():C.animatePathsGradually(c(c({},z),{},{speed:u})),S.globals.dataChanged&&I&&E&&C.animatePathsGradually(c(c({},z),{},{speed:f})),P}},{key:"drawPattern",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(e,i,function(a){"horizontalLines"===t?a.line(0,0,i,0).stroke({color:s,width:n+1}):"verticalLines"===t?a.line(0,0,0,e).stroke({color:s,width:n+1}):"slantedLines"===t?a.line(0,0,e,i).stroke({color:s,width:n}):"squares"===t?a.rect(e,i).fill("none").stroke({color:s,width:n}):"circles"===t&&a.circle(e).fill("none").stroke({color:s,width:n})})}},{key:"drawGradient",value:function(t,e,i,s,n){var a,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=this.w;e.length<9&&0===e.indexOf("#")&&(e=_.hexToRgba(e,s)),i.length<9&&0===i.indexOf("#")&&(i=_.hexToRgba(i,n));var d=0,u=1,f=1,g=null;null!==o&&(d=void 0!==o[0]?o[0]/100:0,u=void 0!==o[1]?o[1]/100:1,f=void 0!==o[2]?o[2]/100:1,g=void 0!==o[3]?o[3]/100:null);var p=!("donut"!==c.config.chart.type&&"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"bubble"!==c.config.chart.type);if(a=null===l||0===l.length?c.globals.dom.Paper.gradient(p?"radial":"linear",function(t){t.at(d,e,s),t.at(u,i,n),t.at(f,i,n),null!==g&&t.at(g,e,s)}):c.globals.dom.Paper.gradient(p?"radial":"linear",function(t){(Array.isArray(l[h])?l[h]:l).forEach(function(e){t.at(e.offset/100,e.color,e.opacity)})}),p){var v=c.globals.gridWidth/2,m=c.globals.gridHeight/2;"bubble"!==c.config.chart.type?a.attr({gradientUnits:"userSpaceOnUse",cx:v,cy:m,r:r}):a.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?a.from(0,0).to(0,1):"diagonal"===t?a.from(0,0).to(1,1):"horizontal"===t?a.from(0,1).to(1,1):"diagonal2"===t&&a.from(1,0).to(0,1);return a}},{key:"drawText",value:function(t){var e,i=t.x,s=t.y,n=t.text,a=t.textAnchor,r=t.fontSize,o=t.fontFamily,l=t.fontWeight,h=t.foreColor,c=t.opacity,d=t.cssClass,u=void 0===d?"":d,f=t.isPlainText,g=void 0===f||f,p=this.w;return void 0===n&&(n=""),a||(a="start"),h&&h.length||(h=p.config.chart.foreColor),o=o||p.config.chart.fontFamily,l=l||"regular",(e=Array.isArray(n)?p.globals.dom.Paper.text(function(t){for(var e=0;e<n.length;e++)0===e?t.tspan(n[e]):t.tspan(n[e]).newLine()}):g?p.globals.dom.Paper.plain(n):p.globals.dom.Paper.text(function(t){return t.tspan(n)})).attr({x:i,y:s,"text-anchor":a,"dominant-baseline":"auto","font-size":r,"font-family":o,"font-weight":l,fill:h,class:"apexcharts-text "+u}),e.node.style.fontFamily=o,e.node.style.opacity=c,e}},{key:"drawMarker",value:function(t,e,i){t=t||0;var s=i.pSize||0,n=null;if("square"===i.shape||"rect"===i.shape){var a=void 0===i.pRadius?s/2:i.pRadius;null!==e&&s||(s=0,a=0);var r=1.2*s+a,o=this.drawRect(r,r,r,r,a);o.attr({x:t-r/2,y:e-r/2,cx:t,cy:e,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),n=o}else"circle"!==i.shape&&i.shape||(_.isNumber(e)||(s=0,e=0),n=this.drawCircle(s,{cx:t,cy:e,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return n}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,s=new m(this.ctx),n=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}]),("none"===i.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&"none"!==i.config.states.active.filter.type&&!i.globals.isTouchDevice){var r=i.config.states.hover.filter;s.applyFilter(t,n,r.type,r.value)}}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,s=new m(this.ctx),n=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:n,dataPointIndex:a,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&s.getDefaultFilter(t,n)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,s=new m(this.ctx),n=parseInt(t.node.getAttribute("index"),10),a=parseInt(t.node.getAttribute("j"),10),r="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[n].indexOf(a)>-1){var o=i.globals.selectedDataPoints[n].indexOf(a);i.globals.selectedDataPoints[n].splice(o,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,h=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,c=function(t){Array.prototype.forEach.call(t,function(t){t.node.setAttribute("selected","false"),s.getDefaultFilter(t,n)})};c(l),c(h)}t.node.setAttribute("selected","true"),r="true",void 0===i.globals.selectedDataPoints[n]&&(i.globals.selectedDataPoints[n]=[]),i.globals.selectedDataPoints[n].push(a)}if("true"===r){var d=i.config.states.active.filter;"none"!==d&&s.applyFilter(t,n,d.type,d.value)}else"none"!==i.config.states.active.filter.type&&s.getDefaultFilter(t,n);"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:a,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:n,dataPointIndex:a,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e=t.getBBox();return{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,s){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w,r=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});s&&r.attr("transform",s),a.globals.dom.Paper.add(r);var o=r.bbox();return n||(o=r.node.getBoundingClientRect()),r.remove(),{width:o.width,height:o.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var s=e.length-3;s>0;s-=3)if(t.getSubStringLength(0,s)<=i/1.1)return void(t.textContent=e.substring(0,s)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),t}(),x=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e}return o(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===t.label.orientation){var s=null!==e?e:0,n=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(s,"']"));if(null!==n){var a=n.getBoundingClientRect();n.setAttribute("x",parseFloat(n.getAttribute("x"))-a.height+4),"top"===t.label.position?n.setAttribute("y",parseFloat(n.getAttribute("y"))+a.width):n.setAttribute("y",parseFloat(n.getAttribute("y"))-a.width);var r=this.annoCtx.graphics.rotateAroundCenter(n),o=r.x,l=r.y;n.setAttribute("transform","rotate(-90 ".concat(o," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||!e.label.text||e.label.text&&!e.label.text.trim())return null;var s=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),n=t.getBoundingClientRect(),a=e.label.style.padding.left,r=e.label.style.padding.right,o=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(o=e.label.style.padding.left,l=e.label.style.padding.right,a=e.label.style.padding.top,r=e.label.style.padding.bottom);var h=n.left-s.left-a,c=n.top-s.top-o,d=this.annoCtx.graphics.drawRect(h-i.globals.barPadForNumericAxis,c,n.width+a+r,n.height+o+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&d.node.classList.add(e.id),d}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(i,s,n){var a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(s,"']"));if(a){var r=a.parentNode,o=t.addBackgroundToAnno(a,i);o&&r.insertBefore(o.node,a)}};e.config.annotations.xaxis.map(function(t,e){i(t,e,"xaxis")}),e.config.annotations.yaxis.map(function(t,e){i(t,e,"yaxis")}),e.config.annotations.points.map(function(t,e){i(t,e,"point")})}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var s=e.globals.labels.indexOf(t),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(s+1)+")");return n&&(i=parseFloat(n.getAttribute("x"))),i}}]),t}(),y=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis}return o(t,[{key:"addXaxisAnnotation",value:function(t,e,i){var s=this.w,n=this.invertAxis?s.globals.minY:s.globals.minX,a=this.invertAxis?s.globals.maxY:s.globals.maxX,r=this.invertAxis?s.globals.yRange[0]:s.globals.xRange,o=(t.x-n)/(r/s.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(a-t.x)/(r/s.globals.gridWidth));var l=t.label.text;"category"!==s.config.xaxis.type&&!s.config.xaxis.convertedCatToNumeric||this.invertAxis||s.globals.dataFormatXNumeric||(o=this.annoCtx.helpers.getStringX(t.x));var h=t.strokeDashArray;if(_.isNumber(o)){if(null===t.x2||void 0===t.x2){var c=this.annoCtx.graphics.drawLine(o+t.offsetX,0+t.offsetY,o+t.offsetX,s.globals.gridHeight+t.offsetY,t.borderColor,h,t.borderWidth);e.appendChild(c.node),t.id&&c.node.classList.add(t.id)}else{var d=(t.x2-n)/(r/s.globals.gridWidth);if(this.annoCtx.inversedReversedAxis&&(d=(a-t.x2)/(r/s.globals.gridWidth)),"category"!==s.config.xaxis.type&&!s.config.xaxis.convertedCatToNumeric||this.invertAxis||s.globals.dataFormatXNumeric||(d=this.annoCtx.helpers.getStringX(t.x2)),d<o){var u=o;o=d,d=u}var f=this.annoCtx.graphics.drawRect(o+t.offsetX,0+t.offsetY,d-o,s.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,h);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}var g="top"===t.label.position?4:s.globals.gridHeight,p=this.annoCtx.graphics.getTextRects(l,parseFloat(t.label.style.fontSize)),v=this.annoCtx.graphics.drawText({x:o+t.label.offsetX,y:g+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?p.width/2-12:-p.width/2:0),text:l,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});v.attr({rel:i}),e.appendChild(v.node),this.annoCtx.helpers.setOrientations(t,i)}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map(function(e,s){t.addXaxisAnnotation(e,i.node,s)}),i}}]),t}(),w=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getStackedSeriesTotals",value:function(){var t=this.w,e=[];if(0===t.globals.series.length)return e;for(var i=0;i<t.globals.series[t.globals.maxValsInArrayIndex].length;i++){for(var s=0,n=0;n<t.globals.series.length;n++)void 0!==t.globals.series[n][i]&&(s+=t.globals.series[n][i]);e.push(s)}return t.globals.stackedSeriesTotals=e,e}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce(function(t,e){return t+e},0):this.w.globals.series[t].reduce(function(t,e){return t+e},0)}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter(function(t){return null!==t}):this.w.config.series[t].data.filter(function(t){return null!==t})).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(t,e,i){return t===i[0]})}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map(function(t,i){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(t){return t.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(t){return t.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach(function(t){e=Math.max(e,t)}),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(t,e){var i=0;if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=t[s];else i+=t;return i})}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map(function(s,n){for(var a=0,r=0;r<s.length;r++)i.globals.seriesX[n][r]>t&&i.globals.seriesX[n][r]<e&&(a+=s[r]);return a})}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map(function(e,i){var s=[];if(Array.isArray(e))for(var n=0;n<e.length;n++){var a=t.globals.stackedSeriesTotals[n],r=0;a&&(r=100*e[n]/a),s.push(r)}else{var o=100*e/t.globals.seriesTotals.reduce(function(t,e){return t+e},0);s.push(o)}return s})}},{key:"getCalculatedRatios",value:function(){var t,e,i,s,n=this.w.globals,a=[],r=0,o=[],l=.1,h=0;if(n.yRange=[],n.isMultipleYAxis)for(var c=0;c<n.minYArr.length;c++)n.yRange.push(Math.abs(n.minYArr[c]-n.maxYArr[c])),o.push(0);else n.yRange.push(Math.abs(n.minY-n.maxY));n.xRange=Math.abs(n.maxX-n.minX),n.zRange=Math.abs(n.maxZ-n.minZ);for(var d=0;d<n.yRange.length;d++)a.push(n.yRange[d]/n.gridHeight);if(e=n.xRange/n.gridWidth,i=Math.abs(n.initialMaxX-n.initialMinX)/n.gridWidth,t=n.yRange/n.gridWidth,s=n.xRange/n.gridHeight,(r=n.zRange/n.gridHeight*16)||(r=1),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(n.hasNegs=!0),n.isMultipleYAxis){o=[];for(var u=0;u<a.length;u++)o.push(-n.minYArr[u]/a[u])}else o.push(-n.minY/a[0]),n.minY!==Number.MIN_VALUE&&0!==Math.abs(n.minY)&&(l=-n.minY/t,h=n.minX/e);return{yRatio:a,invertedYRatio:t,zRatio:r,xRatio:e,initialXRatio:i,invertedXRatio:s,baseLineInvertedY:l,baseLineY:o,baseLineX:h}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map(function(t,s){return i.config.yaxis[s]&&i.config.yaxis[s].logarithmic?t.map(function(t){return null===t?null:e.getLogVal(t,s)}):t}),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getLogVal",value:function(t,e){var i=this.w;return(Math.log(t)-Math.log(i.globals.minYArr[e]))/(Math.log(i.globals.maxYArr[e])-Math.log(i.globals.minYArr[e]))}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,s=this.w.globals;return s.yLogRatio=t.slice(),s.logYRange=s.yRange.map(function(t,n){if(i.config.yaxis[n]&&e.w.config.yaxis[n].logarithmic){var a,r=-Number.MAX_VALUE,o=Number.MIN_VALUE;return s.seriesLog.forEach(function(t,e){t.forEach(function(t){i.config.yaxis[e]&&i.config.yaxis[e].logarithmic&&(r=Math.max(t,r),o=Math.min(t,o))})}),a=Math.pow(s.yRange[n],Math.abs(o-r)/s.yRange[n]),s.yLogRatio[n]=a/s.gridHeight,a}}),s.invalidLogScale?t.slice():s.yLogRatio}}],[{key:"checkComboSeries",value:function(t){var e=!1,i=0,s=0;return t.length&&void 0!==t[0].type&&t.forEach(function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||i++,void 0!==t.type&&s++}),s>1&&(e=!0),{comboBarCount:i,comboCharts:e}}},{key:"extendArrayProps",value:function(t,e,i){return e.yaxis&&(e=t.extendYAxis(e,i)),e.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),e.annotations.xaxis&&(e=t.extendXAxisAnnotations(e)),e.annotations.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),S=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e}return o(t,[{key:"addYaxisAnnotation",value:function(t,e,i){var s,n=this.w,a=t.strokeDashArray,r=this._getY1Y2("y1",t),o=t.label.text;if(null===t.y2||void 0===t.y2){var l=this.annoCtx.graphics.drawLine(0+t.offsetX,r+t.offsetY,this._getYAxisAnnotationWidth(t),r+t.offsetY,t.borderColor,a,t.borderWidth);e.appendChild(l.node),t.id&&l.node.classList.add(t.id)}else{if((s=this._getY1Y2("y2",t))>r){var h=r;r=s,s=h}var c=this.annoCtx.graphics.drawRect(0+t.offsetX,s+t.offsetY,this._getYAxisAnnotationWidth(t),r-s,0,t.fillColor,t.opacity,1,t.borderColor,a);c.node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(n.globals.cuid,")")),e.appendChild(c.node),t.id&&c.node.classList.add(t.id)}var d="right"===t.label.position?n.globals.gridWidth:0,u=this.annoCtx.graphics.drawText({x:d+t.label.offsetX,y:(s||r)+t.label.offsetY-3,text:o,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});u.attr({rel:i}),e.appendChild(u.node)}},{key:"_getY1Y2",value:function(t,e){var i,s="y1"===t?e.y:e.y2,n=this.w;if(this.annoCtx.invertAxis){var a=n.globals.labels.indexOf(s);n.config.xaxis.convertedCatToNumeric&&(a=n.globals.categoryLabels.indexOf(s));var r=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(a+1)+")");r&&(i=parseFloat(r.getAttribute("y")))}else{var o;o=n.config.yaxis[e.yAxisIndex].logarithmic?(s=new w(this.annoCtx.ctx).getLogVal(s,e.yAxisIndex))/n.globals.yLogRatio[e.yAxisIndex]:(s-n.globals.minYArr[e.yAxisIndex])/(n.globals.yRange[e.yAxisIndex]/n.globals.gridHeight),i=n.globals.gridHeight-o,n.config.yaxis[e.yAxisIndex]&&n.config.yaxis[e.yAxisIndex].reversed&&(i=o)}return i}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.map(function(e,s){t.addYaxisAnnotation(e,i.node,s)}),i}}]),t}(),k=function(){function t(e){a(this,t),this.w=e.w,this.annoCtx=e}return o(t,[{key:"addPointAnnotation",value:function(t,e,i){var s=this.w,n=0,a=0,r=0;this.annoCtx.invertAxis&&console.warn("Point annotation is not supported in horizontal bar charts.");var o,l=parseFloat(t.y);if("string"==typeof t.x){var h=s.globals.labels.indexOf(t.x);s.config.xaxis.convertedCatToNumeric&&(h=s.globals.categoryLabels.indexOf(t.x)),n=this.annoCtx.helpers.getStringX(t.x),null===t.y&&(l=s.globals.series[t.seriesIndex][h])}else n=(t.x-s.globals.minX)/(s.globals.xRange/s.globals.gridWidth);if(o=s.config.yaxis[t.yAxisIndex].logarithmic?(l=new w(this.annoCtx.ctx).getLogVal(l,t.yAxisIndex))/s.globals.yLogRatio[t.yAxisIndex]:(l-s.globals.minYArr[t.yAxisIndex])/(s.globals.yRange[t.yAxisIndex]/s.globals.gridHeight),a=s.globals.gridHeight-o-parseFloat(t.label.style.fontSize)-t.marker.size,r=s.globals.gridHeight-o,s.config.yaxis[t.yAxisIndex]&&s.config.yaxis[t.yAxisIndex].reversed&&(a=o+parseFloat(t.label.style.fontSize)+t.marker.size,r=o),_.isNumber(n)){var c={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},d=this.annoCtx.graphics.drawMarker(n+t.marker.offsetX,r+t.marker.offsetY,c);e.appendChild(d.node);var u=t.label.text?t.label.text:"",f=this.annoCtx.graphics.drawText({x:n+t.label.offsetX,y:a+t.label.offsetY,text:u,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(f.attr({rel:i}),e.appendChild(f.node),t.customSVG.SVG){var g=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});g.attr({transform:"translate(".concat(n+t.customSVG.offsetX,", ").concat(a+t.customSVG.offsetY,")")}),g.node.innerHTML=t.customSVG.SVG,e.appendChild(g.node)}if(t.image.path){var p=t.image.width?t.image.width:20,v=t.image.height?t.image.height:20;this.annoCtx.addImage({x:n+t.image.offsetX-p/2,y:a+t.image.offsetY-v/2,width:p,height:v,path:t.image.path,appendTo:".apexcharts-point-annotations"})}}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map(function(e,s){t.addPointAnnotation(e,i.node,s)}),i}}]),t}(),C={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},A=function(){function t(){a(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={x:0,y:null,yAxisIndex:0,seriesIndex:0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return o(t,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[C],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)/t.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(t,e){return t+e},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),I=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.graphics=new b(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new x(this),this.xAxisAnnotations=new y(this),this.yAxisAnnotations=new S(this),this.pointsAnnotations=new k(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return o(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),s=this.pointsAnnotations.drawPointAnnotations(),n=t.config.chart.animations.enabled,a=[e,i,s],r=[i.node,e.node,s.node],o=0;o<3;o++)t.globals.dom.elGraphical.add(a[o]),!n||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&r[o].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:r[o],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map(function(e,i){t.addImage(e,i)})}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map(function(e,i){t.addText(e,i)})}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var i=t.x,s=t.y,n=t.text,a=t.textAnchor,r=t.foreColor,o=t.fontSize,l=t.fontFamily,h=t.fontWeight,c=t.cssClass,d=t.backgroundColor,u=t.borderWidth,f=t.strokeDashArray,g=t.borderRadius,p=t.borderColor,_=t.appendTo,v=void 0===_?".apexcharts-annotations":_,m=t.paddingLeft,b=void 0===m?4:m,x=t.paddingRight,y=void 0===x?4:x,w=t.paddingBottom,S=void 0===w?2:w,k=t.paddingTop,C=void 0===k?2:k,A=this.w,I=this.graphics.drawText({x:i,y:s,text:n,textAnchor:a||"start",fontSize:o||"12px",fontWeight:h||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:r||A.config.chart.foreColor,cssClass:c}),E=A.globals.dom.baseEl.querySelector(v);E&&E.appendChild(I.node);var T=I.bbox();if(n){var M=this.graphics.drawRect(T.x-b,T.y-C,T.width+b+y,T.height+S+C,g,d||"transparent",1,u,p,f);E.insertBefore(M.node,I.node)}}},{key:"addImage",value:function(t,e){var i=this.w,s=t.path,n=t.x,a=void 0===n?0:n,r=t.y,o=void 0===r?0:r,l=t.width,h=void 0===l?20:l,c=t.height,d=void 0===c?20:c,u=t.appendTo,f=void 0===u?".apexcharts-annotations":u,g=i.globals.dom.Paper.image(s);g.size(h,d).move(a,o);var p=i.globals.dom.baseEl.querySelector(f);p&&p.appendChild(g.node)}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,s=t.context,n=t.type,a=t.contextMethod,r=s,o=r.w,l=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations")),h=l.childNodes.length+1,c=new A,d=Object.assign({},"xaxis"===n?c.xAxisAnnotation:"yaxis"===n?c.yAxisAnnotation:c.pointAnnotation),u=_.extend(d,e);switch(n){case"xaxis":this.addXaxisAnnotation(u,l,h);break;case"yaxis":this.addYaxisAnnotation(u,l,h);break;case"point":this.addPointAnnotation(u,l,h)}var f=o.globals.dom.baseEl.querySelector(".apexcharts-".concat(n,"-annotations .apexcharts-").concat(n,"-annotation-label[rel='").concat(h,"']")),g=this.helpers.addBackgroundToAnno(f,u);return g&&l.insertBefore(g.node,f),i&&o.globals.memory.methodsToExec.push({context:r,id:u.id?u.id:_.randomId(),method:a,label:"addAnnotation",params:e}),s}},{key:"clearAnnotations",value:function(t){var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map(function(t,i){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(i,1)}),i=_.listToArray(i),Array.prototype.forEach.call(i,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})}},{key:"removeAnnotation",value:function(t,e){var i=t.w,s=i.globals.dom.baseEl.querySelectorAll(".".concat(e));s&&(i.globals.memory.methodsToExec.map(function(t,s){t.id===e&&i.globals.memory.methodsToExec.splice(s,1)}),Array.prototype.forEach.call(s,function(t){t.parentElement.removeChild(t)}))}}]),t}(),E=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}return o(t,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,s=parseInt(e.globals.gridWidth,10),n=parseInt(e.globals.gridHeight,10),a=s>n?s:n,r=t.image,o=0,l=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(o=i.fill.image.width+1,l=i.fill.image.height):(o=a+1,l=a):(o=t.width,l=t.height);var h=document.createElementNS(e.globals.SVGNS,"pattern");b.setAttrs(h,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:o+"px",height:l+"px"});var c=document.createElementNS(e.globals.SVGNS,"image");h.appendChild(c),c.setAttributeNS(window.SVG.xlink,"href",r),b.setAttrs(c,{x:0,y:0,preserveAspectRatio:"none",width:o+"px",height:l+"px"}),c.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(h)}},{key:"getSeriesIndex",value:function(t){var e=this.w;return("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||"heatmap"===e.config.chart.type||"treemap"===e.config.chart.type?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var i,s,n,a=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var r=this.getFillColors()[this.seriesIndex];void 0!==e.globals.seriesColors[this.seriesIndex]&&(r=e.globals.seriesColors[this.seriesIndex]),"function"==typeof r&&(r=r({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var o=this.getFillType(this.seriesIndex),l=Array.isArray(a.fill.opacity)?a.fill.opacity[this.seriesIndex]:a.fill.opacity;t.color&&(r=t.color);var h=r;if(-1===r.indexOf("rgb")?r.length<9&&(h=_.hexToRgba(r,l)):r.indexOf("rgba")>-1&&(l=_.getOpacityFromRGBA(r)),t.opacity&&(l=t.opacity),"pattern"===o&&(s=this.handlePatternFill(s,r,l,h)),"gradient"===o&&(n=this.handleGradientFill(r,l,this.seriesIndex)),"image"===o){var c=a.fill.image.src,d=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(c)?t.seriesNumber<c.length?c[t.seriesNumber]:c[0]:c,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(d)}),i="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(d,")")}else i="gradient"===o?n:"pattern"===o?s:h;return t.solid&&(i=h),i}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,s=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?s=t.globals.stroke.colors:s.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?s=t.globals.fill.colors:s.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?s=t.globals.stroke.colors:s.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?s=t.globals.fill.colors:s.push(t.globals.fill.colors),void 0!==i.fillColors&&(s=[],Array.isArray(i.fillColors)?s=i.fillColors.slice():s.push(i.fillColors)),s}},{key:"handlePatternFill",value:function(t,e,i,s){var n=this.w.config,a=this.opts,r=new b(this.ctx),o=void 0===n.fill.pattern.strokeWidth?Array.isArray(n.stroke.width)?n.stroke.width[this.seriesIndex]:n.stroke.width:Array.isArray(n.fill.pattern.strokeWidth)?n.fill.pattern.strokeWidth[this.seriesIndex]:n.fill.pattern.strokeWidth,l=e;return Array.isArray(n.fill.pattern.style)?void 0!==n.fill.pattern.style[a.seriesNumber]?r.drawPattern(n.fill.pattern.style[a.seriesNumber],n.fill.pattern.width,n.fill.pattern.height,l,o,i):s:r.drawPattern(n.fill.pattern.style,n.fill.pattern.width,n.fill.pattern.height,l,o,i)}},{key:"handleGradientFill",value:function(t,e,i){var s,n=this.w.config,a=this.opts,r=new b(this.ctx),o=new _,l=n.fill.gradient.type,h=t,c=void 0===n.fill.gradient.opacityFrom?e:Array.isArray(n.fill.gradient.opacityFrom)?n.fill.gradient.opacityFrom[i]:n.fill.gradient.opacityFrom;h.indexOf("rgba")>-1&&(c=_.getOpacityFromRGBA(h));var d=void 0===n.fill.gradient.opacityTo?e:Array.isArray(n.fill.gradient.opacityTo)?n.fill.gradient.opacityTo[i]:n.fill.gradient.opacityTo;if(void 0===n.fill.gradient.gradientToColors||0===n.fill.gradient.gradientToColors.length)s="dark"===n.fill.gradient.shade?o.shadeColor(-1*parseFloat(n.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?_.rgb2hex(t):t):o.shadeColor(parseFloat(n.fill.gradient.shadeIntensity),t.indexOf("rgb")>-1?_.rgb2hex(t):t);else if(n.fill.gradient.gradientToColors[a.seriesNumber]){var u=n.fill.gradient.gradientToColors[a.seriesNumber];s=u,u.indexOf("rgba")>-1&&(d=_.getOpacityFromRGBA(u))}else s=t;if(n.fill.gradient.inverseColors){var f=h;h=s,s=f}return h.indexOf("rgb")>-1&&(h=_.rgb2hex(h)),s.indexOf("rgb")>-1&&(s=_.rgb2hex(s)),r.drawGradient(l,h,s,c,d,a.size,n.fill.gradient.stops,n.fill.gradient.colorStops,i)}}]),t}(),T=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map(function(e){return t.config.markers.size})}},{key:"plotChartMarkers",value:function(t,e,i,s){var n,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.w,o=e,l=t,h=null,c=new b(this.ctx);if((r.globals.markers.size[e]>0||a)&&(h=c.group({class:a?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var u=i;1===i&&0===d&&(u=0),1===i&&1===d&&(u=1);var f="apexcharts-marker";if("line"!==r.config.chart.type&&"area"!==r.config.chart.type||r.globals.comboCharts||r.config.tooltip.intersect||(f+=" no-pointer-events"),(Array.isArray(r.config.markers.size)?r.globals.markers.size[e]>0:r.config.markers.size>0)||a){_.isNumber(l.y[d])?f+=" w".concat(_.randomId()):f="apexcharts-nullpoint";var g=this.getMarkerConfig(f,e,u);r.config.series[o].data[u]&&(r.config.series[o].data[u].fillColor&&(g.pointFillColor=r.config.series[o].data[u].fillColor),r.config.series[o].data[u].strokeColor&&(g.pointStrokeColor=r.config.series[o].data[u].strokeColor)),s&&(g.pSize=s),(n=c.drawMarker(l.x[d],l.y[d],g)).attr("rel",u),n.attr("j",u),n.attr("index",e),n.node.setAttribute("default-marker-size",g.pSize),new m(this.ctx).setSelectionFilter(n,e,u),this.addEvents(n),h&&h.add(n)}else void 0===r.globals.pointsArray[e]&&(r.globals.pointsArray[e]=[]),r.globals.pointsArray[e].push([l.x[d],l.y[d]])}return h}},{key:"getMarkerConfig",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this.w,n=this.getMarkerStyle(e),a=s.globals.markers.size[e],r=s.config.markers;return null!==i&&r.discrete.length&&r.discrete.map(function(t){t.seriesIndex===e&&t.dataPointIndex===i&&(n.pointStrokeColor=t.strokeColor,n.pointFillColor=t.fillColor,a=t.size)}),{pSize:a,pRadius:r.radius,width:Array.isArray(r.width)?r.width[e]:r.width,height:Array.isArray(r.height)?r.height[e]:r.height,pointStrokeWidth:Array.isArray(r.strokeWidth)?r.strokeWidth[e]:r.strokeWidth,pointStrokeColor:n.pointStrokeColor,pointFillColor:n.pointFillColor,shape:Array.isArray(r.shape)?r.shape[e]:r.shape,class:t,pointStrokeOpacity:Array.isArray(r.strokeOpacity)?r.strokeOpacity[e]:r.strokeOpacity,pointStrokeDashArray:Array.isArray(r.strokeDashArray)?r.strokeDashArray[e]:r.strokeDashArray,pointFillOpacity:Array.isArray(r.fillOpacity)?r.fillOpacity[e]:r.fillOpacity,seriesIndex:e}}},{key:"addEvents",value:function(t){var e=this.w,i=new b(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,s=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(s)?s[t]:s,pointFillColor:Array.isArray(i)?i[t]:i}}}]),t}(),M=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return o(t,[{key:"draw",value:function(t,e,i){var s=this.w,n=new b(this.ctx),a=i.realIndex,r=i.pointsPos,o=i.zRatio,l=i.elParent,h=n.group({class:"apexcharts-series-markers apexcharts-series-".concat(s.config.chart.type)});if(h.attr("clip-path","url(#gridRectMarkerMask".concat(s.globals.cuid,")")),Array.isArray(r.x))for(var c=0;c<r.x.length;c++){var d=e+1,u=!0;0===e&&0===c&&(d=0),0===e&&1===c&&(d=1);var f=0,g=s.globals.markers.size[a];if(o!==1/0){g=s.globals.seriesZ[a][d]/o;var p=s.config.plotOptions.bubble;p.minBubbleRadius&&g<p.minBubbleRadius&&(g=p.minBubbleRadius),p.maxBubbleRadius&&g>p.maxBubbleRadius&&(g=p.maxBubbleRadius)}s.config.chart.animations.enabled||(f=g);var _=r.x[c],v=r.y[c];if(f=f||0,null!==v&&void 0!==s.globals.series[a][d]||(u=!1),u){var m=this.drawPoint(_,v,f,g,a,d,e);h.add(m)}l.add(h)}}},{key:"drawPoint",value:function(t,e,i,s,n,a,r){var o,l=this.w,h=n,c=new v(this.ctx),d=new m(this.ctx),u=new E(this.ctx),f=new T(this.ctx),g=new b(this.ctx),p=f.getMarkerConfig("apexcharts-marker",h),_=u.fillPath({seriesNumber:n,dataPointIndex:a,patternUnits:"objectBoundingBox",value:l.globals.series[n][r]});if("circle"===p.shape?o=g.drawCircle(i):"square"!==p.shape&&"rect"!==p.shape||(o=g.drawRect(0,0,p.width-p.pointStrokeWidth/2,p.height-p.pointStrokeWidth/2,p.pRadius)),l.config.series[h].data[a]&&l.config.series[h].data[a].fillColor&&(_=l.config.series[h].data[a].fillColor),o.attr({x:t-p.width/2-p.pointStrokeWidth/2,y:e-p.height/2-p.pointStrokeWidth/2,cx:t,cy:e,fill:_,"fill-opacity":p.pointFillOpacity,stroke:p.pointStrokeColor,r:s,"stroke-width":p.pointStrokeWidth,"stroke-dasharray":p.pointStrokeDashArray,"stroke-opacity":p.pointStrokeOpacity}),l.config.chart.dropShadow.enabled){var x=l.config.chart.dropShadow;d.dropShadow(o,x,n)}if(!this.initialAnim||l.globals.dataChanged||l.globals.resized)l.globals.animationEnded=!0;else{var y=l.config.chart.animations.speed;c.animateMarker(o,0,"circle"===p.shape?s:{width:p.width,height:p.height},y,l.globals.easing,function(){window.setTimeout(function(){c.animationCompleted(o)},100)})}if(l.globals.dataChanged&&"circle"===p.shape)if(this.dynamicAnim){var w,S,k,C,A=l.config.chart.animations.dynamicAnimation.speed;null!=(C=l.globals.previousPaths[n]&&l.globals.previousPaths[n][r])&&(w=C.x,S=C.y,k=void 0!==C.r?C.r:s);for(var I=0;I<l.globals.collapsedSeries.length;I++)l.globals.collapsedSeries[I].index===n&&(A=1,s=0);0===t&&0===e&&(s=0),c.animateCircle(o,{cx:w,cy:S,r:k},{cx:t,cy:e,r:s},A,l.globals.easing)}else o.attr({r:s});return o.attr({rel:a,j:a,index:n,"default-marker-size":s}),d.setSelectionFilter(o,n,a),f.addEvents(o),o.node.classList.add("apexcharts-marker"),o}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),t}(),P=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"dataLabelsCorrection",value:function(t,e,i,s,n,a,r){var o=this.w,l=!1,h=new b(this.ctx).getTextRects(i,r),c=h.width,d=h.height;e<0&&(e=0),e>o.globals.gridHeight+d&&(e=o.globals.gridHeight+d/2),void 0===o.globals.dataLabelsRects[s]&&(o.globals.dataLabelsRects[s]=[]),o.globals.dataLabelsRects[s].push({x:t,y:e,width:c,height:d});var u=o.globals.dataLabelsRects[s].length-2,f=void 0!==o.globals.lastDrawnDataLabelsIndexes[s]?o.globals.lastDrawnDataLabelsIndexes[s][o.globals.lastDrawnDataLabelsIndexes[s].length-1]:0;if(void 0!==o.globals.dataLabelsRects[s][u]){var g=o.globals.dataLabelsRects[s][f];(t>g.x+g.width+2||e>g.y+g.height+2||t+c<g.x)&&(l=!0)}return(0===n||a)&&(l=!0),{x:t,y:e,textRects:h,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t,e,i){var s=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=this.w,r=new b(this.ctx),o=a.config.dataLabels,l=0,h=0,c=i,d=null;if(!o.enabled||!Array.isArray(t.x))return d;d=r.group({class:"apexcharts-data-labels"});for(var u=0;u<t.x.length;u++)if(l=t.x[u]+o.offsetX,h=t.y[u]+o.offsetY+n,!isNaN(l)){1===i&&0===u&&(c=0),1===i&&1===u&&(c=1);var f=a.globals.series[e][c],g="",p=function(t){return a.config.dataLabels.formatter(t,{ctx:s.ctx,seriesIndex:e,dataPointIndex:c,w:a})};if("bubble"===a.config.chart.type)g=p(f=a.globals.seriesZ[e][c]),h=t.y[u],h=new M(this.ctx).centerTextInBubble(h,e,c).y;else void 0!==f&&(g=p(f));this.plotDataLabelsText({x:l,y:h,text:g,i:e,j:c,parent:d,offsetCorrection:!0,dataLabelsConfig:a.config.dataLabels})}return d}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new b(this.ctx),s=t.x,n=t.y,a=t.i,r=t.j,o=t.text,l=t.textAnchor,h=t.fontSize,c=t.parent,d=t.dataLabelsConfig,u=t.color,f=t.alwaysDrawDataLabel,g=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(a)<0)){var p={x:s,y:n,drawnextLabel:!0};g&&(p=this.dataLabelsCorrection(s,n,o,a,r,f,parseInt(d.style.fontSize,10))),e.globals.zoomed||(s=p.x,n=p.y),p.textRects;var _=e.globals.dataLabels.style.colors[a];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(_=e.globals.dataLabels.style.colors[r]),"function"==typeof _&&(_=_({series:e.globals.series,seriesIndex:a,dataPointIndex:r,w:e})),u&&(_=u);var v=d.offsetX,x=d.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(v=0,x=0),p.drawnextLabel){var y=i.drawText({width:100,height:parseInt(d.style.fontSize,10),x:s+v,y:n+x,foreColor:_,textAnchor:l||d.textAnchor,text:o,fontSize:h||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"});if(y.attr({class:"apexcharts-datalabel",cx:s,cy:n}),d.dropShadow.enabled){var w=d.dropShadow;new m(this.ctx).dropShadow(y,w)}c.add(y),void 0===e.globals.lastDrawnDataLabelsIndexes[a]&&(e.globals.lastDrawnDataLabelsIndexes[a]=[]),e.globals.lastDrawnDataLabelsIndexes[a].push(r)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,s=i.config.dataLabels.background,n=s.padding,a=s.padding/2,r=e.width,o=e.height,l=new b(this.ctx).drawRect(e.x-n,e.y-a/2,r+2*n,o+a,s.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,s.opacity,s.borderWidth,s.borderColor);return s.dropShadow.enabled&&new m(this.ctx).dropShadow(l,s.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var s=e[i],n=s.getBBox(),a=null;if(n.width&&n.height&&(a=this.addBackgroundToDataLabel(s,n)),a){s.parentNode.insertBefore(a.node,s);var r=s.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?a.attr({fill:r}):a.animate().attr({fill:r}),s.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),s=0;s<e.length;s++)i&&i.insertBefore(e[s],i.nextSibling)}}]),t}(),L=function(){function t(e){a(this,t),this.w=e.w,this.barCtx=e}return o(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,i=t.y,s=t.y1,n=t.y2,a=t.i,r=t.j,o=t.realIndex,l=t.series,h=t.barHeight,c=t.barWidth,d=t.barYPosition,u=t.visibleSeries,f=t.renderedPath,g=this.w,p=new b(this.barCtx.ctx),_=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[o]:this.barCtx.strokeWidth,v=e+parseFloat(c*u),m=i+parseFloat(h*u);g.globals.isXNumeric&&!g.globals.isBarHorizontal&&(v=e+parseFloat(c*(u+1)),m=i+parseFloat(h*(u+1))-_);var x,y=e,w=i,S=g.config.dataLabels,k=this.barCtx.barOptions.dataLabels;void 0!==d&&this.barCtx.isTimelineBar&&(m=d,w=d);var C=S.offsetX,A=S.offsetY,I={width:0,height:0};if(g.config.dataLabels.enabled){var E=this.barCtx.series[a][r];I=p.getTextRects(g.globals.yLabelFormatters[0](E),parseFloat(S.style.fontSize))}var T={x:e,y:i,i:a,j:r,renderedPath:f,bcx:v,bcy:m,barHeight:h,barWidth:c,textRects:I,strokeWidth:_,dataLabelsX:y,dataLabelsY:w,barDataLabelsConfig:k,offX:C,offY:A};return x=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(T):this.calculateColumnsDataLabelsPosition(T),f.attr({cy:x.bcy,cx:x.bcx,j:r,val:l[a][r],barHeight:h,barWidth:c}),this.drawCalculatedDataLabels({x:x.dataLabelsX,y:x.dataLabelsY,val:this.barCtx.isTimelineBar?[s,n]:l[a][r],i:o,j:r,barWidth:c,barHeight:h,textRects:I,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,i=this.w,s=t.i,n=t.j,a=t.y,r=t.bcx,o=t.barWidth,l=t.barHeight,h=t.textRects,c=t.dataLabelsY,d=t.barDataLabelsConfig,u=t.strokeWidth,f=t.offX,g=t.offY;l=Math.abs(l);var p="vertical"===i.config.plotOptions.bar.dataLabels.orientation;r-=u/2;var _=i.globals.gridWidth/i.globals.dataPoints;e=i.globals.isXNumeric?r-o/2+f:r-_+o/2+f,p&&(e=e+h.height/2-u/2-2);var v=this.barCtx.series[s][n]<0,m=a;switch(this.barCtx.isReversed&&(m=a-l+(v?2*l:0),a-=l),d.position){case"center":c=p?v?m+l/2+g:m+l/2-g:v?m-l/2+h.height/2+g:m+l/2+h.height/2-g;break;case"bottom":c=p?v?m+l+g:m+l-g:v?m-l+h.height+u+g:m+l-h.height/2+u-g;break;case"top":c=p?v?m+g:m-g:v?m-h.height/2-g:m+h.height+g}return i.config.chart.stacked||(c<0?c=0+u:c+h.height/3>i.globals.gridHeight&&(c=i.globals.gridHeight-u)),{bcx:r,bcy:a,dataLabelsX:e,dataLabelsY:c}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,i=t.x,s=t.i,n=t.j,a=t.bcy,r=t.barHeight,o=t.barWidth,l=t.textRects,h=t.dataLabelsX,c=t.strokeWidth,d=t.barDataLabelsConfig,u=t.offX,f=t.offY,g=e.globals.gridHeight/e.globals.dataPoints;o=Math.abs(o);var p=a-(this.barCtx.isTimelineBar?0:g)+r/2+l.height/2+f-3,_=this.barCtx.series[s][n]<0,v=i;switch(this.barCtx.isReversed&&(v=i+o-(_?2*o:0),i=e.globals.gridWidth-o),d.position){case"center":h=_?v+o/2-u:Math.max(l.width/2,v-o/2)+u;break;case"bottom":h=_?v+o-c-Math.round(l.width/2)-u:v-o+c+Math.round(l.width/2)+u;break;case"top":h=_?v-c+Math.round(l.width/2)-u:v-c-Math.round(l.width/2)+u}return e.config.chart.stacked||(h<0?h=h+l.width+c:h+l.width/2>e.globals.gridWidth&&(h=e.globals.gridWidth-l.width-c)),{bcx:i,bcy:a,dataLabelsX:h,dataLabelsY:p}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,s=t.val,n=t.i,a=t.j,r=t.textRects,o=t.barHeight,l=t.barWidth,h=t.dataLabelsConfig,d=this.w,u="rotate(0)";"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&(u="rotate(-90, ".concat(e,", ").concat(i,")"));var f=new P(this.barCtx.ctx),g=new b(this.barCtx.ctx),p=h.formatter,_=null,v=d.globals.collapsedSeriesIndices.indexOf(n)>-1;if(h.enabled&&!v){_=g.group({class:"apexcharts-data-labels",transform:u});var m="";void 0!==s&&(m=p(s,{seriesIndex:n,dataPointIndex:a,w:d})),0===s&&d.config.chart.stacked&&(m="");var x=d.globals.series[n][a]<=0,y=d.config.plotOptions.bar.dataLabels.position;"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&("top"===y&&(h.textAnchor=x?"end":"start"),"center"===y&&(h.textAnchor="middle"),"bottom"===y&&(h.textAnchor=x?"end":"start")),this.barCtx.isTimelineBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&l<g.getTextRects(m,parseFloat(h.style.fontSize)).width&&(m=""),d.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?(l>0&&r.width/1.6>l||l<0&&r.width/1.6<l)&&(m=""):r.height/1.6>o&&(m=""));var w=c({},h);this.barCtx.isHorizontal&&s<0&&("start"===h.textAnchor?w.textAnchor="end":"end"===h.textAnchor&&(w.textAnchor="start")),f.plotDataLabelsText({x:e,y:i,text:m,i:n,j:a,parent:_,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return _}}]),t}(),z=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return o(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(_.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function s(i){for(var s=0;s<i.length;s++)i[s].index===e&&t.node.classList.add("apexcharts-series-collapsed")}s(i.globals.collapsedSeries),s(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.w,n=_.clone(s.globals.initialSeries);s.globals.previousPaths=[],i?(s.globals.collapsedSeries=[],s.globals.ancillaryCollapsedSeries=[],s.globals.collapsedSeriesIndices=[],s.globals.ancillaryCollapsedSeriesIndices=[]):n=this.emptyCollapsedSeries(n),s.config.series=n,t&&(e&&(s.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w,s=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var n=parseInt(e.getAttribute("rel"),10)-1,a=null,r=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(a=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']"))):a=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']")):a=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var o=0;o<s.length;o++)s[o].classList.add(this.legendInactiveClass);null!==a&&(i.globals.axisCharts||a.parentNode.classList.remove(this.legendInactiveClass),a.classList.remove(this.legendInactiveClass),null!==r&&r.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<s.length;l++)s[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,s=this.w,n=s.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),a=function(t){for(var e=0;e<n.length;e++)n[e].classList[t](i.legendInactiveClass)};if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1;a("add"),function(t){for(var e=0;e<n.length;e++){var s=parseInt(n[e].getAttribute("val"),10);s>=t.from&&s<=t.to&&n[e].classList.remove(i.legendInactiveClass)}}(s.config.plotOptions.heatmap.colorScale.ranges[r])}else"mouseout"===t.type&&a("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",i=this.w,s=0;if(i.config.series.length>1)for(var n=i.config.series.map(function(e,s){var n=!1;return t&&(n="bar"===i.config.series[s].type||"column"===i.config.series[s].type),e.data&&e.data.length>0&&!n?s:-1}),a="asc"===e?0:n.length-1;"asc"===e?a<n.length:a>=0;"asc"===e?a++:a--)if(-1!==n[a]){s=n[a];break}return s}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,i,s){for(var n=e[i].childNodes,a={type:s,paths:[],realIndex:e[i].getAttribute("data:realIndex")},r=0;r<n.length;r++)if(n[r].hasAttribute("pathTo")){var o=n[r].getAttribute("pathTo");a.paths.push({d:o})}t.globals.previousPaths.push(a)}t.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach(function(i){for(var s,n=(s=i,t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(s,"-series .apexcharts-series"))),a=0;a<n.length;a++)e(n,a,i)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var s=function(e){for(var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(e,"'] rect")),s=[],n=function(t){var e=function(e){return i[t].getAttribute(e)},n={x:parseFloat(e("x")),y:parseFloat(e("y")),width:parseFloat(e("width")),height:parseFloat(e("height"))};s.push({rect:n,color:i[t].getAttribute("color")})},a=0;a<i.length;a++)n(a);t.globals.previousPaths.push(s)},n=0;n<i.length;n++)s(n);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(i.length>0)for(var s=0;s<i.length;s++){for(var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(s,"'] circle")),a=[],r=0;r<n.length;r++)a.push({x:n[r].getAttribute("cx"),y:n[r].getAttribute("cy"),r:n[r].getAttribute("r")});e.globals.previousPaths.push(a)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new b(this.ctx),s=t.globals.svgWidth/2,n=t.globals.svgHeight/2,a="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(s=10,a="start"):"right"===e.align&&(s=t.globals.svgWidth-10,a="end"),"top"===e.verticalAlign?n=50:"bottom"===e.verticalAlign&&(n=t.globals.svgHeight-50),s+=e.offsetX,n=n+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var r=i.drawText({x:s,y:n,text:e.text,textAnchor:a,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(r)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var s=0;s<t[e.globals.maxValsInArrayIndex].length;s++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),s=0;s<i.length-1;s++)if(i[s][0]!==i[s+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(t){return t.length>0?t:[]})}}]),t}(),N=function(){function t(e){a(this,t),this.w=e.w,this.barCtx=e}return o(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var s=0;s<t[i].length;s++)e.globals.seriesX[i][s]>e.globals.minX&&e.globals.seriesX[i][s]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=t.length-1,e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,e,i,s,n,a,r,o,l=this.w,h=l.globals.dataPoints;this.barCtx.isTimelineBar&&(h=l.globals.labels.length);var c=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(c=1),this.barCtx.isHorizontal)n=(i=l.globals.gridHeight/h)/c,l.globals.isXNumeric&&(n=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),n=n*parseInt(this.barCtx.barOptions.barHeight,10)/100,o=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),e=(i-n*this.barCtx.seriesLen)/2;else{if(s=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(s=l.globals.gridWidth/l.globals.dataPoints),a=s/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var d=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(d=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/d>0&&(s=l.globals.minXDiff/d),(a=s/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}r=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),t=l.globals.padHorizontal+(s-a*this.barCtx.seriesLen)/2}return{x:t,y:e,yDivision:i,xDivision:s,barHeight:n,barWidth:a,zeroH:r,zeroW:o}}},{key:"getPathFillColor",value:function(t,e,i,s){var n=this.w,a=new E(this.barCtx.ctx),r=null,o=this.barCtx.barOptions.distributed?i:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(s){t[e][i]>=s.from&&t[e][i]<=s.to&&(r=s.color)}),n.config.series[e].data[i]&&n.config.series[e].data[i].fillColor&&(r=n.config.series[e].data[i].fillColor),a.fillPath({seriesNumber:this.barCtx.barOptions.distributed?o:s,dataPointIndex:i,color:r,value:t[e][i]})}},{key:"getStrokeWidth",value:function(t,e,i){var s=0,n=this.w;return void 0===this.barCtx.series[t][e]||null===this.barCtx.series[t][e]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,n.config.stroke.show&&(this.barCtx.isNullValue||(s=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),s}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,s=t.x1,n=t.x2,a=t.y1,r=t.y2,o=t.elSeries,l=this.w,h=new b(this.barCtx.ctx),c=new z(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&c===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e-=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[e],u=h.drawRect(void 0!==s?s:0,void 0!==a?a:0,void 0!==n?n:l.globals.gridWidth,void 0!==r?r:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);o.add(u),u.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e=t.barWidth,i=t.barXPosition,s=t.yRatio,n=t.y1,a=t.y2,r=t.strokeWidth,o=t.series,l=t.realIndex,h=t.i,c=t.j,d=t.w,u=new b(this.barCtx.ctx);(r=Array.isArray(r)?r[l]:r)||(r=0);var f={barWidth:e,strokeWidth:r,yRatio:s,barXPosition:i,y1:n,y2:a},g=this.getRoundedBars(d,f,o,h,c),p=i,_=i+e,v=u.move(p,n),m=u.move(p,n),x=u.line(_-r,n);return d.globals.previousPaths.length>0&&(m=this.barCtx.getPreviousPath(l,c,!1)),v=v+u.line(p,g.y2)+g.pathWithRadius+u.line(_-r,g.y2)+x+x+"z",m=m+u.line(p,n)+x+x+x+x+x+u.line(p,n),d.config.chart.stacked&&(this.barCtx.yArrj.push(g.y2),this.barCtx.yArrjF.push(Math.abs(n-g.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[h][c])),{pathTo:v,pathFrom:m}}},{key:"getBarpaths",value:function(t){var e=t.barYPosition,i=t.barHeight,s=t.x1,n=t.x2,a=t.strokeWidth,r=t.series,o=t.realIndex,l=t.i,h=t.j,c=t.w,d=new b(this.barCtx.ctx);(a=Array.isArray(a)?a[o]:a)||(a=0);var u={barHeight:i,strokeWidth:a,barYPosition:e,x2:n,x1:s},f=this.getRoundedBars(c,u,r,l,h),g=d.move(s,e),p=d.move(s,e);c.globals.previousPaths.length>0&&(p=this.barCtx.getPreviousPath(o,h,!1));var _=e,v=e+i,m=d.line(s,v-a);return g=g+d.line(f.x2,_)+f.pathWithRadius+d.line(f.x2,v-a)+m+m+"z",p=p+d.line(s,_)+m+m+m+m+m+d.line(s,_),c.config.chart.stacked&&(this.barCtx.xArrj.push(f.x2),this.barCtx.xArrjF.push(Math.abs(s-f.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[l][h])),{pathTo:g,pathFrom:p}}},{key:"getRoundedBars",value:function(t,e,i,s,n){var a=new b(this.barCtx.ctx),r=t.config.plotOptions.bar.borderRadius;if(t.config.chart.stacked&&i.length>1&&s!==this.barCtx.radiusOnSeriesNumber&&(r=0),this.barCtx.isHorizontal){var o="",l=e.x2;if(Math.abs(e.x1-e.x2)<r&&(r=Math.abs(e.x1-e.x2)),void 0!==i[s][n]||null!==i[s][n]){var h=this.barCtx.isReversed?i[s][n]>0:i[s][n]<0;h&&(r*=-1),l-=r,o=a.quadraticCurve(l+r,e.barYPosition,l+r,e.barYPosition+(h?-1*r:r))+a.line(l+r,e.barYPosition+e.barHeight-e.strokeWidth-(h?-1*r:r))+a.quadraticCurve(l+r,e.barYPosition+e.barHeight-e.strokeWidth,l,e.barYPosition+e.barHeight-e.strokeWidth)}return{pathWithRadius:o,x2:l}}var c="",d=e.y2;if(Math.abs(e.y1-e.y2)<r&&(r=Math.abs(e.y1-e.y2)),void 0!==i[s][n]||null!==i[s][n]){var u=i[s][n]<0;u&&(r*=-1),d+=r,c=a.quadraticCurve(e.barXPosition,d-r,e.barXPosition+(u?-1*r:r),d-r)+a.line(e.barXPosition+e.barWidth-e.strokeWidth-(u?-1*r:r),d-r)+a.quadraticCurve(e.barXPosition+e.barWidth-e.strokeWidth,d-r,e.barXPosition+e.barWidth-e.strokeWidth,d)}return{pathWithRadius:c,y2:d}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,s=0;s<e.length;s++){for(var n=0,a=0;a<e[i.globals.maxValsInArrayIndex].length;a++)n+=e[s][a];0===n&&this.barCtx.zeroSerieses.push(s)}for(var r=e.length-1;r>=0;r--)this.barCtx.zeroSerieses.indexOf(r)>-1&&r===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var o=e.length-1;o>=0;o--)i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}}]),t}(),$=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w;var s=this.w;this.barOptions=s.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=s.config.stroke.width,this.isNullValue=!1,this.isTimelineBar="datetime"===s.config.xaxis.type&&s.globals.seriesRangeBarTimeline.length,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new N(this)}return o(t,[{key:"draw",value:function(t,e){var i=this.w,s=new b(this.ctx),n=new w(this.ctx,i);t=n.getLogSeries(t),this.series=t,this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var a=s.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var r=0,o=0;r<t.length;r++,o++){var l,h,d,u,f=void 0,g=void 0,p=[],v=[],m=i.globals.comboCharts?e[r]:r,x=s.group({class:"apexcharts-series",rel:r+1,seriesName:_.escapeString(i.globals.seriesNames[m]),"data:realIndex":m});this.ctx.series.addCollapsedClassToSeries(x,m),t[r].length>0&&(this.visibleI=this.visibleI+1);var y=0,S=0;this.yRatio.length>1&&(this.yaxisIndex=m),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var k=this.barHelpers.initialPositions();g=k.y,y=k.barHeight,h=k.yDivision,u=k.zeroW,f=k.x,S=k.barWidth,l=k.xDivision,d=k.zeroH,this.horizontal||v.push(f+S/2);for(var C=s.group({class:"apexcharts-datalabels","data:realIndex":m}),A=0;A<i.globals.dataPoints;A++){var I=this.barHelpers.getStrokeWidth(r,A,m),E=null,T={indexes:{i:r,j:A,realIndex:m,bc:o},x:f,y:g,strokeWidth:I,elSeries:x};this.isHorizontal?(E=this.drawBarPaths(c(c({},T),{},{barHeight:y,zeroW:u,yDivision:h})),S=this.series[r][A]/this.invertedYRatio):(E=this.drawColumnPaths(c(c({},T),{},{xDivision:l,barWidth:S,zeroH:d})),y=this.series[r][A]/this.yRatio[this.yaxisIndex]),g=E.y,f=E.x,A>0&&v.push(f+S/2),p.push(g);var M=this.barHelpers.getPathFillColor(t,r,A,m);this.renderSeries({realIndex:m,pathFill:M,j:A,i:r,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:I,elSeries:x,x:f,y:g,series:t,barHeight:y,barWidth:S,elDataLabelsWrap:C,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[m]=v,i.globals.seriesYvalues[m]=p,a.add(x)}return a}},{key:"renderSeries",value:function(t){var e=t.realIndex,i=t.pathFill,s=t.lineFill,n=t.j,a=t.i,r=t.pathFrom,o=t.pathTo,l=t.strokeWidth,h=t.elSeries,c=t.x,d=t.y,u=t.y1,f=t.y2,g=t.series,p=t.barHeight,_=t.barWidth,v=t.barYPosition,x=t.elDataLabelsWrap,y=t.visibleSeries,w=t.type,S=this.w,k=new b(this.ctx);s||(s=this.barOptions.distributed?S.globals.stroke.colors[n]:S.globals.stroke.colors[e]),S.config.series[a].data[n]&&S.config.series[a].data[n].strokeColor&&(s=S.config.series[a].data[n].strokeColor),this.isNullValue&&(i="none");var C=n/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,A=k.renderPaths({i:a,j:n,realIndex:e,pathFrom:r,pathTo:o,stroke:s,strokeWidth:l,strokeLineCap:S.config.stroke.lineCap,fill:i,animationDelay:C,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(w,"-area")});A.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")")),void 0!==u&&void 0!==f&&(A.attr("data-range-y1",u),A.attr("data-range-y2",f)),new m(this.ctx).setSelectionFilter(A,e,n),h.add(A);var I=new L(this).handleBarDataLabels({x:c,y:d,y1:u,y2:f,i:a,j:n,series:g,realIndex:e,barHeight:p,barWidth:_,barYPosition:v,renderedPath:A,visibleSeries:y});return null!==I&&x.add(I),h.add(x),h}},{key:"drawBarPaths",value:function(t){var e=t.indexes,i=t.barHeight,s=t.strokeWidth,n=t.zeroW,a=t.x,r=t.y,o=t.yDivision,l=t.elSeries,h=this.w,c=e.i,d=e.j;h.globals.isXNumeric&&(r=(h.globals.seriesX[c][d]-h.globals.minX)/this.invertedXRatio-i);var u=r+i*this.visibleI;a=void 0===this.series[c][d]||null===this.series[c][d]?n:n+this.series[c][d]/this.invertedYRatio-2*(this.isReversed?this.series[c][d]/this.invertedYRatio:0);var f=this.barHelpers.getBarpaths({barYPosition:u,barHeight:i,x1:n,x2:a,strokeWidth:s,series:this.series,realIndex:e.realIndex,i:c,j:d,w:h});return h.globals.isXNumeric||(r+=o),this.barHelpers.barBackground({j:d,i:c,y1:u-i*this.visibleI,y2:i*this.seriesLen,elSeries:l}),{pathTo:f.pathTo,pathFrom:f.pathFrom,x:a,y:r,barYPosition:u}}},{key:"drawColumnPaths",value:function(t){var e=t.indexes,i=t.x,s=t.y,n=t.xDivision,a=t.barWidth,r=t.zeroH,o=t.strokeWidth,l=t.elSeries,h=this.w,c=e.realIndex,d=e.i,u=e.j,f=e.bc;if(h.globals.isXNumeric){var g=c;h.globals.seriesX[c].length||(g=h.globals.maxValsInArrayIndex),i=(h.globals.seriesX[g][u]-h.globals.minX)/this.xRatio-a*this.seriesLen/2}var p=i+a*this.visibleI;s=void 0===this.series[d][u]||null===this.series[d][u]?r:r-this.series[d][u]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[d][u]/this.yRatio[this.yaxisIndex]:0);var _=this.barHelpers.getColumnPaths({barXPosition:p,barWidth:a,y1:r,y2:s,strokeWidth:o,series:this.series,realIndex:e.realIndex,i:d,j:u,w:h});return h.globals.isXNumeric||(i+=n),this.barHelpers.barBackground({bc:f,j:u,i:d,x1:p-o/2-a*this.visibleI,x2:a*this.seriesLen+o/2,elSeries:l}),{pathTo:_.pathTo,pathFrom:_.pathFrom,x:i,y:s,barXPosition:p}}},{key:"getPreviousPath",value:function(t,e){for(var i,s=this.w,n=0;n<s.globals.previousPaths.length;n++){var a=s.globals.previousPaths[n];a.paths&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(t,10)&&void 0!==s.globals.previousPaths[n].paths[e]&&(i=s.globals.previousPaths[n].paths[e].d)}return i}}]),t}(),D=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return o(t,[{key:"isValidDate",value:function(t){return!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,s=this.w.config.xaxis.labels.datetimeUTC,n=["\0"].concat(g(i.months)),a=[""].concat(g(i.shortMonths)),r=[""].concat(g(i.days)),o=[""].concat(g(i.shortDays));function l(t,e){var i=t+"";for(e=e||2;i.length<e;)i="0"+i;return i}var h=s?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+h)).replace(/(^|[^\\])yy/g,"$1"+h.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+h);var c=(s?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+l(c))).replace(/(^|[^\\])M/g,"$1"+c);var d=s?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+r[0])).replace(/(^|[^\\])ddd/g,"$1"+o[0])).replace(/(^|[^\\])dd/g,"$1"+l(d))).replace(/(^|[^\\])d/g,"$1"+d);var u=s?t.getUTCHours():t.getHours(),f=u>12?u-12:0===u?12:u;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(u))).replace(/(^|[^\\])H/g,"$1"+u)).replace(/(^|[^\\])hh+/g,"$1"+l(f))).replace(/(^|[^\\])h/g,"$1"+f);var p=s?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(p))).replace(/(^|[^\\])m/g,"$1"+p);var _=s?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(_))).replace(/(^|[^\\])s/g,"$1"+_);var v=s?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(v,3)),v=Math.round(v/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(v)),v=Math.round(v/10);var m=u<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+m)).replace(/(^|[^\\])T/g,"$1"+m.charAt(0));var b=m.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+b)).replace(/(^|[^\\])t/g,"$1"+b.charAt(0));var x=-t.getTimezoneOffset(),y=s||!x?"Z":x>0?"+":"-";if(!s){var w=(x=Math.abs(x))%60;y+=l(Math.floor(x/60))+":"+l(w)}e=e.replace(/(^|[^\\])K/g,"$1"+y);var S=(s?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(r[0],"g"),r[S])).replace(new RegExp(o[0],"g"),o[S])).replace(new RegExp(n[0],"g"),n[c])).replace(new RegExp(a[0],"g"),a[c])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var s=this.w;void 0!==s.config.xaxis.min&&(t=s.config.xaxis.min),void 0!==s.config.xaxis.max&&(e=s.config.xaxis.max);var n=this.getDate(t),a=this.getDate(e),r=this.formatDate(n,"yyyy MM dd HH mm ss fff").split(" "),o=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(r[6],10),maxMillisecond:parseInt(o[6],10),minSecond:parseInt(r[5],10),maxSecond:parseInt(o[5],10),minMinute:parseInt(r[4],10),maxMinute:parseInt(o[4],10),minHour:parseInt(r[3],10),maxHour:parseInt(o[3],10),minDate:parseInt(r[2],10),maxDate:parseInt(o[2],10),minMonth:parseInt(r[1],10)-1,maxMonth:parseInt(o[1],10)-1,minYear:parseInt(r[0],10),maxYear:parseInt(o[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var s=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&s++,s}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=_.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),t}(),H=function(t){d(i,$);var e=f(i);function i(){return a(this,i),e.apply(this,arguments)}return o(i,[{key:"draw",value:function(t,e){var i=this.w,s=new b(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var n=s.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),a=0;a<t.length;a++){var r,o,l,h=void 0,d=void 0,u=void 0,f=i.globals.comboCharts?e[a]:a,g=s.group({class:"apexcharts-series",seriesName:_.escapeString(i.globals.seriesNames[f]),rel:a+1,"data:realIndex":f});t[a].length>0&&(this.visibleI=this.visibleI+1);var p=0,v=0;this.yRatio.length>1&&(this.yaxisIndex=f);var m=this.barHelpers.initialPositions();d=m.y,l=m.zeroW,h=m.x,v=m.barWidth,r=m.xDivision,o=m.zeroH;for(var x=s.group({class:"apexcharts-datalabels","data:realIndex":f}),y=0;y<i.globals.dataPoints;y++){var w=this.barHelpers.getStrokeWidth(a,y,f),S=this.seriesRangeStart[a][y],k=this.seriesRangeEnd[a][y],C=null,A=null,I={x:h,y:d,strokeWidth:w,elSeries:g};if(u=m.yDivision,p=m.barHeight,this.isHorizontal){A=d+p*this.visibleI;var E=this.seriesLen;i.config.plotOptions.bar.rangeBarGroupRows&&(E=1);var T=(u-p*E)/2;if(void 0===i.config.series[a].data[y])break;if(this.isTimelineBar&&i.config.series[a].data[y].x){var M=this.detectOverlappingBars({i:a,j:y,barYPosition:A,srty:T,barHeight:p,yDivision:u,initPositions:m});p=M.barHeight,A=M.barYPosition}v=(C=this.drawRangeBarPaths(c({indexes:{i:a,j:y,realIndex:f},barHeight:p,barYPosition:A,zeroW:l,yDivision:u,y1:S,y2:k},I))).barWidth}else p=(C=this.drawRangeColumnPaths(c({indexes:{i:a,j:y,realIndex:f},zeroH:o,barWidth:v,xDivision:r},I))).barHeight;d=C.y,h=C.x;var P=this.barHelpers.getPathFillColor(t,a,y,f),L=i.globals.stroke.colors[f];this.renderSeries({realIndex:f,pathFill:P,lineFill:L,j:y,i:a,x:h,y:d,y1:S,y2:k,pathFrom:C.pathFrom,pathTo:C.pathTo,strokeWidth:w,elSeries:g,series:t,barHeight:p,barYPosition:A,barWidth:v,elDataLabelsWrap:x,visibleSeries:this.visibleI,type:"rangebar"})}n.add(g)}return n}},{key:"detectOverlappingBars",value:function(t){var e=t.i,i=t.j,s=t.barYPosition,n=t.srty,a=t.barHeight,r=t.yDivision,o=t.initPositions,l=this.w,h=[],c=l.config.series[e].data[i].rangeName,d=l.config.series[e].data[i].x,u=l.globals.labels.indexOf(d),f=l.globals.seriesRangeBarTimeline[e].findIndex(function(t){return t.x===d&&t.overlaps.length>0});return s=l.config.plotOptions.bar.rangeBarGroupRows?n+r*u:n+a*this.visibleI+r*u,f>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(h=l.globals.seriesRangeBarTimeline[e][f].overlaps).indexOf(c)>-1&&(s=(a=o.barHeight/h.length)*this.visibleI+r*(100-parseInt(this.barOptions.barHeight,10))/100/2+a*(this.visibleI+h.indexOf(c))+r*u),{barYPosition:s,barHeight:a}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,i=t.x,s=(t.strokeWidth,t.xDivision),n=t.barWidth,a=t.zeroH,r=this.w,o=e.i,l=e.j,h=this.yRatio[this.yaxisIndex],c=e.realIndex,d=this.getRangeValue(c,l),u=Math.min(d.start,d.end),f=Math.max(d.start,d.end);r.globals.isXNumeric&&(i=(r.globals.seriesX[o][l]-r.globals.minX)/this.xRatio-n/2);var g=i+n*this.visibleI;void 0===this.series[o][l]||null===this.series[o][l]?u=a:(u=a-u/h,f=a-f/h);var p=Math.abs(f-u),_=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:n,y1:u,y2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:c,j:l,w:r});return r.globals.isXNumeric||(i+=s),{pathTo:_.pathTo,pathFrom:_.pathFrom,barHeight:p,x:i,y:f,barXPosition:g}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,i=t.y,s=t.y1,n=t.y2,a=t.yDivision,r=t.barHeight,o=t.barYPosition,l=t.zeroW,h=this.w,c=l+s/this.invertedYRatio,d=l+n/this.invertedYRatio,u=Math.abs(d-c),f=this.barHelpers.getBarpaths({barYPosition:o,barHeight:r,x1:c,x2:d,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:h});return h.globals.isXNumeric||(i+=a),{pathTo:f.pathTo,pathFrom:f.pathFrom,barWidth:u,x:d,y:i}}},{key:"getRangeValue",value:function(t,e){var i=this.w;return{start:i.globals.seriesRangeStart[t][e],end:i.globals.seriesRangeEnd[t][e]}}},{key:"getTooltipValues",value:function(t){var e=t.ctx,i=t.seriesIndex,s=t.dataPointIndex,n=t.y1,a=t.y2,r=t.w,o=r.globals.seriesRangeStart[i][s],l=r.globals.seriesRangeEnd[i][s],h=r.globals.labels[s],c=r.config.series[i].name?r.config.series[i].name:"",d=r.config.tooltip.y.formatter,u=r.config.tooltip.y.title.formatter,f={w:r,seriesIndex:i,dataPointIndex:s,start:o,end:l};"function"==typeof u&&(c=u(c,f)),Number.isFinite(n)&&Number.isFinite(a)&&(o=n,l=a,r.config.series[i].data[s].x&&(h=r.config.series[i].data[s].x+":"),"function"==typeof d&&(h=d(h,f)));var g="",p="",_=r.globals.colors[i];if(void 0===r.config.tooltip.x.formatter)if("datetime"===r.config.xaxis.type){var v=new D(e);g=v.formatDate(v.getDate(o),r.config.tooltip.x.format),p=v.formatDate(v.getDate(l),r.config.tooltip.x.format)}else g=o,p=l;else g=r.config.tooltip.x.formatter(o),p=r.config.tooltip.x.formatter(l);return{start:o,end:l,startVal:g,endVal:p,ylabel:h,color:_,seriesName:c}}},{key:"buildCustomTooltipHTML",value:function(t){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t.color+'">'+(t.seriesName||"")+'</span></div><div> <span class="category">'+t.ylabel+' </span> <span class="value start-value">'+t.start+'</span> <span class="separator">-</span> <span class="value end-value">'+t.end+"</span></div></div>"}}]),i}(),F=function(){function t(e){a(this,t),this.opts=e}return o(t,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,_.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,s=e.dataPointIndex,n=e.w;return t._getBoxTooltip(n,i,s,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var i=e.seriesIndex,s=e.dataPointIndex,n=e.w;return t._getBoxTooltip(n,i,s,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var i=e.seriesIndex,s=e.dataPointIndex,n=e.w,a=n.globals.seriesRangeStart[i][s];return n.globals.seriesRangeEnd[i][s]-a},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var e=new H(t.ctx,null),i=e.getTooltipValues(t),s=i.color,n=i.seriesName,a=i.ylabel,r=i.startVal,o=i.endVal;return e.buildCustomTooltipHTML({color:s,seriesName:n,ylabel:a,start:r,end:o})}(t):function(t){var e=new H(t.ctx,null),i=e.getTooltipValues(t),s=i.color,n=i.seriesName,a=i.ylabel,r=i.start,o=i.end;return e.buildCustomTooltipHTML({color:s,seriesName:n,ylabel:a,start:r,end:o})}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(t){return _.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return _.isNumber(t)?Math.floor(t):t};var s=t.xaxis.labels.formatter,n=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(n=i.map(function(t){return Array.isArray(t)?t:String(t)})),n&&n.length&&(t.xaxis.labels.formatter=function(t){return _.isNumber(t)?s(n[Math.floor(t)-1]):s(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,e,i,s,n){var a=t.globals.seriesCandleO[e][i],r=t.globals.seriesCandleH[e][i],o=t.globals.seriesCandleM[e][i],l=t.globals.seriesCandleL[e][i],h=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==n?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(s[0],': <span class="value">')+a+"</span></div>"+"<div>".concat(s[1],': <span class="value">')+r+"</span></div>"+(o?"<div>".concat(s[2],': <span class="value">')+o+"</span></div>":"")+"<div>".concat(s[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(s[4],': <span class="value">')+h+"</span></div></div>"}}]),t}(),R=function(){function t(e){a(this,t),this.opts=e}return o(t,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,s=new A,a=new F(i);this.chartType=i.chart.type,"histogram"===this.chartType&&(i.chart.type="bar",i=_.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},i)),i=this.extendYAxis(i),i=this.extendAnnotations(i);var r=s.init(),o={};if(i&&"object"===n(i)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?a[i.chart.type]():a.line(),i.chart.brush&&i.chart.brush.enabled&&(l=a.brush(l)),i.chart.stacked&&"100%"===i.chart.stackType&&(i=a.stacked100(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),((i=this.checkForCatToNumericXAxis(this.chartType,l,i)).chart.sparkline&&i.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=a.sparkline(l)),o=_.extend(r,l)}var h=_.extend(o,window.Apex);return r=_.extend(h,i),this.handleUserInputErrors(r)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var s=new F(i),n="bar"===t&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal,a="pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t,r="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,o=i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement;return n||a||!r||"between"===o||(i=s.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new A;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=_.extend(t.yaxis,window.Apex.yaxis)),t.yaxis.constructor!==Array?t.yaxis=[_.extend(i.yAxis,t.yaxis)]:t.yaxis=_.extendArray(t.yaxis,i.yAxis);var s=!1;t.yaxis.forEach(function(t){t.logarithmic&&(s=!0)});var n=t.series;return e&&!n&&(n=e.config.series),s&&n.length!==t.yaxis.length&&n.length&&(t.yaxis=n.map(function(e,s){if(e.name||(n[s].name="series-".concat(s+1)),t.yaxis[s])return t.yaxis[s].seriesName=n[s].name,t.yaxis[s];var a=_.extend(i.yAxis,t.yaxis[0]);return a.show=!1,a})),s&&n.length>1&&n.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new A;return t.annotations.yaxis=_.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new A;return t.annotations.xaxis=_.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new A;return t.annotations.points=_.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(console.warn('crosshairs.width = "barWidth" is only supported in single series, not in a multi-series barChart.'),e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e.chart.group&&0===e.yaxis[0].labels.minWidth&&console.warn("It looks like you have multiple charts in synchronization. You must provide yaxis.labels.minWidth which must be EQUAL for all grouped charts to prevent incorrect behaviour."),Array.isArray(e.stroke.width)&&"line"!==e.chart.type&&"area"!==e.chart.type&&(console.warn("stroke.width option accepts array only for line and area charts. Reverted back to Number"),e.stroke.width=e.stroke.width[0]),e}}]),t}(),j=function(){function t(){a(this,t)}return o(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRangeBarTimeline=[],t.seriesPercent=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.xaxisLabelsCount=0,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=_.extend({},t),e.initialSeries=_.clone(t.series),e.lastXAxis=_.clone(e.initialConfig.xaxis),e.lastYAxis=_.clone(e.initialConfig.yaxis),e}}]),t}(),O=function(){function t(e){a(this,t),this.opts=e}return o(t,[{key:"init",value:function(){var t=new R(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new j).init(t)}}}]),t}(),B=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.coreUtils=new w(this.ctx)}return o(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new z(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new z(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,s=this.w.globals,n="boxPlot"===i.chart.type||"boxPlot"===i.series[e].type,a=0;a<t[e].data.length;a++)if(void 0!==t[e].data[a][1]&&(Array.isArray(t[e].data[a][1])&&4===t[e].data[a][1].length&&!n?this.twoDSeries.push(_.parseNumber(t[e].data[a][1][3])):t[e].data[a].length>=5?this.twoDSeries.push(_.parseNumber(t[e].data[a][4])):this.twoDSeries.push(_.parseNumber(t[e].data[a][1])),s.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var r=new Date(t[e].data[a][0]);r=new Date(r).getTime(),this.twoDSeriesX.push(r)}else this.twoDSeriesX.push(t[e].data[a][0]);for(var o=0;o<t[e].data.length;o++)void 0!==t[e].data[o][2]&&(this.threeDSeries.push(t[e].data[o][2]),s.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,s=this.w.globals,n=new D(this.ctx),a=e;s.collapsedSeriesIndices.indexOf(e)>-1&&(a=this.activeSeriesIndex);for(var r=0;r<t[e].data.length;r++)void 0!==t[e].data[r].y&&(Array.isArray(t[e].data[r].y)?this.twoDSeries.push(_.parseNumber(t[e].data[r].y[t[e].data[r].y.length-1])):this.twoDSeries.push(_.parseNumber(t[e].data[r].y)));for(var o=0;o<t[a].data.length;o++){var l="string"==typeof t[a].data[o].x,h=Array.isArray(t[a].data[o].x),c=!h&&!!n.isValidDate(t[a].data[o].x.toString());if(l||c)if(l||i.xaxis.convertedCatToNumeric){var d=s.isBarHorizontal&&s.isRangeData;"datetime"!==i.xaxis.type||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[a].data[o].x)):this.twoDSeriesX.push(n.parseDate(t[a].data[o].x))}else"datetime"===i.xaxis.type?this.twoDSeriesX.push(n.parseDate(t[a].data[o].x.toString())):(s.dataFormatXNumeric=!0,s.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[a].data[o].x)));else h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[a].data[o].x)):(s.isXNumeric=!0,s.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[a].data[o].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var u=0;u<t[e].data.length;u++)this.threeDSeries.push(t[e].data[u].z);s.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.config,s=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",t,e)),s.seriesRangeStart.push(n.start),s.seriesRangeEnd.push(n.end),"datetime"===i.xaxis.type&&s.seriesRangeBarTimeline.push(n.rangeUniques),s.seriesRangeBarTimeline.forEach(function(t,e){t&&t.forEach(function(t,e){t.y.forEach(function(e,i){for(var s=0;s<t.y.length;s++)if(i!==s){var n=e.y1,a=e.y2,r=t.y[s].y1;n<=t.y[s].y2&&r<=a&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[s].rangeName)<0&&t.overlaps.push(t.y[s].rangeName))}})})}),n}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,s={};return this.isFormat2DArray()?s=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(s=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=s.o,i.seriesCandleH[e]=s.h,i.seriesCandleM[e]=s.m,i.seriesCandleL[e]=s.l,i.seriesCandleC[e]=s.c,s}},{key:"handleRangeDataFormat",value:function(t,e,i){var s=[],n=[],a=e[i].data.filter(function(t,e,i){return e===i.findIndex(function(e){return e.x===t.x})}).map(function(t,e){return{x:t.x,overlaps:[],y:[]}}),r="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",o=new z(this.ctx).getActiveConfigSeriesIndex();if("array"===t){if(2!==e[o].data[0][1].length)throw new Error(r);for(var l=0;l<e[i].data.length;l++)s.push(e[i].data[l][1][0]),n.push(e[i].data[l][1][1])}else if("xy"===t){if(2!==e[o].data[0].y.length)throw new Error(r);for(var h=function(t){var r=_.randomId(),o=e[i].data[t].x,l={y1:e[i].data[t].y[0],y2:e[i].data[t].y[1],rangeName:r};e[i].data[t].rangeName=r;var h=a.findIndex(function(t){return t.x===o});a[h].y.push(l),s.push(l.y1),n.push(l.y2)},c=0;c<e[i].data.length;c++)h(c)}return{start:s,end:n,rangeUniques:a}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var s=this.w,n="boxPlot"===s.config.chart.type||"boxPlot"===s.config.series[i].type,a=[],r=[],o=[],l=[],h=[];if("array"===t)if(n&&6===e[i].data[0].length||!n&&5===e[i].data[0].length)for(var c=0;c<e[i].data.length;c++)a.push(e[i].data[c][1]),r.push(e[i].data[c][2]),n?(o.push(e[i].data[c][3]),l.push(e[i].data[c][4]),h.push(e[i].data[c][5])):(l.push(e[i].data[c][3]),h.push(e[i].data[c][4]));else for(var d=0;d<e[i].data.length;d++)Array.isArray(e[i].data[d][1])&&(a.push(e[i].data[d][1][0]),r.push(e[i].data[d][1][1]),n?(o.push(e[i].data[d][1][2]),l.push(e[i].data[d][1][3]),h.push(e[i].data[d][1][4])):(l.push(e[i].data[d][1][2]),h.push(e[i].data[d][1][3])));else if("xy"===t)for(var u=0;u<e[i].data.length;u++)Array.isArray(e[i].data[u].y)&&(a.push(e[i].data[u].y[0]),r.push(e[i].data[u].y[1]),n?(o.push(e[i].data[u].y[2]),l.push(e[i].data[u].y[3]),h.push(e[i].data[u].y[4])):(l.push(e[i].data[u].y[2]),h.push(e[i].data[u].y[3])));return{o:a,h:r,m:o,l:l,c:h}}},{key:"parseDataAxisCharts",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,s=this.w.config,n=this.w.globals,a=new D(i),r=s.labels.length>0?s.labels.slice():s.xaxis.categories.slice();n.isTimelineBar="rangeBar"===s.chart.type&&"datetime"===s.xaxis.type;for(var o=function(){for(var t=0;t<r.length;t++)if("string"==typeof r[t]){if(!a.isValidDate(r[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(a.parseDate(r[t]))}else e.twoDSeriesX.push(r[t])},l=0;l<t.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==s.chart.type&&"rangeArea"!==s.chart.type&&"rangeBar"!==t[l].type&&"rangeArea"!==t[l].type||(n.isRangeData=!0,this.handleRangeData(t,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,l):this.isFormatXY()&&this.handleFormatXY(t,l),"candlestick"!==s.chart.type&&"candlestick"!==t[l].type&&"boxPlot"!==s.chart.type&&"boxPlot"!==t[l].type||this.handleCandleStickBoxData(t,l),n.series.push(this.twoDSeries),n.labels.push(this.twoDSeriesX),n.seriesX.push(this.twoDSeriesX),l!==this.activeSeriesIndex||this.fallbackToCategory||(n.isXNumeric=!0);else{"datetime"===s.xaxis.type?(n.isXNumeric=!0,o(),n.seriesX.push(this.twoDSeriesX)):"numeric"===s.xaxis.type&&(n.isXNumeric=!0,r.length>0&&(this.twoDSeriesX=r,n.seriesX.push(this.twoDSeriesX))),n.labels.push(this.twoDSeriesX);var h=t[l].data.map(function(t){return _.parseNumber(t)});n.series.push(h)}n.seriesZ.push(this.threeDSeries),void 0!==t[l].name?n.seriesNames.push(t[l].name):n.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==t[l].color?n.seriesColors.push(t[l].color):n.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config;e.series=t.slice(),e.seriesNames=i.labels.slice();for(var s=0;s<e.series.length;s++)void 0===e.seriesNames[s]&&e.seriesNames.push("series-"+(s+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRangeBarTimeline.length&&(i.seriesRangeBarTimeline.map(function(t){t.forEach(function(t){i.labels.indexOf(t.x)<0&&t.x&&i.labels.push(t.x)})}),i.labels=i.labels.filter(function(t,e,i){return i.indexOf(t)===e})),e.xaxis.convertedCatToNumeric&&(new F(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,s=[];if(e.axisCharts){if(e.series.length>0)for(var n=0;n<e.series[e.maxValsInArrayIndex].length;n++)s.push(n+1);e.seriesX=[];for(var a=0;a<t.length;a++)e.seriesX.push(s);e.isXNumeric=!0}if(0===s.length){s=e.axisCharts?[]:e.series.map(function(t,e){return e+1});for(var r=0;r<t.length;r++)e.seriesX.push(s)}e.labels=s,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=s.map(function(t){return i.xaxis.labels.formatter(t)})),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,i=e.config,s=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),s.axisCharts?this.parseDataAxisCharts(t):this.parseDataNonAxisCharts(t),this.coreUtils.getLargestSeries(),"bar"===i.chart.type&&i.chart.stacked){var n=new z(this.ctx);s.series=n.setNullSeriesToZeroValues(s.series)}this.coreUtils.getSeriesTotals(),s.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),s.dataFormatXNumeric||s.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var a=this.coreUtils.getCategoryLabels(s.labels),r=0;r<a.length;r++)if(Array.isArray(a[r])){s.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this,e=this.w;e.globals.ignoreYAxisIndexes=e.globals.collapsedSeries.map(function(i,s){if(t.w.globals.isMultipleYAxis&&!e.config.chart.stacked)return i.index})}}]),t}(),V=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return o(t,[{key:"xLabelFormat",value:function(t,e,i,s){var n=this.w;if("datetime"===n.config.xaxis.type&&void 0===n.config.xaxis.labels.formatter&&void 0===n.config.tooltip.x.formatter){var a=new D(this.ctx);return a.formatDate(a.getDate(e),n.config.tooltip.x.format)}return t(e,i,s)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(t){return t}):t}},{key:"defaultYFormatter",value:function(t,e,i){var s=this.w;return _.isNumber(t)&&(t=0!==s.globals.yValueDecimal?t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:s.globals.yValueDecimal):s.globals.maxYArr[i]-s.globals.minYArr[i]<5?t.toFixed(1):t.toFixed(0)),t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xLabelFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},void 0!==e.config.xaxis.labels.formatter?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=function(t){return _.isNumber(t)?!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type&&e.globals.dataPoints<50?t.toFixed(1):e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?t.toFixed(1):t.toFixed(0):t},"function"==typeof e.config.tooltip.x.formatter?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach(function(i,s){void 0!==i.labels.formatter?e.globals.yLabelFormatters[s]=i.labels.formatter:e.globals.yLabelFormatters[s]=function(n){return e.globals.xyCharts?Array.isArray(n)?n.map(function(e){return t.defaultYFormatter(e,i,s)}):t.defaultYFormatter(n,i,s):n}}),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce(function(t,e){return t.length>e.length?t:e},0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),Y=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getLabel",value:function(t,e,i,s){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",r=this.w,o=void 0===t[s]?"":t[s],l=o,h=r.globals.xLabelFormatter,c=r.config.xaxis.labels.formatter,d=!1,u=o;l=new V(this.ctx).xLabelFormat(h,o,u,{i:s,dateFormatter:new D(this.ctx).formatDate,w:r}),void 0!==c&&(l=c(o,t[s],{i:s,dateFormatter:new D(this.ctx).formatDate,w:r}));e.length>0?(d=function(t){var i=null;return e.forEach(function(t){"month"===t.unit?i="year":"day"===t.unit?i="month":"hour"===t.unit?i="day":"minute"===t.unit&&(i="hour")}),i===t}(e[s].unit),i=e[s].position,l=e[s].value):"datetime"===r.config.xaxis.type&&void 0===c&&(l=""),void 0===l&&(l=""),l=Array.isArray(l)?l:l.toString();var f,g=new b(this.ctx);f=r.globals.rotateXLabels?g.getTextRects(l,parseInt(a,10),null,"rotate(".concat(r.config.xaxis.labels.rotate," 0 0)"),!1):g.getTextRects(l,parseInt(a,10));var p=!r.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(l)&&(0===l.indexOf("NaN")||0===l.toLowerCase().indexOf("invalid")||l.toLowerCase().indexOf("infinity")>=0||n.indexOf(l)>=0&&p)&&(l=""),{x:i,text:l,textRect:f,isBold:d}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var s=this.w,n=s.config.xaxis.tickAmount;return"dataPoints"===n&&(n=Math.round(s.globals.gridWidth/120)),n>i||t%Math.round(i/(n+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,s,n){var a=this.w;if(0===t&&a.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&a.globals.skipLastTimelinelabel&&(e.text=""),a.config.xaxis.labels.hideOverlappingLabels&&s.length>0){var r=n[n.length-1];e.x<r.textRect.width/(a.globals.rotateXLabels?Math.abs(a.config.xaxis.labels.rotate)/12:1.01)+r.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=new w(this.ctx);return!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&i.isSeriesNull(t)&&-1===e.globals.collapsedSeriesIndices.indexOf(t)}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,s,n,a,r){var o=this.w,l=new b(this.ctx),h=o.globals.translateY;if(s.show&&e>0){!0===o.config.yaxis[n].opposite&&(t+=s.width);for(var c=e;c>=0;c--){var d=h+e/10+o.config.yaxis[n].labels.offsetY-1;o.globals.isBarHorizontal&&(d=a*c),"heatmap"===o.config.chart.type&&(d+=a/2);var u=l.drawLine(t+i.offsetX-s.width+s.offsetX,d+s.offsetY,t+i.offsetX+s.offsetX,d+s.offsetY,s.color);r.add(u),h+=a}}}}]),t}(),W=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"fixSvgStringForIe11",value:function(t){if(!_.isIE11())return t;var e=0,i=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"':t});return(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(){var t=this.w.globals.dom.Paper.svg();return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(s,function(t){t.setAttribute("width",0)}),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(){var t=this;return new Promise(function(e){var i=t.w;t.cleanup();var s=document.createElement("canvas");s.width=i.globals.svgWidth,s.height=parseInt(i.globals.dom.elWrap.style.height,10);var n="transparent"===i.config.chart.background?"#fff":i.config.chart.background,a=s.getContext("2d");a.fillStyle=n,a.fillRect(0,0,s.width,s.height);var r=t.getSvgString();if(window.canvg&&_.isIE11()){var o=window.canvg.Canvg.fromString(a,r,{ignoreClear:!0,ignoreDimensions:!0});o.start();var l=s.msToBlob();o.stop(),e({blob:l})}else{var h="data:image/svg+xml,"+encodeURIComponent(r),c=new Image;c.crossOrigin="anonymous",c.onload=function(){if(a.drawImage(c,0,0),s.msToBlob){var t=s.msToBlob();e({blob:t})}else{var i=s.toDataURL("image/png");e({imgURI:i})}},c.src=h}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then(function(e){var i=e.imgURI,s=e.blob;s?navigator.msSaveOrOpenBlob(s,t.w.globals.chartID+".png"):t.triggerDownload(i,t.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,s=t.columnDelimiter,n=t.lineDelimiter,a=void 0===n?"\n":n,r=this.w,o=[],l=[],h="data:text/csv;charset=utf-8,\ufeff",c=new B(this.ctx),d=new Y(this.ctx),u=function(t){var i="";if(r.globals.axisCharts){if("category"===r.config.xaxis.type||r.config.xaxis.convertedCatToNumeric)if(r.globals.isBarHorizontal){var n=r.globals.yLabelFormatters[0],a=new z(e.ctx).getActiveConfigSeriesIndex();i=n(r.globals.labels[t],{seriesIndex:a,dataPointIndex:t,w:r})}else i=d.getLabel(r.globals.labels,r.globals.timescaleLabels,0,t).text;"datetime"===r.config.xaxis.type&&(r.config.xaxis.categories.length?i=r.config.xaxis.categories[t]:r.config.labels.length&&(i=r.config.labels[t]))}else i=r.config.labels[t];return Array.isArray(i)&&(i=i.join(" ")),_.isNumber(i)?i:i.split(s).join("")};o.push(r.config.chart.toolbar.export.csv.headerCategory),i.map(function(t,e){var i=t.name?t.name:"series-".concat(e);r.globals.axisCharts&&o.push(i.split(s).join("")?i.split(s).join(""):"series-".concat(e))}),r.globals.axisCharts||(o.push(r.config.chart.toolbar.export.csv.headerValue),l.push(o.join(s))),i.map(function(t,e){r.globals.axisCharts?function(t,e){if(o.length&&0===e&&l.push(o.join(s)),t.data&&t.data.length)for(var n=0;n<t.data.length;n++){o=[];var a=u(n);if(a||(c.isFormatXY()?a=i[e].data[n].x:c.isFormat2DArray()&&(a=i[e].data[n]?i[e].data[n][0]:"")),0===e){o.push((d=a,"datetime"===r.config.xaxis.type&&String(d).length>=10?r.config.chart.toolbar.export.csv.dateFormatter(a):_.isNumber(a)?a:a.split(s).join("")));for(var h=0;h<r.globals.series.length;h++)o.push(r.globals.series[h][n])}("candlestick"===r.config.chart.type||t.type&&"candlestick"===t.type)&&(o.pop(),o.push(r.globals.seriesCandleO[e][n]),o.push(r.globals.seriesCandleH[e][n]),o.push(r.globals.seriesCandleL[e][n]),o.push(r.globals.seriesCandleC[e][n])),("boxPlot"===r.config.chart.type||t.type&&"boxPlot"===t.type)&&(o.pop(),o.push(r.globals.seriesCandleO[e][n]),o.push(r.globals.seriesCandleH[e][n]),o.push(r.globals.seriesCandleM[e][n]),o.push(r.globals.seriesCandleL[e][n]),o.push(r.globals.seriesCandleC[e][n])),"rangeBar"===r.config.chart.type&&(o.pop(),o.push(r.globals.seriesRangeStart[e][n]),o.push(r.globals.seriesRangeEnd[e][n])),o.length&&l.push(o.join(s))}var d}(t,e):((o=[]).push(r.globals.labels[e].split(s).join("")),o.push(r.globals.series[e]),l.push(o.join(s)))}),h+=l.join(a),this.triggerDownload(encodeURI(h),r.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var s=document.createElement("a");s.href=t,s.download=(e||this.w.globals.chartID)+i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}]),t}(),X=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.axesUtils=new Y(e),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===i.config.xaxis.position?this.offY=0:this.offY=i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return o(t,[{key:"drawXaxis",value:function(){var t,e=this,i=this.w,s=new b(this.ctx),n=s.group({class:"apexcharts-xaxis",transform:"translate(".concat(i.config.xaxis.offsetX,", ").concat(i.config.xaxis.offsetY,")")}),a=s.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});n.add(a);for(var r=i.globals.padHorizontal,o=[],l=0;l<this.xaxisLabels.length;l++)o.push(this.xaxisLabels[l]);var h=o.length;if(i.globals.isXNumeric){var c=h>1?h-1:h;t=i.globals.gridWidth/c,r=r+t/2+i.config.xaxis.labels.offsetX}else t=i.globals.gridWidth/o.length,r=r+t+i.config.xaxis.labels.offsetX;for(var d=function(n){var l=r-t/2+i.config.xaxis.labels.offsetX;0===n&&1===h&&t/2===r&&1===i.globals.dataPoints&&(l=i.globals.gridWidth/2);var c=e.axesUtils.getLabel(o,i.globals.timescaleLabels,l,n,e.drawnLabels,e.xaxisFontSize),d=28;if(i.globals.rotateXLabels&&(d=22),(c=void 0!==i.config.xaxis.tickAmount&&"dataPoints"!==i.config.xaxis.tickAmount&&"datetime"!==i.config.xaxis.type?e.axesUtils.checkLabelBasedOnTickamount(n,c,h):e.axesUtils.checkForOverflowingLabels(n,c,h,e.drawnLabels,e.drawnLabelsRects)).text&&i.globals.xaxisLabelsCount++,i.config.xaxis.labels.show){var u=s.drawText({x:c.x,y:e.offY+i.config.xaxis.labels.offsetY+d-("top"===i.config.xaxis.position?i.globals.xAxisHeight+i.config.xaxis.axisTicks.height-2:0),text:c.text,textAnchor:"middle",fontWeight:c.isBold?600:i.config.xaxis.labels.style.fontWeight,fontSize:e.xaxisFontSize,fontFamily:e.xaxisFontFamily,foreColor:Array.isArray(e.xaxisForeColors)?i.config.xaxis.convertedCatToNumeric?e.xaxisForeColors[i.globals.minX+n-1]:e.xaxisForeColors[n]:e.xaxisForeColors,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+i.config.xaxis.labels.style.cssClass});a.add(u);var f=document.createElementNS(i.globals.SVGNS,"title");f.textContent=Array.isArray(c.text)?c.text.join(" "):c.text,u.node.appendChild(f),""!==c.text&&(e.drawnLabels.push(c.text),e.drawnLabelsRects.push(c))}r+=t},u=0;u<=h-1;u++)d(u);if(void 0!==i.config.xaxis.title.text){var f=s.group({class:"apexcharts-xaxis-title"}),g=s.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+i.globals.xAxisLabelsHeight+i.config.xaxis.title.offsetY,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+i.config.xaxis.title.style.cssClass});f.add(g),n.add(f)}if(i.config.xaxis.axisBorder.show){var p=i.globals.barPadForNumericAxis,_=s.drawLine(i.globals.padHorizontal+i.config.xaxis.axisBorder.offsetX-p,this.offY,this.xaxisBorderWidth+p,this.offY,i.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);n.add(_)}return n}},{key:"drawXaxisInversed",value:function(t){var e,i,s=this,n=this.w,a=new b(this.ctx),r=n.config.yaxis[0].opposite?n.globals.translateYAxisX[t]:0,o=a.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),l=a.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+r+", 0)"});o.add(l);var h=[];if(n.config.yaxis[t].show)for(var c=0;c<this.xaxisLabels.length;c++)h.push(this.xaxisLabels[c]);e=n.globals.gridHeight/h.length,i=-e/2.2;var d=n.globals.yLabelFormatters[0],u=n.config.yaxis[0].labels;if(u.show)for(var f=function(r){var o=void 0===h[r]?"":h[r];o=d(o,{seriesIndex:t,dataPointIndex:r,w:n});var c=s.axesUtils.getYAxisForeColor(u.style.colors,t),f=0;Array.isArray(o)&&(f=o.length/2*parseInt(u.style.fontSize,10));var g=a.drawText({x:u.offsetX-15,y:i+e+u.offsetY-f,text:o,textAnchor:s.yaxis.opposite?"start":"end",foreColor:Array.isArray(c)?c[r]:c,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+u.style.cssClass});l.add(g);var p=document.createElementNS(n.globals.SVGNS,"title");if(p.textContent=o.text,g.node.appendChild(p),0!==n.config.yaxis[t].labels.rotate){var _=a.rotateAroundCenter(g.node);g.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," 0 ").concat(_.y,")"))}i+=e},g=0;g<=h.length-1;g++)f(g);if(void 0!==n.config.yaxis[0].title.text){var p=a.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+r+", 0)"}),_=a.drawText({x:0,y:n.globals.gridHeight/2,text:n.config.yaxis[0].title.text,textAnchor:"middle",foreColor:n.config.yaxis[0].title.style.color,fontSize:n.config.yaxis[0].title.style.fontSize,fontWeight:n.config.yaxis[0].title.style.fontWeight,fontFamily:n.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[0].title.style.cssClass});p.add(_),o.add(p)}var v=0;this.isCategoryBarHorizontal&&n.config.yaxis[0].opposite&&(v=n.globals.gridWidth);var m=n.config.xaxis.axisBorder;if(m.show){var x=a.drawLine(n.globals.padHorizontal+m.offsetX+v,1+m.offsetY,n.globals.padHorizontal+m.offsetX+v,n.globals.gridHeight+m.offsetY,m.color,0);o.add(x)}return n.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,h.length,n.config.yaxis[0].axisBorder,n.config.yaxis[0].axisTicks,0,e,o),o}},{key:"drawXaxisTicks",value:function(t,e){var i=this.w,s=t;if(!(t<0||t-2>i.globals.gridWidth)){var n=this.offY+i.config.xaxis.axisTicks.offsetY,a=n+i.config.xaxis.axisTicks.height;if("top"===i.config.xaxis.position&&(a=n-i.config.xaxis.axisTicks.height),i.config.xaxis.axisTicks.show){var r=new b(this.ctx).drawLine(t+i.config.xaxis.axisTicks.offsetX,n+i.config.xaxis.offsetY,s+i.config.xaxis.axisTicks.offsetX,a+i.config.xaxis.offsetY,i.config.xaxis.axisTicks.color);e.add(r),r.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,s=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var n=0;n<i;n++)s=this.xaxisLabels[n].position,e.push(s);else for(var a=i,r=0;r<a;r++){var o=a;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(o-=1),s+=t.globals.gridWidth/o,e.push(s)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new b(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var r=0;r<s.length;r++){var o=e.rotateAroundCenter(s[r]);o.y=o.y-1,o.x=o.x+1,s[r].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(o.x," ").concat(o.y,")")),s[r].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=s[r].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,function(i){e.placeTextWithEllipsis(i,i.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))})}else!function(){for(var i=t.globals.gridWidth/(t.globals.labels.length+1),n=0;n<s.length;n++){var a=s[n].childNodes;t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(a,function(t){e.placeTextWithEllipsis(t,t.textContent,i)})}}();if(n.length>0){var h=n[n.length-1].getBBox(),c=n[0].getBBox();h.x<-20&&n[n.length-1].parentNode.removeChild(n[n.length-1]),c.x+c.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&n[0].parentNode.removeChild(n[0]);for(var d=0;d<a.length;d++)e.placeTextWithEllipsis(a[d],a[d].textContent,t.config.yaxis[0].labels.maxWidth-2*parseFloat(t.config.yaxis[0].title.style.fontSize)-20)}}}]),t}(),U=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new Y(e),this.isTimelineBar="datetime"===i.config.xaxis.type&&i.globals.seriesRangeBarTimeline.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return o(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new b(this.ctx);null===t&&(t=i.group({class:"apexcharts-grid"}));var s=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),n=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(n),t.add(s),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new b(this.ctx),s=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var n=0;t.config.stroke.width.forEach(function(t){n=Math.max(n,t)}),s=n}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid));var a=t.config.chart.type,r=0,o=0;("bar"===a||"rangeBar"===a||"candlestick"===a||"boxPlot"===a||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(r=t.config.grid.padding.left,o=t.config.grid.padding.right,e.barPadForNumericAxis>r&&(r=e.barPadForNumericAxis,o=e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-s/2-r-2,-s/2,e.gridWidth+s+o+r+4,e.gridHeight+s,0,"#fff"),new w(this).getLargestMarkerSize();var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var h=e.dom.baseEl.querySelector("defs");h.appendChild(e.dom.elGridRectMask),h.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,s=t.y1,n=t.x2,a=t.y2,r=t.xCount,o=t.parent,l=this.w;0===e&&l.globals.skipFirstTimelinelabel||e===r-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type||(l.config.grid.xaxis.lines.show&&this._drawGridLine({x1:i,y1:s,x2:n,y2:a,parent:o}),new X(this.ctx).drawXaxisTicks(i,this.elg))}},{key:"_drawGridLine",value:function(t){var e=t.x1,i=t.y1,s=t.x2,n=t.y2,a=t.parent,r=this.w,o=a.node.classList.contains("apexcharts-gridlines-horizontal"),l=r.config.grid.strokeDashArray,h=r.globals.barPadForNumericAxis,c=new b(this).drawLine(e-(o?h:0),i,s+(o?h:0),n,r.config.grid.borderColor,l);c.node.classList.add("apexcharts-gridline"),a.add(c)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,s=t.y1,n=t.x2,a=t.y2,r=t.type,o=this.w,l=new b(this.ctx),h=o.globals.barPadForNumericAxis;if("column"!==r||"datetime"!==o.config.xaxis.type){var c=o.config.grid[r].colors[e],d=l.drawRect(i-("row"===r?h:0),s,n+("row"===r?2*h:0),a,0,c,o.config.grid[r].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(r))}}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,s=t.tickAmount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show){var a,r=n.globals.padHorizontal,o=n.globals.gridHeight;n.globals.timescaleLabels.length?function(t){for(var s=t.xC,n=t.x1,a=t.y1,r=t.x2,o=t.y2,l=0;l<s;l++)n=e.xaxisLabels[l].position,r=e.xaxisLabels[l].position,e._drawGridLines({i:l,x1:n,y1:a,x2:r,y2:o,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:r,y1:0,x2:a,y2:o}):(n.globals.isXNumeric&&(i=n.globals.xAxisScale.result.length),n.config.xaxis.convertedCatToNumeric&&(i=n.globals.xaxisLabelsCount),function(t){var s=t.xC,a=t.x1,r=t.y1,o=t.x2,l=t.y2;if(void 0!==n.config.xaxis.tickAmount&&"dataPoints"!==n.config.xaxis.tickAmount)n.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach(function(t,s){var n=t.getBBox();e._drawGridLines({i:s,x1:n.x+n.width/2,y1:r,x2:n.x+n.width/2,y2:l,xCount:i,parent:e.elgridLinesV})});else for(var h=0;h<s+(n.globals.isXNumeric?0:1);h++)0===h&&1===s&&1===n.globals.dataPoints&&(o=a=n.globals.gridWidth/2),e._drawGridLines({i:h,x1:a,y1:r,x2:o,y2:l,xCount:i,parent:e.elgridLinesV}),o=a+=n.globals.gridWidth/(n.globals.isXNumeric?s-1:s)}({xC:i,x1:r,y1:0,x2:a,y2:o}))}if(n.config.grid.yaxis.lines.show){var l=0,h=0,c=n.globals.gridWidth,d=s+1;this.isTimelineBar&&(d=n.globals.labels.length);for(var u=0;u<d+(this.isTimelineBar?1:0);u++)this._drawGridLine({x1:0,y1:l,x2:c,y2:h,parent:this.elgridLinesH}),h=l+=n.globals.gridHeight/(this.isTimelineBar?d:s)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var s,n=i.globals.padHorizontal,a=i.globals.gridHeight,r=0;r<e+1;r++)i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:0,x2:s,y2:a,parent:this.elgridLinesV}),new X(this.ctx).drawXaxisTicks(n,this.elg),s=n=n+i.globals.gridWidth/e+.3;if(i.config.grid.yaxis.lines.show)for(var o=0,l=0,h=i.globals.gridWidth,c=0;c<i.globals.dataPoints+1;c++)this._drawGridLine({x1:0,y1:o,x2:h,y2:l,parent:this.elgridLinesH}),l=o+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new b(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var i,s=t.globals.yAxisScale.length?t.globals.yAxisScale[0].result.length-1:5,n=0;n<t.globals.series.length&&(void 0!==t.globals.yAxisScale[n]&&(s=t.globals.yAxisScale[n].result.length-1),!(s>2));n++);return!t.globals.isBarHorizontal||this.isTimelineBar?(i=this.xaxisLabels.length,this.isTimelineBar&&(s=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(i=t.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:s})):(i=s,s=t.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:s})),this.drawGridBands(i,s),{el:this.elg,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var s=0,n=i.globals.gridHeight/e,a=i.globals.gridWidth,r=0,o=0;r<e;r++,o++)o>=i.config.grid.row.colors.length&&(o=0),this._drawGridBandRect({c:o,x1:0,y1:s,x2:a,y2:n,type:"row"}),s+=i.globals.gridHeight/e;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?t:t-1,h=i.globals.padHorizontal,c=i.globals.padHorizontal+i.globals.gridWidth/l,d=i.globals.gridHeight,u=0,f=0;u<t;u++,f++)f>=i.config.grid.column.colors.length&&(f=0),this._drawGridBandRect({c:f,x1:h,y1:0,x2:c,y2:d,type:"column"}),h+=i.globals.gridWidth/l}}]),t}(),G=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"niceScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,a=this.w,r=Math.abs(e-t);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,s,r))&&(i=a.globals.dataPoints-1),t===Number.MIN_VALUE&&0===e||!_.isNumber(t)&&!_.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)return t=0,e=i,this.linearScale(t,e,i);t>e?(console.warn("axis.min cannot be greater than axis.max"),e=t+.1):t===e&&(t=0===t?0:t-.5,e=0===e?2:e+.5);var o=[];r<1&&n&&("candlestick"===a.config.chart.type||"candlestick"===a.config.series[s].type||"boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[s].type||a.globals.isRangeData)&&(e*=1.01);var l=i+1;l<2?l=2:l>2&&(l-=2);var h=r/l,c=Math.floor(_.log10(h)),d=Math.pow(10,c),u=Math.round(h/d);u<1&&(u=1);var f=u*d,g=f*Math.floor(t/f),p=f*Math.ceil(e/f),v=g;if(n&&r>2){for(;o.push(v),!((v+=f)>p););return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}var m=t;(o=[]).push(m);for(var b=Math.abs(e-t)/i,x=0;x<=i;x++)m+=b,o.push(m);return o[o.length-2]>=e&&o.pop(),{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3?arguments[3]:void 0,n=Math.abs(e-t);"dataPoints"===(i=this._adjustTicksForSmallRange(i,s,n))&&(i=this.w.globals.dataPoints-1);var a=n/i;i===Number.MAX_VALUE&&(i=10,a=1);for(var r=[],o=t;i>=0;)r.push(o),o+=a,i-=1;return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(t){for(var e=[],i=Math.ceil(Math.log10(t))+1,s=0;s<i;s++)e.push(Math.pow(10,s));return{result:e,niceMin:e[0],niceMax:e[e.length-1]}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var s=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var n=this.w.config.yaxis[e].labels.formatter(1);_.isNumber(Number(n))&&!_.isFloat(n)&&(s=Math.ceil(i))}return s<t?s:t}},{key:"setYScaleForIndex",value:function(t,e,i){var s=this.w.globals,n=this.w.config,a=s.isBarHorizontal?n.xaxis:n.yaxis[t];void 0===s.yAxisScale[t]&&(s.yAxisScale[t]=[]);var r=Math.abs(i-e);if(a.logarithmic&&r<=5&&(s.invalidLogScale=!0),a.logarithmic&&r>5)s.allSeriesCollapsed=!1,s.yAxisScale[t]=this.logarithmicScale(i);else if(i!==-Number.MAX_VALUE&&_.isNumber(i))if(s.allSeriesCollapsed=!1,void 0===a.min&&void 0===a.max||a.forceNiceScale){var o=void 0===n.yaxis[t].max&&void 0===n.yaxis[t].min||n.yaxis[t].forceNiceScale;s.yAxisScale[t]=this.niceScale(e,i,a.tickAmount?a.tickAmount:r<5&&r>1?r+1:5,t,o)}else s.yAxisScale[t]=this.linearScale(e,i,a.tickAmount,t);else s.yAxisScale[t]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(t,e){var i=this.w,s=i.globals,n=i.config.xaxis,a=Math.abs(e-t);return e!==-Number.MAX_VALUE&&_.isNumber(e)?s.xAxisScale=this.linearScale(t,e,n.tickAmount?n.tickAmount:a<5&&a>1?a+1:5,0):s.xAxisScale=this.linearScale(0,5,5),s.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this,e=this.w.globals,i=this.w.config,s=e.minYArr.concat([]),n=e.maxYArr.concat([]),a=[];i.yaxis.forEach(function(e,r){var o=r;i.series.forEach(function(t,i){t.name===e.seriesName&&(o=i,r!==i?a.push({index:i,similarIndex:r,alreadyExists:!0}):a.push({index:i}))});var l=s[o],h=n[o];t.setYScaleForIndex(r,l,h)}),this.sameScaleInMultipleAxes(s,n,a)}},{key:"sameScaleInMultipleAxes",value:function(t,e,i){var s=this,n=this.w.config,a=this.w.globals,r=[];i.forEach(function(t){t.alreadyExists&&(void 0===r[t.index]&&(r[t.index]=[]),r[t.index].push(t.index),r[t.index].push(t.similarIndex))}),a.yAxisSameScaleIndices=r,r.forEach(function(t,e){r.forEach(function(i,s){var n,a;e!==s&&(n=t,a=i,n.filter(function(t){return-1!==a.indexOf(t)})).length>0&&(r[e]=r[e].concat(r[s]))})});var o=r.map(function(t){return t.filter(function(e,i){return t.indexOf(e)===i})}).map(function(t){return t.sort()});r=r.filter(function(t){return!!t});var l=o.slice(),h=l.map(function(t){return JSON.stringify(t)});l=l.filter(function(t,e){return h.indexOf(JSON.stringify(t))===e});var c=[],d=[];t.forEach(function(t,i){l.forEach(function(s,n){s.indexOf(i)>-1&&(void 0===c[n]&&(c[n]=[],d[n]=[]),c[n].push({key:i,value:t}),d[n].push({key:i,value:e[i]}))})});var u=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),f=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);c.forEach(function(t,e){t.forEach(function(t,i){u[e]=Math.min(t.value,u[e])})}),d.forEach(function(t,e){t.forEach(function(t,i){f[e]=Math.max(t.value,f[e])})}),t.forEach(function(t,e){d.forEach(function(t,i){var r=u[i],o=f[i];n.chart.stacked&&(o=0,t.forEach(function(t,e){t.value!==-Number.MAX_VALUE&&(o+=t.value),r!==Number.MIN_VALUE&&(r+=c[i][e].value)})),t.forEach(function(i,l){t[l].key===e&&(void 0!==n.yaxis[e].min&&(r="function"==typeof n.yaxis[e].min?n.yaxis[e].min(a.minY):n.yaxis[e].min),void 0!==n.yaxis[e].max&&(o="function"==typeof n.yaxis[e].max?n.yaxis[e].max(a.maxY):n.yaxis[e].max),s.setYScaleForIndex(e,r,o))})})})}},{key:"autoScaleY",value:function(t,e,i){t||(t=this);var s=t.w;if(s.globals.isMultipleYAxis||s.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),e;var n=s.globals.seriesX[0],a=s.config.chart.stacked;return e.forEach(function(t,r){for(var o=0,l=0;l<n.length;l++)if(n[l]>=i.xaxis.min){o=l;break}var h,c,d=s.globals.minYArr[r],u=s.globals.maxYArr[r],f=s.globals.stackedSeriesTotals;s.globals.series.forEach(function(r,l){var g=r[o];a?(g=f[o],h=c=g,f.forEach(function(t,e){n[e]<=i.xaxis.max&&n[e]>=i.xaxis.min&&(t>c&&null!==t&&(c=t),r[e]<h&&null!==r[e]&&(h=r[e]))})):(h=c=g,r.forEach(function(t,e){if(n[e]<=i.xaxis.max&&n[e]>=i.xaxis.min){var a=t,r=t;s.globals.series.forEach(function(i,s){null!==t&&(a=Math.min(i[e],a),r=Math.max(i[e],r))}),r>c&&null!==r&&(c=r),a<h&&null!==a&&(h=a)}})),void 0===h&&void 0===c&&(h=d,c=u),(c*=c<0?.9:1.1)<0&&c<u&&(c=u),(h*=h<0?1.1:.9)<0&&h>d&&(h=d),e.length>1?(e[l].min=void 0===t.min?h:t.min,e[l].max=void 0===t.max?c:t.max):(e[0].min=void 0===t.min?h:t.min,e[0].max=void 0===t.max?c:t.max)})}),e}}]),t}(),q=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.scales=new G(e)}return o(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w.config,a=this.w.globals,r=-Number.MAX_VALUE,o=Number.MIN_VALUE;null===s&&(s=t+1);var l=a.series,h=l,c=l;"candlestick"===n.chart.type?(h=a.seriesCandleL,c=a.seriesCandleH):"boxPlot"===n.chart.type?(h=a.seriesCandleO,c=a.seriesCandleC):a.isRangeData&&(h=a.seriesRangeStart,c=a.seriesRangeEnd);for(var d=t;d<s;d++){a.dataPoints=Math.max(a.dataPoints,l[d].length);for(var u=0;u<a.series[d].length;u++){var f=l[d][u];null!==f&&_.isNumber(f)?(void 0!==c[d][u]&&(r=Math.max(r,c[d][u])),void 0!==h[d][u]&&(e=Math.min(e,h[d][u]),i=Math.max(i,h[d][u])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==a.seriesCandleC[d][u]&&(r=Math.max(r,a.seriesCandleO[d][u]),r=Math.max(r,a.seriesCandleH[d][u]),r=Math.max(r,a.seriesCandleL[d][u]),r=Math.max(r,a.seriesCandleC[d][u]),"boxPlot"===this.w.config.chart.type&&(r=Math.max(r,a.seriesCandleM[d][u]))),!n.series[d].type||"candlestick"===n.series[d].type&&"boxPlot"===n.series[d].type||(r=Math.max(r,a.series[d][u]),e=Math.min(e,a.series[d][u])),i=r),_.isFloat(f)&&(f=_.noExponents(f),a.yValueDecimal=Math.max(a.yValueDecimal,f.toString().split(".")[1].length)),o>h[d][u]&&h[d][u]<0&&(o=h[d][u])):a.hasNullValues=!0}}return"rangeBar"===n.chart.type&&a.seriesRangeStart.length&&a.isBarHorizontal&&"datetime"===n.xaxis.type&&(o=e),"bar"===n.chart.type&&(o<0&&r<0&&(r=0),o===Number.MIN_VALUE&&(o=0)),{minY:o,maxY:r,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(t.isMultipleYAxis)for(var s=0;s<t.series.length;s++){var n=this.getMinYMaxY(s,i,null,s+1);t.minYArr.push(n.minY),t.maxYArr.push(n.maxY),i=n.lowestY}var a=this.getMinYMaxY(0,i,null,t.series.length);if(t.minY=a.minY,t.maxY=a.maxY,i=a.lowestY,e.chart.stacked&&this._setStackedMinMax(),("line"===e.chart.type||"area"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal)&&t.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==t.maxY){var r=t.maxY-i;(i>=0&&i<=10||void 0!==e.yaxis[0].min||void 0!==e.yaxis[0].max)&&(r=0),t.minY=i-5*r/100,i>0&&t.minY<0&&(t.minY=0),t.maxY=t.maxY+5*r/100}return e.yaxis.forEach(function(e,i){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[i]=e.max:"function"==typeof e.max&&(t.maxYArr[i]=e.max(t.isMultipleYAxis?t.maxYArr[i]:t.maxY)),t.maxY=t.maxYArr[i]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[i]=e.min:"function"==typeof e.min&&(t.minYArr[i]=e.min(t.isMultipleYAxis?t.minYArr[i]===Number.MIN_VALUE?0:t.minYArr[i]:t.minY)),t.minY=t.minYArr[i])}),t.isBarHorizontal&&["min","max"].forEach(function(i){void 0!==e.xaxis[i]&&"number"==typeof e.xaxis[i]&&("min"===i?t.minY=e.xaxis[i]:t.maxY=e.xaxis[i])}),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=i,t.yAxisScale.forEach(function(e,i){t.minYArr[i]=e.niceMin,t.maxYArr[i]=e.niceMax})):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var i=0;i<t.labels[e].length;i++)null!==t.labels[e][i]&&_.isNumber(t.labels[e][i])&&(t.maxX=Math.max(t.maxX,t.labels[e][i]),t.initialMaxX=Math.max(t.maxX,t.labels[e][i]),t.minX=Math.min(t.minX,t.labels[e][i]),t.initialMinX=Math.min(t.minX,t.labels[e][i]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var s;if(void 0===e.xaxis.tickAmount?(s=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(s=t.dataPoints-1),s>t.dataPoints&&0!==t.dataPoints&&(s=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(s=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(s=t.maxX-t.minX-1)):s=e.xaxis.tickAmount,t.xTickAmount=s,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var n=[],a=t.minX-1;a<t.maxX;a++)n.push(a+1);t.xAxisScale={result:n,niceMin:n[0],niceMax:n[n.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(1,s,s),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,s-1),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&_.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new D(this.ctx);if("datetime"===e.xaxis.type){var s=i.getDate(t.minX);s.setUTCDate(s.getDate()-2),t.minX=new Date(s).getTime();var n=i.getDate(t.maxX);n.setUTCDate(n.getDate()+2),t.maxX=new Date(n).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach(function(e,i){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var s=e.slice();s.sort(function(t,e){return t-e}),s.forEach(function(e,i){if(i>0){var n=e-s[i-1];n>0&&(t.minXDiff=Math.min(n,t.minXDiff))}}),1===t.dataPoints&&t.minXDiff===Number.MAX_VALUE&&(t.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var t=this.w.globals,e=[],i=[];if(t.series.length)for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)for(var n=0,a=0,r=0;r<t.series.length;r++)null!==t.series[r][s]&&_.isNumber(t.series[r][s])&&(t.series[r][s]>0?n=n+parseFloat(t.series[r][s])+1e-4:a+=parseFloat(t.series[r][s])),r===t.series.length-1&&(e.push(n),i.push(a));for(var o=0;o<e.length;o++)t.maxY=Math.max(t.maxY,e[o]),t.minY=Math.min(t.minY,i[o])}}]),t}(),K=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===i.config.xaxis.position&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Y(e)}return o(t,[{key:"drawYaxis",value:function(t){var e=this,i=this.w,s=new b(this.ctx),n=i.config.yaxis[t].labels.style,a=n.fontSize,r=n.fontFamily,o=n.fontWeight,l=s.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+i.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return l;var h=s.group({class:"apexcharts-yaxis-texts-g"});l.add(h);var c=i.globals.yAxisScale[t].result.length-1,d=i.globals.gridHeight/c,u=i.globals.translateY,f=i.globals.yLabelFormatters[t],g=i.globals.yAxisScale[t].result.slice();g=this.axesUtils.checkForReversedLabels(t,g);var p="";if(i.config.yaxis[t].labels.show)for(var _=function(l){var _=g[l];_=f(_,l);var v=i.config.yaxis[t].labels.padding;i.config.yaxis[t].opposite&&0!==i.config.yaxis.length&&(v*=-1);var m=e.axesUtils.getYAxisForeColor(n.colors,t),b=s.drawText({x:v,y:u+c/10+i.config.yaxis[t].labels.offsetY+1,text:_,textAnchor:i.config.yaxis[t].opposite?"start":"end",fontSize:a,fontFamily:r,fontWeight:o,foreColor:Array.isArray(m)?m[l]:m,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+n.cssClass});if(l===c&&(p=b),h.add(b),0!==i.config.yaxis[t].labels.rotate){var x=s.rotateAroundCenter(p.node),y=s.rotateAroundCenter(b.node);b.node.setAttribute("transform","rotate(".concat(i.config.yaxis[t].labels.rotate," ").concat(x.x," ").concat(y.y,")"))}u+=d},v=c;v>=0;v--)_(v);if(void 0!==i.config.yaxis[t].title.text){var m=s.group({class:"apexcharts-yaxis-title"}),x=0;i.config.yaxis[t].opposite&&(x=i.globals.translateYAxisX[t]);var y=s.drawText({x:x,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[t].title.offsetY,text:i.config.yaxis[t].title.text,textAnchor:"end",foreColor:i.config.yaxis[t].title.style.color,fontSize:i.config.yaxis[t].title.style.fontSize,fontWeight:i.config.yaxis[t].title.style.fontWeight,fontFamily:i.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[t].title.style.cssClass});m.add(y),l.add(m)}var w=i.config.yaxis[t].axisBorder,S=31+w.offsetX;if(i.config.yaxis[t].opposite&&(S=-31-w.offsetX),w.show){var k=s.drawLine(S,i.globals.translateY+w.offsetY-2,S,i.globals.gridHeight+i.globals.translateY+w.offsetY+2,w.color,0,w.width);l.add(k)}return i.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(S,c,w,i.config.yaxis[t].axisTicks,t,d,l),l}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new b(this.ctx),s=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),n=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});s.add(n);var a=e.globals.yAxisScale[t].result.length-1,r=e.globals.gridWidth/a+.1,o=r+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,h=e.globals.yAxisScale[t].result.slice(),c=e.globals.timescaleLabels;c.length>0&&(this.xaxisLabels=c.slice(),a=(h=c.slice()).length),h=this.axesUtils.checkForReversedLabels(t,h);var d=c.length;if(e.config.xaxis.labels.show)for(var u=d?0:a;d?u<d:u>=0;d?u++:u--){var f=h[u];f=l(f,u);var g=e.globals.gridWidth+e.globals.padHorizontal-(o-r+e.config.xaxis.labels.offsetX);if(c.length){var p=this.axesUtils.getLabel(h,c,g,u,this.drawnLabels,this.xaxisFontSize);g=p.x,f=p.text,this.drawnLabels.push(p.text),0===u&&e.globals.skipFirstTimelinelabel&&(f=""),u===h.length-1&&e.globals.skipLastTimelinelabel&&(f="")}var _=i.drawText({x:g,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:f,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});n.add(_),_.tspan(f);var v=document.createElementNS(e.globals.SVGNS,"title");v.textContent=f,_.node.appendChild(v),o+=r}return this.inversedYAxisTitleText(s),this.inversedYAxisBorder(s),s}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new b(this.ctx),s=e.config.xaxis.axisBorder;if(s.show){var n=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(n-=15);var a=i.drawLine(e.globals.padHorizontal+n+s.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,s.color,0,s.height);t.add(a)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new b(this.ctx);if(void 0!==e.config.xaxis.title.text){var s=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),n=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});s.add(n),t.add(s)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,s=new b(this.ctx),n={width:0,height:0},a={width:0,height:0},r=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==r&&(n=r.getBoundingClientRect());var o=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==o&&(a=o.getBoundingClientRect()),null!==o){var l=this.xPaddingForYAxisTitle(t,n,a,e);o.setAttribute("x",l.xPos-(e?10:0))}if(null!==o){var h=s.rotateAroundCenter(o);o.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(h.x," ").concat(h.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,s){var n=this.w,a=0,r=0,o=10;return void 0===n.config.yaxis[t].title.text||t<0?{xPos:r,padd:0}:(s?(r=e.width+n.config.yaxis[t].title.offsetX+i.width/2+o/2,0===(a+=1)&&(r-=o/2)):(r=-1*e.width+n.config.yaxis[t].title.offsetX+o/2+i.width/2,n.globals.isBarHorizontal&&(o=25,r=-1*e.width-n.config.yaxis[t].title.offsetX-o)),{xPos:r,padd:o})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,s=0,n=0,a=18,r=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map(function(o,l){var h=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!o.show||o.floating||0===t[l].width,c=t[l].width+e[l].width;o.opposite?i.globals.isBarHorizontal?(n=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=n-o.labels.offsetX):(n=i.globals.gridWidth+i.globals.translateX+r,h||(r=r+c+20),i.globals.translateYAxisX[l]=n-o.labels.offsetX+20):(s=i.globals.translateX-a,h||(a=a+c+20),i.globals.translateYAxisX[l]=s+o.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=_.listToArray(e)).forEach(function(e,i){var s=t.config.yaxis[i];if(s&&void 0!==s.labels.align){var n=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));a=_.listToArray(a);var r=n.getBoundingClientRect();"left"===s.labels.align?(a.forEach(function(t,e){t.setAttribute("text-anchor","start")}),s.opposite||n.setAttribute("transform","translate(-".concat(r.width,", 0)"))):"center"===s.labels.align?(a.forEach(function(t,e){t.setAttribute("text-anchor","middle")}),n.setAttribute("transform","translate(".concat(r.width/2*(s.opposite?1:-1),", 0)"))):"right"===s.labels.align&&(a.forEach(function(t,e){t.setAttribute("text-anchor","end")}),s.opposite&&n.setAttribute("transform","translate(".concat(r.width,", 0)")))}})}}]),t}(),Z=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.documentEvent=_.bind(this.documentEvent,this)}return o(t,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var s=i.globals.events[t].indexOf(e);-1!==s&&i.globals.events[t].splice(s,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var s=i.globals.events[t],n=s.length,a=0;a<n;a++)s[a].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,s=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach(function(t){s.addEventListener(t,function(t){var s=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,i,s):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,i,s),i.ctx.events.fireEvent("click",[t,i,s]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(i){e.globals.dom.baseEl.addEventListener(i,t.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var s=e.globals.dom.baseEl.querySelector(".apexcharts-menu");s&&s.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&s.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),J=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter(function(e){return e.name===t})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var s=_.extend(C,i);this.w.globals.locale=s.options}}]),t}(),Q=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawAxis",value:function(t,e){var i,s,n=this.w.globals,a=this.w.config,r=new X(this.ctx),o=new K(this.ctx);n.axisCharts&&"radar"!==t&&(n.isBarHorizontal?(s=o.drawYaxisInversed(0),i=r.drawXaxisInversed(0),n.dom.elGraphical.add(i),n.dom.elGraphical.add(s)):(i=r.drawXaxis(),n.dom.elGraphical.add(i),a.yaxis.map(function(t,e){-1===n.ignoreYAxisIndexes.indexOf(e)&&(s=o.drawYaxis(e),n.dom.Paper.add(s))})))}}]),t}(),tt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new b(this.ctx),i=new m(this.ctx),s=t.config.xaxis.crosshairs.fill.gradient,n=t.config.xaxis.crosshairs.dropShadow,a=t.config.xaxis.crosshairs.fill.type,r=s.colorFrom,o=s.colorTo,l=s.opacityFrom,h=s.opacityTo,c=s.stops,d=n.enabled,u=n.left,f=n.top,g=n.blur,p=n.color,v=n.opacity,x=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===a&&(x=e.drawGradient("vertical",r,o,l,h,null,c,null));var y=e.drawRect();1===t.config.xaxis.crosshairs.width&&(y=e.drawLine()),y.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:t.globals.gridHeight,width:_.isNumber(t.config.xaxis.crosshairs.width)?t.config.xaxis.crosshairs.width:0,height:t.globals.gridHeight,fill:x,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),d&&(y=i.dropShadow(y,{left:u,top:f,blur:g,color:p,opacity:v})),t.globals.dom.elGraphical.add(y)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new b(this.ctx),i=t.config.yaxis[0].crosshairs,s=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var n=e.drawLine(-s,0,t.globals.gridWidth+s,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);n.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(n)}var a=e.drawLine(-s,0,t.globals.gridWidth+s,0,i.stroke.color,0,0);a.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(a)}}]),t}(),et=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,s=i.config;if(0!==s.responsive.length){var n=s.responsive.slice();n.sort(function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0}).reverse();var a=new R({}),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n[0].breakpoint,r=window.innerWidth>0?window.innerWidth:screen.width;if(r>s){var o=w.extendArrayProps(a,i.globals.initialConfig,i);t=_.extend(o,t),t=_.extend(i.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<n.length;l++)r<n[l].breakpoint&&(t=w.extendArrayProps(a,n[l].options,i),t=_.extend(i.config,t),e.overrideResponsiveOptions(t))};if(t){var o=w.extendArrayProps(a,t,i);o=_.extend(i.config,o),r(o=_.extend(o,t))}else r({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new R(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),it=function(){function t(e){a(this,t),this.ctx=e,this.colors=[],this.w=e.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return o(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this,e=this.w,i=new _;if(e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode)),void 0===e.config.colors?e.globals.colors=this.predefined():(e.globals.colors=e.config.colors,Array.isArray(e.config.colors)&&e.config.colors.length>0&&"function"==typeof e.config.colors[0]&&(e.globals.colors=e.config.series.map(function(i,s){var n=e.config.colors[s];return n||(n=e.config.colors[0]),"function"==typeof n?(t.isColorFn=!0,n({value:e.globals.axisCharts?e.globals.series[s][0]?e.globals.series[s][0]:0:e.globals.series[s],seriesIndex:s,dataPointIndex:s,w:e})):n}))),e.globals.seriesColors.map(function(t,i){t&&(e.globals.colors[i]=t)}),e.config.theme.monochrome.enabled){var s=[],n=e.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(n=e.globals.series[0].length*e.globals.series.length);for(var a=e.config.theme.monochrome.color,r=1/(n/e.config.theme.monochrome.shadeIntensity),o=e.config.theme.monochrome.shadeTo,l=0,h=0;h<n;h++){var c=void 0;"dark"===o?(c=i.shadeColor(-1*l,a),l+=r):(c=i.shadeColor(l,a),l+=r),s.push(c)}e.globals.colors=s.slice()}var d=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),["fill","stroke"].forEach(function(i){void 0===e.config[i].colors?e.globals[i].colors=t.isColorFn?e.config.colors:d:e.globals[i].colors=e.config[i].colors.slice(),t.pushExtraColors(e.globals[i].colors)}),void 0===e.config.dataLabels.style.colors?e.globals.dataLabels.style.colors=d:e.globals.dataLabels.style.colors=e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50),void 0===e.config.plotOptions.radar.polygons.fill.colors?e.globals.radarPolygons.fill.colors=["dark"===e.config.theme.mode?"#424242":"none"]:e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20),void 0===e.config.markers.colors?e.globals.markers.colors=d:e.globals.markers.colors=e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this.w,n=e||s.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===s.config.chart.type&&s.config.plotOptions.heatmap.colorScale.inverse),i&&s.globals.series.length&&(n=s.globals.series[s.globals.maxValsInArrayIndex].length*s.globals.series.length),t.length<n)for(var a=n-t.length,r=0;r<a;r++)t.push(t[r])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",i=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",s=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=s,t.theme.palette=i,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"];break;default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]}return this.colors}}]),t}(),st=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,s=e.globals.svgWidth/2,n=i.offsetY,a="middle";if("left"===i.align?(s=10,a="start"):"right"===i.align&&(s=e.globals.svgWidth-10,a="end"),s+=i.offsetX,n=n+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var r=new b(this.ctx).drawText({x:s,y:n,text:i.text,textAnchor:a,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});r.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(r)}}}]),t}(),nt=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,s=0,n="title"===t?e.config.title.floating:e.config.subtitle.floating,a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==a&&!n){var r=a.getBoundingClientRect();i=r.width,s=e.globals.axisCharts?r.height+5:r.height}return{width:i,height:s}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.baseEl.querySelector(".apexcharts-legend");t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},_.getBoundingClientRect(e));return null!==e&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var s=e.map(function(t,e){return Array.isArray(t)?t.length:1}),n=Math.max.apply(Math,g(s));i=e[s.indexOf(n)]}return i}}]),t}(),at=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var s=this.getxAxisTimeScaleLabelsCoords();t={width:s.width,height:s.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var n=e.globals.xLabelFormatter,a=_.getLargestStringFromArr(i),r=this.dCtx.dimHelpers.getLargestStringFromMultiArr(a,i);e.globals.isBarHorizontal&&(r=a=e.globals.yAxisScale[0].result.reduce(function(t,e){return t.length>e.length?t:e},0));var o=new V(this.dCtx.ctx),l=a;a=o.xLabelFormat(n,a,l,{i:void 0,dateFormatter:new D(this.dCtx.ctx).formatDate,w:e}),r=o.xLabelFormat(n,r,l,{i:void 0,dateFormatter:new D(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===a||""===String(a).trim())&&(r=a="1");var h=new b(this.dCtx.ctx),c=h.getTextRects(a,e.config.xaxis.labels.style.fontSize),d=c;if(a!==r&&(d=h.getTextRects(r,e.config.xaxis.labels.style.fontSize)),(t={width:c.width>=d.width?c.width:d.width,height:c.height>=d.height?c.height:d.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var u=function(t){return h.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};c=u(a),a!==r&&(d=u(r)),t.height=(c.height>d.height?c.height:d.height)/1.5,t.width=c.width>d.width?c.width:d.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var s=new b(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=s.width,i=s.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(t){return t.value}),s=i.reduce(function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e},0);return 1.05*(t=new b(this.dCtx.ctx).getTextRects(s,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,s=i.globals,n=i.config,a=n.xaxis.type,r=t.width;s.skipLastTimelinelabel=!1,s.skipFirstTimelinelabel=!1;var o=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(t,o){(function(t){return-1!==s.collapsedSeriesIndices.indexOf(t)})(o)||function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var o=e.dCtx.timescaleLabels[0],l=e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+r/1.75-e.dCtx.yAxisWidthRight,h=o.position-r/1.75+e.dCtx.yAxisWidthLeft;l>s.svgWidth-s.translateX&&(s.skipLastTimelinelabel=!0),h<-(t.show&&!t.floating||"bar"!==n.chart.type&&"candlestick"!==n.chart.type&&"rangeBar"!==n.chart.type&&"boxPlot"!==n.chart.type?0:r/1.75)&&(s.skipFirstTimelinelabel=!0)}else"datetime"===a?e.dCtx.gridPad.right<r&&!s.rotateXLabels&&(s.skipLastTimelinelabel=!0):"datetime"!==a&&e.dCtx.gridPad.right<r/2-e.dCtx.yAxisWidthRight&&!s.rotateXLabels&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(e.dCtx.xPadRight=r/2+1)}(t)};n.yaxis.forEach(function(t,i){o?(e.dCtx.gridPad.left<r&&(e.dCtx.xPadLeft=r/2+1),e.dCtx.xPadRight=r/2+1):l(t,i)})}}]),t}(),rt=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],s=10,n=new Y(this.dCtx.ctx);return e.config.yaxis.map(function(a,r){var o=e.globals.yAxisScale[r];if(!n.isYAxisHidden(r)&&a.labels.show&&o.result.length){var l=e.globals.yLabelFormatters[r],h=String(o.niceMin).length>String(o.niceMax).length?o.niceMin:o.niceMax,c=l(h,{seriesIndex:r,dataPointIndex:-1,w:e}),d=c;if(void 0!==c&&0!==c.length||(c=h),e.globals.isBarHorizontal){s=0;var u=e.globals.labels.slice();c=l(c=_.getLargestStringFromArr(u),{seriesIndex:r,dataPointIndex:-1,w:e}),d=t.dCtx.dimHelpers.getLargestStringFromMultiArr(c,u)}var f=new b(t.dCtx.ctx),g="rotate(".concat(a.labels.rotate," 0 0)"),p=f.getTextRects(c,a.labels.style.fontSize,a.labels.style.fontFamily,g,!1),v=p;c!==d&&(v=f.getTextRects(d,a.labels.style.fontSize,a.labels.style.fontFamily,g,!1)),i.push({width:(v.width>p.width?v.width:p.width)+s,height:v.height>p.height?v.height:p.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=[];return this.w.config.yaxis.map(function(i,s){if(i.show&&void 0!==i.title.text){var n=new b(t.dCtx.ctx),a="rotate(".concat(i.title.rotate," 0 0)"),r=n.getTextRects(i.title.text,i.title.style.fontSize,i.title.style.fontFamily,a,!1);e.push({width:r.width,height:r.height})}else e.push({width:0,height:0})}),e}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,s=0,n=t.globals.yAxisScale.length>1?10:0,a=new Y(this.dCtx.ctx),r=function(r,o){var l=t.config.yaxis[o].floating,h=0;r.width>0&&!l?(h=r.width+n,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(o)&&(h=h-r.width-n)):h=l||a.isYAxisHidden(o)?0:5,t.config.yaxis[o].opposite?s+=h:i+=h,e+=h};return t.globals.yLabelsCoords.map(function(t,e){r(t,e)}),t.globals.yTitleCoords.map(function(t,e){r(t,e)}),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=s,e}}]),t}(),ot=function(){function t(e){a(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var i=function(t){return"bar"===t||"rangeBar"===t||"candlestick"===t||"boxPlot"===t},s=e.config.chart.type,n=0,a=i(s)?e.config.series.length:1;if(e.globals.comboBarCount>0&&(a=e.globals.comboBarCount),e.globals.collapsedSeries.forEach(function(t){i(t.type)&&(a-=1)}),e.config.chart.stacked&&(a=1),(i(s)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&a>0){var r,o,l=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);l<=3&&(l=e.globals.dataPoints),r=l/t,e.globals.minXDiff&&e.globals.minXDiff/r>0&&(o=e.globals.minXDiff/r),o>t/2&&(o/=2),(n=o/a*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(n=1),n=n/(a>1?1:1.5)+5,e.globals.barPadForNumericAxis=n}return n}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,s=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach(function(i){void 0!==e.config[i].text?s+=e.config[i].margin:s+=t.dCtx.isSparkline||!e.globals.axisCharts?0:5}),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||e.globals.axisCharts||(s+=10);var n=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),a=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-n.height-a.height-s,i.translateY=i.translateY+n.height+a.height+s}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,s=new Y(this.dCtx.ctx);i.config.yaxis.map(function(n,a){-1!==i.globals.ignoreYAxisIndexes.indexOf(a)||n.floating||s.isYAxisHidden(a)||(n.opposite&&(i.globals.translateX=i.globals.translateX-(e[a].width+t[a].width)-parseInt(i.config.yaxis[a].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))})}}]),t}(),lt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new nt(this),this.dimYAxis=new rt(this),this.dimXAxis=new at(this),this.dimGrid=new ot(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return o(t,[{key:"plotCoords",value:function(){var t=this.w.globals;this.lgRect=this.dimHelpers.getLegendsRect(),t.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),t.gridHeight=t.gridHeight-this.gridPad.top-this.gridPad.bottom,t.gridWidth=t.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var e=this.dimGrid.gridPadForColumnsInNumericAxis(t.gridWidth);t.gridWidth=t.gridWidth-2*e,t.translateX=t.translateX+this.gridPad.left+this.xPadLeft+(e>0?e+4:0),t.translateY=t.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,s=this.dimYAxis.getyAxisLabelsCoords(),n=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map(function(t,i){e.globals.yLabelsCoords.push({width:s[i].width,index:i}),e.globals.yTitleCoords.push({width:n[i].width,index:i})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var a=this.dimXAxis.getxAxisLabelsCoords(),r=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(a,r),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var o=this.yAxisWidth,l=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var h=10;("radar"===e.config.chart.type||this.isSparkline)&&(o=0,l=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(o=0,l=0,h=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(a);var c=function(){i.translateX=o,i.gridHeight=i.svgHeight-t.lgRect.height-l-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-o};switch("top"===e.config.xaxis.position&&(h=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=h,c();break;case"top":i.translateY=this.lgRect.height+h,c();break;case"left":i.translateY=h,i.translateX=this.lgRect.width+o,i.gridHeight=i.svgHeight-l-12,i.gridWidth=i.svgWidth-this.lgRect.width-o;break;case"right":i.translateY=h,i.translateX=o,i.gridHeight=i.svgHeight-l-12,i.gridWidth=i.svgWidth-this.lgRect.width-o-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(n,s),new K(this.ctx).setYAxisXPosition(s,n)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,s=0;t.config.legend.show&&!t.config.legend.floating&&(s=20);var n="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",a=i.plotOptions[n].offsetY,r=i.plotOptions[n].offsetX;if(!i.legend.show||i.legend.floating)return e.gridHeight=e.svgHeight-i.grid.padding.left+i.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=a,void(e.translateX=r+(e.svgWidth-e.gridWidth)/2);switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=a-10,e.translateX=r+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+a+10,e.translateX=r+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-s,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=a,e.translateX=r+this.lgRect.width+s;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-s-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=a,e.translateX=r+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e){var i=this.w;this.xAxisHeight=(t.height+e.height)*(i.globals.isMultiLineX?1.2:i.globals.LINE_HEIGHT_RATIO)+(i.globals.rotateXLabels?22:10),this.xAxisWidth=t.width,this.xAxisHeight-e.height>i.config.xaxis.labels.maxHeight&&(this.xAxisHeight=i.config.xaxis.labels.maxHeight),i.config.xaxis.labels.minHeight&&this.xAxisHeight<i.config.xaxis.labels.minHeight&&(this.xAxisHeight=i.config.xaxis.labels.minHeight),i.config.xaxis.floating&&(this.xAxisHeight=0);var s=0,n=0;i.config.yaxis.forEach(function(t){s+=t.labels.minWidth,n+=t.labels.maxWidth}),this.yAxisWidth<s&&(this.yAxisWidth=s),this.yAxisWidth>n&&(this.yAxisWidth=n)}}]),t}(),ht=function(){function t(e){a(this,t),this.w=e.w,this.lgCtx=e}return o(t,[{key:"getLegendStyles",value:function(){var t=document.createElement("style");t.setAttribute("type","text/css");var e=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.position-bottom, .apexcharts-legend.position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-left, .apexcharts-legend.position-top.apexcharts-align-left, .apexcharts-legend.position-right, .apexcharts-legend.position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-center, .apexcharts-legend.position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.position-bottom.apexcharts-align-right, .apexcharts-legend.position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.position-bottom .apexcharts-legend-series, .apexcharts-legend.position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return t.appendChild(e),t}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){var t=this.w.globals;t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject");var e=t.dom.elLegendForeign;e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("width",t.svgWidth),e.setAttribute("height",t.svgHeight),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),e.appendChild(t.dom.elLegendWrap),e.appendChild(this.getLegendStyles()),t.dom.Paper.node.insertBefore(e,t.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(t,e){var i=this,s=this.w;if(s.globals.axisCharts||"radialBar"===s.config.chart.type){s.globals.resized=!0;var n=null,a=null;s.globals.risingSeries=[],s.globals.axisCharts?(n=s.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),a=parseInt(n.getAttribute("data:realIndex"),10)):(n=s.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),a=parseInt(n.getAttribute("rel"),10)-1),e?[{cs:s.globals.collapsedSeries,csi:s.globals.collapsedSeriesIndices},{cs:s.globals.ancillaryCollapsedSeries,csi:s.globals.ancillaryCollapsedSeriesIndices}].forEach(function(t){i.riseCollapsedSeries(t.cs,t.csi,a)}):this.hideSeries({seriesEl:n,realIndex:a})}else{var r=s.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),o=s.config.chart.type;if("pie"===o||"polarArea"===o||"donut"===o){var l=s.config.plotOptions.pie.donut.labels;new b(this.lgCtx.ctx).pathMouseDown(r.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(r.members[0].node,l)}r.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,i=t.realIndex,s=this.w,n=_.clone(s.config.series);if(s.globals.axisCharts){var a=!1;if(s.config.yaxis[i]&&s.config.yaxis[i].show&&s.config.yaxis[i].showAlways&&(a=!0,s.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(s.globals.ancillaryCollapsedSeries.push({index:i,data:n[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),s.globals.ancillaryCollapsedSeriesIndices.push(i))),!a){s.globals.collapsedSeries.push({index:i,data:n[i].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),s.globals.collapsedSeriesIndices.push(i);var r=s.globals.risingSeries.indexOf(i);s.globals.risingSeries.splice(r,1)}}else s.globals.collapsedSeries.push({index:i,data:n[i]}),s.globals.collapsedSeriesIndices.push(i);for(var o=e.childNodes,l=0;l<o.length;l++)o[l].classList.contains("apexcharts-series-markers-wrap")&&(o[l].classList.contains("apexcharts-hide")?o[l].classList.remove("apexcharts-hide"):o[l].classList.add("apexcharts-hide"));s.globals.allSeriesCollapsed=s.globals.collapsedSeries.length===s.config.series.length,n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var s=this.w,n=_.clone(s.config.series);if(t.length>0){for(var a=0;a<t.length;a++)t[a].index===i&&(s.globals.axisCharts?(n[i].data=t[a].data.slice(),t.splice(a,1),e.splice(a,1),s.globals.risingSeries.push(i)):(n[i]=t[a].data,t.splice(a,1),e.splice(a,1),s.globals.risingSeries.push(i)));n=this._getSeriesBasedOnCollapsedState(n),this.lgCtx.ctx.updateHelpers._updateSeries(n,s.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w;return e.globals.axisCharts?t.forEach(function(i,s){e.globals.collapsedSeriesIndices.indexOf(s)>-1&&(t[s].data=[])}):t.forEach(function(i,s){e.globals.collapsedSeriesIndices.indexOf(s)>-1&&(t[s]=0)}),t}}]),t}(),ct=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new ht(this)}return o(t,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config;if((i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),_.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this,e=this.w,i=e.config.legend.fontFamily,s=e.globals.seriesNames,n=e.globals.colors.slice();if("heatmap"===e.config.chart.type){var a=e.config.plotOptions.heatmap.colorScale.ranges;s=a.map(function(t){return t.name?t.name:t.from+" - "+t.to}),n=a.map(function(t){return t.color})}else this.isBarsDistributed&&(s=e.globals.labels.slice());for(var r=e.globals.legendFormatter,o=e.config.legend.inverseOrder,l=o?s.length-1:0;o?l>=0:l<=s.length-1;o?l--:l++){var h=r(s[l],{seriesIndex:l,w:e}),c=!1,d=!1;if(e.globals.collapsedSeries.length>0)for(var u=0;u<e.globals.collapsedSeries.length;u++)e.globals.collapsedSeries[u].index===l&&(c=!0);if(e.globals.ancillaryCollapsedSeriesIndices.length>0)for(var f=0;f<e.globals.ancillaryCollapsedSeriesIndices.length;f++)e.globals.ancillaryCollapsedSeriesIndices[f]===l&&(d=!0);var g=document.createElement("span");g.classList.add("apexcharts-legend-marker");var p=e.config.legend.markers.offsetX,v=e.config.legend.markers.offsetY,m=e.config.legend.markers.height,x=e.config.legend.markers.width,y=e.config.legend.markers.strokeWidth,S=e.config.legend.markers.strokeColor,k=e.config.legend.markers.radius,C=g.style;C.background=n[l],C.color=n[l],C.setProperty("background",n[l],"important"),e.config.legend.markers.fillColors&&e.config.legend.markers.fillColors[l]&&(C.background=e.config.legend.markers.fillColors[l]),void 0!==e.globals.seriesColors[l]&&(C.background=e.globals.seriesColors[l],C.color=e.globals.seriesColors[l]),C.height=Array.isArray(m)?parseFloat(m[l])+"px":parseFloat(m)+"px",C.width=Array.isArray(x)?parseFloat(x[l])+"px":parseFloat(x)+"px",C.left=Array.isArray(p)?p[l]:p,C.top=Array.isArray(v)?v[l]:v,C.borderWidth=Array.isArray(y)?y[l]:y,C.borderColor=Array.isArray(S)?S[l]:S,C.borderRadius=Array.isArray(k)?parseFloat(k[l])+"px":parseFloat(k)+"px",e.config.legend.markers.customHTML&&(Array.isArray(e.config.legend.markers.customHTML)?e.config.legend.markers.customHTML[l]&&(g.innerHTML=e.config.legend.markers.customHTML[l]()):g.innerHTML=e.config.legend.markers.customHTML()),b.setAttrs(g,{rel:l+1,"data:collapsed":c||d}),(c||d)&&g.classList.add("apexcharts-inactive-legend");var A=document.createElement("div"),I=document.createElement("span");I.classList.add("apexcharts-legend-text"),I.innerHTML=Array.isArray(h)?h.join(" "):h;var E=e.config.legend.labels.useSeriesColors?e.globals.colors[l]:e.config.legend.labels.colors;E||(E=e.config.chart.foreColor),I.style.color=E,I.style.fontSize=parseFloat(e.config.legend.fontSize)+"px",I.style.fontWeight=e.config.legend.fontWeight,I.style.fontFamily=i||e.config.chart.fontFamily,b.setAttrs(I,{rel:l+1,i:l,"data:default-text":encodeURIComponent(h),"data:collapsed":c||d}),A.appendChild(g),A.appendChild(I);var T=new w(this.ctx);e.config.legend.showForZeroSeries||0===T.getSeriesTotalByIndex(l)&&T.seriesHaveSameValues(l)&&!T.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-zero-series"),e.config.legend.showForNullSeries||T.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&A.classList.add("apexcharts-hidden-null-series"),e.globals.dom.elLegendWrap.appendChild(A),e.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(e.config.legend.horizontalAlign)),e.globals.dom.elLegendWrap.classList.add("position-"+e.config.legend.position),A.classList.add("apexcharts-legend-series"),A.style.margin="".concat(e.config.legend.itemMargin.vertical,"px ").concat(e.config.legend.itemMargin.horizontal,"px"),e.globals.dom.elLegendWrap.style.width=e.config.legend.width?e.config.legend.width+"px":"",e.globals.dom.elLegendWrap.style.height=e.config.legend.height?e.config.legend.height+"px":"",b.setAttrs(A,{rel:l+1,seriesName:_.escapeString(s[l]),"data:collapsed":c||d}),(c||d)&&A.classList.add("apexcharts-inactive-legend"),e.config.legend.onItemClick.toggleDataSeries||A.classList.add("apexcharts-no-click")}e.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),e.config.legend.onItemHover.highlightDataSeries&&(e.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),e.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,s=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),n=s.getBoundingClientRect(),a=0,r=0;if("bottom"===i.config.legend.position)r+=i.globals.svgHeight-n.height/2;else if("top"===i.config.legend.position){var o=new lt(this.ctx),l=o.dimHelpers.getTitleSubtitleCoords("title").height,h=o.dimHelpers.getTitleSubtitleCoords("subtitle").height;r=r+(l>0?l-10:0)+(h>0?h-10:0)}s.style.position="absolute",a=a+t+i.config.legend.offsetX,r=r+e+i.config.legend.offsetY,s.style.left=a+"px",s.style.top=r+"px","bottom"===i.config.legend.position?(s.style.top="auto",s.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(s.style.left="auto",s.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(t){s.style[t]&&(s.style[t]=parseInt(i.config.legend[t],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var e=this.legendHelpers.getLegendBBox(),i=new lt(this.ctx),s=i.dimHelpers.getTitleSubtitleCoords("title"),n=i.dimHelpers.getTitleSubtitleCoords("subtitle"),a=0;"bottom"===t.config.legend.position?a=-e.clwh/1.8:"top"===t.config.legend.position&&(a=s.height+n.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,a)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var s=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,s,this.w]),new z(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new z(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker")){var i=parseInt(t.target.getAttribute("rel"),10)-1,s="true"===t.target.getAttribute("data:collapsed"),n=this.w.config.chart.events.legendClick;"function"==typeof n&&n(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var a=this.w.config.legend.markers.onClick;"function"==typeof a&&t.target.classList.contains("apexcharts-legend-marker")&&(a(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,s)}}}]),t}(),dt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return o(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},s=i();if(s.setAttribute("class","apexcharts-toolbar"),s.style.top=e.config.chart.toolbar.offsetY+"px",s.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(s),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var n=0;n<this.t.customIcons.length;n++)this.elCustomIcons.push(i());var a=[],r=function(i,s,n){var r=i.toLowerCase();t.t[r]&&e.config.chart.zoom.enabled&&a.push({el:s,icon:"string"==typeof t.t[r]?t.t[r]:n,title:t.localeValues[i],class:"apexcharts-".concat(r,"-icon")})};r("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),r("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var o=function(i){t.t[i]&&e.config.chart[i].enabled&&a.push({el:"zoom"===i?t.elZoom:t.elSelection,icon:"string"==typeof t.t[i]?t.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===i?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};o("zoom"),o("selection"),this.t.pan&&e.config.chart.zoom.enabled&&a.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),r("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&a.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)a.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});a.forEach(function(t,e){t.index&&_.moveIndexInArray(a,e,t.index)});for(var h=0;h<a.length;h++)b.setAttrs(a[h].el,{class:a[h].class,title:a[h].title}),a[h].el.innerHTML=a[h].icon,s.appendChild(a[h].el);this._createHamburgerMenu(s),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),b.setAttrs(this.elMenu,{class:"apexcharts-menu"});var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||e.splice(2,1);for(var i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,b.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))});for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls();var i="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,s="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[s]=!e.w.globals[s],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(e){e&&e.classList.remove(t.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isTimelineBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,i=(this.minX+e)/2,s=(this.maxX+e)/2,n=this._getNewMinXMaxX(i,s);t.globals.disableZoomIn||this.zoomUpdateOptions(n.minX,n.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isTimelineBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,i=this.minX-(e-this.minX),s=this.maxX-(e-this.maxX),n=this._getNewMinXMaxX(i,s);t.globals.disableZoomOut||this.zoomUpdateOptions(n.minX,n.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(void 0!==t||void 0!==e){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var s={min:t,max:e},n=this.getBeforeZoomRange(s);n&&(s=n.xaxis);var a={xaxis:s},r=_.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(r=new G(this.ctx).autoScaleY(this.ctx,r,{xaxis:s})),i.config.chart.group||(a.yaxis=r),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(a,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(s,r)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new W(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach(function(t){var e=t.w;if(e.globals.lastXAxis.min=void 0,e.globals.lastXAxis.max=void 0,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom){var i=e.config.chart.events.beforeResetZoom(t,e);i&&t.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var s=t.ctx.series.emptyCollapsedSeries(_.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(s,e.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),ut=function(t){d(i,dt);var e=f(i);function i(t){var s;return a(this,i),(s=e.call(this,t)).ctx=t,s.w=t.w,s.dragged=!1,s.graphics=new b(s.ctx),s.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],s.clientX=0,s.clientY=0,s.startX=0,s.endX=0,s.dragX=0,s.startY=0,s.endY=0,s.dragY=0,s.moveDirection="none",s}return o(i,[{key:"init",value:function(t){var e=this,i=t.xyRatios,s=this.w,n=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=s.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),s.globals.dom.elGraphical.add(this.zoomRect),s.globals.dom.elGraphical.add(this.selectionRect),"x"===s.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:s.globals.gridWidth,maxY:s.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===s.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:s.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=s.globals.dom.baseEl.querySelector("".concat(s.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(t){e.hoverArea.addEventListener(t,n.svgMouseEvents.bind(n,i),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var i=this.w,s=this,n=this.ctx.toolbar,a=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,r=i.config.chart.toolbar.autoSelected;e.shiftKey?(this.shiftWasPressed=!0,n.enableZoomPanFromToolbar("pan"===r?"zoom":"pan")):this.shiftWasPressed&&(n.enableZoomPanFromToolbar(r),this.shiftWasPressed=!1);var o=e.target.classList;if(!(o.contains("apexcharts-selection-rect")||o.contains("apexcharts-legend-marker")||o.contains("apexcharts-legend-text")||e.target.parentNode.classList.contains("apexcharts-toolbar"))){if(s.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,s.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,"mousedown"===e.type&&1===e.which){var l=s.gridRect.getBoundingClientRect();s.startX=s.clientX-l.left,s.startY=s.clientY-l.top,s.dragged=!1,s.w.globals.mousedown=!0}if(("mousemove"===e.type&&1===e.which||"touchmove"===e.type)&&(s.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,s.w.globals.mousedown&&s.panDragging({context:s,zoomtype:a,xyRatios:t})):(s.w.globals.mousedown&&i.globals.zoomEnabled||s.w.globals.mousedown&&i.globals.selectionEnabled)&&(s.selection=s.selectionDrawing({context:s,zoomtype:a}))),"mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var h=s.gridRect.getBoundingClientRect();s.w.globals.mousedown&&(s.endX=s.clientX-h.left,s.endY=s.clientY-h.top,s.dragX=Math.abs(s.endX-s.startX),s.dragY=Math.abs(s.endY-s.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&s.selectionDrawn({context:s,zoomtype:a}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&s.delayedPanScrolled()),i.globals.zoomEnabled&&s.hideSelectionRect(this.selectionRect),s.dragged=!1,s.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(void 0!==t.globals.selection&&null!==t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var i=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio,s={x:i,y:0,width:t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-i,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(s),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,i=t.y,s=t.width,n=t.height,a=t.translateX,r=void 0===a?0:a,o=t.translateY,l=void 0===o?0:o,h=this.w,c=this.zoomRect,d=this.selectionRect;if(this.dragged||null!==h.globals.selection){var u={transform:"translate("+r+", "+l+")"};h.globals.zoomEnabled&&this.dragged&&(s<0&&(s=1),c.attr({x:e,y:i,width:s,height:n,fill:h.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":h.config.chart.zoom.zoomedArea.fill.opacity,stroke:h.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":h.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":h.config.chart.zoom.zoomedArea.stroke.opacity}),b.setAttrs(c.node,u)),h.globals.selectionEnabled&&(d.attr({x:e,y:i,width:s>0?s:0,height:n>0?n:0,fill:h.config.chart.selection.fill.color,"fill-opacity":h.config.chart.selection.fill.opacity,stroke:h.config.chart.selection.stroke.color,"stroke-width":h.config.chart.selection.stroke.width,"stroke-dasharray":h.config.chart.selection.stroke.dashArray,"stroke-opacity":h.config.chart.selection.stroke.opacity}),b.setAttrs(d.node,u))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e,i=t.context,s=t.zoomtype,n=this.w,a=i,r=this.gridRect.getBoundingClientRect(),o=a.startX-1,l=a.startY,h=!1,c=!1,d=a.clientX-r.left-o,u=a.clientY-r.top-l;return Math.abs(d+o)>n.globals.gridWidth?d=n.globals.gridWidth-o:a.clientX-r.left<0&&(d=o),o>a.clientX-r.left&&(h=!0,d=Math.abs(d)),l>a.clientY-r.top&&(c=!0,u=Math.abs(u)),e="x"===s?{x:h?o-d:o,y:0,width:d,height:n.globals.gridHeight}:"y"===s?{x:0,y:c?l-u:l,width:n.globals.gridWidth,height:u}:{x:h?o-d:o,y:c?l-u:l,width:d,height:u},a.drawSelectionRect(e),a.selectionDragging("resizing"),e}},{key:"selectionDragging",value:function(t,e){var i=this,s=this.w,n=this.xyRatios,a=this.selectionRect,r=0;"resizing"===t&&(r=30);var o=function(t){return parseFloat(a.node.getAttribute(t))},l={x:o("x"),y:o("y"),width:o("width"),height:o("height")};s.globals.selection=l,"function"==typeof s.config.chart.events.selection&&s.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var t=i.gridRect.getBoundingClientRect(),e=a.node.getBoundingClientRect(),r={xaxis:{min:s.globals.xAxisScale.niceMin+(e.left-t.left)*n.xRatio,max:s.globals.xAxisScale.niceMin+(e.right-t.left)*n.xRatio},yaxis:{min:s.globals.yAxisScale[0].niceMin+(t.bottom-e.bottom)*n.yRatio[0],max:s.globals.yAxisScale[0].niceMax-(e.top-t.top)*n.yRatio[0]}};s.config.chart.events.selection(i.ctx,r),s.config.chart.brush.enabled&&void 0!==s.config.chart.events.brushScrolled&&s.config.chart.events.brushScrolled(i.ctx,r)},r))}},{key:"selectionDrawn",value:function(t){var e=t.context,i=t.zoomtype,s=this.w,n=e,a=this.xyRatios,r=this.ctx.toolbar;if(n.startX>n.endX){var o=n.startX;n.startX=n.endX,n.endX=o}if(n.startY>n.endY){var l=n.startY;n.startY=n.endY,n.endY=l}var h=void 0,c=void 0;s.globals.isTimelineBar?(h=s.globals.yAxisScale[0].niceMin+n.startX*a.invertedYRatio,c=s.globals.yAxisScale[0].niceMin+n.endX*a.invertedYRatio):(h=s.globals.xAxisScale.niceMin+n.startX*a.xRatio,c=s.globals.xAxisScale.niceMin+n.endX*a.xRatio);var d=[],u=[];if(s.config.yaxis.forEach(function(t,e){d.push(s.globals.yAxisScale[e].niceMax-a.yRatio[e]*n.startY),u.push(s.globals.yAxisScale[e].niceMax-a.yRatio[e]*n.endY)}),n.dragged&&(n.dragX>10||n.dragY>10)&&h!==c)if(s.globals.zoomEnabled){var f=_.clone(s.globals.initialConfig.yaxis),g=_.clone(s.globals.initialConfig.xaxis);if(s.globals.zoomed=!0,s.config.xaxis.convertedCatToNumeric&&(h=Math.floor(h),c=Math.floor(c),h<1&&(h=1,c=s.globals.dataPoints),c-h<2&&(c=h+1)),"xy"!==i&&"x"!==i||(g={min:h,max:c}),"xy"!==i&&"y"!==i||f.forEach(function(t,e){f[e].min=u[e],f[e].max=d[e]}),s.config.chart.zoom.autoScaleYaxis){var p=new G(n.ctx);f=p.autoScaleY(n.ctx,f,{xaxis:g})}if(r){var v=r.getBeforeZoomRange(g,f);v&&(g=v.xaxis?v.xaxis:g,f=v.yaxis?v.yaxis:f)}var m={xaxis:g};s.config.chart.group||(m.yaxis=f),n.ctx.updateHelpers._updateOptions(m,!1,n.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof s.config.chart.events.zoomed&&r.zoomCallback(g,f)}else if(s.globals.selectionEnabled){var b,x=null;b={min:h,max:c},"xy"!==i&&"y"!==i||(x=_.clone(s.config.yaxis)).forEach(function(t,e){x[e].min=u[e],x[e].max=d[e]}),s.globals.selection=n.selection,"function"==typeof s.config.chart.events.selection&&s.config.chart.events.selection(n.ctx,{xaxis:b,yaxis:x})}}},{key:"panDragging",value:function(t){var e=t.context,i=this.w,s=e;if(void 0!==i.globals.lastClientPosition.x){var n=i.globals.lastClientPosition.x-s.clientX,a=i.globals.lastClientPosition.y-s.clientY;Math.abs(n)>Math.abs(a)&&n>0?this.moveDirection="left":Math.abs(n)>Math.abs(a)&&n<0?this.moveDirection="right":Math.abs(a)>Math.abs(n)&&a>0?this.moveDirection="up":Math.abs(a)>Math.abs(n)&&a<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:s.clientX,y:s.clientY};var r=i.globals.isTimelineBar?i.globals.minY:i.globals.minX,o=i.globals.isTimelineBar?i.globals.maxY:i.globals.maxX;i.config.xaxis.convertedCatToNumeric||s.panScrolled(r,o)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,i=t.globals.maxX,s=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+s,i=t.globals.maxX+s):"right"===this.moveDirection&&(e=t.globals.minX-s,i=t.globals.maxX-s),e=Math.floor(e),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:e,max:i}},e,i)}},{key:"panScrolled",value:function(t,e){var i=this.w,s=this.xyRatios,n=_.clone(i.globals.initialConfig.yaxis),a=s.xRatio,r=i.globals.minX,o=i.globals.maxX;i.globals.isTimelineBar&&(a=s.invertedYRatio,r=i.globals.minY,o=i.globals.maxY),"left"===this.moveDirection?(t=r+i.globals.gridWidth/15*a,e=o+i.globals.gridWidth/15*a):"right"===this.moveDirection&&(t=r-i.globals.gridWidth/15*a,e=o-i.globals.gridWidth/15*a),i.globals.isTimelineBar||(t<i.globals.initialMinX||e>i.globals.initialMaxX)&&(t=r,e=o);var l={min:t,max:e};i.config.chart.zoom.autoScaleYaxis&&(n=new G(this.ctx).autoScaleY(this.ctx,n,{xaxis:l}));var h={xaxis:{min:t,max:e}};i.config.chart.group||(h.yaxis=n),this.updateScrolledChart(h,t,e)}},{key:"updateScrolledChart",value:function(t,e,i){var s=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof s.config.chart.events.scrolled&&s.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:i}})}}]),i}(),ft=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return o(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,i=t.elGrid,s=t.clientX,n=t.clientY,a=this.w,r=a.globals.gridWidth,o=a.globals.gridHeight,l=r/(a.globals.dataPoints-1),h=o/a.globals.dataPoints,c=i.getBoundingClientRect(),d=this.hasBars();!a.globals.comboCharts&&!d||a.config.xaxis.convertedCatToNumeric||(l=r/a.globals.dataPoints);var u=s-c.left-a.globals.barPadForNumericAxis,f=n-c.top;u<0||f<0||u>a.globals.gridWidth||f>a.globals.gridHeight?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):a.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):a.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var g=Math.round(u/l),p=Math.floor(f/h);d&&!a.config.xaxis.convertedCatToNumeric&&(g=Math.ceil(u/l),g-=1);for(var v,m=null,b=null,x=[],y=0;y<a.globals.seriesXvalues.length;y++)x.push([a.globals.seriesXvalues[y][0]-1e-6].concat(a.globals.seriesXvalues[y]));return x=x.map(function(t){return t.filter(function(t){return t})}),v=a.globals.seriesYvalues.map(function(t){return t.filter(function(t){return _.isNumber(t)})}),a.globals.isXNumeric&&(m=(b=this.closestInMultiArray(u,f,x,v)).index,g=b.j,null!==m&&(x=a.globals.seriesXvalues[m],g=(b=this.closestInArray(u,x)).index)),a.globals.capturedSeriesIndex=null===m?-1:m,(!g||g<1)&&(g=0),a.globals.capturedDataPointIndex=g,{capturedSeries:m,j:a.globals.isBarHorizontal?p:g,hoverX:u,hoverY:f}}},{key:"closestInMultiArray",value:function(t,e,i,s){var n=0,a=null,r=-1;this.w.globals.series.length>1?n=this.getFirstActiveXArray(i):a=0;var o=s[n][0],l=i[n][0],h=Math.abs(t-l),c=Math.abs(e-o),d=c+h;return s.map(function(n,o){n.map(function(n,l){var u=Math.abs(e-s[o][l]),f=Math.abs(t-i[o][l]),g=f+u;g<d&&(d=g,h=f,c=u,a=o,r=l)})}),{index:a,j:r}}},{key:"getFirstActiveXArray",value:function(t){for(var e=0,i=t.map(function(t,e){return t.length>0?e:-1}),s=0;s<i.length;s++)if(-1!==i[s]){e=i[s];break}return e}},{key:"closestInArray",value:function(t,e){for(var i=e[0],s=null,n=Math.abs(t-i),a=0;a<e.length;a++){var r=Math.abs(t-e[a]);r<n&&(n=r,s=a)}return{index:s}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter(function(t){return void 0!==t[0]});if(i.length>0)for(var s=0;s<i.length-1;s++)void 0!==i[s][t]&&void 0!==i[s+1][t]&&i[s][t]!==i[s+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return g(t).reduce(function(t,e){return t+e.getBBox().height},0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=g(t)).sort(function(t,e){return Number(e.getAttribute("data:realIndex"))<Number(t.getAttribute("data:realIndex"))?0:-1});var e=[];return t.forEach(function(t){e.push(t.querySelector(".apexcharts-marker"))}),e}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var s=i.allTooltipSeriesGroups,n=0;n<s.length;n++)"enable"===t?(s[n].classList.add("apexcharts-active"),s[n].style.display=e.config.tooltip.items.display):(s[n].classList.remove("apexcharts-active"),s[n].style.display="none")}}]),t}(),gt=function(){function t(e){a(this,t),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new ft(e)}return o(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,s=t.ttItems,n=t.i,a=void 0===n?0:n,r=t.j,o=void 0===r?null:r,l=t.y1,h=t.y2,c=t.e,d=this.w;void 0!==d.config.tooltip.custom?this.handleCustomTooltip({i:a,j:o,y1:l,y2:h,w:d}):this.toggleActiveInactiveSeries(i);var u=this.getValuesToPrint({i:a,j:o});this.printLabels({i:a,j:o,values:u,ttItems:s,shared:i,e:c});var f=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=f.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=f.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,i=this,s=t.i,n=t.j,a=t.values,r=t.ttItems,o=t.shared,l=t.e,h=this.w,d=a.xVal,u=a.zVal,f=a.xAxisTTVal,g="",p=h.globals.colors[s];null!==n&&h.config.plotOptions.bar.distributed&&(p=h.globals.colors[n]);for(var _=function(t,a){var _=i.getFormatters(s);g=i.getSeriesName({fn:_.yLbTitleFormatter,index:s,seriesIndex:s,j:n}),"treemap"===h.config.chart.type&&(g=_.yLbTitleFormatter(String(h.config.series[s].data[n].x),{series:h.globals.series,seriesIndex:s,dataPointIndex:n,w:h}));var v=h.config.tooltip.inverseOrder?a:t;if(h.globals.axisCharts){var m=function(t){return _.yLbFormatter(h.globals.series[t][n],{series:h.globals.series,seriesIndex:t,dataPointIndex:n,w:h})};o?(_=i.getFormatters(v),g=i.getSeriesName({fn:_.yLbTitleFormatter,index:v,seriesIndex:s,j:n}),p=h.globals.colors[v],e=m(v)):(l&&l.target&&l.target.getAttribute("fill")&&(p=l.target.getAttribute("fill")),e=m(s))}null===n&&(e=_.yLbFormatter(h.globals.series[s],c(c({},h),{},{seriesIndex:s,dataPointIndex:s}))),i.DOMHandling({i:s,t:v,j:n,ttItems:r,values:{val:e,xVal:d,xAxisTTVal:f,zVal:u},seriesName:g,shared:o,pColor:p})},v=0,m=h.globals.series.length-1;v<h.globals.series.length;v++,m--)_(v,m)}},{key:"getFormatters",value:function(t){var e,i=this.w,s=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(s=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(s=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof s&&(s=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:s,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,i=t.index,s=t.seriesIndex,n=t.j,a=this.w;return e(String(a.globals.seriesNames[i]),{series:a.globals.series,seriesIndex:s,dataPointIndex:n,w:a})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,i=(t.j,t.ttItems),s=t.values,n=t.seriesName,a=t.shared,r=t.pColor,o=this.w,l=this.ttCtx,h=s.val,c=s.xVal,d=s.xAxisTTVal,u=s.zVal,f=null;f=i[e].children,o.config.tooltip.fillSeriesColor&&(i[e].style.backgroundColor=r,f[0].style.display="none"),l.showTooltipTitle&&(null===l.tooltipTitle&&(l.tooltipTitle=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),l.tooltipTitle.innerHTML=c),l.blxaxisTooltip&&(l.xaxisTooltipText.innerHTML=""!==d?d:c);var g=i[e].querySelector(".apexcharts-tooltip-text-label");g&&(g.innerHTML=n||"");var p=i[e].querySelector(".apexcharts-tooltip-text-value");p&&(p.innerHTML=void 0!==h?h:""),f[0]&&f[0].classList.contains("apexcharts-tooltip-marker")&&(o.config.tooltip.marker.fillColors&&Array.isArray(o.config.tooltip.marker.fillColors)&&(r=o.config.tooltip.marker.fillColors[e]),f[0].style.backgroundColor=r),o.config.tooltip.marker.show||(f[0].style.display="none"),null!==u&&(i[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=o.config.tooltip.z.title,i[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==u?u:""),a&&f[0]&&(null==h||o.globals.collapsedSeriesIndices.indexOf(e)>-1?f[0].parentNode.style.display="none":f[0].parentNode.style.display=o.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,s=this.w,n=this.ctx.series.filteredSeriesX(),a="",r="",o=null,l=null,h={series:s.globals.series,seriesIndex:e,dataPointIndex:i,w:s},c=s.globals.ttZFormatter;null===i?l=s.globals.series[e]:s.globals.isXNumeric&&"treemap"!==s.config.chart.type?(a=n[e][i],0===n[e].length&&(a=n[this.tooltipUtil.getFirstActiveXArray(n)][i])):a=void 0!==s.globals.labels[i]?s.globals.labels[i]:"";var d=a;return a=s.globals.isXNumeric&&"datetime"===s.config.xaxis.type?new V(this.ctx).xLabelFormat(s.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new D(this.ctx).formatDate,w:this.w}):s.globals.isBarHorizontal?s.globals.yLabelFormatters[0](d,h):s.globals.xLabelFormatter(d,h),void 0!==s.config.tooltip.x.formatter&&(a=s.globals.ttKeyFormatter(d,h)),s.globals.seriesZ.length>0&&s.globals.seriesZ[e].length>0&&(o=c(s.globals.seriesZ[e][i],s)),r="function"==typeof s.config.xaxis.tooltip.formatter?s.globals.xaxisTooltipFormatter(d,h):a,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(a)?a.join(" "):a,xAxisTTVal:Array.isArray(r)?r.join(" "):r,zVal:o}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,s=t.y1,n=t.y2,a=t.w,r=this.ttCtx.getElTooltip(),o=a.config.tooltip.custom;Array.isArray(o)&&o[e]&&(o=o[e]),r.innerHTML=o({ctx:this.ctx,series:a.globals.series,seriesIndex:e,dataPointIndex:i,y1:s,y2:n,w:a})}}]),t}(),pt=function(){function t(e){a(this,t),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return o(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,s=this.w,n=i.getElXCrosshairs(),a=t-i.xcrosshairsWidth/2,r=s.globals.labels.slice().length;if(null!==e&&(a=s.globals.gridWidth/r*e),null!==n&&(n.setAttribute("x",a),n.setAttribute("x1",a),n.setAttribute("x2",a),n.setAttribute("y2",s.globals.gridHeight),n.classList.add("apexcharts-active")),a<0&&(a=0),a>s.globals.gridWidth&&(a=s.globals.gridWidth),i.blxaxisTooltip){var o=a;"tickWidth"!==s.config.xaxis.crosshairs.width&&"barWidth"!==s.config.xaxis.crosshairs.width||(o=a+i.xcrosshairsWidth/2),this.moveXAxisTooltip(o)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&b.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&b.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip){i.xaxisTooltip.classList.add("apexcharts-active");var s,n=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;if(t-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(t))t+=e.globals.translateX,s=new b(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=s.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=n+"px"}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var s=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),n=e.globals.translateY+s,a=i.yaxisTTEls[t].getBoundingClientRect().height,r=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(r-=26),n-=a/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=n+"px",i.yaxisTTEls[t].style.left=r+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=this.w,n=this.ttCtx,a=n.getElTooltip(),r=n.tooltipRect,o=null!==i?parseFloat(i):1,l=parseFloat(t)+o+5,h=parseFloat(e)+o/2;if(l>s.globals.gridWidth/2&&(l=l-r.ttWidth-o-15),l>s.globals.gridWidth-r.ttWidth-10&&(l=s.globals.gridWidth-r.ttWidth),l<-20&&(l=-20),s.config.tooltip.followCursor){var c=n.getElGrid().getBoundingClientRect();h=n.e.clientY+s.globals.translateY-c.top-r.ttHeight/2}else s.globals.isBarHorizontal?h-=r.ttHeight:(r.ttHeight/2+h>s.globals.gridHeight&&(h=s.globals.gridHeight-r.ttHeight+s.globals.translateY),h<0&&(h=0));isNaN(l)||(l+=s.globals.translateX,a.style.left=l+"px",a.style.top=h+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,s=this.ttCtx;if(i.globals.markers.size[t]>0)for(var n=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),a=0;a<n.length;a++)parseInt(n[a].getAttribute("rel"),10)===e&&(s.marker.resetPointsSize(),s.marker.enlargeCurrentPoint(e,n[a]));else s.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,s,n=this.w,a=this.ttCtx,r=n.globals.pointsArray,o=a.tooltipUtil.getHoverMarkerSize(e),l=n.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){i=r[e][t][0],s=r[e][t][1]?r[e][t][1]:0;var h=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));h&&s<n.globals.gridHeight&&s>0&&(h.setAttribute("r",o),h.setAttribute("cx",i),h.setAttribute("cy",s)),this.moveXCrosshairs(i),a.fixedTooltip||this.moveTooltip(i,s,o)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,s=i.w,n=0,a=0,r=s.globals.pointsArray;e=new z(this.ctx).getActiveConfigSeriesIndex(!0);var o=i.tooltipUtil.getHoverMarkerSize(e);r[e]&&(n=r[e][t][0],a=r[e][t][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var h=0;h<s.globals.series.length;h++){var c=r[h];if(s.globals.comboCharts&&void 0===c&&l.splice(h,0,null),c&&c.length){var d=r[h][t][1];l[h].setAttribute("cx",n),null!==d&&!isNaN(d)&&d<s.globals.gridHeight&&d>0?(l[h]&&l[h].setAttribute("r",o),l[h]&&l[h].setAttribute("cy",d)):l[h]&&l[h].setAttribute("r",0)}}if(this.moveXCrosshairs(n),!i.fixedTooltip){var u=a||s.globals.gridHeight;this.moveTooltip(n,u,o)}}},{key:"moveStickyTooltipOverBars",value:function(t){var e=this.w,i=this.ttCtx,s=e.globals.columnSeries?e.globals.columnSeries.length:e.globals.series.length,n=s>=2&&s%2==0?Math.floor(s/2):Math.floor(s/2)+1;e.globals.isBarHorizontal&&(n=new z(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var a=e.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(n,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(n,"'] path[j='").concat(t,"']")),r=a?parseFloat(a.getAttribute("cx")):0,o=a?parseFloat(a.getAttribute("cy")):0,l=a?parseFloat(a.getAttribute("barWidth")):0,h=a?parseFloat(a.getAttribute("barHeight")):0,c=i.getElGrid().getBoundingClientRect();if(e.globals.isXNumeric?(r-=s%2!=0?l/2:0,a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"))&&e.globals.comboCharts&&(r-=l/2)):e.globals.isBarHorizontal||(r=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(r)&&(r=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2)),e.globals.isBarHorizontal?o+=h/3:o=i.e.clientY-c.top-i.tooltipRect.ttHeight/2,e.globals.isBarHorizontal||this.moveXCrosshairs(r),!i.fixedTooltip){var d=o||e.globals.gridHeight;this.moveTooltip(r,d)}}}]),t}(),_t=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new pt(e)}return o(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new b(this.ctx),i=new T(this.ctx),s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");s=g(s),t.config.chart.stacked&&s.sort(function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))});for(var n=0;n<s.length;n++){var a=s[n].querySelector(".apexcharts-series-markers-wrap");if(null!==a){var r,o="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(o+=" no-pointer-events");var l=i.getMarkerConfig(o,n);(r=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var h=document.createElementNS(t.globals.SVGNS,"g");h.classList.add("apexcharts-series-markers"),h.appendChild(r.node),a.appendChild(h)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.w;"bubble"!==n.config.chart.type&&this.newPointSize(t,e);var a=e.getAttribute("cx"),r=e.getAttribute("cy");if(null!==i&&null!==s&&(a=i,r=s),this.tooltipPosition.moveXCrosshairs(a),!this.fixedTooltip){if("radar"===n.config.chart.type){var o=this.ttCtx.getElGrid().getBoundingClientRect();a=this.ttCtx.e.clientX-o.left}this.tooltipPosition.moveTooltip(a,r,n.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,s=this.ttCtx,n=t,a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),r=e.config.markers.hover.size,o=0;o<a.length;o++){var l=a[o].getAttribute("rel"),h=a[o].getAttribute("index");if(void 0===r&&(r=e.globals.markers.size[h]+e.config.markers.hover.sizeOffset),n===parseInt(l,10)){i.newPointSize(n,a[o]);var c=a[o].getAttribute("cx"),d=a[o].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(c),s.fixedTooltip||i.tooltipPosition.moveTooltip(c,d,r)}else i.oldPointSize(a[o])}}},{key:"newPointSize",value:function(t,e){var i=this.w,s=i.config.markers.hover.size,n=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==n.getAttribute("default-marker-size")){var a=parseInt(n.getAttribute("index"),10);void 0===s&&(s=i.globals.markers.size[a]+i.config.markers.hover.sizeOffset),s<0&&(s=0),n.setAttribute("r",s)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));_.isNumber(i)&&i>=0?t[e].setAttribute("r",i):t[e].setAttribute("r",0)}}}]),t}(),vt=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e}return o(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,s=t.x,n=t.y,a=t.type,r=this.ttCtx,o=this.w;if(e.target.classList.contains("apexcharts-".concat(a,"-rect"))){var l=this.getAttr(e,"i"),h=this.getAttr(e,"j"),c=this.getAttr(e,"cx"),d=this.getAttr(e,"cy"),u=this.getAttr(e,"width"),f=this.getAttr(e,"height");if(r.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:l,j:h,shared:!1,e:e}),o.globals.capturedSeriesIndex=l,o.globals.capturedDataPointIndex=h,s=c+r.tooltipRect.ttWidth/2+u,n=d+r.tooltipRect.ttHeight/2-f/2,r.tooltipPosition.moveXCrosshairs(c+u/2),s>o.globals.gridWidth/2&&(s=c-r.tooltipRect.ttWidth/2+u),r.w.config.tooltip.followCursor){var g=o.globals.dom.elWrap.getBoundingClientRect();s=o.globals.clientX-g.left-r.tooltipRect.ttWidth/2,n=o.globals.clientY-g.top-r.tooltipRect.ttHeight-5}}return{x:s,y:n}}},{key:"handleMarkerTooltip",value:function(t){var e,i,s=t.e,n=t.opt,a=t.x,r=t.y,o=this.w,l=this.ttCtx;if(s.target.classList.contains("apexcharts-marker")){var h=parseInt(n.paths.getAttribute("cx"),10),c=parseInt(n.paths.getAttribute("cy"),10),d=parseFloat(n.paths.getAttribute("val"));if(i=parseInt(n.paths.getAttribute("rel"),10),e=parseInt(n.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var u=_.findAncestor(n.paths,"apexcharts-series");u&&(e=parseInt(u.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:e,j:i,shared:!l.showOnIntersect&&o.config.tooltip.shared,e:s}),"mouseup"===s.type&&l.markerClick(s,e,i),o.globals.capturedSeriesIndex=e,o.globals.capturedDataPointIndex=i,a=h,r=c+o.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var f=l.getElGrid().getBoundingClientRect();r=l.e.clientY+o.globals.translateY-f.top}d<0&&(r=c),l.marker.enlargeCurrentPoint(i,n.paths,a,r)}return{x:a,y:r}}},{key:"handleBarTooltip",value:function(t){var e,i,s=t.e,n=t.opt,a=this.w,r=this.ttCtx,o=r.getElTooltip(),l=0,h=0,c=0,d=this.getBarTooltipXY({e:s,opt:n});e=d.i;var u=d.barHeight,f=d.j;a.globals.capturedSeriesIndex=e,a.globals.capturedDataPointIndex=f,a.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||!a.config.tooltip.shared?(h=d.x,c=d.y,i=Array.isArray(a.config.stroke.width)?a.config.stroke.width[e]:a.config.stroke.width,l=h):a.globals.comboCharts||a.config.tooltip.shared||(l/=2),isNaN(c)?c=a.globals.svgHeight-r.tooltipRect.ttHeight:c<0&&(c=0);var g=parseInt(n.paths.parentNode.getAttribute("data:realIndex"),10),p=a.globals.isMultipleYAxis?a.config.yaxis[g]&&a.config.yaxis[g].reversed:a.config.yaxis[0].reversed;if(h+r.tooltipRect.ttWidth>a.globals.gridWidth&&!p?h-=r.tooltipRect.ttWidth:h<0&&(h=0),r.w.config.tooltip.followCursor){var _=r.getElGrid().getBoundingClientRect();c=r.e.clientY-_.top}null===r.tooltip&&(r.tooltip=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),a.config.tooltip.shared||(a.globals.comboBarCount>0?r.tooltipPosition.moveXCrosshairs(l+i/2):r.tooltipPosition.moveXCrosshairs(l)),!r.fixedTooltip&&(!a.config.tooltip.shared||a.globals.isBarHorizontal&&r.tooltipUtil.hasBars())&&(p&&(h-=r.tooltipRect.ttWidth)<0&&(h=0),o.style.left=h+a.globals.translateX+"px",!p||a.globals.isBarHorizontal&&r.tooltipUtil.hasBars()||(c=c+u-2*(a.globals.series[e][f]<0?u:0)),r.tooltipRect.ttHeight+c>a.globals.gridHeight?(c=a.globals.gridHeight-r.tooltipRect.ttHeight+a.globals.translateY,o.style.top=c+"px"):o.style.top=c+a.globals.translateY-r.tooltipRect.ttHeight/2+"px")}},{key:"getBarTooltipXY",value:function(t){var e=t.e,i=t.opt,s=this.w,n=null,a=this.ttCtx,r=0,o=0,l=0,h=0,c=0,d=e.target.classList;if(d.contains("apexcharts-bar-area")||d.contains("apexcharts-candlestick-area")||d.contains("apexcharts-boxPlot-area")||d.contains("apexcharts-rangebar-area")){var u=e.target,f=u.getBoundingClientRect(),g=i.elGrid.getBoundingClientRect(),p=f.height;c=f.height;var _=f.width,v=parseInt(u.getAttribute("cx"),10),m=parseInt(u.getAttribute("cy"),10);h=parseFloat(u.getAttribute("barWidth"));var b="touchmove"===e.type?e.touches[0].clientX:e.clientX;n=parseInt(u.getAttribute("j"),10),r=parseInt(u.parentNode.getAttribute("rel"),10)-1;var x=u.getAttribute("data-range-y1"),y=u.getAttribute("data-range-y2");s.globals.comboCharts&&(r=parseInt(u.parentNode.getAttribute("data:realIndex"),10)),a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:r,j:n,y1:x?parseInt(x,10):null,y2:y?parseInt(y,10):null,shared:!a.showOnIntersect&&s.config.tooltip.shared,e:e}),s.config.tooltip.followCursor?s.globals.isBarHorizontal?(o=b-g.left+15,l=m-a.dataPointsDividedHeight+p/2-a.tooltipRect.ttHeight/2):(o=s.globals.isXNumeric?v-_/2:v-a.dataPointsDividedWidth+_/2,l=e.clientY-g.top-a.tooltipRect.ttHeight/2-15):s.globals.isBarHorizontal?((o=v)<a.xyRatios.baseLineInvertedY&&(o=v-a.tooltipRect.ttWidth),l=m-a.dataPointsDividedHeight+p/2-a.tooltipRect.ttHeight/2):(o=s.globals.isXNumeric?v-_/2:v-a.dataPointsDividedWidth+_/2,l=m)}return{x:o,y:l,barHeight:c,barWidth:h,i:r,j:n}}}]),t}(),mt=function(){function t(e){a(this,t),this.w=e.w,this.ttCtx=e}return o(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var s=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",n=t.globals.dom.elWrap;e.blxaxisTooltip&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",s+" apexcharts-theme-"+t.config.tooltip.theme),n.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=function(i){var s=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=s?t.globals.gridWidth+1:1;var n="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,s?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");t.globals.yAxisSameScaleIndices.map(function(e,s){e.map(function(e,s){s===i&&(n+=t.config.yaxis[s].show?" ":" apexcharts-yaxistooltip-hidden")})});var a=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),a.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))},s=0;s<t.config.yaxis.length;s++)i(s)}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var s=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s&&"barWidth"===t.config.xaxis.crosshairs.width){var n=parseFloat(s.getAttribute("barWidth"));e.xcrosshairsWidth=n}else if("tickWidth"===t.config.xaxis.crosshairs.width){var a=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/a}}else if("tickWidth"===t.config.xaxis.crosshairs.width){var r=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/r}else if("barWidth"===t.config.xaxis.crosshairs.width){var o=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==o){var l=parseFloat(o.getAttribute("barWidth"));e.xcrosshairsWidth=l}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var s=this.ttCtx,n=this.w,a=n.globals.yLabelFormatters[t];if(s.yaxisTooltips[t]){var r=s.getElGrid().getBoundingClientRect(),o=(e-r.top)*i.yRatio[t],l=n.globals.maxYArr[t]-n.globals.minYArr[t],h=n.globals.minYArr[t]+(l-o);s.tooltipPosition.moveYCrosshairs(e-r.top),s.yaxisTooltipText[t].innerHTML=a(h),s.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),bt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new ft(this),this.tooltipLabels=new gt(this),this.tooltipPosition=new pt(this),this.marker=new _t(this),this.intersect=new vt(this),this.axesTooltip=new mt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared}return o(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip")}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.blxaxisTooltip=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map(function(t,i){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)}),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var s=new X(this.ctx);this.xAxisTicksPositions=s.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var n=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(n=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(n),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this.w,i=[],s=this.getElTooltip(),n=0;n<t;n++){var a=document.createElement("div");a.classList.add("apexcharts-tooltip-series-group"),a.style.order=e.config.tooltip.inverseOrder?t-n:n+1,this.tConfig.shared&&this.tConfig.enabledOnSeries&&Array.isArray(this.tConfig.enabledOnSeries)&&this.tConfig.enabledOnSeries.indexOf(n)<0&&a.classList.add("apexcharts-tooltip-series-group-hidden");var r=document.createElement("span");r.classList.add("apexcharts-tooltip-marker"),r.style.backgroundColor=e.globals.colors[n],a.appendChild(r);var o=document.createElement("div");o.classList.add("apexcharts-tooltip-text"),o.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,o.style.fontSize=this.tConfig.style.fontSize;var l=document.createElement("div");l.classList.add("apexcharts-tooltip-y-group");var h=document.createElement("span");h.classList.add("apexcharts-tooltip-text-label"),l.appendChild(h);var c=document.createElement("span");c.classList.add("apexcharts-tooltip-text-value"),l.appendChild(c);var d=document.createElement("div");d.classList.add("apexcharts-tooltip-z-group");var u=document.createElement("span");u.classList.add("apexcharts-tooltip-text-z-label"),d.appendChild(u);var f=document.createElement("span");f.classList.add("apexcharts-tooltip-text-z-value"),d.appendChild(f),o.appendChild(l),o.appendChild(d),a.appendChild(o),s.appendChild(a),i.push(a)}return i}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),s=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),n="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,a=t.globals.dom.Paper.node,r=this.getElGrid();r&&(this.seriesBound=r.getBoundingClientRect());var o,l=[],h=[],c={hoverArea:a,elGrid:r,tooltipEl:i,tooltipY:l,tooltipX:h,ttItems:this.ttItems};if(t.globals.axisCharts&&(n?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):s?o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),o&&o.length))for(var d=0;d<o.length;d++)l.push(o[d].getAttribute("cy")),h.push(o[d].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||s&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([a],c);else if(s&&!t.globals.comboCharts||n&&this.showOnIntersect)this.addDatapointEventsListeners(c);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var u=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(u,c)}if(this.showOnIntersect){var f=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");f.length>0&&this.addPathsEventListeners(f,c),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(c)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),s=i.width+10,n=i.height+10,a=this.tConfig.fixed.offsetX,r=this.tConfig.fixed.offsetY,o=this.tConfig.fixed.position.toLowerCase();return o.indexOf("right")>-1&&(a=a+t.globals.svgWidth-s+10),o.indexOf("bottom")>-1&&(r=r+t.globals.svgHeight-n-10),e.style.left=a+"px",e.style.top=r+"px",{x:a,y:r,ttWidth:s,ttHeight:n}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,s=function(s){var n={paths:t[s],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(e){return t[s].addEventListener(e,i.seriesHover.bind(i,n),{capture:!1,passive:!0})})},n=0;n<t.length;n++)s(n)}},{key:"seriesHover",value:function(t,e){var i=this,s=[],n=this.w;n.config.chart.group&&(s=this.ctx.getGroupedCharts()),n.globals.axisCharts&&(n.globals.minX===-1/0&&n.globals.maxX===1/0||0===n.globals.dataPoints)||(s.length?s.forEach(function(s){var n=i.getElTooltip(s),a={paths:t.paths,tooltipEl:n,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:s.w.globals.tooltip.ttItems};s.w.globals.minX===i.w.globals.minX&&s.w.globals.maxX===i.w.globals.maxX&&s.w.globals.tooltip.seriesHoverByContext({chartCtx:s,ttCtx:s.w.globals.tooltip,opt:a,e:e})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,s=t.opt,n=t.e,a=e.w,r=this.getElTooltip();i.tooltipRect={x:0,y:0,ttWidth:r.getBoundingClientRect().width,ttHeight:r.getBoundingClientRect().height},i.e=n,!i.tooltipUtil.hasBars()||a.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new z(e).toggleSeriesOnHover(n,n.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),a.globals.axisCharts?i.axisChartsTooltips({e:n,opt:s,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:n,opt:s,tooltipRect:i.tooltipRect})}},{key:"axisChartsTooltips",value:function(t){var e,i,s=t.e,n=t.opt,a=this.w,r=n.elGrid.getBoundingClientRect(),o="touchmove"===s.type?s.touches[0].clientX:s.clientX,l="touchmove"===s.type?s.touches[0].clientY:s.clientY;if(this.clientY=l,this.clientX=o,a.globals.capturedSeriesIndex=-1,a.globals.capturedDataPointIndex=-1,l<r.top||l>r.top+r.height)this.handleMouseOut(n);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!a.config.tooltip.shared){var h=parseInt(n.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(h)<0)return void this.handleMouseOut(n)}var c=this.getElTooltip(),d=this.getElXCrosshairs(),u=a.globals.xyCharts||"bar"===a.config.chart.type&&!a.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||a.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===s.type||"touchmove"===s.type||"mouseup"===s.type){null!==d&&d.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter(function(t){return!0===t});if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),u&&!this.showOnIntersect)this.handleStickyTooltip(s,o,l,n);else if("heatmap"===a.config.chart.type||"treemap"===a.config.chart.type){var g=this.intersect.handleHeatTreeTooltip({e:s,opt:n,x:e,y:i,type:a.config.chart.type});e=g.x,i=g.y,c.style.left=e+"px",c.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:s,opt:n}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:s,opt:n,x:e,y:i});if(this.yaxisTooltips.length)for(var p=0;p<a.config.yaxis.length;p++)this.axesTooltip.drawYaxisTooltipText(p,l,this.xyRatios);n.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==s.type&&"touchend"!==s.type||this.handleMouseOut(n)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,s=t.tooltipRect,n=this.w,a=i.paths.getAttribute("rel"),r=this.getElTooltip(),o=n.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){r.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(a,10)-1,shared:!1});var l=n.globals.clientX-o.left-s.ttWidth/2,h=n.globals.clientY-o.top-s.ttHeight-10;if(r.style.left=l+"px",r.style.top=h+"px",n.config.legend.tooltipHoverFormatter){var c=a-1,d=(0,n.config.legend.tooltipHoverFormatter)(this.legendLabels[c].getAttribute("data:default-text"),{seriesIndex:c,dataPointIndex:c,w:n});this.legendLabels[c].innerHTML=d}}else"mouseout"!==e.type&&"touchend"!==e.type||(r.classList.remove("apexcharts-active"),n.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"handleStickyTooltip",value:function(t,e,i,s){var n=this.w,a=this.tooltipUtil.getNearestValues({context:this,hoverArea:s.hoverArea,elGrid:s.elGrid,clientX:e,clientY:i}),r=a.j,o=a.capturedSeries;a.hoverX<0||a.hoverX>n.globals.gridWidth?this.handleMouseOut(s):null!==o?this.handleStickyCapturedSeries(t,o,s,r):(this.tooltipUtil.isXoverlap(r)||n.globals.isBarHorizontal)&&this.create(t,this,0,r,s.ttItems)}},{key:"handleStickyCapturedSeries",value:function(t,e,i,s){var n=this.w;null===n.globals.series[e][s]?this.handleMouseOut(i):void 0!==n.globals.series[e][s]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(s)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,s,i.ttItems):this.create(t,this,e,s,i.ttItems,!1):this.tooltipUtil.isXoverlap(s)&&this.create(t,this,0,s,i.ttItems)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new b(this.ctx),i=t.globals.dom.Paper.select(".apexcharts-bar-area"),s=0;s<i.length;s++)e.pathMouseLeave(i[s])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.blxaxisTooltip&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var s=0;s<this.yaxisTTEls.length;s++)this.yaxisTTEls[s].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})}},{key:"markerClick",value:function(t,e,i){var s=this.w;"function"==typeof s.config.chart.events.markerClick&&s.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:s}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:s}])}},{key:"create",value:function(t,e,i,s,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=this.w,o=e;"mouseup"===t.type&&this.markerClick(t,i,s),null===a&&(a=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),h=this.tooltipUtil.getElBars();if(r.config.legend.tooltipHoverFormatter){var c=r.config.legend.tooltipHoverFormatter,d=Array.from(this.legendLabels);d.forEach(function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)});for(var u=0;u<d.length;u++){var f=d[u],g=parseInt(f.getAttribute("i"),10),p=decodeURIComponent(f.getAttribute("data:default-text")),_=c(p,{seriesIndex:a?g:i,dataPointIndex:s,w:r});if(a)f.innerHTML=r.globals.collapsedSeriesIndices.indexOf(g)<0?_:p;else if(f.innerHTML=g===i?_:p,i===g)break}}if(a){if(o.tooltipLabels.drawSeriesTexts({ttItems:n,i:i,j:s,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(r.globals.markers.largestSize>0?o.marker.enlargePoints(s):o.tooltipPosition.moveDynamicPointsOnHover(s)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(h),this.barSeriesHeight>0)){var v=new b(this.ctx),m=r.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(s,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(s);for(var x=0;x<m.length;x++)v.pathMouseEnter(m[x])}}else o.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:n,i:i,j:s}),this.tooltipUtil.hasBars()&&o.tooltipPosition.moveStickyTooltipOverBars(s),l&&o.tooltipPosition.moveMarkers(i,s)}}]),t}(),xt=function(t){d(i,$);var e=f(i);function i(){return a(this,i),e.apply(this,arguments)}return o(i,[{key:"draw",value:function(t,e){var i=this,s=this.w;this.graphics=new b(this.ctx),this.bar=new $(this.ctx,this.xyRatios);var n=new w(this.ctx,s);t=n.getLogSeries(t),this.yRatio=n.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===s.config.chart.stackType&&(t=s.globals.seriesPercent.slice()),this.series=t,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var a=0;a<t.length;a++)t[a].length>0&&(this.totalItems+=t[a].length);for(var r=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),o=0,l=0,h=function(n,a){var h=void 0,d=void 0,u=void 0,f=void 0,g=[],p=[],v=s.globals.comboCharts?e[n]:n;i.yRatio.length>1&&(i.yaxisIndex=v),i.isReversed=s.config.yaxis[i.yaxisIndex]&&s.config.yaxis[i.yaxisIndex].reversed;var m=i.graphics.group({class:"apexcharts-series",seriesName:_.escapeString(s.globals.seriesNames[v]),rel:n+1,"data:realIndex":v});i.ctx.series.addCollapsedClassToSeries(m,v);var b=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":v}),x=0,y=0,w=i.initialPositions(o,l,h,d,u,f);l=w.y,x=w.barHeight,d=w.yDivision,f=w.zeroW,o=w.x,y=w.barWidth,h=w.xDivision,u=w.zeroH,i.yArrj=[],i.yArrjF=[],i.yArrjVal=[],i.xArrj=[],i.xArrjF=[],i.xArrjVal=[],1===i.prevY.length&&i.prevY[0].every(function(t){return isNaN(t)})&&(i.prevY[0]=i.prevY[0].map(function(t){return u}),i.prevYF[0]=i.prevYF[0].map(function(t){return 0}));for(var S=0;S<s.globals.dataPoints;S++){var k=i.barHelpers.getStrokeWidth(n,S,v),C={indexes:{i:n,j:S,realIndex:v,bc:a},strokeWidth:k,x:o,y:l,elSeries:m},A=null;i.isHorizontal?(A=i.drawStackedBarPaths(c(c({},C),{},{zeroW:f,barHeight:x,yDivision:d})),y=i.series[n][S]/i.invertedYRatio):(A=i.drawStackedColumnPaths(c(c({},C),{},{xDivision:h,barWidth:y,zeroH:u})),x=i.series[n][S]/i.yRatio[i.yaxisIndex]),l=A.y,o=A.x,g.push(o),p.push(l);var I=i.barHelpers.getPathFillColor(t,n,S,v);m=i.renderSeries({realIndex:v,pathFill:I,j:S,i:n,pathFrom:A.pathFrom,pathTo:A.pathTo,strokeWidth:k,elSeries:m,x:o,y:l,series:t,barHeight:x,barWidth:y,elDataLabelsWrap:b,type:"bar",visibleSeries:0})}s.globals.seriesXvalues[v]=g,s.globals.seriesYvalues[v]=p,i.prevY.push(i.yArrj),i.prevYF.push(i.yArrjF),i.prevYVal.push(i.yArrjVal),i.prevX.push(i.xArrj),i.prevXF.push(i.xArrjF),i.prevXVal.push(i.xArrjVal),r.add(m)},d=0,u=0;d<t.length;d++,u++)h(d,u);return r}},{key:"initialPositions",value:function(t,e,i,s,n,a){var r,o,l=this.w;return this.isHorizontal?(r=(r=s=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,a=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(s-r)/2):(o=i=l.globals.gridWidth/l.globals.dataPoints,o=l.globals.isXNumeric&&l.globals.dataPoints>1?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:o*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,n=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),t=l.globals.padHorizontal+(i-o)/2),{x:t,y:e,yDivision:s,xDivision:i,barHeight:r,barWidth:o,zeroH:n,zeroW:a}}},{key:"drawStackedBarPaths",value:function(t){for(var e,i=t.indexes,s=t.barHeight,n=t.strokeWidth,a=t.zeroW,r=t.x,o=t.y,l=t.yDivision,h=t.elSeries,c=this.w,d=o,u=i.i,f=i.j,g=0,p=0;p<this.prevXF.length;p++)g+=this.prevXF[p][f];if(u>0){var _=a;this.prevXVal[u-1][f]<0?_=this.series[u][f]>=0?this.prevX[u-1][f]+g-2*(this.isReversed?g:0):this.prevX[u-1][f]:this.prevXVal[u-1][f]>=0&&(_=this.series[u][f]>=0?this.prevX[u-1][f]:this.prevX[u-1][f]-g+2*(this.isReversed?g:0)),e=_}else e=a;r=null===this.series[u][f]?e:e+this.series[u][f]/this.invertedYRatio-2*(this.isReversed?this.series[u][f]/this.invertedYRatio:0);var v=this.barHelpers.getBarpaths({barYPosition:d,barHeight:s,x1:e,x2:r,strokeWidth:n,series:this.series,realIndex:i.realIndex,i:u,j:f,w:c});return this.barHelpers.barBackground({j:f,i:u,y1:d,y2:s,elSeries:h}),o+=l,{pathTo:v.pathTo,pathFrom:v.pathFrom,x:r,y:o}}},{key:"drawStackedColumnPaths",value:function(t){var e=t.indexes,i=t.x,s=t.y,n=t.xDivision,a=t.barWidth,r=t.zeroH,o=(t.strokeWidth,t.elSeries),l=this.w,h=e.i,c=e.j,d=e.bc;if(l.globals.isXNumeric){var u=l.globals.seriesX[h][c];u||(u=0),i=(u-l.globals.minX)/this.xRatio-a/2}for(var f,g=i,p=0,_=0;_<this.prevYF.length;_++)p+=isNaN(this.prevYF[_][c])?0:this.prevYF[_][c];if(h>0&&!l.globals.isXNumeric||h>0&&l.globals.isXNumeric&&l.globals.seriesX[h-1][c]===l.globals.seriesX[h][c]){var v,m,b=Math.min(this.yRatio.length+1,h+1);if(void 0!==this.prevY[h-1])for(var x=1;x<b;x++)if(!isNaN(this.prevY[h-x][c])){m=this.prevY[h-x][c];break}for(var y=1;y<b;y++){if(this.prevYVal[h-y][c]<0){v=this.series[h][c]>=0?m-p+2*(this.isReversed?p:0):m;break}if(this.prevYVal[h-y][c]>=0){v=this.series[h][c]>=0?m:m+p-2*(this.isReversed?p:0);break}}void 0===v&&(v=l.globals.gridHeight),f=this.prevYF[0].every(function(t){return 0===t})&&this.prevYF.slice(1,h).every(function(t){return t.every(function(t){return isNaN(t)})})?l.globals.gridHeight-r:v}else f=l.globals.gridHeight-r;s=f-this.series[h][c]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[h][c]/this.yRatio[this.yaxisIndex]:0);var w=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:a,y1:f,y2:s,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:e.realIndex,i:h,j:c,w:l});return this.barHelpers.barBackground({bc:d,j:c,i:h,x1:g,x2:a,elSeries:o}),i+=n,{pathTo:w.pathTo,pathFrom:w.pathFrom,x:l.globals.isXNumeric?i-n:i,y:s}}}]),i}(),yt=function(t){d(i,$);var e=f(i);function i(){return a(this,i),e.apply(this,arguments)}return o(i,[{key:"draw",value:function(t,e){var i=this,s=this.w,n=new b(this.ctx),a=new E(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot;var r=new w(this.ctx,s);t=r.getLogSeries(t),this.series=t,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var o=n.group({class:"apexcharts-".concat(s.config.chart.type,"-series apexcharts-plot-series")}),l=function(r){i.isBoxPlot="boxPlot"===s.config.chart.type||"boxPlot"===s.config.series[r].type;var l,h,c,d,u=void 0,f=void 0,g=[],p=[],v=s.globals.comboCharts?e[r]:r,m=n.group({class:"apexcharts-series",seriesName:_.escapeString(s.globals.seriesNames[v]),rel:r+1,"data:realIndex":v});t[r].length>0&&(i.visibleI=i.visibleI+1),i.yRatio.length>1&&(i.yaxisIndex=v);var b=i.barHelpers.initialPositions();f=b.y,c=b.barHeight,u=b.x,d=b.barWidth,l=b.xDivision,h=b.zeroH,p.push(u+d/2);for(var x=n.group({class:"apexcharts-datalabels","data:realIndex":v}),y=function(e){var n=i.barHelpers.getStrokeWidth(r,e,v),o=i.drawBoxPaths({indexes:{i:r,j:e,realIndex:v},x:u,y:f,xDivision:l,barWidth:d,zeroH:h,strokeWidth:n,elSeries:m});f=o.y,u=o.x,e>0&&p.push(u+d/2),g.push(f),o.pathTo.forEach(function(l,h){var g=!i.isBoxPlot&&i.candlestickOptions.wick.useFillColor?o.color[h]:s.globals.stroke.colors[r],p=a.fillPath({seriesNumber:v,dataPointIndex:e,color:o.color[h],value:t[r][e]});i.renderSeries({realIndex:v,pathFill:p,lineFill:g,j:e,i:r,pathFrom:o.pathFrom,pathTo:l,strokeWidth:n,elSeries:m,x:u,y:f,series:t,barHeight:c,barWidth:d,elDataLabelsWrap:x,visibleSeries:i.visibleI,type:s.config.chart.type})})},w=0;w<s.globals.dataPoints;w++)y(w);s.globals.seriesXvalues[v]=p,s.globals.seriesYvalues[v]=g,o.add(m)},h=0;h<t.length;h++)l(h);return o}},{key:"drawBoxPaths",value:function(t){var e=t.indexes,i=t.x,s=(t.y,t.xDivision),n=t.barWidth,a=t.zeroH,r=t.strokeWidth,o=this.w,l=new b(this.ctx),h=e.i,c=e.j,d=!0,u=o.config.plotOptions.candlestick.colors.upward,f=o.config.plotOptions.candlestick.colors.downward,g="";this.isBoxPlot&&(g=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var p=this.yRatio[this.yaxisIndex],_=e.realIndex,v=this.getOHLCValue(_,c),m=a,x=a;v.o>v.c&&(d=!1);var y=Math.min(v.o,v.c),w=Math.max(v.o,v.c),S=v.m;o.globals.isXNumeric&&(i=(o.globals.seriesX[_][c]-o.globals.minX)/this.xRatio-n/2);var k=i+n*this.visibleI;void 0===this.series[h][c]||null===this.series[h][c]?(y=a,w=a):(y=a-y/p,w=a-w/p,m=a-v.h/p,x=a-v.l/p,S=a-v.m/p);var C=l.move(k,a),A=l.move(k+n/2,y);return o.globals.previousPaths.length>0&&(A=this.getPreviousPath(_,c,!0)),C=this.isBoxPlot?[l.move(k,y)+l.line(k+n/2,y)+l.line(k+n/2,m)+l.line(k+n/4,m)+l.line(k+n-n/4,m)+l.line(k+n/2,m)+l.line(k+n/2,y)+l.line(k+n,y)+l.line(k+n,S)+l.line(k,S)+l.line(k,y+r/2),l.move(k,S)+l.line(k+n,S)+l.line(k+n,w)+l.line(k+n/2,w)+l.line(k+n/2,x)+l.line(k+n-n/4,x)+l.line(k+n/4,x)+l.line(k+n/2,x)+l.line(k+n/2,w)+l.line(k,w)+l.line(k,S)+"z"]:[l.move(k,w)+l.line(k+n/2,w)+l.line(k+n/2,m)+l.line(k+n/2,w)+l.line(k+n,w)+l.line(k+n,y)+l.line(k+n/2,y)+l.line(k+n/2,x)+l.line(k+n/2,y)+l.line(k,y)+l.line(k,w-r/2)],A+=l.move(k,y),o.globals.isXNumeric||(i+=s),{pathTo:C,pathFrom:A,x:i,y:w,barXPosition:k,color:this.isBoxPlot?g:d?[u]:[f]}}},{key:"getOHLCValue",value:function(t,e){var i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[t][e]:i.globals.seriesCandleO[t][e],h:this.isBoxPlot?i.globals.seriesCandleO[t][e]:i.globals.seriesCandleH[t][e],m:i.globals.seriesCandleM[t][e],l:this.isBoxPlot?i.globals.seriesCandleC[t][e]:i.globals.seriesCandleL[t][e],c:this.isBoxPlot?i.globals.seriesCandleL[t][e]:i.globals.seriesCandleC[t][e]}}}]),i}(),wt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map(function(t,i){t.from<=0&&(e=!0)}),e}},{key:"getShadeColor",value:function(t,e,i,s){var n=this.w,a=1,r=n.config.plotOptions[t].shadeIntensity,o=this.determineColor(t,e,i);n.globals.hasNegs||s?a=n.config.plotOptions[t].reverseNegativeShade?o.percent<0?o.percent/100*(1.25*r):(1-o.percent/100)*(1.25*r):o.percent<=0?1-(1+o.percent/100)*r:(1-o.percent/100)*r:(a=1-o.percent/100,"treemap"===t&&(a=(1-o.percent/100)*(1.25*r)));var l=o.color,h=new _;return n.config.plotOptions[t].enableShades&&(l="dark"===this.w.config.theme.mode?_.hexToRgba(h.shadeColor(-1*a,o.color),n.config.fill.opacity):_.hexToRgba(h.shadeColor(a,o.color),n.config.fill.opacity)),{color:l,colorProps:o}}},{key:"determineColor",value:function(t,e,i){var s=this.w,n=s.globals.series[e][i],a=s.config.plotOptions[t],r=a.colorScale.inverse?i:e;s.config.plotOptions[t].distributed&&(r=i);var o=s.globals.colors[r],l=null,h=Math.min.apply(Math,g(s.globals.series[e])),c=Math.max.apply(Math,g(s.globals.series[e]));a.distributed||"heatmap"!==t||(h=s.globals.minY,c=s.globals.maxY),void 0!==a.colorScale.min&&(h=a.colorScale.min<s.globals.minY?a.colorScale.min:s.globals.minY,c=a.colorScale.max>s.globals.maxY?a.colorScale.max:s.globals.maxY);var d=Math.abs(c)+Math.abs(h),u=100*n/(0===d?d-1e-6:d);return a.colorScale.ranges.length>0&&a.colorScale.ranges.map(function(t,e){if(n>=t.from&&n<=t.to){o=t.color,l=t.foreColor?t.foreColor:null,h=t.from,c=t.to;var i=Math.abs(c)+Math.abs(h);u=100*n/(0===i?i-1e-6:i)}}),{color:o,foreColor:l,percent:u}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,s=t.y,n=t.i,a=t.j,r=t.colorProps,o=t.fontSize,l=this.w.config.dataLabels,h=new b(this.ctx),c=new P(this.ctx),d=null;if(l.enabled){d=h.group({class:"apexcharts-data-labels"});var u=l.offsetX,f=l.offsetY,g=i+u,p=s+parseFloat(l.style.fontSize)/3+f;c.plotDataLabelsText({x:g,y:p,text:e,i:n,j:a,color:r.foreColor,parent:d,fontSize:o,dataLabelsConfig:l})}return d}},{key:"addListeners",value:function(t){var e=new b(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),t}(),St=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new wt(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return o(t,[{key:"draw",value:function(t){var e=this.w,i=new b(this.ctx),s=i.group({class:"apexcharts-heatmap"});s.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var n=e.globals.gridWidth/e.globals.dataPoints,a=e.globals.gridHeight/e.globals.series.length,r=0,o=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(o=!0,l.reverse());for(var h=o?0:l.length-1;o?h<l.length:h>=0;o?h++:h--){var c=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:_.escapeString(e.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(this.ctx.series.addCollapsedClassToSeries(c,h),e.config.chart.dropShadow.enabled){var d=e.config.chart.dropShadow;new m(this.ctx).dropShadow(c,d,h)}for(var u=0,f=e.config.plotOptions.heatmap.shadeIntensity,g=0;g<l[h].length;g++){var p=this.helpers.getShadeColor(e.config.chart.type,h,g,this.negRange),v=p.color,x=p.colorProps;"image"===e.config.fill.type&&(v=new E(this.ctx).fillPath({seriesNumber:h,dataPointIndex:g,opacity:e.globals.hasNegs?x.percent<0?1-(1+x.percent/100):f+x.percent/100:x.percent/100,patternID:_.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:n,height:e.config.fill.image.height?e.config.fill.image.height:a}));var y=this.rectRadius,w=i.drawRect(u,r,n,a,y);if(w.attr({cx:u,cy:r}),w.node.classList.add("apexcharts-heatmap-rect"),c.add(w),w.attr({fill:v,i:h,index:h,j:g,val:l[h][g],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?v:e.globals.stroke.colors[0],color:v}),this.helpers.addListeners(w),e.config.chart.animations.enabled&&!e.globals.dataChanged){var S=1;e.globals.resized||(S=e.config.chart.animations.speed),this.animateHeatMap(w,u,r,n,a,S)}if(e.globals.dataChanged){var k=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){k=this.dynamicAnim.speed;var C=e.globals.previousPaths[h]&&e.globals.previousPaths[h][g]&&e.globals.previousPaths[h][g].color;C||(C="rgba(255, 255, 255, 0)"),this.animateHeatColor(w,_.isColorHex(C)?C:_.rgb2hex(C),_.isColorHex(v)?v:_.rgb2hex(v),k)}}var A=(0,e.config.dataLabels.formatter)(e.globals.series[h][g],{value:e.globals.series[h][g],seriesIndex:h,dataPointIndex:g,w:e}),I=this.helpers.calculateDataLabels({text:A,x:u+n/2,y:r+a/2,i:h,j:g,colorProps:x,series:l});null!==I&&c.add(I),u+=n}r+=a,s.add(c)}var T=e.globals.yAxisScale[0].result.slice();e.config.yaxis[0].reversed?T.unshift(""):T.push(""),e.globals.yAxisScale[0].result=T;var M=e.globals.gridHeight/e.globals.series.length;return e.config.yaxis[0].labels.offsetY=-M/2,s}},{key:"animateHeatMap",value:function(t,e,i,s,n,a){var r=new v(this.ctx);r.animateRect(t,{x:e+s/2,y:i+n/2,width:0,height:0},{x:e,y:i,width:s,height:n},a,function(){r.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,e,i,s){t.attr({fill:e}).animate(s).attr({fill:i})}}]),t}(),kt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawYAxisTexts",value:function(t,e,i,s){var n=this.w,a=n.config.yaxis[0],r=n.globals.yLabelFormatters[0];return new b(this.ctx).drawText({x:t+a.labels.offsetX,y:e+a.labels.offsetY,text:r(s,i),textAnchor:"middle",fontSize:a.labels.style.fontSize,fontFamily:a.labels.style.fontFamily,foreColor:Array.isArray(a.labels.style.colors)?a.labels.style.colors[i]:a.labels.style.colors})}}]),t}(),Ct=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,"radialBar"===i.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return o(t,[{key:"draw",value:function(t){var e=this,i=this.w,s=new b(this.ctx);if(this.ret=s.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var n=0,a=0;a<t.length;a++)n+=_.negToZero(t[a]);var r=[],o=s.group();0===n&&(n=1e-5),t.forEach(function(t){e.maxY=Math.max(e.maxY,t)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<t.length;l++){var h=this.fullAngle*_.negToZero(t[l])/n;r.push(h),"polarArea"===this.chartType?(r[l]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var c,d=0,u=0;u<i.globals.previousPaths.length;u++)d+=_.negToZero(i.globals.previousPaths[u]);for(var f=0;f<i.globals.previousPaths.length;f++)c=this.fullAngle*_.negToZero(i.globals.previousPaths[f])/d,this.prevSectorAngleArr.push(c)}this.donutSize<0&&(this.donutSize=0);var g=i.config.plotOptions.pie.customScale,p=i.globals.gridWidth/2,v=i.globals.gridHeight/2,m=p-i.globals.gridWidth/2*g,x=v-i.globals.gridHeight/2*g;if("donut"===this.chartType){var y=s.drawCircle(this.donutSize);y.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),o.add(y)}var w=this.drawArcs(r,t);if(this.sliceLabels.forEach(function(t){w.add(t)}),o.attr({transform:"translate(".concat(m,", ").concat(x,") scale(").concat(g,")")}),o.add(w),this.ret.add(o),this.donutDataLabels.show){var S=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:m,translateY:x});this.ret.add(S)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,e){var i=this.w,s=new m(this.ctx),n=new b(this.ctx),a=new E(this.ctx),r=n.group({class:"apexcharts-slices"}),o=this.initialAngle,l=this.initialAngle,h=this.initialAngle,c=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var d=0;d<t.length;d++){var u=n.group({class:"apexcharts-series apexcharts-pie-series",seriesName:_.escapeString(i.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});r.add(u),l=c,h=(o=h)+t[d],c=l+this.prevSectorAngleArr[d];var f=h<o?this.fullAngle+h-o:h-o,g=a.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:e[d]}),p=this.getChangedPath(l,c),v=n.drawPath({d:p,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:g,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(v.attr({index:0,j:d}),s.setSelectionFilter(v,0,d),i.config.chart.dropShadow.enabled){var x=i.config.chart.dropShadow;s.dropShadow(v,x,d)}this.addListeners(v,this.donutDataLabels),b.setAttrs(v.node,{"data:angle":f,"data:startAngle":o,"data:strokeWidth":this.strokeWidth,"data:value":e[d]});var y={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?y=_.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(o+f/2)%this.fullAngle):"donut"===this.chartType&&(y=_.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(o+f/2)%this.fullAngle)),u.add(v);var w=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(w=f/this.fullAngle*i.config.chart.animations.speed)&&(w=1),this.animDur=w+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(v,{size:this.sliceSizes[d],endAngle:h,startAngle:o,prevStartAngle:l,prevEndAngle:c,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(v,{size:this.sliceSizes[d],endAngle:h,startAngle:o,i:d,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:w}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&v.click(this.pieClicked.bind(this,d)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),i.config.dataLabels.enabled){var S=y.x,k=y.y,C=100*f/this.fullAngle+"%";if(0!==f&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[d]){var A=i.config.dataLabels.formatter;void 0!==A&&(C=A(i.globals.seriesPercent[d][0],{seriesIndex:d,w:i}));var I=i.globals.dataLabels.style.colors[d],T=n.group({class:"apexcharts-datalabels"}),M=n.drawText({x:S,y:k,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:I});if(T.add(M),i.config.dataLabels.dropShadow.enabled){var P=i.config.dataLabels.dropShadow;s.dropShadow(M,P)}M.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(M.node.classList.add("apexcharts-pie-label-delay"),M.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return r}},{key:"addListeners",value:function(t,e){var i=new b(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var i=this.w,s=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,n=s,a=e.startAngle,r=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(a=e.prevEndAngle,n=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===i.config.series.length-1&&(s+r>this.fullAngle?e.endAngle=e.endAngle-(s+r):s+r<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(s+r)))),s===this.fullAngle&&(s=this.fullAngle-.01),this.animateArc(t,a,r,s,n,e)}},{key:"animateArc",value:function(t,e,i,s,n,a){var r,o=this,l=this.w,h=new v(this.ctx),c=a.size;(isNaN(e)||isNaN(n))&&(e=i,n=s,a.dur=0);var d=s,u=i,f=e<i?this.fullAngle+e-i:e-i;l.globals.dataChanged&&a.shouldSetPrevPaths&&a.prevEndAngle&&(r=o.getPiePath({me:o,startAngle:a.prevStartAngle,angle:a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle,size:c}),t.attr({d:r})),0!==a.dur?t.animate(a.dur,l.globals.easing,a.animBeginArr[a.i]).afterAll(function(){"pie"!==o.chartType&&"donut"!==o.chartType&&"polarArea"!==o.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":o.strokeWidth}),a.i===l.config.series.length-1&&h.animationCompleted(t)}).during(function(l){d=f+(s-f)*l,a.animateStartingPos&&(d=n+(s-n)*l,u=e-n+(i-(e-n))*l),r=o.getPiePath({me:o,startAngle:u,angle:d,size:c}),t.node.setAttribute("data:pathOrig",r),t.attr({d:r})}):(r=o.getPiePath({me:o,startAngle:u,angle:s,size:c}),a.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",r),t.attr({d:r,"stroke-width":o.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,s=this,n=s.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),a=i.globals.dom.Paper.select(".apexcharts-".concat(s.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==a.attr("data:pieClicked")){var r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(r,function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");t.setAttribute("d",e)}),a.attr("data:pieClicked","true");var o=parseInt(a.attr("data:startAngle"),10),l=parseInt(a.attr("data:angle"),10);e=s.getPiePath({me:s,startAngle:o,angle:l,size:n}),360!==l&&a.plot(e)}else{a.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(a.node,this.donutDataLabels);var h=a.attr("data:pathOrig");a.attr({d:h})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e=t.me,i=t.startAngle,s=t.angle,n=t.size,a=i,r=Math.PI*(a-90)/180,o=s+i;Math.ceil(o)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(o=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(o)>this.fullAngle&&(o-=this.fullAngle);var l=Math.PI*(o-90)/180,h=e.centerX+n*Math.cos(r),c=e.centerY+n*Math.sin(r),d=e.centerX+n*Math.cos(l),u=e.centerY+n*Math.sin(l),f=_.polarToCartesian(e.centerX,e.centerY,e.donutSize,o),g=_.polarToCartesian(e.centerX,e.centerY,e.donutSize,a),p=s>180?1:0,v=["M",h,c,"A",n,n,0,p,1,d,u];return"donut"===e.chartType?[].concat(v,["L",f.x,f.y,"A",e.donutSize,e.donutSize,0,p,0,g.x,g.y,"L",h,c,"z"]).join(" "):"pie"===e.chartType||"polarArea"===e.chartType?[].concat(v,["L",e.centerX,e.centerY,"L",h,c]).join(" "):[].concat(v).join(" ")}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new G(this.ctx),s=new b(this.ctx),n=new kt(this.ctx),a=s.group(),r=s.group(),o=i.niceScale(0,Math.ceil(this.maxY),e.config.yaxis[0].tickAmount,0,!0),l=o.result.reverse(),h=o.result.length;this.maxY=o.niceMax;for(var c=e.globals.radialSize,d=c/(h-1),u=0;u<h-1;u++){var f=s.drawCircle(c);if(f.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var g=n.drawYAxisTexts(this.centerX,this.centerY-c+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,u,l[u]);r.add(g)}a.add(f),c-=d}this.drawSpokes(t),t.add(a),t.add(r)}},{key:"renderInnerDataLabels",value:function(t,e){var i=this.w,s=new b(this.ctx),n=s.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),a=t.total.show;n.node.style.opacity=e.opacity;var r,o,l=e.centerX,h=e.centerY;r=void 0===t.name.color?i.globals.colors[0]:t.name.color;var c=t.name.fontSize,d=t.name.fontFamily,u=t.value.fontWeight;o=void 0===t.value.color?i.config.chart.foreColor:t.value.color;var f=t.value.formatter,g="",p="";if(a?(r=t.total.color,c=t.total.fontSize,d=t.total.fontFamily,u=t.total.fontWeight,p=t.total.label,g=t.total.formatter(i)):1===i.globals.series.length&&(g=f(i.globals.series[0],i),p=i.globals.seriesNames[0]),p&&(p=t.name.formatter(p,t.total.show,i)),t.name.show){var _=s.drawText({x:l,y:h+parseFloat(t.name.offsetY),text:p,textAnchor:"middle",foreColor:r,fontSize:c,fontWeight:u,fontFamily:d});_.node.classList.add("apexcharts-datalabel-label"),n.add(_)}if(t.value.show){var v=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,m=s.drawText({x:l,y:h+v,text:g,textAnchor:"middle",foreColor:o,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});m.node.classList.add("apexcharts-datalabel-value"),n.add(m)}return n}},{key:"printInnerLabels",value:function(t,e,i,s){var n,a=this.w;s?n=void 0===t.name.color?a.globals.colors[parseInt(s.parentNode.getAttribute("rel"),10)-1]:t.name.color:a.globals.series.length>1&&t.total.show&&(n=t.total.color);var r=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),o=a.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,a),s||"function"!=typeof t.total.formatter||(i=t.total.formatter(a));var l=e===t.total.label;e=t.name.formatter(e,l,a),null!==r&&(r.textContent=e),null!==o&&(o.textContent=i),null!==r&&(r.style.fill=n)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,s=t.getAttribute("data:value"),n=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,n,s,t);var a=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==a&&(a.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,s=new b(this.ctx),n=i.config.plotOptions.polarArea.spokes;if(0!==n.strokeWidth){for(var a=[],r=360/i.globals.series.length,o=0;o<i.globals.series.length;o++)a.push(_.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+r*o));a.forEach(function(i,a){var r=s.drawLine(i.x,i.y,e.centerX,e.centerY,Array.isArray(n.connectorColors)?n.connectorColors[a]:n.connectorColors);t.add(r)})}}},{key:"revertDataLabelsInner",value:function(t,e,i){var s=this,n=this.w,a=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),r=!1,o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var i=t.makeSliceOut,n=t.printLabel;Array.prototype.forEach.call(o,function(t){"true"===t.getAttribute("data:pieClicked")&&(i&&(r=!0),n&&s.printDataLabelsInner(t,e))})};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&n.globals.series.length>1)r&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(n));else if(l({makeSliceOut:!1,printLabel:!0}),!r)if(n.globals.selectedDataPoints.length&&n.globals.series.length>1)if(n.globals.selectedDataPoints[0].length>0){var h=n.globals.selectedDataPoints[0],c=n.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h));this.printDataLabelsInner(c,e)}else a&&n.globals.selectedDataPoints.length&&0===n.globals.selectedDataPoints[0].length&&(a.style.opacity=0);else a&&n.globals.series.length>1&&(a.style.opacity=0)}}]),t}(),At=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new b(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new w(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return o(t,[{key:"draw",value:function(t){var e=this,i=this.w,s=new E(this.ctx),n=[],a=new P(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var r=i.globals.gridWidth/2,o=i.globals.gridHeight/2,l=r+i.config.plotOptions.radar.offsetX,h=o+i.config.plotOptions.radar.offsetY,d=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(l||0,", ").concat(h||0,")")}),u=[],f=null,g=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(t,r){var o=t.length===i.globals.dataPoints,l=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":o,seriesName:_.escapeString(i.globals.seriesNames[r]),rel:r+1,"data:realIndex":r});e.dataRadiusOfPercent[r]=[],e.dataRadius[r]=[],e.angleArr[r]=[],t.forEach(function(t,i){var s=Math.abs(e.maxValue-e.minValue);t+=Math.abs(e.minValue),e.isLog&&(t=e.coreUtils.getLogVal(t,0)),e.dataRadiusOfPercent[r][i]=t/s,e.dataRadius[r][i]=e.dataRadiusOfPercent[r][i]*e.size,e.angleArr[r][i]=i*e.disAngle}),u=e.getDataPointsPos(e.dataRadius[r],e.angleArr[r]);var h=e.createPaths(u,{x:0,y:0});f=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),g=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":r}),i.globals.delayedElements.push({el:f.node,index:r});var d={i:r,realIndex:r,animationDelay:r,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[r],strokeLineCap:i.config.stroke.lineCap},p=null;i.globals.previousPaths.length>0&&(p=e.getPreviousPath(r));for(var v=0;v<h.linePathsTo.length;v++){var b=e.graphics.renderPaths(c(c({},d),{},{pathFrom:null===p?h.linePathsFrom[v]:p,pathTo:h.linePathsTo[v],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[r]:e.strokeWidth,fill:"none",drawShadow:!1}));l.add(b);var x=s.fillPath({seriesNumber:r}),y=e.graphics.renderPaths(c(c({},d),{},{pathFrom:null===p?h.areaPathsFrom[v]:p,pathTo:h.areaPathsTo[v],strokeWidth:0,fill:x,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var w=new m(e.ctx),S=i.config.chart.dropShadow;w.dropShadow(y,Object.assign({},S,{noUserSpaceOnUse:!0}),r)}l.add(y)}t.forEach(function(t,s){var n=new T(e.ctx).getMarkerConfig("apexcharts-marker",r,s),o=e.graphics.drawMarker(u[s].x,u[s].y,n);o.attr("rel",s),o.attr("j",s),o.attr("index",r),o.node.setAttribute("default-marker-size",n.pSize);var h=e.graphics.group({class:"apexcharts-series-markers"});h&&h.add(o),f.add(h),l.add(f);var d=i.config.dataLabels;if(d.enabled){var p=d.formatter(i.globals.series[r][s],{seriesIndex:r,dataPointIndex:s,w:i});a.plotDataLabelsText({x:u[s].x,y:u[s].y,text:p,textAnchor:"middle",i:r,j:r,parent:g,offsetCorrection:!1,dataLabelsConfig:c({},d)})}l.add(g)}),n.push(l)}),this.drawPolygons({parent:d}),i.config.xaxis.labels.show){var p=this.drawXAxisTexts();d.add(p)}return n.forEach(function(t){d.add(t)}),d.add(this.yaxisLabels),d}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,s=t.parent,n=new kt(this.ctx),a=i.globals.yAxisScale[0].result.reverse(),r=a.length,o=[],l=this.size/(r-1),h=0;h<r;h++)o[h]=l*h;o.reverse();var c=[],d=[];o.forEach(function(t,i){var s="";_.getPolygonPos(t,e.dataPointsLen).forEach(function(t,n){if(0===i){var a=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[n]:e.polygons.connectorColors);d.push(a)}0===n&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),s+=t.x+","+t.y+" "}),c.push(s)}),c.forEach(function(t,n){var a=e.polygons.strokeColors,r=e.polygons.strokeWidth,o=e.graphics.drawPolygon(t,Array.isArray(a)?a[n]:a,Array.isArray(r)?r[n]:r,i.globals.radarPolygons.fill.colors[n]);s.add(o)}),d.forEach(function(t){s.add(t)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(t,i){var s=n.drawYAxisTexts(t.x,t.y,i,a[i]);e.yaxisLabels.add(s)})}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,i=e.config.xaxis.labels,s=this.graphics.group({class:"apexcharts-xaxis"}),n=_.getPolygonPos(this.size,this.dataPointsLen);return e.globals.labels.forEach(function(a,r){var o=e.config.xaxis.labels.formatter,l=new P(t.ctx);if(n[r]){var h=t.getTextPos(n[r],t.size),d=o(a,{seriesIndex:-1,dataPointIndex:r,w:e});l.plotDataLabelsText({x:h.newX,y:h.newY,text:d,textAnchor:h.textAnchor,i:r,j:r,parent:s,color:Array.isArray(i.style.colors)&&i.style.colors[r]?i.style.colors[r]:"#a8a8a8",dataLabelsConfig:c({textAnchor:h.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1})}}),s}},{key:"createPaths",value:function(t,e){var i=this,s=[],n=[],a=[],r=[];if(t.length){n=[this.graphics.move(e.x,e.y)],r=[this.graphics.move(e.x,e.y)];var o=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach(function(e,s){o+=i.graphics.line(e.x,e.y),l+=i.graphics.line(e.x,e.y),s===t.length-1&&(o+="Z",l+="Z")}),s.push(o),a.push(l)}return{linePathsFrom:n,linePathsTo:s,areaPathsFrom:r,areaPathsTo:a}}},{key:"getTextPos",value:function(t,e){var i="middle",s=t.x,n=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",s+=10):t.x<0&&(i="end",s-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?n-=10:t.y>0&&(n+=10)),{textAnchor:i,newX:s,newY:n}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,s=0;s<e.globals.previousPaths.length;s++){var n=e.globals.previousPaths[s];n.paths.length>0&&parseInt(n.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[s].paths[0]&&(i=e.globals.previousPaths[s].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var s=[],n=0;n<i;n++){var a={};a.x=t[n]*Math.sin(e[n]),a.y=-t[n]*Math.cos(e[n]),s.push(a)}return s}}]),t}(),It=function(t){d(i,Ct);var e=f(i);function i(t){var s;a(this,i),(s=e.call(this,t)).ctx=t,s.w=t.w,s.animBeginArr=[0],s.animDur=0;var n=s.w;return s.startAngle=n.config.plotOptions.radialBar.startAngle,s.endAngle=n.config.plotOptions.radialBar.endAngle,s.totalAngle=Math.abs(n.config.plotOptions.radialBar.endAngle-n.config.plotOptions.radialBar.startAngle),s.trackStartAngle=n.config.plotOptions.radialBar.track.startAngle,s.trackEndAngle=n.config.plotOptions.radialBar.track.endAngle,s.radialDataLabels=n.config.plotOptions.radialBar.dataLabels,s.trackStartAngle||(s.trackStartAngle=s.startAngle),s.trackEndAngle||(s.trackEndAngle=s.endAngle),360===s.endAngle&&(s.endAngle=359.99),s.margin=parseInt(n.config.plotOptions.radialBar.track.margin,10),s}return o(i,[{key:"draw",value:function(t){var e=this.w,i=new b(this.ctx),s=i.group({class:"apexcharts-radialbar"});if(e.globals.noData)return s;var n=i.group(),a=this.defaultSize/2,r=e.globals.gridWidth/2,o=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(o=o-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var h=this.drawTracks({size:o,centerX:r,centerY:a,colorArr:l,series:t});n.add(h)}var c=this.drawArcs({size:o,centerX:r,centerY:a,colorArr:l,series:t}),d=360;e.config.plotOptions.radialBar.startAngle<0&&(d=this.totalAngle);var u=(360-d)/360;if(e.globals.radialSize=o-o*u,this.radialDataLabels.value.show){var f=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=f*u}return n.add(c.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(c.g.add(c.elHollow),c.dataLabels&&c.g.add(c.dataLabels)),s.add(n),s}},{key:"drawTracks",value:function(t){var e=this.w,i=new b(this.ctx),s=i.group({class:"apexcharts-tracks"}),n=new m(this.ctx),a=new E(this.ctx),r=this.getStrokeWidth(t);t.size=t.size-r/2;for(var o=0;o<t.series.length;o++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});s.add(l),l.attr({rel:o+1}),t.size=t.size-r-this.margin;var h=e.config.plotOptions.radialBar.track,c=a.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(h.background)?h.background[o]:h.background,solid:!0}),d=this.trackStartAngle,u=this.trackEndAngle;Math.abs(u)+Math.abs(d)>=360&&(u=360-Math.abs(this.startAngle)-.1);var f=i.drawPath({d:"",stroke:c,strokeWidth:r*parseInt(h.strokeWidth,10)/100,fill:"none",strokeOpacity:h.opacity,classes:"apexcharts-radialbar-area"});if(h.dropShadow.enabled){var g=h.dropShadow;n.dropShadow(f,g)}l.add(f),f.attr("id","apexcharts-radialbarTrack-"+o),this.animatePaths(f,{centerX:t.centerX,centerY:t.centerY,endAngle:u,startAngle:d,size:t.size,i:o,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return s}},{key:"drawArcs",value:function(t){var e=this.w,i=new b(this.ctx),s=new E(this.ctx),n=new m(this.ctx),a=i.group(),r=this.getStrokeWidth(t);t.size=t.size-r/2;var o=e.config.plotOptions.radialBar.hollow.background,l=t.size-r*t.series.length-this.margin*t.series.length-r*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,h=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(o=this.drawHollowImage(t,a,l,o));var c=this.drawHollow({size:h,centerX:t.centerX,centerY:t.centerY,fill:o||"transparent"});if(e.config.plotOptions.radialBar.hollow.dropShadow.enabled){var d=e.config.plotOptions.radialBar.hollow.dropShadow;n.dropShadow(c,d)}var u=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(u=0);var f=null;this.radialDataLabels.show&&(f=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:u})),"back"===e.config.plotOptions.radialBar.hollow.position&&(a.add(c),f&&a.add(f));var g=!1;e.config.plotOptions.radialBar.inverseOrder&&(g=!0);for(var p=g?t.series.length-1:0;g?p>=0:p<t.series.length;g?p--:p++){var v=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:_.escapeString(e.globals.seriesNames[p])});a.add(v),v.attr({rel:p+1,"data:realIndex":p}),this.ctx.series.addCollapsedClassToSeries(v,p),t.size=t.size-r-this.margin;var x=s.fillPath({seriesNumber:p,size:t.size,value:t.series[p]}),y=this.startAngle,w=void 0,S=_.negToZero(t.series[p]>100?100:t.series[p])/100,k=Math.round(this.totalAngle*S)+this.startAngle,C=void 0;e.globals.dataChanged&&(w=this.startAngle,C=Math.round(this.totalAngle*_.negToZero(e.globals.previousPaths[p])/100)+w),Math.abs(k)+Math.abs(y)>=360&&(k-=.01),Math.abs(C)+Math.abs(w)>=360&&(C-=.01);var A=k-y,I=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[p]:e.config.stroke.dashArray,T=i.drawPath({d:"",stroke:x,strokeWidth:r,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+p,strokeDashArray:I});if(b.setAttrs(T.node,{"data:angle":A,"data:value":t.series[p]}),e.config.chart.dropShadow.enabled){var M=e.config.chart.dropShadow;n.dropShadow(T,M,p)}n.setSelectionFilter(T,0,p),this.addListeners(T,this.radialDataLabels),v.add(T),T.attr({index:0,j:p});var P=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(P=(k-y)/360*e.config.chart.animations.speed,this.animDur=P/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),e.globals.dataChanged&&(P=(k-y)/360*e.config.chart.animations.dynamicAnimation.speed,this.animDur=P/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(T,{centerX:t.centerX,centerY:t.centerY,endAngle:k,startAngle:y,prevEndAngle:C,prevStartAngle:w,size:t.size,i:p,totalItems:2,animBeginArr:this.animBeginArr,dur:P,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:a,elHollow:c,dataLabels:f}}},{key:"drawHollow",value:function(t){var e=new b(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,i,s){var n=this.w,a=new E(this.ctx),r=_.randomId(),o=n.config.plotOptions.radialBar.hollow.image;if(n.config.plotOptions.radialBar.hollow.imageClipped)a.clippedImgArea({width:i,height:i,image:o,patternID:"pattern".concat(n.globals.cuid).concat(r)}),s="url(#pattern".concat(n.globals.cuid).concat(r,")");else{var l=n.config.plotOptions.radialBar.hollow.imageWidth,h=n.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===h){var c=n.globals.dom.Paper.image(o).loaded(function(e){this.move(t.centerX-e.width/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+n.config.plotOptions.radialBar.hollow.imageOffsetY)});e.add(c)}else{var d=n.globals.dom.Paper.image(o).loaded(function(e){this.move(t.centerX-l/2+n.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-h/2+n.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,h)});e.add(d)}}return s}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}}]),i}(),Et=function(){function t(e){a(this,t),this.w=e.w,this.lineCtx=e}return o(t,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if("line"===i.config.chart.type&&("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new w(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var s=e[t].slice();s[s.length-1]=s[s.length-1]+1e-6,e[t]=s}return e}},{key:"calculatePoints",value:function(t){var e=t.series,i=t.realIndex,s=t.x,n=t.y,a=t.i,r=t.j,o=t.prevY,l=this.w,h=[],c=[];if(0===r){var d=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(d=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),h.push(d),c.push(_.isNumber(e[a][0])?o+l.config.markers.offsetY:null),h.push(s+l.config.markers.offsetX),c.push(_.isNumber(e[a][r+1])?n+l.config.markers.offsetY:null)}else h.push(s+l.config.markers.offsetX),c.push(_.isNumber(e[a][r+1])?n+l.config.markers.offsetY:null);return{x:h,y:c}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,s=t.realIndex,n=this.w,a=0;a<n.globals.previousPaths.length;a++){var r=n.globals.previousPaths[a];("line"===r.type||"area"===r.type)&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(s,10)&&("line"===r.type?(this.lineCtx.appendPathFrom=!1,e=n.globals.previousPaths[a].paths[0].d):"area"===r.type&&(this.lineCtx.appendPathFrom=!1,i=n.globals.previousPaths[a].paths[0].d,n.config.stroke.show&&n.globals.previousPaths[a].paths[1]&&(e=n.globals.previousPaths[a].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e=t.i,i=t.series,s=t.prevY,n=t.lineYPosition,a=this.w;if(void 0!==i[e][0])s=(n=a.config.chart.stacked&&e>0?this.lineCtx.prevSeriesY[e-1][0]:this.lineCtx.zeroY)-i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?i[e][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(a.config.chart.stacked&&e>0&&void 0===i[e][0])for(var r=e-1;r>=0;r--)if(null!==i[r][0]&&void 0!==i[r][0]){s=n=this.lineCtx.prevSeriesY[r][0];break}return{prevY:s,lineYPosition:n}}}]),t}(),Tt=function(){function t(e,i,s){a(this,t),this.ctx=e,this.w=e.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||s,this.scatter=new M(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Et(this),this.markers=new T(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return o(t,[{key:"draw",value:function(t,e,i){var s=this.w,n=new b(this.ctx),a=s.globals.comboCharts?e:s.config.chart.type,r=n.group({class:"apexcharts-".concat(a,"-series apexcharts-plot-series")}),o=new w(this.ctx,s);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=o.getLogSeries(t),this.yRatio=o.getLogYRatios(this.yRatio);for(var l=[],h=0;h<t.length;h++){t=this.lineHelpers.sameValueSeriesFix(h,t);var c=s.globals.comboCharts?i[h]:h;this._initSerieVariables(t,h,c);var d=[],u=[],f=s.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,c),s.globals.isXNumeric&&s.globals.seriesX.length>0&&(f=(s.globals.seriesX[c][0]-s.globals.minX)/this.xRatio),u.push(f);var g,p=f,_=p,v=this.zeroY;v=this.lineHelpers.determineFirstPrevY({i:h,series:t,prevY:v,lineYPosition:0}).prevY,d.push(v),g=v;var m=this._calculatePathsFrom({series:t,i:h,realIndex:c,prevX:_,prevY:v}),x=this._iterateOverDataPoints({series:t,realIndex:c,i:h,x:f,y:1,pX:p,pY:g,pathsFrom:m,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:u,yArrj:d});this._handlePaths({type:a,realIndex:c,i:h,paths:x}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}if(s.config.chart.stacked)for(var y=l.length;y>0;y--)r.add(l[y-1]);else for(var S=0;S<l.length;S++)r.add(l[S]);return r}},{key:"_initSerieVariables",value:function(t,e,i){var s=this.w,n=new b(this.ctx);this.xDivision=s.globals.gridWidth/(s.globals.dataPoints-("on"===s.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(s.config.stroke.width)?s.config.stroke.width[i]:s.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=s.config.yaxis[this.yaxisIndex]&&s.config.yaxis[this.yaxisIndex].reversed,this.zeroY=s.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?s.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>s.globals.gridHeight||"end"===s.config.plotOptions.area.fillTo)&&(this.areaBottomY=s.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=n.group({class:"apexcharts-series",seriesName:_.escapeString(s.globals.seriesNames[i])}),this.elPointsMain=n.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=n.group({class:"apexcharts-datalabels","data:realIndex":i});var a=t[e].length===s.globals.dataPoints;this.elSeries.attr({"data:longestSeries":a,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,s,n,a=t.series,r=t.i,o=t.realIndex,l=t.prevX,h=t.prevY,c=this.w,d=new b(this.ctx);if(null===a[r][0]){for(var u=0;u<a[r].length;u++)if(null!==a[r][u]){l=this.xDivision*u,h=this.zeroY-a[r][u]/this.yRatio[this.yaxisIndex],e=d.move(l,h),i=d.move(l,this.areaBottomY);break}}else e=d.move(l,h),i=d.move(l,this.areaBottomY)+d.line(l,h);if(s=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),n=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),c.globals.previousPaths.length>0){var f=this.lineHelpers.checkPreviousPaths({pathFromLine:s,pathFromArea:n,realIndex:o});s=f.pathFromLine,n=f.pathFromArea}return{prevX:l,prevY:h,linePath:e,areaPath:i,pathFromLine:s,pathFromArea:n}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,s=t.i,n=t.paths,a=this.w,r=new b(this.ctx),o=new E(this.ctx);this.prevSeriesY.push(n.yArrj),a.globals.seriesXvalues[i]=n.xArrj,a.globals.seriesYvalues[i]=n.yArrj,this.pointsChart||a.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var l={i:s,realIndex:i,animationDelay:s,initialSpeed:a.config.chart.animations.speed,dataChangeSpeed:a.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var h=o.fillPath({seriesNumber:i}),d=0;d<n.areaPaths.length;d++){var u=r.renderPaths(c(c({},l),{},{pathFrom:n.pathFromArea,pathTo:n.areaPaths[d],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:h}));this.elSeries.add(u)}if(a.config.stroke.show&&!this.pointsChart){var f;f="line"===e?o.fillPath({seriesNumber:i,i:s}):a.globals.stroke.colors[i];for(var g=0;g<n.linePaths.length;g++){var p=r.renderPaths(c(c({},l),{},{pathFrom:n.pathFromLine,pathTo:n.linePaths[g],stroke:f,strokeWidth:this.strokeWidth,strokeLineCap:a.config.stroke.lineCap,fill:"none"}));this.elSeries.add(p)}}}},{key:"_iterateOverDataPoints",value:function(t){for(var e=t.series,i=t.realIndex,s=t.i,n=t.x,a=t.y,r=t.pX,o=t.pY,l=t.pathsFrom,h=t.linePaths,c=t.areaPaths,d=t.seriesIndex,u=t.lineYPosition,f=t.xArrj,g=t.yArrj,p=this.w,v=new b(this.ctx),m=this.yRatio,x=l.prevY,y=l.linePath,w=l.areaPath,S=l.pathFromLine,k=l.pathFromArea,C=_.isNumber(p.globals.minYArr[i])?p.globals.minYArr[i]:p.globals.minY,A=p.globals.dataPoints>1?p.globals.dataPoints-1:p.globals.dataPoints,I=0;I<A;I++){var E=void 0===e[s][I+1]||null===e[s][I+1];if(p.globals.isXNumeric){var T=p.globals.seriesX[i][I+1];void 0===p.globals.seriesX[i][I+1]&&(T=p.globals.seriesX[i][A-1]),n=(T-p.globals.minX)/this.xRatio}else n+=this.xDivision;u=p.config.chart.stacked&&s>0&&p.globals.collapsedSeries.length<p.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,i=0;i<p.globals.series.length;i++)if(p.globals.collapsedSeriesIndices.indexOf(t)>-1){e--;break}return e>=0?e:0}(s-1)][I+1]:this.zeroY,a=E?u-C/m[this.yaxisIndex]+2*(this.isReversed?C/m[this.yaxisIndex]:0):u-e[s][I+1]/m[this.yaxisIndex]+2*(this.isReversed?e[s][I+1]/m[this.yaxisIndex]:0),f.push(n),g.push(a);var M=this.lineHelpers.calculatePoints({series:e,x:n,y:a,realIndex:i,i:s,j:I,prevY:x}),P=this._createPaths({series:e,i:s,realIndex:i,j:I,x:n,y:a,pX:r,pY:o,linePath:y,areaPath:w,linePaths:h,areaPaths:c,seriesIndex:d});c=P.areaPaths,h=P.linePaths,r=P.pX,o=P.pY,w=P.areaPath,y=P.linePath,this.appendPathFrom&&(S+=v.line(n,this.zeroY),k+=v.line(n,this.zeroY)),this.handleNullDataPoints(e,M,s,I,i),this._handleMarkersAndLabels({pointsPos:M,series:e,x:n,y:a,prevY:x,i:s,j:I,realIndex:i})}return{yArrj:g,xArrj:f,pathFromArea:k,areaPaths:c,pathFromLine:S,linePaths:h}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.pointsPos,i=(t.series,t.x,t.y,t.prevY,t.i),s=t.j,n=t.realIndex,a=this.w,r=new P(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,s,{realIndex:n,pointsPos:e,zRatio:this.zRatio,elParent:this.elPointsMain});else{a.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var o=this.markers.plotChartMarkers(e,n,s+1);null!==o&&this.elPointsMain.add(o)}var l=r.drawDataLabel(e,n,s+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(t){var e=t.series,i=t.i,s=t.realIndex,n=t.j,a=t.x,r=t.y,o=t.pX,l=t.pY,h=t.linePath,c=t.areaPath,d=t.linePaths,u=t.areaPaths,f=t.seriesIndex,g=this.w,p=new b(this.ctx),_=g.config.stroke.curve,v=this.areaBottomY;if(Array.isArray(g.config.stroke.curve)&&(_=Array.isArray(f)?g.config.stroke.curve[f[i]]:g.config.stroke.curve[i]),"smooth"===_){var m=.35*(a-o);g.globals.hasNullValues?(null!==e[i][n]&&(null!==e[i][n+1]?(h=p.move(o,l)+p.curve(o+m,l,a-m,r,a+1,r),c=p.move(o+1,l)+p.curve(o+m,l,a-m,r,a+1,r)+p.line(a,v)+p.line(o,v)+"z"):(h=p.move(o,l),c=p.move(o,l)+"z")),d.push(h),u.push(c)):(h+=p.curve(o+m,l,a-m,r,a,r),c+=p.curve(o+m,l,a-m,r,a,r)),o=a,l=r,n===e[i].length-2&&(c=c+p.curve(o,l,a,r,a,v)+p.move(a,r)+"z",g.globals.hasNullValues||(d.push(h),u.push(c)))}else{if(null===e[i][n+1]){h+=p.move(a,r);var x=g.globals.isXNumeric?(g.globals.seriesX[s][n]-g.globals.minX)/this.xRatio:a-this.xDivision;c=c+p.line(x,v)+p.move(a,r)+"z"}null===e[i][n]&&(h+=p.move(a,r),c+=p.move(a,v)),"stepline"===_?(h=h+p.line(a,null,"H")+p.line(null,r,"V"),c=c+p.line(a,null,"H")+p.line(null,r,"V")):"straight"===_&&(h+=p.line(a,r),c+=p.line(a,r)),n===e[i].length-2&&(c=c+p.line(a,v)+p.move(a,r)+"z",d.push(h),u.push(c))}return{linePaths:d,areaPaths:u,pX:o,pY:l,linePath:h,areaPath:c}}},{key:"handleNullDataPoints",value:function(t,e,i,s,n){var a=this.w;if(null===t[i][s]&&a.config.markers.showNullDataPoints||1===t[i].length){var r=this.markers.plotChartMarkers(e,n,s+1,this.strokeWidth-a.config.markers.strokeWidth/2,!0);null!==r&&this.elPointsMain.add(r)}}}]),t}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function t(t,i,s,a,r){return a=void 0===a?0:a,r=void 0===r?0:r,function(t){var e,i,s=[];for(e=0;e<t.length;e++)for(i=0;i<t[e].length;i++)s.push(t[e][i]);return s}(e(function(t,e){var i,s=[],a=e/n(t);for(i=0;i<t.length;i++)s[i]=t[i]*a;return s}(t,i*s),[],new function t(e,i,s,a){this.xoffset=e,this.yoffset=i,this.height=a,this.width=s,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,i=[],s=this.xoffset,a=this.yoffset,r=n(t)/this.height,o=n(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)i.push([s,a,s+r,a+t[e]/r]),a+=t[e]/r;else for(e=0;e<t.length;e++)i.push([s,a,s+t[e]/o,a+o]),s+=t[e]/o;return i},this.cutArea=function(e){var i;if(this.width>=this.height){var s=e/this.height,n=this.width-s;i=new t(this.xoffset+s,this.yoffset,n,this.height)}else{var a=e/this.width,r=this.height-a;i=new t(this.xoffset,this.yoffset+a,this.width,r)}return i}}(a,r,i,s),[]))}function e(t,s,a,r){var o,l,h;if(0!==t.length)return o=a.shortestEdge(),function(t,e,s){var n;return 0===t.length||((n=t.slice()).push(e),i(t,s)>=i(n,s))}(s,l=t[0],o)?(s.push(l),e(t.slice(1),s,a,r)):(h=a.cutArea(n(s),r),r.push(a.getCoordinates(s)),e(t,[],h,r)),r;r.push(a.getCoordinates(s))}function i(t,e){var i=Math.min.apply(Math,t),s=Math.max.apply(Math,t),a=n(t);return Math.max(Math.pow(e,2)*s/Math.pow(a,2),Math.pow(a,2)/(Math.pow(e,2)*i))}function s(t){return t&&t.constructor===Array}function n(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e];return i}function a(t){var e,i=0;if(s(t[0]))for(e=0;e<t.length;e++)i+=a(t[e]);else i=n(t);return i}return function e(i,n,r,o,l){o=void 0===o?0:o,l=void 0===l?0:l;var h,c,d=[],u=[];if(s(i[0])){for(c=0;c<i.length;c++)d[c]=a(i[c]);for(h=t(d,n,r,o,l),c=0;c<i.length;c++)u.push(e(i[c],h[c][2]-h[c][0],h[c][3]-h[c][1],h[c][0],h[c][1]))}else u=t(i,n,r,o,l);return u}}();var Mt,Pt,Lt=function(){function t(e,i){a(this,t),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new wt(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return o(t,[{key:"draw",value:function(t){var e=this,i=this.w,s=new b(this.ctx),n=new E(this.ctx),a=s.group({class:"apexcharts-treemap"});if(i.globals.noData)return a;var r=[];return t.forEach(function(t){var e=t.map(function(t){return Math.abs(t)});r.push(e)}),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach(function(t,i){t.data.forEach(function(t){Array.isArray(e.labels[i])||(e.labels[i]=[]),e.labels[i].push(t.x)})}),window.TreemapSquared.generate(r,i.globals.gridWidth,i.globals.gridHeight).forEach(function(r,o){var l=s.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:_.escapeString(i.globals.seriesNames[o]),rel:o+1,"data:realIndex":o});if(i.config.chart.dropShadow.enabled){var h=i.config.chart.dropShadow;new m(e.ctx).dropShadow(a,h,o)}var c=s.group({class:"apexcharts-data-labels"});r.forEach(function(a,r){var h=a[0],c=a[1],d=a[2],u=a[3],f=s.drawRect(h,c,d-h,u-c,0,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?p:i.globals.stroke.colors[o]);f.attr({cx:h,cy:c,index:o,i:o,j:r,width:d-h,height:u-c});var g=e.helpers.getShadeColor(i.config.chart.type,o,r,e.negRange),p=g.color;void 0!==i.config.series[o].data[r]&&i.config.series[o].data[r].fillColor&&(p=i.config.series[o].data[r].fillColor);var _=n.fillPath({color:p,seriesNumber:o,dataPointIndex:r});f.node.classList.add("apexcharts-treemap-rect"),f.attr({fill:_}),e.helpers.addListeners(f);var v={x:h+(d-h)/2,y:c+(u-c)/2,width:0,height:0},m={x:h,y:c,width:d-h,height:u-c};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var b=1;i.globals.resized||(b=i.config.chart.animations.speed),e.animateTreemap(f,v,m,b)}if(i.globals.dataChanged){var x=1;e.dynamicAnim.enabled&&i.globals.shouldAnimate&&(x=e.dynamicAnim.speed,i.globals.previousPaths[o]&&i.globals.previousPaths[o][r]&&i.globals.previousPaths[o][r].rect&&(v=i.globals.previousPaths[o][r].rect),e.animateTreemap(f,v,m,x))}var y=e.getFontSize(a),w=i.config.dataLabels.formatter(e.labels[o][r],{value:i.globals.series[o][r],seriesIndex:o,dataPointIndex:r,w:i}),S=e.helpers.calculateDataLabels({text:w,x:(h+d)/2,y:(c+u)/2+e.strokeWidth/2+y/3,i:o,j:r,colorProps:g,fontSize:y,series:t});i.config.dataLabels.enabled&&S&&e.rotateToFitLabel(S,w,h,c,d,u),l.add(f),null!==S&&l.add(S)}),l.add(c),a.add(l)}),a}},{key:"getFontSize",value:function(t){var e,i,s=this.w,n=function t(e){var i,s=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)s+=t(e[i]);else for(i=0;i<e.length;i++)s+=e[i].length;return s}(this.labels)/function t(e){var i,s=0;if(Array.isArray(e[0]))for(i=0;i<e.length;i++)s+=t(e[i]);else for(i=0;i<e.length;i++)s+=1;return s}(this.labels);return e=(t[2]-t[0])*(t[3]-t[1]),i=Math.pow(e,.5),Math.min(i/n,parseInt(s.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,i,s,n,a){var r=new b(this.ctx),o=r.getTextRects(e);if(o.width+5>n-i&&o.width<=a-s){var l=r.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(l.x," ").concat(l.y,")"))}}},{key:"animateTreemap",value:function(t,e,i,s){var n=new v(this.ctx);n.animateRect(t,{x:e.x,y:e.y,width:e.width,height:e.height},{x:i.x,y:i.y,width:i.width,height:i.height},s,function(){n.animationCompleted(t)})}}]),t}(),zt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return o(t,[{key:"calculateTimeScaleTicks",value:function(t,e){var i=this,s=this.w;if(s.globals.allSeriesCollapsed)return s.globals.labels=[],s.globals.timescaleLabels=[],[];var n=new D(this.ctx),a=(e-t)/864e5;this.determineInterval(a),s.globals.disableZoomIn=!1,s.globals.disableZoomOut=!1,a<.00011574074074074075?s.globals.disableZoomIn=!0:a>5e4&&(s.globals.disableZoomOut=!0);var r=n.getTimeUnitsfromTimestamp(t,e,this.utc),o=s.globals.gridWidth/a,l=o/24,h=l/60,d=h/60,u=Math.floor(24*a),f=Math.floor(1440*a),g=Math.floor(86400*a),p=Math.floor(a),_=Math.floor(a/30),v=Math.floor(a/365),m={minMillisecond:r.minMillisecond,minSecond:r.minSecond,minMinute:r.minMinute,minHour:r.minHour,minDate:r.minDate,minMonth:r.minMonth,minYear:r.minYear},b={firstVal:m,currentMillisecond:m.minMillisecond,currentSecond:m.minSecond,currentMinute:m.minMinute,currentHour:m.minHour,currentMonthDate:m.minDate,currentDate:m.minDate,currentMonth:m.minMonth,currentYear:m.minYear,daysWidthOnXAxis:o,hoursWidthOnXAxis:l,minutesWidthOnXAxis:h,secondsWidthOnXAxis:d,numberOfSeconds:g,numberOfMinutes:f,numberOfHours:u,numberOfDays:p,numberOfMonths:_,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(b);break;case"months":case"half_year":this.generateMonthScale(b);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(b);break;case"hours":this.generateHourScale(b);break;case"minutes_fives":case"minutes":this.generateMinuteScale(b);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(b)}var x=this.timeScaleArray.map(function(t){var e={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?c(c({},e),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?c(c({},e),{},{value:t.value}):"minute"===t.unit?c(c({},e),{},{value:t.value,minute:t.value}):"second"===t.unit?c(c({},e),{},{value:t.value,minute:t.minute,second:t.second}):t});return x.filter(function(t){var e=1,n=Math.ceil(s.globals.gridWidth/120),a=t.value;void 0!==s.config.xaxis.tickAmount&&(n=s.config.xaxis.tickAmount),x.length>n&&(e=Math.floor(x.length/n));var r=!1,o=!1;switch(i.tickInterval){case"years":"year"===t.unit&&(r=!0);break;case"half_year":e=7,"year"===t.unit&&(r=!0);break;case"months":e=1,"year"===t.unit&&(r=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(r=!0),30===a&&(o=!0);break;case"months_days":e=10,"month"===t.unit&&(r=!0),30===a&&(o=!0);break;case"week_days":e=8,"month"===t.unit&&(r=!0);break;case"days":e=1,"month"===t.unit&&(r=!0);break;case"hours":"day"===t.unit&&(r=!0);break;case"minutes_fives":a%5!=0&&(o=!0);break;case"seconds_tens":a%10!=0&&(o=!0);break;case"seconds_fives":a%5!=0&&(o=!0)}if("hours"===i.tickInterval||"minutes_fives"===i.tickInterval||"seconds_tens"===i.tickInterval||"seconds_fives"===i.tickInterval){if(!o)return!0}else if((a%e==0||r)&&!o)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,s=this.formatDates(t),n=this.removeOverlappingTS(s);i.globals.timescaleLabels=n.slice(),new lt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,s=t.currentYear,n=t.daysWidthOnXAxis,a=t.numberOfYears,r=e.minYear,o=0,l=new D(this.ctx),h="year";if(e.minDate>1||e.minMonth>0){var c=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);o=(l.determineDaysOfYear(e.minYear)-c+1)*n,r=e.minYear+1,this.timeScaleArray.push({position:o,value:r,unit:h,year:r,month:_.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:o,value:r,unit:h,year:s,month:_.monthMod(i+1)});for(var d=r,u=o,f=0;f<a;f++)d++,u=l.determineDaysOfYear(d-1)*n+u,this.timeScaleArray.push({position:u,value:d,unit:h,year:d,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,s=t.currentMonth,n=t.currentYear,a=t.daysWidthOnXAxis,r=t.numberOfMonths,o=s,l=0,h=new D(this.ctx),c="month",d=0;if(e.minDate>1){l=(h.determineDaysOfMonths(s+1,e.minYear)-i+1)*a,o=_.monthMod(s+1);var u=n+d,f=_.monthMod(o),g=o;0===o&&(c="year",g=u,f=1,u+=d+=1),this.timeScaleArray.push({position:l,value:g,unit:c,year:u,month:f})}else this.timeScaleArray.push({position:l,value:o,unit:c,year:n,month:_.monthMod(s)});for(var p=o+1,v=l,m=0,b=1;m<r;m++,b++){0===(p=_.monthMod(p))?(c="year",d+=1):c="month";var x=this._getYear(n,p,d);v=h.determineDaysOfMonths(p,x)*a+v;var y=0===p?x:p;this.timeScaleArray.push({position:v,value:y,unit:c,year:x,month:0===p?1:p}),p++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,s=t.currentYear,n=t.hoursWidthOnXAxis,a=t.numberOfDays,r=new D(this.ctx),o="day",l=e.minDate+1,h=l,c=function(t,e,i){return t>r.determineDaysOfMonths(e+1,i)?(h=1,o="month",u=e+=1,e):e},d=(24-e.minHour)*n,u=l,f=c(h,i,s);0===e.minHour&&1===e.minDate&&(d=0,u=_.monthMod(e.minMonth),o="month",h=e.minDate,a++),this.timeScaleArray.push({position:d,value:u,unit:o,year:this._getYear(s,f,0),month:_.monthMod(f),day:h});for(var g=d,p=0;p<a;p++){o="day",f=c(h+=1,f,this._getYear(s,f,0));var v=this._getYear(s,f,0);g=24*n+g;var m=1===h?_.monthMod(f):h;this.timeScaleArray.push({position:g,value:m,unit:o,year:v,month:_.monthMod(f),day:m})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,s=t.currentMonth,n=t.currentYear,a=t.minutesWidthOnXAxis,r=t.numberOfHours,o=new D(this.ctx),l="hour",h=function(t,e){return t>o.determineDaysOfMonths(e+1,n)&&(p=1,e+=1),{month:e,date:p}},c=function(t,e){return t>o.determineDaysOfMonths(e+1,n)?e+=1:e},d=60-(e.minMinute+e.minSecond/60),u=d*a,f=e.minHour+1,g=f+1;60===d&&(u=0,g=(f=e.minHour)+1);var p=i,v=c(p,s);this.timeScaleArray.push({position:u,value:f,unit:l,day:p,hour:g,year:n,month:_.monthMod(v)});for(var m=u,b=0;b<r;b++){l="hour",g>=24&&(g=0,l="day",v=h(p+=1,v).month,v=c(p,v));var x=this._getYear(n,v,0);m=0===g&&0===b?d*a:60*a+m;var y=0===g?p:g;this.timeScaleArray.push({position:m,value:y,unit:l,hour:g,day:p,year:x,month:_.monthMod(v)}),g++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,s=t.currentMinute,n=t.currentHour,a=t.currentDate,r=t.currentMonth,o=t.currentYear,l=t.minutesWidthOnXAxis,h=t.secondsWidthOnXAxis,c=t.numberOfMinutes,d=s+1,u=a,f=r,g=o,p=n,v=(60-i-e/1e3)*h,m=0;m<c;m++)d>=60&&(d=0,24===(p+=1)&&(p=0)),this.timeScaleArray.push({position:v,value:d,unit:"minute",hour:p,minute:d,day:u,year:this._getYear(g,f,0),month:_.monthMod(f)}),v+=l,d++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,i=t.currentSecond,s=t.currentMinute,n=t.currentHour,a=t.currentDate,r=t.currentMonth,o=t.currentYear,l=t.secondsWidthOnXAxis,h=t.numberOfSeconds,c=i+1,d=s,u=a,f=r,g=o,p=n,v=(1e3-e)/1e3*l,m=0;m<h;m++)c>=60&&(c=0,++d>=60&&(d=0,24==++p&&(p=0))),this.timeScaleArray.push({position:v,value:c,unit:"second",hour:p,minute:d,second:c,day:u,year:this._getYear(g,f,0),month:_.monthMod(f)}),v+=l,c++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),"day"===t.unit?i+="day"===t.unit?"-"+("0"+e).slice(-2):"-01":i+="-"+("0"+(t.day?t.day:"1")).slice(-2),"hour"===t.unit?i+="hour"===t.unit?"T"+("0"+e).slice(-2):"T00":i+="T"+("0"+(t.hour?t.hour:"0")).slice(-2),"minute"===t.unit?i+=":"+("0"+e).slice(-2):i+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),"second"===t.unit?i+=":"+("0"+e).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map(function(t){var s=t.value.toString(),n=new D(e.ctx),a=e.createRawDateString(t,s),r=n.getDate(n.parseDate(a));if(e.utc||(r=n.getDate(n.parseDateWithTimezone(a))),void 0===i.config.xaxis.labels.format){var o="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(o=l.year),"month"===t.unit&&(o=l.month),"day"===t.unit&&(o=l.day),"hour"===t.unit&&(o=l.hour),"minute"===t.unit&&(o=l.minute),"second"===t.unit&&(o=l.second),s=n.formatDate(r,o)}else s=n.formatDate(r,i.config.xaxis.labels.format);return{dateString:a,position:t.position,value:s,unit:t.unit,year:t.year,month:t.month}})}},{key:"removeOverlappingTS",value:function(t){var e,i=this,s=new b(this.ctx),n=!1;t.length>0&&t[0].value&&t.every(function(e){return e.value.length===t[0].value.length})&&(n=!0,e=s.getTextRects(t[0].value).width);var a=0,r=t.map(function(r,o){if(o>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=n?e:s.getTextRects(t[a].value).width,h=t[a].position;return r.position>h+l+10?(a=o,r):null}return r});return r.filter(function(t){return null!==t})}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),t}(),Nt=function(){function t(e,i){a(this,t),this.ctx=i,this.w=i.w,this.el=e}return o(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,i=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,t.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),b.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background=e.chart.background,this.setSVGDimensions(),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elAnnotations=t.dom.Paper.group().attr({class:"apexcharts-annotations"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elWrap.appendChild(t.dom.elLegendWrap),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,s=i.config,n=i.globals,a={series:[],i:[]},r={series:[],i:[]},o={series:[],i:[]},l={series:[],i:[]},h={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]};n.series.map(function(e,u){var f=0;void 0!==t[u].type?("column"===t[u].type||"bar"===t[u].type?(n.series.length>1&&s.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),h.series.push(e),h.i.push(u),f++,i.globals.columnSeries=h.series):"area"===t[u].type?(r.series.push(e),r.i.push(u),f++):"line"===t[u].type?(a.series.push(e),a.i.push(u),f++):"scatter"===t[u].type?(o.series.push(e),o.i.push(u)):"bubble"===t[u].type?(l.series.push(e),l.i.push(u),f++):"candlestick"===t[u].type?(c.series.push(e),c.i.push(u),f++):"boxPlot"===t[u].type?(d.series.push(e),d.i.push(u),f++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),f>1&&(n.comboCharts=!0)):(a.series.push(e),a.i.push(u))});var u=new Tt(this.ctx,e),f=new yt(this.ctx,e);this.ctx.pie=new Ct(this.ctx);var g=new It(this.ctx);this.ctx.rangeBar=new H(this.ctx,e);var p=new At(this.ctx),_=[];if(n.comboCharts){if(r.series.length>0&&_.push(u.draw(r.series,"area",r.i)),h.series.length>0)if(i.config.chart.stacked){var v=new xt(this.ctx,e);_.push(v.draw(h.series,h.i))}else this.ctx.bar=new $(this.ctx,e),_.push(this.ctx.bar.draw(h.series,h.i));if(a.series.length>0&&_.push(u.draw(a.series,"line",a.i)),c.series.length>0&&_.push(f.draw(c.series,c.i)),d.series.length>0&&_.push(f.draw(d.series,d.i)),o.series.length>0){var m=new Tt(this.ctx,e,!0);_.push(m.draw(o.series,"scatter",o.i))}if(l.series.length>0){var b=new Tt(this.ctx,e,!0);_.push(b.draw(l.series,"bubble",l.i))}}else switch(s.chart.type){case"line":_=u.draw(n.series,"line");break;case"area":_=u.draw(n.series,"area");break;case"bar":s.chart.stacked?_=new xt(this.ctx,e).draw(n.series):(this.ctx.bar=new $(this.ctx,e),_=this.ctx.bar.draw(n.series));break;case"candlestick":case"boxPlot":_=new yt(this.ctx,e).draw(n.series);break;case"rangeBar":_=this.ctx.rangeBar.draw(n.series);break;case"heatmap":_=new St(this.ctx,e).draw(n.series);break;case"treemap":_=new Lt(this.ctx,e).draw(n.series);break;case"pie":case"donut":case"polarArea":_=this.ctx.pie.draw(n.series);break;case"radialBar":_=g.draw(n.series);break;case"radar":_=p.draw(n.series);break;default:_=u.draw(n.series)}return _}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var i=_.getDimensions(this.el),s=e.chart.width.toString().split(/[0-9]+/g).pop();"%"===s?_.isNumber(i[0])&&(0===i[0].width&&(i=_.getDimensions(this.el.parentNode)),t.svgWidth=i[0]*parseInt(e.chart.width,10)/100):"px"!==s&&""!==s||(t.svgWidth=parseInt(e.chart.width,10));var n=e.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===n){var a=_.getDimensions(this.el.parentNode);t.svgHeight=a[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.axisCharts?t.svgHeight=t.svgWidth/1.61:t.svgHeight=t.svgWidth/1.2;if(t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),b.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==n){var r=e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+r+"px"}t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,i={transform:"translate("+t.translateX+", "+e+")"};b.setAttrs(t.dom.elGraphical.node,i)}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,s=t.config.chart.sparkline.enabled?1:15;s+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(i=new ct(this.ctx).legendHelpers.getLegendBBox().clwh+10);var n=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),a=2.05*t.globals.radialSize;if(n&&!t.config.chart.sparkline.enabled){var r=_.getBoundingClientRect(n);a=r.bottom;var o=r.bottom-r.top;a=Math.max(2.05*t.globals.radialSize,o)}var l=a+e.translateY+i+s;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",l),e.dom.elWrap.style.height=l+"px",b.setAttrs(e.dom.Paper.node,{height:l}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px"}},{key:"coreCalculations",value:function(){new q(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map(function(t){return[]})},i=new j,s=this.w.globals;i.initGlobalVars(s),s.seriesXvalues=e(),s.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new tt(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new tt(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){this.ctx.timeScale=new zt(this.ctx);var i=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}t=new w(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.w;if(e.config.chart.brush.enabled&&"function"!=typeof e.config.chart.events.selection){var i=e.config.chart.brush.targets||[e.config.chart.brush.target];i.forEach(function(e){var i=ApexCharts.getChartByID(e);i.w.globals.brushSource=t.ctx,"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){t.updateSourceChart(i)}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){t.updateSourceChart(i)})}),e.config.chart.events.selection=function(t,s){i.forEach(function(t){var i=ApexCharts.getChartByID(t),n=_.clone(e.config.yaxis);if(e.config.chart.brush.autoScaleYaxis&&1===i.w.globals.series.length){var a=new G(i);n=a.autoScaleY(i,n,s)}var r=i.w.config.yaxis.reduce(function(t,e,s){return[].concat(g(t),[c(c({},i.w.config.yaxis[s]),{},{min:n[0].min,max:n[0].max})])},[]);i.ctx.updateHelpers._updateOptions({xaxis:{min:s.xaxis.min,max:s.xaxis.max},yaxis:r},!1,!1,!1,!1)})}}}}]),t}(),$t=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"_updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[this.ctx];a&&(o=this.ctx.getSyncedCharts()),this.ctx.w.globals.isExecCalled&&(o=[this.ctx],this.ctx.w.globals.isExecCalled=!1),o.forEach(function(a){var o=a.w;return o.globals.shouldAnimate=s,i||(o.globals.resized=!0,o.globals.dataChanged=!0,s&&a.series.getPreviousPaths()),t&&"object"===n(t)&&(a.config=new R(t),t=w.extendArrayProps(a.config,t,o),a.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,o.config=_.extend(o.config,t),r&&(o.globals.lastXAxis=t.xaxis?_.clone(t.xaxis):[],o.globals.lastYAxis=t.yaxis?_.clone(t.yaxis):[],o.globals.initialConfig=_.extend({},o.config),o.globals.initialSeries=_.clone(o.config.series))),a.update(t)})}},{key:"_updateSeries",value:function(t,e){var i,s=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.w;return a.globals.shouldAnimate=e,a.globals.dataChanged=!0,e&&this.ctx.series.getPreviousPaths(),a.globals.axisCharts?(0===(i=t.map(function(t,e){return s._extendSeries(t,e)})).length&&(i=[{data:[]}]),a.config.series=i):a.config.series=t.slice(),n&&(a.globals.initialSeries=_.clone(a.config.series)),this.ctx.update()}},{key:"_extendSeries",value:function(t,e){var i=this.w,s=i.config.series[e];return c(c({},i.config.series[e]),{},{name:t.name?t.name:s&&s.name,color:t.color?t.color:s&&s.color,type:t.type?t.type:s&&s.type,data:t.data?t.data:s&&s.data})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,s=null,n=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?s=i.globals.dom.Paper.select("".concat(n," path[j='").concat(e,"'], ").concat(n," circle[j='").concat(e,"'], ").concat(n," rect[j='").concat(e,"']")).members[0]:void 0===e&&(s=i.globals.dom.Paper.select("".concat(n," path[j='").concat(t,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),s?(new b(this.ctx).pathMouseDown(s,null),s.node?s.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach(function(i){void 0!==t.xaxis[i]&&(e.config.xaxis[i]=t.xaxis[i],e.globals.lastXAxis[i]=t.xaxis[i])}),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new F(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){var e=this.w;return e.config.chart.stacked&&"100%"===e.config.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,s=i.globals.lastXAxis,n=i.globals.lastYAxis;t&&t.xaxis&&(s=t.xaxis),t&&t.yaxis&&(n=t.yaxis),i.config.xaxis.min=s.min,i.config.xaxis.max=s.max;i.config.yaxis.map(function(t,s){i.globals.zoomed||void 0!==n[s]?function(t){void 0!==n[t]&&(i.config.yaxis[t].min=n[t].min,i.config.yaxis[t].max=n[t].max)}(s):void 0!==e.ctx.opts.yaxis[s]&&(t.min=e.ctx.opts.yaxis[s].min,t.max=e.ctx.opts.yaxis[s].max)})}}]),t}();Mt="undefined"!=typeof window?window:void 0,Pt=function(t,e){var i=(void 0!==this?this:t).SVG=function(t){if(i.supported)return t=new i.Doc(t),i.parser.draw||i.prepare(),t};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.com/svgjs",i.supported=!0,!i.supported)return!1;i.did=1e3,i.eid=function(t){return"Svgjs"+d(t)+i.did++},i.create=function(t){var i=e.createElementNS(this.ns,t);return i.setAttribute("id",this.eid(t)),i},i.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var s=t.length-1;s>=0;s--)if(t[s])for(var n in e)t[s].prototype[n]=e[n];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,i.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&i.extend(e,t.extend),t.construct&&i.extend(t.parent||i.Container,t.construct),e},i.adopt=function(e){return e?e.instance?e.instance:((s="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new i.Nested:new i.Doc:"linearGradient"==e.nodeName?new i.Gradient("linear"):"radialGradient"==e.nodeName?new i.Gradient("radial"):i[d(e.nodeName)]?new(i[d(e.nodeName)]):new i.Element(e)).type=e.nodeName,s.node=e,e.instance=s,s instanceof i.Doc&&s.namespace().defs(),s.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),s):null;var s},i.prepare=function(){var t=e.getElementsByTagName("body")[0],s=(t?new i.Doc(t):i.adopt(e.documentElement).nested()).size(2,0);i.parser={body:t||e.documentElement,draw:s.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:s.polyline().node,path:s.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},e.addEventListener("DOMContentLoaded",function(){i.parser.draw||i.prepare()},!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(t,e){for(var i=t.length,s=[],n=0;n<i;n++)s.push(e(t[n]));return s},filter:function(t,e){for(var i=t.length,s=[],n=0;n<i;n++)e(t[n])&&s.push(t[n]);return s},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(t){var e,s;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?i.regex.isRgb.test(t)?(e=i.regex.rgb.exec(t.replace(i.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):i.regex.isHex.test(t)&&(e=i.regex.hex.exec(4==(s=t).length?["#",s.substring(1,2),s.substring(1,2),s.substring(2,3),s.substring(2,3),s.substring(3,4),s.substring(3,4)].join(""):s),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===n(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new i.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new i.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),i.Color.test=function(t){return t+="",i.regex.isHex.test(t)||i.regex.isRgb.test(t)},i.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},i.Color.isColor=function(t){return i.Color.isRgb(t)||i.Color.test(t)},i.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},i.extend(i.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),i.PointArray=function(t,e){i.Array.call(this,t,e||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray;for(var s={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]}},a="mlhvqtcsaz".split(""),r=0,o=a.length;r<o;++r)s[a[r]]=function(t){return function(e,i,n){if("H"==t)e[0]=e[0]+i.x;else if("V"==t)e[0]=e[0]+i.y;else if("A"==t)e[5]=e[5]+i.x,e[6]=e[6]+i.y;else for(var a=0,r=e.length;a<r;++a)e[a]=e[a]+(a%2?i.y:i.x);return s[t](e,i,n)}}(a[r].toUpperCase());i.PathArray=function(t,e){i.Array.call(this,t,e||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(t){for(var e=0,i=t.length,s="";e<i;e++)s+=t[e][0],null!=t[e][1]&&(s+=t[e][1],null!=t[e][2]&&(s+=" ",s+=t[e][2],null!=t[e][3]&&(s+=" ",s+=t[e][3],s+=" ",s+=t[e][4],null!=t[e][5]&&(s+=" ",s+=t[e][5],s+=" ",s+=t[e][6],null!=t[e][7]&&(s+=" ",s+=t[e][7])))));return s+" "}(this.value)},move:function(t,e){var i=this.bbox();return i.x,i.y,this},at:function(t){if(!this.destination)return this;for(var e=this.value,s=this.destination.value,n=[],a=new i.PathArray,r=0,o=e.length;r<o;r++){n[r]=[e[r][0]];for(var l=1,h=e[r].length;l<h;l++)n[r][l]=e[r][l]+(s[r][l]-e[r][l])*t;"A"===n[r][0]&&(n[r][4]=+(0!=n[r][4]),n[r][5]=+(0!=n[r][5]))}return a.value=n,a},parse:function(t){if(t instanceof i.PathArray)return t.valueOf();var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(i.regex.numbersWithDots,h).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var a=[],r=new i.Point,o=new i.Point,l=0,c=t.length;do{i.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),a.push(s[e].call(null,t.slice(l,l+=n[e.toUpperCase()]).map(parseFloat),r,o))}while(c>l);return a},bbox:function(){return i.parser.draw||i.prepare(),i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(i.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof i.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new i.Number(t),new i.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new i.Number(t),new i.Number(this-t,this.unit||t.unit)},times:function(t){return t=new i.Number(t),new i.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new i.Number(t),new i.Number(this/t,this.unit||t.unit)},to:function(t){var e=new i.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new i.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new i.Number(this.destination).minus(this).times(t).plus(this):this}}}),i.Element=i.invent({create:function(t){this._stroke=i.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var s=f(this,t,e);return this.width(new i.Number(s.width)).height(new i.Number(s.height))},clone:function(t){this.writeDataToDom();var e=_(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(i.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return i.get(this.attr(t))},parent:function(e){var s=this;if(!s.node.parentNode)return null;if(s=i.adopt(s.node.parentNode),!e)return s;for(;s&&s.node instanceof t.SVGElement;){if("string"==typeof e?s.matches(e):s instanceof e)return s;if(!s.node.parentNode||"#document"==s.node.parentNode.nodeName)return null;s=i.adopt(s.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(t){var e=[],i=this;do{if(!(i=i.parent(t))||!i.node)break;e.push(i)}while(i.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var s=e.createElement("svg");if(!(t&&this instanceof i.Parent))return s.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),s.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");s.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var n=0,a=s.firstChild.childNodes.length;n<a;n++)this.node.appendChild(s.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),i.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},i.morph=function(t){return function(e,s){return new i.MorphObj(e,s).at(t)}},i.Situation=i.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(t.duration).valueOf(),this.delay=new i.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,s){"object"===n(t)&&(e=t.ease,s=t.delay,t=t.duration);var a=new i.Situation({duration:t||1e3,delay:s||0,ease:i.easing[e||"-"]||e});return this.queue(a),this},target:function(t){return t&&t instanceof i.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof i.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var s in e.animations){t=this.target()[s](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[s])||(e.animations[s]=[e.animations[s]]);for(var n=t.length;n--;)e.animations[s][n]instanceof i.Number&&(t[n]=new i.Number(t[n])),e.animations[s][n]=t[n].morph(e.animations[s][n])}for(var s in e.attrs)e.attrs[s]=new i.MorphObj(this.target().attr(s),e.attrs[s]);for(var s in e.styles)e.styles[s]=new i.MorphObj(this.target().style(s),e.styles[s]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var i=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",function i(s){s.detail.situation==e&&(t.call(this,e),this.off("finished.fx",i))}),this._callStart()},during:function(t){var e=this.last(),s=function(s){s.detail.situation==e&&t.call(this,s.detail.pos,i.morph(s.detail.pos),s.detail.eased,e)};return this.target().off("during.fx",s).on("during.fx",s),this.after(function(){this.off("during.fx",s)}),this._callStart()},afterAll:function(t){var e=function e(i){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,i){return this.last()[i||"animations"][t]=e,this._callStart()},step:function(t){var e,i,s;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),i=Math.floor(e),!0===this.situation.loops||i<this.situation.loops?(this.pos=e-i,s=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,s=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-s)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var n=this.situation.ease(this.pos);for(var a in this.situation.once)a>this.lastPos&&a<=n&&(this.situation.once[a].call(this.target(),this.pos,n),delete this.situation.once[a]);return this.active&&this.target().fire("during",{pos:this.pos,eased:n,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=n,this):this},eachAt:function(){var t,e=this,s=this.target(),n=this.situation;for(var a in n.animations)t=[].concat(n.animations[a]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),s[a].apply(s,t);for(var a in n.attrs)t=[a].concat(n.attrs[a]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),s.attr.apply(s,t);for(var a in n.styles)t=[a].concat(n.styles[a]).map(function(t){return"string"!=typeof t&&t.at?t.at(n.ease(e.pos),e.pos):t}),s.style.apply(s,t);if(n.transforms.length){t=n.initialTransformation,a=0;for(var r=n.transforms.length;a<r;a++){var o=n.transforms[a];o instanceof i.Matrix?t=o.relative?t.multiply((new i.Matrix).morph(o).at(n.ease(this.pos))):t.morph(o).at(n.ease(this.pos)):(o.relative||o.undo(t.extract()),t=t.multiply(o.at(n.ease(this.pos))))}s.matrix(t)}return this},once:function(t,e,i){var s=this.last();return i||(t=s.ease(t)),s.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:i.Element,construct:{animate:function(t,e,s){return(this.fx||(this.fx=new i.FX(this))).animate(t,e,s)},delay:function(t){return(this.fx||(this.fx=new i.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),i.MorphObj=i.invent({create:function(t,e){return i.Color.isColor(e)?new i.Color(t).morph(e):i.regex.delimiter.test(t)?i.regex.pathLetters.test(t)?new i.PathArray(t).morph(e):new i.Array(t).morph(e):i.regex.numberAndUnit.test(e)?new i.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(t,e,i){if("object"===n(t))for(var s in t)this.attr(s,t[s]);else this.add(t,e,"attrs");return this},plot:function(t,e,i,s){return 4==arguments.length?this.plot([t,e,i,s]):this.add("plot",new(this.target().morphArray)(t))}}),i.Box=i.invent({create:function(t,e,s,a){if(!("object"!==n(t)||t instanceof i.Element))return i.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=s,this.height=a),function(t){null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2}(this)}}),i.BBox=i.invent({create:function(t){if(i.Box.apply(this,[].slice.call(arguments)),t instanceof i.Element){var s;try{if(!e.documentElement.contains){for(var n=t.node;n.parentNode;)n=n.parentNode;if(n!=e)throw new Error("Element not in the dom")}s=t.node.getBBox()}catch(e){if(t instanceof i.Shape){i.parser.draw||i.prepare();var a=t.clone(i.parser.draw.instance).show();s=a.node.getBBox(),a.remove()}else s={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}i.Box.call(this,s)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.Matrix=i.invent({create:function(t){var e=p([1,0,0,1,0,0]);t=t instanceof i.Element?t.matrixify():"string"==typeof t?p(t.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?p([].slice.call(arguments)):Array.isArray(t)?p(t):"object"===n(t)?t:e;for(var s=m.length-1;s>=0;--s)this[m[s]]=null!=t[m[s]]?t[m[s]]:e[m[s]]},extend:{extract:function(){var t=g(this,0,1),e=(g(this,1,0),180/Math.PI*Math.atan2(t.y,t.x)-90);return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(t){return this.destination=new i.Matrix(t),this},multiply:function(t){return new i.Matrix(this.native().multiply(function(t){return t instanceof i.Matrix||(t=new i.Matrix(t)),t}(t).native()))},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(t,e){return new i.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=i.parser.native.createSVGMatrix(),e=m.length-1;e>=0;e--)t[m[e]]=this[m[e]];return t},toString:function(){return"matrix("+v(this.a)+","+v(this.b)+","+v(this.c)+","+v(this.d)+","+v(this.e)+","+v(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new i.Matrix(e)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(t,e){var i;i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===n(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new i.Point(this)},morph:function(t,e){return this.destination=new i.Point(t,e),this}}}),i.extend(i.Element,{point:function(t,e){return new i.Point(t,e).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(t,e,s){if(null==t){for(t={},s=(e=this.node.attributes).length-1;s>=0;s--)t[e[s].nodeName]=i.regex.isNumber.test(e[s].nodeValue)?parseFloat(e[s].nodeValue):e[s].nodeValue;return t}if("object"===n(t))for(var a in t)this.attr(a,t[a]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?i.defaults.attrs[t]:i.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(i.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof i.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new i.Number(e):i.Color.isColor(e)?e=new i.Color(e):Array.isArray(e)&&(e=new i.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof s?this.node.setAttributeNS(s,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),i.extend(i.Element,{transform:function(t,e){var s;return"object"!==n(t)?(s=new i.Matrix(this).extract(),"string"==typeof t?s[t]:s):(s=new i.Matrix(this),e=!!e||!!t.relative,null!=t.a&&(s=e?s.multiply(new i.Matrix(t)):new i.Matrix(t)),this.attr("transform",s))}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(i.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(p(e[1])):t[e[0]].apply(t,e[1])},new i.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t).untransform().transform(i.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,s=this.arguments.length;i<s;++i)this[this.arguments[i]]=t[i];else if("object"===n(t))for(i=0,s=this.arguments.length;i<s;++i)this[this.arguments[i]]=t[this.arguments[i]];this.inversed=!1,!0===e&&(this.inversed=!0)}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.extend(i.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===n(t))for(var s in t)this.style(s,t[s]);else{if(!i.regex.isCss.test(t))return this.node.style[c(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[c(t)]=null===e||i.regex.isBlank.test(e)?"":e;return this}}),i.Parent=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),function(t){return i.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return i.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var s=this.children(),n=0,a=s.length;n<a;n++)s[n]instanceof i.Element&&t.apply(s[n],[n,s]),e&&s[n]instanceof i.Container&&s[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(t,e){return 0===e||this instanceof i.Defs||this.node==i.parser.draw||(t=t||(this instanceof i.Doc?this:this.parent(i.Parent)),e=e||1/0,this.each(function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),i.Container=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Parent}),i.ViewBox=i.invent({parent:i.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){i.Element.prototype[t]=function(e){return i.on(this.node,t,e),this}}),i.listeners=[],i.handlerMap=[],i.listenerId=0,i.on=function(t,e,s,n,a){var r=s.bind(n||t.instance||t),o=(i.handlerMap.indexOf(t)+1||i.handlerMap.push(t))-1,l=e.split(".")[0],h=e.split(".")[1]||"*";i.listeners[o]=i.listeners[o]||{},i.listeners[o][l]=i.listeners[o][l]||{},i.listeners[o][l][h]=i.listeners[o][l][h]||{},s._svgjsListenerId||(s._svgjsListenerId=++i.listenerId),i.listeners[o][l][h][s._svgjsListenerId]=r,t.addEventListener(l,r,a||{passive:!0})},i.off=function(t,e,s){var n=i.handlerMap.indexOf(t),a=e&&e.split(".")[0],r=e&&e.split(".")[1],o="";if(-1!=n)if(s){if("function"==typeof s&&(s=s._svgjsListenerId),!s)return;i.listeners[n][a]&&i.listeners[n][a][r||"*"]&&(t.removeEventListener(a,i.listeners[n][a][r||"*"][s],!1),delete i.listeners[n][a][r||"*"][s])}else if(r&&a){if(i.listeners[n][a]&&i.listeners[n][a][r]){for(var l in i.listeners[n][a][r])i.off(t,[a,r].join("."),l);delete i.listeners[n][a][r]}}else if(r)for(var h in i.listeners[n])for(var o in i.listeners[n][h])r===o&&i.off(t,[h,r].join("."));else if(a){if(i.listeners[n][a]){for(var o in i.listeners[n][a])i.off(t,[a,o].join("."));delete i.listeners[n][a]}}else{for(var h in i.listeners[n])i.off(t,h);delete i.listeners[n],delete i.handlerMap[n]}},i.extend(i.Element,{on:function(t,e,s,n){return i.on(this.node,t,e,s,n),this},off:function(t,e){return i.off(this.node,t,e),this},fire:function(e,s){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new i.CustomEvent(e,{detail:s,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,i.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=i.adopt(t):this._defs=new i.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw&&!i.parser.draw.parentNode&&this.node.appendChild(i.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,i=_(e.cloneNode(!0));return t?(t.node||t).appendChild(i.node):e.parentNode.insertBefore(i.node,e.nextSibling),i}}}),i.extend(i.Element,{}),i.Gradient=i.invent({create:function(t){this.constructor.call(this,i.create(t+"Gradient")),this.type=t},inherit:i.Container,extend:{at:function(t,e,s){return this.put(new i.Stop).update(t,e,s)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,s){return"transform"==t&&(t="gradientTransform"),i.Container.prototype.attr.call(this,t,e,s)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),i.extend(i.Gradient,i.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new i.Number(t),fy:new i.Number(e)}):this.attr({x1:new i.Number(t),y1:new i.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new i.Number(t),cy:new i.Number(e)}):this.attr({x2:new i.Number(t),y2:new i.Number(e)})}}),i.extend(i.Defs,{gradient:function(t,e){return this.put(new i.Gradient(t)).update(e)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(t){return("number"==typeof t||t instanceof i.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new i.Number(t.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,s){return"transform"==t&&(t="patternTransform"),i.Container.prototype.attr.call(this,t,e,s)}},construct:{pattern:function(t,e,i){return this.defs().pattern(t,e,i)}}}),i.extend(i.Defs,{pattern:function(t,e,s){return this.put(new i.Pattern).update(s).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,i.xlink)}},construct:{use:function(t,e){return this.put(new i.Use).element(t,e)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(t,e){return this.put(new i.Rect).size(t,e)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(t){return this.put(new i.Circle).rx(new i.Number(t).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(t,e){return this.put(new i.Ellipse).size(t,e).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),i.extend(i.Circle,i.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new i.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new i.Number(t).divide(2))},size:function(t,e){var s=f(this,t,e);return this.rx(new i.Number(s.width).divide(2)).ry(new i.Number(s.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,s,n){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:s,y2:n}:new i.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var i=f(this,t,e);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(t,e,s,n){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=t?[t,e,s,n]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(t){return this.put(new i.Polyline).plot(t||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(t){return this.put(new i.Polygon).plot(t||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new i.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var i=f(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new i.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new i.Path).plot(t||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(e){if(!e)return this;var s=this,n=new t.Image;return i.on(n,"load",function(){i.off(n);var t=s.parent(i.Pattern);null!==t&&(0==s.width()&&0==s.height()&&s.size(n.width,n.height),t&&0==t.width()&&0==t.height()&&t.size(s.width(),s.height()),"function"==typeof s._loaded&&s._loaded.call(s,{width:n.width,height:n.height,ratio:n.width/n.height,url:e}))}),i.on(n,"error",function(t){i.off(n),"function"==typeof s._error&&s._error.call(s,t)}),this.attr("href",n.src=this.src=e,i.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,s){return this.put(new i.Image).load(t).size(e||0,s||e||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,s=0,n=e.length;s<n;++s)0!=s&&3!=e[s].nodeType&&1==i.adopt(e[s]).dom.newLined&&(t+="\n"),t+=e[s].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{s=0;for(var a=(t=t.split("\n")).length;s<a;s++)this.tspan(t[s]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new i.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=i.utils.map(i.utils.filterSVGElements(t.childNodes),function(t){return i.adopt(t)});return new i.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,s=0,n=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?s+=n:(this.attr("dy",n+s),s=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new i.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new i.Text).text(t)},plain:function(t){return this.put(new i.Text).plain(t)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(i.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,s=new i.Tspan;return!1===this._build&&this.clear(),e.appendChild(s.node),s.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),i=null;return e&&(i=e.plot(t)),null==t?i:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function h(t,e,s,n){return s+n.replace(i.regex.dots," .")}function c(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function d(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function f(t,e,i){if(null==e||null==i){var s=t.bbox();null==e?e=s.width/s.height*i:null==i&&(i=s.height/s.width*e)}return{width:e,height:i}}function g(t,e,i){return{x:e*t.a+i*t.c+0,y:e*t.b+i*t.d+0}}function p(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function _(e){for(var s=e.childNodes.length-1;s>=0;s--)e.childNodes[s]instanceof t.SVGElement&&_(e.childNodes[s]);return i.adopt(e).id(i.eid(e.nodeName))}function v(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach(function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||i.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var s=l[t].length-1;s>=0;s--)null!=e[l[t][s]]&&this.attr(l.prefix(t,l[t][s]),e[l[t][s]]);return this},i.extend(i.Element,i.FX,e)}),i.extend(i.Element,i.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new i.Number(t).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(t){return this.y(new i.Number(t).plus(this instanceof i.FX?0:this.y()),!0)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),i.Set=i.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,i=t.length;e<i;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;e<i;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new i.Set(t)}}}),i.FX.Set=i.invent({create:function(t){this.set=t}}),i.Set.inherit=function(){var t=[];for(var e in i.Shape.prototype)"function"==typeof i.Shape.prototype[e]&&"function"!=typeof i.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){i.Set.prototype[t]=function(){for(var e=0,s=this.members.length;e<s;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new i.FX.Set(this)):this}}),t=[],i.FX.prototype)"function"==typeof i.FX.prototype[e]&&"function"!=typeof i.FX.Set.prototype[e]&&t.push(e);t.forEach(function(t){i.FX.Set.prototype[t]=function(){for(var e=0,i=this.set.members.length;e<i;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},i.extend(i.Element,{}),i.extend(i.Element,{remember:function(t,e){if("object"===n(arguments[0]))for(var i in t)this.remember(i,t[i]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(t){var s=e.getElementById(function(t){var e=(t||"").toString().match(i.regex.reference);if(e)return e[1]}(t)||t);return i.adopt(s)},i.select=function(t,s){return new i.Set(i.utils.map((s||e).querySelectorAll(t),function(t){return i.adopt(t)}))},i.extend(i.Parent,{select:function(t){return i.select(t,this.node)}});var m="abcdef".split("");if("function"!=typeof t.CustomEvent){var b=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var s=e.createEvent("CustomEvent");return s.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),s};b.prototype=t.Event.prototype,i.CustomEvent=b}else i.CustomEvent=t.CustomEvent;return i},void 0!==(s=function(){return Pt(Mt,Mt.document)}.call(e,i,e,t))&&(t.exports=s),
/*! svg.filter.js - v2.0.2 - 2016-02-24
* https://github.com/wout/svg.filter.js
* Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,i){return this.put(new SVG.BlendEffect(t,e,i))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,i){return this.put(new SVG.CompositeEffect(t,e,i))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,i){return this.put(new SVG.DiffuseLightingEffect(t,e,i))},displacementMap:function(t,e,i,s,n){return this.put(new SVG.DisplacementMapEffect(t,e,i,s,n))},specularLighting:function(t,e,i,s){return this.put(new SVG.SpecularLightingEffect(t,e,i,s))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,i,s,n){return this.put(new SVG.TurbulenceEffect(t,e,i,s,n))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,i){return this.parent()&&this.parent().diffuseLighting(t,e,i).in(this)},displacementMap:function(t,e,i,s){return this.parent()&&this.parent().displacementMap(this,t,e,i,s)},specularLighting:function(t,e,i,s){return this.parent()&&this.parent().specularLighting(t,e,i,s).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,i,s,n){return this.parent()&&this.parent().turbulence(t,e,i,s,n).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,i){this.attr({in:t,in2:e,mode:i||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=n(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=n(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,i){this.attr({in:t,in2:e,operator:i})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,i,s,n){this.attr({in:t,in2:e,scale:i,xChannelSelector:s,yChannelSelector:n})},gaussianBlur:function(t,e){null!=t||null!=e?this.attr("stdDeviation",function(t){if(!Array.isArray(t))return t;for(var e=0,i=t.length,s=[];e<i;e++)s.push(t[e]);return s.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,i,s,n){this.attr({numOctaves:e,seed:i,stitchTiles:s,baseFrequency:t,type:n})}},i={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each(function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))})}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<t.length;i++)t[i]instanceof SVG.MergeNode?this.put(t[i]):this.put(new SVG.MergeNode(t[i]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}.bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach(function(e){this[e].attr(t.rgb)}.bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,i){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:i})},specularLighting:function(t,e,i,s){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:i,kernelUnitLength:s})}},s={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,i){this.attr({x:t,y:e,z:i})},spotLight:function(t,e,i,s,n,a){this.attr({x:t,y:e,z:i,pointsAtX:s,pointsAtY:n,pointsAtZ:a})},mergeNode:function(t){this.attr("in",t)}};function n(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function a(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[e])t(arguments[e][i],i,arguments[e])}["r","g","b","a"].forEach(function(t){s["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),a(e,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),a(i,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),a(s,function(t,e){var i=e.charAt(0).toUpperCase()+e.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function t(t,n,a,r,o,l,h){for(var c=t.slice(n,a||h),d=r.slice(o,l||h),u=0,f={pos:[0,0],start:[0,0]},g={pos:[0,0],start:[0,0]};c[u]=e.call(f,c[u]),d[u]=e.call(g,d[u]),c[u][0]!=d[u][0]||"M"==c[u][0]||"A"==c[u][0]&&(c[u][4]!=d[u][4]||c[u][5]!=d[u][5])?(Array.prototype.splice.apply(c,[u,1].concat(s.call(f,c[u]))),Array.prototype.splice.apply(d,[u,1].concat(s.call(g,d[u])))):(c[u]=i.call(f,c[u]),d[u]=i.call(g,d[u])),++u!=c.length||u!=d.length;)u==c.length&&c.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]),u==d.length&&d.push(["C",g.pos[0],g.pos[1],g.pos[0],g.pos[1],g.pos[0],g.pos[1]]);return{start:c,dest:d}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function i(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function s(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":t=(e=function(t,e){var i,s,n,a,r,o,l,h,c,d,u,f,g,p,_,v,m,b,x,y,w,S,k,C,A,I,E=Math.abs(e[1]),T=Math.abs(e[2]),M=e[3]%360,P=e[4],L=e[5],z=e[6],N=e[7],$=new SVG.Point(t),D=new SVG.Point(z,N),H=[];if(0===E||0===T||$.x===D.x&&$.y===D.y)return[["C",$.x,$.y,D.x,D.y,D.x,D.y]];for((s=(i=new SVG.Point(($.x-D.x)/2,($.y-D.y)/2).transform((new SVG.Matrix).rotate(M))).x*i.x/(E*E)+i.y*i.y/(T*T))>1&&(E*=s=Math.sqrt(s),T*=s),n=(new SVG.Matrix).rotate(M).scale(1/E,1/T).rotate(-M),$=$.transform(n),o=(a=[(D=D.transform(n)).x-$.x,D.y-$.y])[0]*a[0]+a[1]*a[1],r=Math.sqrt(o),a[0]/=r,a[1]/=r,l=o<4?Math.sqrt(1-o/4):0,P===L&&(l*=-1),h=new SVG.Point((D.x+$.x)/2+l*-a[1],(D.y+$.y)/2+l*a[0]),c=new SVG.Point($.x-h.x,$.y-h.y),d=new SVG.Point(D.x-h.x,D.y-h.y),u=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(u*=-1),f=Math.acos(d.x/Math.sqrt(d.x*d.x+d.y*d.y)),d.y<0&&(f*=-1),L&&u>f&&(f+=2*Math.PI),!L&&u<f&&(f-=2*Math.PI),v=[],m=u,g=(f-u)/(p=Math.ceil(2*Math.abs(u-f)/Math.PI)),_=4*Math.tan(g/4)/3,w=0;w<=p;w++)x=Math.cos(m),b=Math.sin(m),y=new SVG.Point(h.x+x,h.y+b),v[w]=[new SVG.Point(y.x+_*b,y.y-_*x),y,new SVG.Point(y.x-_*b,y.y+_*x)],m+=g;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),n=(new SVG.Matrix).rotate(M).scale(E,T).rotate(-M),w=0,S=v.length;w<S;w++)v[w][0]=v[w][0].transform(n),v[w][1]=v[w][1].transform(n),v[w][2]=v[w][2].transform(n);for(w=1,S=v.length;w<S;w++)k=(y=v[w-1][2]).x,C=y.y,A=(y=v[w][0]).x,I=y.y,z=(y=v[w][1]).x,N=y.y,H.push(["C",k,C,A,I,z,N]);return H}(this.pos,t))[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function n(t,e){if(!1===e)return!1;for(var i=e,s=t.length;i<s;++i)if("M"==t[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var i=this.value,s=this.parse(e),a=0,r=0,o=!1,l=!1;!1!==a||!1!==r;){var h;o=n(i,!1!==a&&a+1),l=n(s,!1!==r&&r+1),!1===a&&(a=0==(h=new SVG.PathArray(c.start).bbox()).height||0==h.width?i.push(i[0])-1:i.push(["M",h.x+h.width/2,h.y+h.height/2])-1),!1===r&&(r=0==(h=new SVG.PathArray(c.dest).bbox()).height||0==h.width?s.push(s[0])-1:s.push(["M",h.x+h.width/2,h.y+h.height/2])-1);var c=t(i,a,o,s,r,l);i=i.slice(0,a).concat(c.start,!1===o?[]:i.slice(o)),s=s.slice(0,r).concat(c.dest,!1===l?[]:s.slice(l)),a=!1!==o&&a+c.start.length,r=!1!==l&&r+c.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=s,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
* https://github.com/svgdotjs/svg.draggable.js
* Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var i=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",function(t){i.start(t)}),this.el.on("touchstart.drag",function(t){i.start(t)})},t.prototype.transformPoint=function(t,e){var i=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=i.clientX-(e||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,s=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(t,i),box:s,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(t){e.drag(t)}),SVG.on(window,"touchmove.drag",function(t){e.drag(t)}),SVG.on(window,"mouseup.drag",function(t){e.end(t)}),SVG.on(window,"touchend.drag",function(t){e.end(t)}),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),i=this.transformPoint(t),s=this.startPoints.box.x+i.x-this.startPoints.point.x,n=this.startPoints.box.y+i.y-this.startPoints.point.y,a=this.constraint,r=i.x-this.startPoints.point.x,o=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof a){var l=a.call(this.el,s,n,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(s):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(n):!1!==l.y&&this.el.y(l.y)}else"object"==typeof a&&(null!=a.minX&&s<a.minX?r=(s=a.minX)-this.startPoints.box.x:null!=a.maxX&&s>a.maxX-e.width&&(r=(s=a.maxX-e.width)-this.startPoints.box.x),null!=a.minY&&n<a.minY?o=(n=a.minY)-this.startPoints.box.y:null!=a.maxY&&n>a.maxY-e.height&&(o=(n=a.maxY-e.height)-this.startPoints.box.y),null!=a.snapToGrid&&(s-=s%a.snapToGrid,n-=n%a.snapToGrid,r-=r%a.snapToGrid,o-=o%a.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:r,y:o},!0):this.el.move(s,n));return i},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,i){"function"!=typeof e&&"object"!=typeof e||(i=e,e=!0);var s=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?s.init(i||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,i){var s="string"!=typeof t?t:e[t];return i?s/2:s},this.pointCoords=function(t,e){var i=this.pointsList[t];return{x:this.pointCoord(i[0],e,"t"===t||"b"===t),y:this.pointCoord(i[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var i=this.el.bbox();this.options={};var s=this.el.selectize.defaults.points;for(var n in this.el.selectize.defaults)this.options[n]=this.el.selectize.defaults[n],void 0!==e[n]&&(this.options[n]=e[n]);var a=["points","pointsExclude"];for(var n in a){var r=this.options[a[n]];"string"==typeof r?r=r.length>0?r.split(/\s*,\s*/i):[]:"boolean"==typeof r&&"points"===a[n]&&(r=r?s:[]),this.options[a[n]]=r}this.options.points=[s,this.options.points].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(t,e){return t.filter(function(t){return e.indexOf(t)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map(function(e){return[e[0]-t.x,e[1]-t.y]})},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),i=0,s=e.length;i<s;++i){var n=function(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var s=i.pageX||i.touches[0].pageX,n=i.pageY||i.touches[0].pageY;t.el.fire("point",{x:s,y:n,i:e,event:i})}}(i),a=this.drawPoint(e[i][0],e[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",n).on("mousedown",n);this.pointSelection.set.add(a)}},t.prototype.drawPoint=function(t,e){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof i)return i.call(this,t,e);throw new Error("Unknown "+i+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each(function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])})},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map(function(i,s){var n=t.pointCoords(i,e);t.rectSelection.set.get(s+1).center(n.x,n.y)}),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){var e=this,i=this.el.bbox();function s(t){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var s=i.pageX||i.touches[0].pageX,n=i.pageY||i.touches[0].pageY;e.el.fire(t,{x:s,y:n,event:i})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(t,n){var a=e.pointCoords(t,i),r=e.drawPoint(a.x,a.y).attr("class",e.options.classPoints+"_"+t).on("mousedown",s(t)).on("touchstart",s(t));e.rectSelection.set.add(r)}),this.rectSelection.set.each(function(){this.addClass(e.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var n=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var i=t.pageX||t.touches[0].pageX,s=t.pageY||t.touches[0].pageY;e.el.fire("rot",{x:i,y:s,event:t})},a=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",n).on("mousedown",n);this.rectSelection.set.add(a)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){t.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){t.handler()})},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,i){return"object"==typeof e&&(i=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,i){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==t[i]&&(this.options[i]=t[i]);this.el.on("lt.resize",function(t){e.resize(t||window.event)}),this.el.on("rt.resize",function(t){e.resize(t||window.event)}),this.el.on("rb.resize",function(t){e.resize(t||window.event)}),this.el.on("lb.resize",function(t){e.resize(t||window.event)}),this.el.on("t.resize",function(t){e.resize(t||window.event)}),this.el.on("r.resize",function(t){e.resize(t||window.event)}),this.el.on("b.resize",function(t){e.resize(t||window.event)}),this.el.on("l.resize",function(t){e.resize(t||window.event)}),this.el.on("rot.resize",function(t){e.resize(t||window.event)}),this.el.on("point.resize",function(t){e.resize(t||window.event)}),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var s=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[s[t.detail.i][0],s[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var i=this.snapToGrid(t,e);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(t,e){var i=this.snapToGrid(t,e,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(t,e){var i=this.snapToGrid(t,e,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(t,e){var i=this.snapToGrid(t,e,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(t,e){var i=t+this.parameters.p.x,s=e+this.parameters.p.y,n=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),a=Math.atan2(s-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),r=this.parameters.rotation+180*(a-n)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(r-r%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var i=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),s=this.el.array().valueOf();s[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],s[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(s)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"touchend.resize",function(){e.done()}),SVG.on(window,"mousemove.resize",function(t){e.update(t||window.event)}),SVG.on(window,"mouseup.resize",function(){e.done()})},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),i=this.transformPoint(e.x,e.y),s=i.x-this.parameters.p.x,n=i.y-this.parameters.p.y;this.lastUpdateCall=[s,n],this.calc(s,n),this.el.fire("resizing",{dx:s,dy:n,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,i,s){var n;return void 0!==s?n=[(i+t)%this.options.snapToGrid,(s+e)%this.options.snapToGrid]:(i=null==i?3:i,n=[(this.parameters.box.x+t+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),t<0&&(n[0]-=this.options.snapToGrid),e<0&&(n[1]-=this.options.snapToGrid),t-=Math.abs(n[0])<this.options.snapToGrid/2?n[0]:n[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(n[1])<this.options.snapToGrid/2?n[1]:n[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,i,s)},t.prototype.constraintToBox=function(t,e,i,s){var n,a,r=this.options.constraint||{};return void 0!==s?(n=i,a=s):(n=this.parameters.box.x+(1&i?0:this.parameters.box.width),a=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==r.minX&&n+t<r.minX&&(t=r.minX-n),void 0!==r.maxX&&n+t>r.maxX&&(t=r.maxX-n),void 0!==r.minY&&a+e<r.minY&&(e=r.minY-a),void 0!==r.maxY&&a+e>r.maxY&&(e=r.maxY-a),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var i=t.slice(),s=this.parameters.box.width/this.parameters.box.height,n=this.parameters.box.width+t[0],a=this.parameters.box.height-t[1],r=n/a;return r<s?(i[1]=n/s-this.parameters.box.height,e&&(i[1]=-i[1])):r>s&&(i[0]=this.parameters.box.width-a*s,e&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),function(t,e){void 0===e&&(e={});var i=e.insertAt;if("undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}('.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-text-z-label:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-marker {\n  min-width: 12px;\n  min-height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}'),function(){function t(t){var e=t.__resizeTriggers__,i=e.firstElementChild,s=e.lastElementChild,n=i?i.firstElementChild:null;s&&(s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight),n&&(n.style.width=i.offsetWidth+1+"px",n.style.height=i.offsetHeight+1+"px"),i&&(i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight)}function e(e){var i=this;t(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=n(function(){(function(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height})(i)&&(i.__resizeLast__.width=i.offsetWidth,i.__resizeLast__.height=i.offsetHeight,i.__resizeListeners__.forEach(function(t){t.call(e)}))})}var i,s,n=(i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return i(t)}),a=(s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(t){return s(t)}),r=!1,o="animationstart",l="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),c=document.createElement("fakeelement");if(void 0!==c.style.animationName&&(r=!0),!1===r)for(var d=0;d<l.length;d++)if(void 0!==c.style[l[d]+"AnimationName"]){o=h[d];break}window.addResizeListener=function(i,s){i.__resizeTriggers__||("static"==getComputedStyle(i).position&&(i.style.position="relative"),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),t(i),i.addEventListener("scroll",e,!0),o&&i.__resizeTriggers__.addEventListener(o,function(e){"resizeanim"==e.animationName&&t(i)})),i.__resizeListeners__.push(s)},window.removeResizeListener=function(t,i){t&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(i),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",e),t.__resizeTriggers__.parentNode&&(t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__))))}}(),void 0===window.Apex&&(window.Apex={});var Dt=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","touchstart","touchmove","mouseup","touchend"],this.ctx.animations=new v(this.ctx),this.ctx.axes=new Q(this.ctx),this.ctx.core=new Nt(this.ctx.el,this.ctx),this.ctx.config=new R({}),this.ctx.data=new B(this.ctx),this.ctx.grid=new U(this.ctx),this.ctx.graphics=new b(this.ctx),this.ctx.coreUtils=new w(this.ctx),this.ctx.crosshairs=new tt(this.ctx),this.ctx.events=new Z(this.ctx),this.ctx.exports=new W(this.ctx),this.ctx.localization=new J(this.ctx),this.ctx.options=new A,this.ctx.responsive=new et(this.ctx),this.ctx.series=new z(this.ctx),this.ctx.theme=new it(this.ctx),this.ctx.formatters=new V(this.ctx),this.ctx.titleSubtitle=new st(this.ctx),this.ctx.legend=new ct(this.ctx),this.ctx.toolbar=new dt(this.ctx),this.ctx.dimensions=new lt(this.ctx),this.ctx.updateHelpers=new $t(this.ctx),this.ctx.zoomPanSelection=new ut(this.ctx),this.ctx.w.globals.tooltip=new bt(this.ctx)}}]),t}(),Ht=function(){function t(e){a(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each(function(t,e){this.removeClass("*"),this.off(),this.stop()},!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,i=t.isUpdating,s=this.w.globals.dom.Paper.node;s.parentNode&&s.parentNode.parentNode&&!i&&(s.parentNode.parentNode.style.minHeight="unset");var n=this.w.globals.dom.baseEl;n&&this.ctx.eventList.forEach(function(t){n.removeEventListener(t,e.ctx.events.documentEvent)});var a=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(a.Paper),a.Paper.remove(),a.elWrap=null,a.elGraphical=null,a.elAnnotations=null,a.elLegendWrap=null,a.baseEl=null,a.elGridRect=null,a.elGridRectMask=null,a.elGridRectMarkerMask=null,a.elDefs=null}}]),t}(),Ft=function(){function t(e,i){a(this,t),this.opts=i,this.ctx=this,this.w=new O(i).init(),this.el=e,this.w.globals.cuid=_.randomId(),this.w.globals.chartID=this.w.config.chart.id?_.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Dt(this).initModules(),this.create=_.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return o(t,[{key:"render",value:function(){var t=this;return new Promise(function(e,i){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var s=t.w.config.chart.events.beforeMount;"function"==typeof s&&s(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),window.addResizeListener(t.el.parentNode,t.parentResizeHandler);var n=t.create(t.w.config.series,{});if(!n)return e(t);t.mount(n).then(function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(n)}).catch(function(t){i(t)})}else i(new Error("Element not found"))})}},{key:"create",value:function(t,e){var i=this.w;new Dt(this).initModules();var s=this.w.globals;if(s.noData=!1,s.animationEnded=!1,this.responsive.checkResponsiveConfig(e),i.config.xaxis.convertedCatToNumeric&&new F(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return s.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===s.svgWidth)return s.animationEnded=!0,null;var n=w.checkComboSeries(t);s.comboCharts=n.comboCharts,s.comboBarCount=n.comboBarCount;var a=t.every(function(t){return t.data&&0===t.data.length});(0===t.length||a)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new T(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),s.noData&&s.collapsedSeries.length!==s.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),s.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),this.dimensions.plotCoords();var r=this.core.xySettings();this.grid.createGridMask();var o=this.core.plotChartType(t,r),l=new P(this);l.bringForward(),i.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var h={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:o,xyRatios:r,elInner:i.globals.dom.elGraphical,dimensions:h}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,s=i.w;return new Promise(function(n,a){if(null===i.el)return a(new Error("Not enough data to display or target element not found"));(null===e||s.globals.allSeriesCollapsed)&&i.series.handleNoData(),"treemap"!==s.config.chart.type&&i.axes.drawAxis(s.config.chart.type,e.xyRatios),i.grid=new U(i);var r=i.grid.drawGrid();i.annotations=new I(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===s.config.grid.position&&r&&s.globals.dom.elGraphical.add(r.el);var o=new X(t.ctx),l=new K(t.ctx);if(null!==r&&(o.xAxisLabelCorrections(r.xAxisTickWidth),l.setYAxisTextAlignments(),s.config.yaxis.map(function(t,e){-1===s.globals.ignoreYAxisIndexes.indexOf(e)&&l.yAxisTitleRotate(e,t.opposite)})),"back"===s.config.annotations.position&&(s.globals.dom.Paper.add(s.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),Array.isArray(e.elGraph))for(var h=0;h<e.elGraph.length;h++)s.globals.dom.elGraphical.add(e.elGraph[h]);else s.globals.dom.elGraphical.add(e.elGraph);if("front"===s.config.grid.position&&r&&s.globals.dom.elGraphical.add(r.el),"front"===s.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===s.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===s.config.annotations.position&&(s.globals.dom.Paper.add(s.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!s.globals.noData){if(s.config.tooltip.enabled&&!s.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),s.globals.axisCharts&&(s.globals.isXNumeric||s.config.xaxis.convertedCatToNumeric||s.globals.isTimelineBar))(s.config.chart.zoom.enabled||s.config.chart.selection&&s.config.chart.selection.enabled||s.config.chart.pan&&s.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var c=s.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(t){c[t]=!1})}s.config.chart.toolbar.show&&!s.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}s.globals.memory.methodsToExec.length>0&&s.globals.memory.methodsToExec.forEach(function(t){t.method(t.params,!1,t.context)}),s.globals.axisCharts||s.globals.noData||i.core.resizeNonAxisCharts(),n(i)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),window.removeResizeListener(this.el.parentNode,this.parentResizeHandler);var t=this.w.config.chart.id;t&&Apex._chartInstances.forEach(function(e,i){e.id===_.escapeString(t)&&Apex._chartInstances.splice(i,1)}),new Ht(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.w;return r.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(t,i){return e.updateHelpers._extendSeries(t,i)})),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),r.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,s,n,a)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.w.config.series.slice();return s.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(s,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var s=i.w.config.series.slice(),n=0;n<s.length;n++)if(null!==t[n]&&void 0!==t[n])for(var a=0;a<t[n].data.length;a++)s[n].data.push(t[n].data[a]);return i.w.config.series=s,e&&(i.w.globals.initialSeries=_.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise(function(i,s){new Ht(e.ctx).clear({isUpdating:!0});var n=e.create(e.w.config.series,t);if(!n)return i(e);e.mount(n).then(function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)}).catch(function(t){s(t)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach(function(t){e.push(t)})),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter(function(t){if(t.group)return!0}).map(function(e){return t.w.config.chart.group===e.group?e.chart:t})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addXaxisAnnotationExternal(t,e,s)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addYaxisAnnotationExternal(t,e,s)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this;i&&(s=i),s.annotations.addPointAnnotationExternal(t,e,s)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new q(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new q(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(){return new W(this.ctx).dataURI()}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=_.escapeString(t),i=Apex._chartInstances.filter(function(t){return t.id===e})[0];return i&&i.chart}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new t(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var s=null;if(-1!==i.publicMethods.indexOf(e)){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];s=i[e].apply(i,a)}return s}}},{key:"merge",value:function(t,e){return _.extend(t,e)}}]),t}();t.exports=Ft},function(t,e,i){var s={"./analyse":34,"./analyse.ts":34,"./analyseEditors/renameEditor":20,"./analyseEditors/renameEditor.ts":20,"./analyseEditors/sendEditor":18,"./analyseEditors/sendEditor.ts":18,"./auth":26,"./auth.ts":26,"./contract":25,"./contract.ts":25,"./editors":24,"./editors.ts":24,"./mainPage":23,"./mainPage.ts":23,"./top":22,"./top.ts":22};function n(t){var e=a(t);return i(e)}function a(t){var e=s[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=60},function(t,e,i){"use strict";var s=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&a(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var l=i(1);i(36);var h=o(i(8)),c=i(9),d=function(t){function e(e){void 0===e&&(e={});var i={id:"webix-jet-app",version:"1.1.0",debug:!1,start:"/top/mainPage",views:function(t){console.log(t);var e=c.getCookie("rights");if(e){var i=JSON.parse(e,c.reviver);i&&i.get(t)}},webix:h};return t.call(this,n(n({},i),e))||this}return s(e,t),e}(l.JetApp);e.default=d,h.ready(function(){return(new d).render()})}]);